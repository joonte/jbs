<?php


#-------------------------------------------------------------------------------
Header('Content-type: text/plain; charset=utf-8');
#-------------------------------------------------------------------------------
echo Date('r');
echo "\n";
#-------------------------------------------------------------------------------
$Files = IO_Files(SPrintF('%s/hosts',SYSTEM_PATH));
if(Is_Error($Files))
  return ERROR | @Trigger_Error(500);
#-------------------------------------------------------------------------------
Define('PATTERN',"/gException\([\'\"]([a-zA-Z0-9_]+)[\'\"]\,[\'\"](.+)[\'\"]\)/");
#-------------------------------------------------------------------------------
$Exceptions = Array();
#-------------------------------------------------------------------------------
foreach($Files as $File){
  #-----------------------------------------------------------------------------
  if(!Preg_Match('/\.comp\.php/',$File))
    continue;
  #-----------------------------------------------------------------------------
  $Sourse = IO_Read($File);
  if(Is_Error($Sourse))
    return ERROR | @Trigger_Error(500);
  #-----------------------------------------------------------------------------
  if(Preg_Match_All(PATTERN,$Sourse,$Array)){
    #---------------------------------------------------------------------------
    # echo SPrintF("\n%s\n\n",$File);
    #---------------------------------------------------------------------------
    $CodesIDs = Next($Array);
    $Strings  = Next($Array);
    #---------------------------------------------------------------------------
    for($i=0;$i<Count($CodesIDs);$i++)
      $Exceptions[$CodesIDs[$i]] = $Strings[$i];
  };
}
#-------------------------------------------------------------------------------
Asort($Exceptions);
#-------------------------------------------------------------------------------
foreach($Exceptions as $ExceptionID=>$String)
  echo SPrintF("%s = %s\n",$ExceptionID,$String);
#-------------------------------------------------------------------------------


?>
