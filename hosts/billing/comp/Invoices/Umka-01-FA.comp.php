<?php

#-------------------------------------------------------------------------------
/** @author Alex Keda, for www.host-food.ru */
/******************************************************************************/
/******************************************************************************/
$__args_list = Array('Settings','Invoice','Number','InvoicesItems');
/******************************************************************************/
Eval(COMP_INIT);
/******************************************************************************/
/******************************************************************************/
if(Is_Error(System_Load('libs/HTTP.php','libs/UMKA.php')))
	return ERROR | @Trigger_Error(500);
#-------------------------------------------------------------------------------
#-------------------------------------------------------------------------------
$Umka = new umkaApiModel($Settings['Cpp'],$Settings['Login'],$Settings['Password'],$Settings['TaxationSystem']);
#-------------------------------------------------------------------------------
// инициализируем кассу
$Init = $Umka->init();
#-------------------------------------------------------------------------------
// если не удалось инициализровать кассу - ошибка
if(!$Init)
	return ERROR | @Trigger_Error('[comp/Invoices/Umka-01-FA]: не удалось инициализровать ККМ');
#-------------------------------------------------------------------------------
#-------------------------------------------------------------------------------
// чек
$Result = $Umka->fiscalCheck($Invoice,$InvoicesItems);
#-------------------------------------------------------------------------------
if($Result){
	#-------------------------------------------------------------------------------
	return TRUE;
	#-------------------------------------------------------------------------------
}else{
	#-------------------------------------------------------------------------------
	return FALSE;
	#-------------------------------------------------------------------------------
}
#-------------------------------------------------------------------------------
#-------------------------------------------------------------------------------
?>
