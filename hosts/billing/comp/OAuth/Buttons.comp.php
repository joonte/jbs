<?php

#-------------------------------------------------------------------------------
/** @author Alex Keda, for www.host-food.ru */
/******************************************************************************/
/******************************************************************************/
$__args_list = Array('JS');
/******************************************************************************/
Eval(COMP_INIT);
/******************************************************************************/
/******************************************************************************/
$Config = Config();
#-------------------------------------------------------------------------------
#-------------------------------------------------------------------------------
// DIV с кнопками внешней авторизации
$Div = new Tag('DIV',Array('class'=>'SocialLoginIcons'));
#-------------------------------------------------------------------------------
// варианты внешней авторизации
$OAuth = $Config['Interface']['User']['OAuth'];
#-------------------------------------------------------------------------------
foreach(Array_Keys($OAuth) as $Key){
	#-------------------------------------------------------------------------------
	if(!$OAuth[$Key]['IsActive'])
		continue;
	#-------------------------------------------------------------------------------
	// URL возврата
	$RedirectURI = SPrintF('%s://%s/OAuth/%s',URL_SCHEME,HOST_ID,$Key);
	// ссылка/кнопка
	$A = new Tag('A',Array('onmouseover'=>SPrintF("PromptShow(event,'%s',this);",$OAuth[$Key]['Prompt']),'class'=>SPrintF('Social%s',$Key),'OnClick'=>SPrintF("JavaScript:window.open('%s','OAuth_window').focus();%s;",SPrintF($OAuth[$Key]['OauthURL'],$OAuth[$Key]['ClientID'],$RedirectURI),$JS),'target'=>'_blank'),new Tag('I',Array('class'=>SPrintF('Social_%s',$Key)),' '));
	#-------------------------------------------------------------------------------
	// добавляем в список
	$Div->AddChild($A);
	#-------------------------------------------------------------------------------
}
#-------------------------------------------------------------------------------
#-------------------------------------------------------------------------------
return $Div;
#-------------------------------------------------------------------------------
#-------------------------------------------------------------------------------
?>
