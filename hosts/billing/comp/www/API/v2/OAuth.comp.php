<?php

#-------------------------------------------------------------------------------
/** @author Alex Keda, for www.host-food.ru */
/******************************************************************************/
/******************************************************************************/
$__args_list = Array('Args');
/******************************************************************************/
Eval(COMP_INIT);
/******************************************************************************/
/******************************************************************************/
$Args = IsSet($Args)?$Args:Args();
#-------------------------------------------------------------------------------
#-------------------------------------------------------------------------------
$Out = Array();
#-------------------------------------------------------------------------------
#-------------------------------------------------------------------------------
$Config = Config();
#-------------------------------------------------------------------------------
#-------------------------------------------------------------------------------
// варианты внешней авторизации
$OAuth = $Config['Interface']['User']['OAuth'];
#-------------------------------------------------------------------------------
foreach(Array_Keys($OAuth) as $Key){
	#-------------------------------------------------------------------------------
	if(!$OAuth[$Key]['IsActive'])
		continue;
	#-------------------------------------------------------------------------------
	// могут жеж включить и настроек не внести
	if(!$OAuth[$Key]['ClientID'] || !$OAuth[$Key]['ClientSecret'])
		continue;
	#-------------------------------------------------------------------------------
	$Out[$Key] = Array();
	#-------------------------------------------------------------------------------
	// подсказка
	$Out[$Key]['Prompt'] = $OAuth[$Key]['Prompt'];
	#-------------------------------------------------------------------------------
	$RedirectURI = SPrintF('%s://%s/OAuth/%s',URL_SCHEME,HOST_ID,$Key);
	$Out[$Key]['OauthURL'] = SPrintF($OAuth[$Key]['OauthURL'],$OAuth[$Key]['ClientID'],$RedirectURI);
	#-------------------------------------------------------------------------------
}
#-------------------------------------------------------------------------------
#-------------------------------------------------------------------------------
return $Out;
#-------------------------------------------------------------------------------
#-------------------------------------------------------------------------------
?>
