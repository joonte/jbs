<?php


#-------------------------------------------------------------------------------
/** @author Великодный В.В. (Joonte Ltd.) */
/******************************************************************************/
/******************************************************************************/
$__args_list = Array('LinkID','DataModeID');
/******************************************************************************/
/******************************************************************************/
/******************************************************************************/
Eval(COMP_INIT);
/******************************************************************************/
/******************************************************************************/
$Links = &Links();
# Коллекция ссылок
$Template = &$Links[$LinkID];
/******************************************************************************/
/******************************************************************************/
$NoBody = new Tag('NOBODY');
#-------------------------------------------------------------------------------
if($Template['Appearance']['IsDataMode']){
  #-----------------------------------------------------------------------------
  $Session = &$Template['Session'];
  #-----------------------------------------------------------------------------
  if(IsSet($Session['DataModeID']))
    $DataModeID = $Session['DataModeID'];
  #-----------------------------------------------------------------------------
  $Args = Args();
  #-----------------------------------------------------------------------------
  if(IsSet($Args['DataModeID']))
    $DataModeID = $Args['DataModeID'];
  #-----------------------------------------------------------------------------
  $Session['DataModeID'] = $DataModeID;
  #-----------------------------------------------------------------------------
  $Button1 = new Tag('BUTTON',Array('class'=>'Standard','title'=>'Сбросить параметры','onclick'=>'TableSuperFlush();'),new Tag('IMG',Array('width'=>16,'height'=>16,'src'=>'SRC:{Images/Icons/Flush.gif}')));
  #-----------------------------------------------------------------------------
  $NoBody->AddChild(new Tag('NOBODY',new Tag('TABLE',Array('style'=>'margin-top:5px;','cellspacing'=>0),new Tag('TR',new Tag('TD',$Button1),new Tag('TD','Сбросить параметры')))));
}
#-------------------------------------------------------------------------------
$Comp = Comp_Load(SPrintF('Tables/Forms/%s',$DataModeID),$LinkID);
if(Is_Error($Comp))
  return ERROR | @Trigger_Error(500);
#-------------------------------------------------------------------------------
$NoBody->AddChild($Comp);
#-------------------------------------------------------------------------------
$Comp = Comp_Load(
  'Form/Input',
  Array(
    'name'  => 'DataModeID',
    'type'  => 'hidden',
    'value' => $DataModeID
  )
);
if(Is_Error($Comp))
  return ERROR | @Trigger_Error(500);
#-------------------------------------------------------------------------------
$NoBody->AddChild($Comp);
#-------------------------------------------------------------------------------
return $NoBody;
#-------------------------------------------------------------------------------

?>
