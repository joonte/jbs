import{o as a,c as n,b as r,a as e,t as p,F as z,l as G,p as J,m as Q,_ as X,f as Y,e as $,U as oo,r as eo,i as to,P as so,h as y}from"./index-777dc609.js";import{u as ao}from"./domain-1aa48ddc.js";import{u as no}from"./IconArrow-1d7911e1.js";import{s as io}from"./multiselect-146af8a5.js";import{B as H}from"./BlockBalanceAgreement-d9b1b07a.js";import{E as co}from"./EmptyStateBlock-1f3845f9.js";import{_ as lo}from"./ButtonDefault-7f62b822.js";import{_ as ro}from"./ClausesKeeper-4fcca336.js";import"./bootstrap-vue-next.es-8d4e1458.js";import"./IconClose-166e70a9.js";const m=s=>(J("data-v-dc8c0244"),s=s(),Q(),s),mo={key:0,class:"domain-scheme"},_o={class:"section"},ho={class:"container"},go={class:"section-header"},Do={key:0,class:"section-title"},fo={key:1,class:"section-title"},uo={key:2,class:"section-title"},vo={class:"section-label"},po={class:"section"},yo={class:"container"},So={class:"domain-prolong__data"},bo={key:0,class:"form-field"},ko=m(()=>e("div",{class:"form-field__label"},"Стоимость заказа (в год)",-1)),Co=["value"],Fo={class:"form-field"},Io=m(()=>e("div",{class:"form-field__label"},"Стоимость продления (в год)",-1)),Po=["value"],Bo=m(()=>e("label",{class:"form-field"},[e("div",{class:"form-field__label"},"Количество лет"),e("input",{type:"text",placeholder:"1",value:"1",disabled:""})],-1)),xo={key:1,class:"form-field__msg"},Ao={class:"form-field"},Oo=m(()=>e("div",{class:"form-field__label"},"Всего к оплате",-1)),Eo=["value"],wo={class:"section"},Lo={class:"container"},No={class:"domain-prolong__data"},To={class:"total-block"},Ko={class:"total-block__row total-block__row--big"},Mo=m(()=>e("div",{class:"total-block__col"},"Итого за 1 год",-1)),Ro={class:"total-block__col"},Uo={key:1,class:"section"},Vo={class:"container"},jo={key:1,class:"section"},Wo={class:"container"};function Zo(s,c,S,o,_,u){var t,l,f,d,v,b,k,C,F,I,P,B,x,A,O,E,w,L,N,T,K,M,R,U,V,j,W,Z,q;const h=H,i=ro,g=lo,D=co;return a(),n(z,null,[r(h),o.getDomain?(a(),n("div",mo,[e("div",_o,[e("div",ho,[e("div",go,[o.getDomain.StatusID==="Waiting"?(a(),n("h1",Do,"Оплата заказа доменного имени")):o.getDomain.StatusID==="ForTransfer"?(a(),n("h1",fo,"Оплата переноса домена")):(a(),n("h1",uo,"Оплата продления доменного имени")),e("div",vo,p((t=o.getDomain)!=null&&t.DomainName?`#${(l=o.getDomain)==null?void 0:l.DomainName}.${(f=o.getDomain)==null?void 0:f.DomainZone}`:""),1)]),r(i)])]),(d=o.getDomainSchemes)!=null&&d.IsPayed&&((v=o.getDomainSchemes)!=null&&v.IsProlong)||!((b=o.getDomainSchemes)!=null&&b.IsPayed)?(a(),n(z,{key:0},[e("div",po,[e("div",yo,[e("div",So,[o.getDomain.StatusID==="Waiting"||o.getDomain.StatusID==="ForTransfer"?(a(),n("label",bo,[ko,e("input",{type:"text",placeholder:"0 руб",value:((k=o.getDomainSchemes)==null?void 0:k.CostOrder)+" руб",disabled:""},null,8,Co)])):G("",!0),e("label",Fo,[Io,e("input",{type:"text",placeholder:"0 руб",value:((C=o.getDomainSchemes)==null?void 0:C.CostProlong)+" руб",disabled:""},null,8,Po)]),Bo,(F=o.getDomain)!=null&&F.AdditionalCost?(a(),n("div",xo,[e("p",null,p((I=o.getDomain)==null?void 0:I.AdditionalCost.Message),1)])):G("",!0),e("label",Ao,[Oo,e("input",{type:"text",placeholder:"0 руб",value:o.getDomain.IsPayed?(parseFloat((A=o.getDomainSchemes)==null?void 0:A.CostProlong)+parseFloat(((E=(O=o.getDomain)==null?void 0:O.AdditionalCost)==null?void 0:E.Summ)||0)).toFixed(2)+" руб":(parseFloat((P=o.getDomainSchemes)==null?void 0:P.CostOrder)+parseFloat(((x=(B=o.getDomain)==null?void 0:B.AdditionalCost)==null?void 0:x.Summ)||0)).toFixed(2)+" руб",disabled:""},null,8,Eo)])])])]),e("div",wo,[e("div",Lo,[e("div",No,[e("div",To,[e("div",Ko,[Mo,e("div",Ro,p(o.getDomain.IsPayed?(parseFloat((T=o.getDomainSchemes)==null?void 0:T.CostProlong)+parseFloat(((M=(K=o.getDomain)==null?void 0:K.AdditionalCost)==null?void 0:M.Summ)||0)).toFixed(2)||"0.00":(parseFloat((w=o.getDomainSchemes)==null?void 0:w.CostOrder)+parseFloat(((N=(L=o.getDomain)==null?void 0:L.AdditionalCost)==null?void 0:N.Summ)||0)).toFixed(2))+" ₽",1)])]),r(g,{class:"btn--wide",label:+((R=o.getContract)==null?void 0:R.Balance)>(o.getDomain.StatusID==="ClaimForRegister"?+((U=o.getDomainSchemes)==null?void 0:U.CostOrder)+parseFloat(((j=(V=o.getDomain)==null?void 0:V.AdditionalCost)==null?void 0:j.Summ)||0):+((W=o.getDomainSchemes)==null?void 0:W.CostProlong)+parseFloat(((q=(Z=o.getDomain)==null?void 0:Z.AdditionalCost)==null?void 0:q.Summ)||0))?"Оплатить c баланса договора":"Добавить в корзину",onClick:c[0]||(c[0]=zo=>o.orderPay()),"is-loading":o.isLoading},null,8,["label","is-loading"])])])])],64)):(a(),n("div",Uo,[e("div",Vo,[r(D,{class:"no-margin",label:"Заказ нельзя продлить"})])]))])):(a(),n("div",jo,[e("div",Wo,[r(D,{label:"Заказ домена не найден"})])]))],64)}const qo={components:{Multiselect:io,BlockBalanceAgreement:H},async setup(){const s=ao(),c=no(),S=Y(),o=$();oo("emitter");const _=eo(!1);function u(){var t,l;_.value=!0,s.DomainOrderPay({DomainOrderID:(t=i.value)==null?void 0:t.ID,DaysToProlong:(l=g.value)==null?void 0:l.DaysToProlong}).then(f=>{let{result:d,error:v}=f;d==="SUCCESS"?o.push("/DomainOrders"):d==="BASKET"&&o.push("/Basket"),_.value=!1})}const h=t=>{t.key==="Enter"&&t.ctrlKey&&u()};to(()=>{document.addEventListener("keyup",h)}),so(()=>{document.removeEventListener("keyup",h)});const i=y(()=>Object.keys(s==null?void 0:s.domainsList).map(t=>s==null?void 0:s.domainsList[t]).find(t=>t.OrderID===S.params.id)),g=y(()=>{var t;return s==null?void 0:s.domainSchemes[(t=i.value)==null?void 0:t.SchemeID]}),D=y(()=>{var t;return c.contractsList[(t=i.value)==null?void 0:t.ContractID]});return await s.fetchDomains(),await s.fetchDomainSchemes(),await c.fetchContracts(),{getDomain:i,getDomainSchemes:g,getContract:D,isLoading:_,orderPay:u}}},se=X(qo,[["render",Zo],["__scopeId","data-v-dc8c0244"]]);export{se as default};
