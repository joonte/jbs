import{k as F,o as b,c as w,a as r,Z as W,ab as q,b as d,t as g,d as f,F as Z,y as X,n as P,l as Y,w as m,_ as p,e as $,r as tt,j as et,U as nt,h as at}from"./index-aeb1df1e.js";import{_ as J}from"./IconDots-76437be9.js";import{_ as K}from"./IconCard-47752060.js";import{S as Q}from"./StatusBadge-ca078fa4.js";import{h as ot}from"./hostStatuses-94d00f20.js";import{_ as st}from"./HelperComponent-470cfccf.js";import"./hosting-5f2b5ff4.js";import{f as G}from"./useTimeFunction-8602dd60.js";import{f as it,z as rt,k as dt,d as lt}from"./bootstrap-vue-next.es-c6bcf011.js";import{_ as ct}from"./OrderIDBadge-3a2e7e5e.js";const mt={class:"hosting-item__row"},ut=["href"],_t={class:"hosting-domains__wrapper"},Dt={class:"hosting-domains"},ft={class:"hosting-domains__items"},gt=["innerHTML"],ht={class:"hosting-item__row"},It={class:"hosting-item__person"},vt={class:"hosting-item__row hosting-flex"},St={class:"hosting-item__list"},bt={class:"hosting-status__info"},wt={class:"hosting-status__date"},Ot={class:"hosting-item__controls"},kt={class:"btn btn--dots"};function yt(s,a,e,i,B,O){var t,n,l,h,D,u,I,S,M,U,V,j,T,E,z,A;const k=it,y=ct,H=Q,C=K,x=F("Helper"),N=J,v=F("router-link"),_=rt,R=dt,L=lt;return b(),w("div",{class:P(["hosting-item",{"hosting-item_deleted":((t=e.itemData)==null?void 0:t.StatusID)==="Deleted"}])},[r("div",mt,[W(d(k,{id:"checkbox-"+((n=e.itemData)==null?void 0:n.OrderID),modelValue:i.localSelectedRows[(l=e.itemData)==null?void 0:l.OrderID],"onUpdate:modelValue":a[0]||(a[0]=o=>{var c;return i.localSelectedRows[(c=e.itemData)==null?void 0:c.OrderID]=o}),name:"checkbox-"+((h=e.itemData)==null?void 0:h.OrderID),onChange:i.updateSelectedRows},null,8,["id","modelValue","name","onChange"]),[[q,e.isSeveral]]),d(y,{orderID:(D=e.itemData)==null?void 0:D.OrderID,onClick:a[1]||(a[1]=o=>{var c;return i.toItem((c=e.itemData)==null?void 0:c.OrderID)})},null,8,["orderID"]),r("a",{class:"hosting-item__name",href:i.fullDomainUrl,target:"_blank"},g((u=e.itemData)==null?void 0:u.Domain),9,ut),r("div",_t,[W(r("div",Dt,[f("+"+g(i.showDNSs((I=e.itemData)==null?void 0:I.Parked).count),1),r("div",ft,[r("div",{class:"hosting-domains__item",innerHTML:i.showDNSs((S=e.itemData)==null?void 0:S.Parked).html},null,8,gt)])],512),[[q,((M=e.itemData)==null?void 0:M.Parked)&&e.itemData.Parked.split(",").length>1]])])]),r("div",ht,[r("div",It,g(e.userName),1)]),r("div",vt,[r("ul",St,[(b(!0),w(Z,null,X(e.params,o=>(b(),w(Z,null,[o.text?(b(),w("li",{key:0,class:P({bold:o==null?void 0:o.bold})},g(o.text),3)):Y("",!0)],64))),256)),r("div",{class:"btn btn--md btn--bold btn-manage",onClick:a[2]||(a[2]=o=>i.orderManage())},"Управлять заказом")]),r("div",bt,[r("div",{class:P(["hosting-item__date",{danger:Number((U=e.itemData)==null?void 0:U.DaysRemainded)<14}])},g(i.calculateExpirationDate((V=e.itemData)==null?void 0:V.DaysRemainded))+" • "+g(((j=e.itemData)==null?void 0:j.DaysRemainded)||0)+" дн.",3),d(H,{class:"status-badge",status:(T=e.itemData)==null?void 0:T.StatusID,"status-table":"HostingOrders",onClick:a[3]||(a[3]=o=>{var c;return i.openHistoryStatuses((c=e.itemData)==null?void 0:c.ID)})},null,8,["status"]),r("div",wt,g(i.calculateDaysSinceStatusUpdate((E=e.itemData)==null?void 0:E.StatusDate)),1)])]),r("div",Ot,[r("div",{class:"btn btn--md btn--bold",onClick:a[4]||(a[4]=o=>{var c;return s.$router.push(`/HostingOrders/${(c=e.itemData)==null?void 0:c.OrderID}/SchemeChange`)})},"Изменить тариф"),r("div",{class:"btn btn--md btn--bold",onClick:a[5]||(a[5]=o=>{var c;return s.$router.push(`/HostingOrderPay/${(c=e.itemData)==null?void 0:c.OrderID}`)})},[d(C),f("Оплатить")]),d(x,{"user-notice":(z=e.itemData)==null?void 0:z.UserNotice,id:(A=e.itemData)==null?void 0:A.OrderID,position:e.isLast?"bottom":"top",emit:"updateHostingList"},null,8,["user-notice","id","position"]),d(L,{class:"dropdown-dots",right:""},{"button-content":m(()=>[r("div",kt,[d(N)])]),default:m(()=>[d(_,null,{default:m(()=>[d(v,{to:e.infoLink},{default:m(()=>[f("Дополнительная информация")]),_:1},8,["to"])]),_:1}),d(_,null,{default:m(()=>{var o;return[d(v,{to:`/HostingOrderPay/${(o=e.itemData)==null?void 0:o.OrderID}`},{default:m(()=>[f("Продлить")]),_:1},8,["to"])]}),_:1}),d(_,null,{default:m(()=>{var o;return[d(v,{to:`/HostingOrders/${(o=e.itemData)==null?void 0:o.OrderID}/SchemeChange`},{default:m(()=>[f("Изменить тариф")]),_:1},8,["to"])]}),_:1}),d(_,{onClick:a[6]||(a[6]=o=>i.transferAccount())},{default:m(()=>[f("Передать на другой аккаунт")]),_:1}),d(_,{onClick:a[7]||(a[7]=o=>i.openPasswordChange())},{default:m(()=>[f("Сменить пароль")]),_:1}),d(R),d(_,{class:"color-red",onClick:a[8]||(a[8]=o=>i.deleteHostingItem())},{default:m(()=>[f("Удалить")]),_:1})]),_:1})])],2)}const Ht={components:{IconDots:J,IconCard:K,Helper:st,StatusBadge:Q},props:{params:{type:Array,default:()=>[]},itemData:{type:Object,default:()=>{}},userName:{type:String,default:""},infoLink:{type:String,default:"/"},isLast:{type:Boolean,default:!1},isSeveral:{type:Boolean,default:!1},selectedRows:{type:Object,required:!0}},emits:["delete","transfer","manage"],setup(s,{emit:a}){const e=$(),i=tt({...s.selectedRows}),B=()=>{a("update-selected-rows",i.value)};et(()=>s.selectedRows,t=>{i.value={...t}},{deep:!0});const O=nt("emitter"),k=at(()=>{var n,l;if(!((n=s.itemData)!=null&&n.Domain))return"";const t=(l=s.itemData)==null?void 0:l.Domain;return t.startsWith("http://")||t.startsWith("https://")?t:`https://${t}`});function y(t){e.push(`/HostingOrders/${t}`)}function H(t){if(!t)return G(new Date);const n=new Date,l=new Date(n.getTime()+t*24*60*60*1e3);return G(l)}function C(t){O.emit("open-modal",{component:"StatusHistory",data:{modeID:"HostingOrders",rowID:t}})}function x(){var t,n,l;O.emit("open-modal",{component:"OrderPasswordChange",data:{OrderID:(t=s.itemData)==null?void 0:t.ID,ServiceID:(n=s.itemData)==null?void 0:n.ServiceID,emitEvent:"updateHostingIDPage",Login:(l=s.itemData)==null?void 0:l.Login}})}function N(){var t,n;a("delete",(t=s.itemData)==null?void 0:t.ID,(n=s.itemData)==null?void 0:n.OrderID)}function v(t){if(t===null)return{html:"",count:0};let n=t.includes(",")?t.split(","):[t];n=n.filter(D=>{var u;return D!==((u=s.itemData)==null?void 0:u.Domain)});const l=n.join("<br>"),h=n.length;return{html:l,count:h}}function _(){var t,n;a("transfer",{ServiceOrderID:(t=s.itemData)==null?void 0:t.ID,ServiceID:(n=s.itemData)==null?void 0:n.ServiceID})}function R(){var t,n,l;a("manage",{ServiceOrderID:(t=s.itemData)==null?void 0:t.ID,ServiceID:(n=s.itemData)==null?void 0:n.ServiceID,OrderID:(l=s.itemData)==null?void 0:l.OrderID})}function L(t){if(!t)return"";const n=new Date(parseInt(t)*1e3),h=new Date-n,D=Math.floor(h/1e3),u=Math.floor(D/60),I=Math.floor(u/60),S=Math.floor(I/24);return D<60?`${D} сек. от статуса`:u<60?`${u} мин. от статуса`:I<24?`${I} ч. от статуса`:`${S} дн. от статуса`}return{hostStatuses:ot,deleteHostingItem:N,transferAccount:_,orderManage:R,calculateExpirationDate:H,fullDomainUrl:k,showDNSs:v,toItem:y,openHistoryStatuses:C,calculateDaysSinceStatusUpdate:L,openPasswordChange:x,localSelectedRows:i,updateSelectedRows:B}}},jt=p(Ht,[["render",yt],["__scopeId","data-v-513f3028"]]);export{jt as H};
