import{o as w,c as b,b as u,a as e,t as D,Z as d,af as _,p as S,l as I,_ as U,f as k,a7 as x,e as y,S as B,r as v,g as h,i as N}from"./index-6f846e0d.js";import{u as P}from"./contracts-b643bcd5.js";import{s as C}from"./multiselect-265f6f4c.js";import{B as g}from"./BlockBalanceAgreement-4579706c.js";import{_ as E}from"./ButtonDefault-40efcd87.js";import{_ as R}from"./ClausesKeeper-3ae27028.js";import"./bootstrap-vue-next.es-6bf04585.js";import"./IconArrow-37547b0b.js";import"./IconClose-12869131.js";const l=a=>(S("data-v-e7b69fa5"),a=a(),I(),a),V={class:"create-referral"},L={class:"section"},M={class:"container"},A={class:"section-header"},j=l(()=>e("h1",{class:"section-title"},"Создать реферала",-1)),H={class:"section-label"},O={class:"section"},T={class:"container"},Z={class:"create-referral__data"},q={class:"form-field"},z=l(()=>e("div",{class:"form-field__label"},"ФИО",-1)),F={class:"form-field"},G=l(()=>e("div",{class:"form-field__label"},"Email",-1)),J={class:"form-field"},K=l(()=>e("div",{class:"form-field__label"},"Пароль",-1)),Q={class:"form-field"},W=l(()=>e("div",{class:"form-field__label"},"Подтвердить пароль",-1)),X={class:"section"},Y={class:"container"},$={class:"create-referral__data"};function ee(a,o,p,s,i,n){var c;const r=g,m=R,f=E;return w(),b("div",V,[u(r),e("div",L,[e("div",M,[e("div",A,[j,e("div",H,D((c=s.getUserInfo)==null?void 0:c.Name),1)]),u(m)])]),e("div",O,[e("div",T,[e("div",Z,[e("label",q,[z,d(e("input",{type:"text",placeholder:"","onUpdate:modelValue":o[0]||(o[0]=t=>s.formData.Name=t)},null,512),[[_,s.formData.Name]])]),e("label",F,[G,d(e("input",{type:"text","onUpdate:modelValue":o[1]||(o[1]=t=>s.formData.Email=t)},null,512),[[_,s.formData.Email]])]),e("label",J,[K,d(e("input",{type:"password","onUpdate:modelValue":o[2]||(o[2]=t=>s.formData.Password=t)},null,512),[[_,s.formData.Password]])]),e("label",Q,[W,d(e("input",{type:"password","onUpdate:modelValue":o[3]||(o[3]=t=>s.formData._Password=t)},null,512),[[_,s.formData._Password]])])])])]),e("div",X,[e("div",Y,[e("div",$,[u(f,{class:"btn--wide",label:"Зарегистрировать","is-loading":s.isLoading,onClick:o[4]||(o[4]=t=>s.createReferral())},null,8,["is-loading"])])])])])}const oe={components:{Multiselect:C,BlockBalanceAgreement:g},async setup(){const a=k(),o=P(),p=x(),s=y();B("emitter");const i=v(!1),n=v({Email:"",Name:"",Password:"",_Password:""}),r=h(()=>a.userInfo),m=h(()=>o.contractsList[p.params.id]);function f(){n.value.Email.length>0&&n.value.Password.length>0&&n.value.Name.length>0&&n.value._Password.length>0&&(i.value=!0,a.registerNewUser({...n.value}).then(c=>{const{response:t,error:se}=c;t==="success"&&s.push({path:"/Home"}),i.value=!1}))}return N(()=>{console.log("depend2"),r.value&&r.value.ID&&(document.cookie=`OwnerID=${r.value.ID}; path=/; SameSite=Lax; Secure`,document.cookie="IsManaged=yes; path=/; SameSite=Lax; Secure",console.log(document.cookie))}),await a.fetchUserData(),await o.fetchContracts(),{formData:n,getUserInfo:r,getContract:m,isLoading:i,createReferral:f}}},me=U(oe,[["render",ee],["__scopeId","data-v-e7b69fa5"]]);export{me as default};
