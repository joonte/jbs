import{_ as Y}from"./StatusBadge-B65ys1I-.js";import{_ as q}from"./IconLink--V9HJ_tV.js";import{_ as G,a as J}from"./CardButton-Ym2KFbPf.js";import{_ as K}from"./ServerStatusBadge.vue_vue_type_script_setup_true_lang-6rZqTOev.js";import{r as Q,Y as X,v as Z,m as tt}from"./bootstrap-vue-next-3DpAa4tb.js";import{_ as et}from"./IconDots-BE2XsWZ6.js";import{_ as nt}from"./Helper-BWCpStXX.js";import{_ as ot}from"./IconCard-jY7IitfY.js";import{d as st,r as it,m as rt,x as at,f as lt,E as dt,c as D,o as h,a as s,b as n,w as r,e as d,j as c,v as S,h as y,t as g,F as ut,i as mt,n as C}from"./index-CipWZKo_.js";import{f as $}from"./time-DenPiOX5.js";import{_ as ct}from"./_plugin-vue_export-helper-DlAUqK2U.js";const gt={class:"btn btn--dots"},ft={class:"tw-flex tw-flex-col xl:tw-flex-row tw-mt-10 xl:tw-mt-0 xl:tw-items-center tw-gap-2 xl:tw-gap-4"},wt={class:"tw-flex tw-items-center tw-gap-4"},pt={class:"tw-flex tw-gap-2 tw-items-center"},Dt={class:"tw-flex"},ht=["href"],vt={key:0,class:"hosting-domains__wrapper"},_t={class:"hosting-domains"},It={class:"hosting-domains__items"},xt=["innerHTML"],kt={class:"tw-text-sky-400 tw-mt-2"},Ot={class:"tw-flex tw-flex-col lg:tw-items-center lg:tw-flex-row lg:tw-justify-between tw-gap-2 tw-mt-2"},St={class:"tw-flex tw-flex-wrap tw-items-center tw-gap-x-4 tw-gap-y-2 tw-mt-2 tw-text-sm tw-text-gray-500 tw-text-nowrap"},yt={class:"tw-flex tw-items-center tw-gap-2 tw-text-nowrap"},Ct={class:"hosting-status__date"},$t={__name:"HostingCard",props:{params:{type:Array,default:()=>[]},hosting:{type:Object,default:()=>{}},userName:{type:String,default:""},infoLink:{type:String,default:"/"},isLast:{type:Boolean,default:!1},isSeveral:{type:Boolean,default:!1},selectedRows:{type:Object,required:!0}},emits:["delete","transfer","manage","update-selected-rows"],setup(e,{emit:b}){const i=e,v=b,I=st(),_=it({...i.selectedRows}),H=()=>{v("update-selected-rows",_.value)};rt(()=>i.selectedRows,o=>{_.value={...o}},{deep:!0});const x=at("emitter"),B=lt(()=>{if(!i.hosting.Domain)return"";const o=i.hosting.Domain;return o.startsWith("http://")||o.startsWith("https://")?o:`https://${o}`});function L(){I.push(`/HostingOrders/${i.hosting.OrderID}`)}function N(o){if(!o)return $(new Date);const t=new Date,u=new Date(t.getTime()+o*24*60*60*1e3);return $(u)}function R(o){x.emit("open-modal",{component:"StatusHistory",data:{modeID:"HostingOrders",rowID:o}})}function P(){x.emit("open-modal",{component:"OrderPasswordChange",data:{OrderID:i.hosting.ID,ServiceID:i.hosting.ServiceID,emitEvent:"updateHostingIDPage",Login:i.hosting.Login}})}function M(){v("delete",i.hosting.ID,i.hosting.OrderID)}function k(o){if(o===null)return{html:"",count:0};let t=o.includes(",")?o.split(","):[o];t=t.filter(m=>m!==i.hosting.Domain);const u=t.join("<br>"),f=t.length;return{html:u,count:f}}function j(){v("transfer",{ServiceOrderID:i.hosting.ID,ServiceID:i.hosting.ServiceID})}function O(){v("manage",{ServiceOrderID:i.hosting.ID,ServiceID:i.hosting.ServiceID,OrderID:i.hosting.OrderID})}function V(o){if(!o)return"";const t=new Date(parseInt(o)*1e3),f=new Date-t,m=Math.floor(f/1e3),w=Math.floor(m/60),l=Math.floor(w/60),p=Math.floor(l/24);return m<60?`${m} сек. от статуса`:w<60?`${w} мин. от статуса`:l<24?`${l} ч. от статуса`:`${p} дн. от статуса`}return(o,t)=>{const u=G,f=ot,m=nt,w=et,l=Q,p=dt("RouterLink"),T=X,E=Z,U=tt,z=K,F=J,A=q,W=Y;return h(),D("div",{onClick:t[12]||(t[12]=a=>L()),class:"tw-relative tw-p-4 tw-border tw-border-gray-200 tw-rounded tw-cursor-pointer hover:tw-bg-sky-100"},[s("div",{onClick:t[7]||(t[7]=c(()=>{},["stop"])),class:"tw-absolute tw-right-4 tw-top-4 tw-flex tw-items-center tw-gap-1"},[n(u,{onClick:t[0]||(t[0]=c(a=>S(I).push(`/HostingOrders/${e.hosting.OrderID}/SchemeChange`),["stop"]))},{default:r(()=>t[13]||(t[13]=[d(" Изменить тариф ",-1)])),_:1,__:[13]}),n(u,{onClick:t[1]||(t[1]=c(a=>S(I).push(`/HostingOrderPay/${e.hosting.OrderID}`),["stop"]))},{default:r(()=>[n(f,{class:"tw-size-6"}),t[14]||(t[14]=s("div",null,"Оплатить",-1))]),_:1,__:[14]}),n(u,{onClick:t[2]||(t[2]=c(a=>O(),["stop"])),class:"tw-hidden sm:tw-flex"},{default:r(()=>t[15]||(t[15]=[d("Управлять заказом",-1)])),_:1,__:[15]}),n(m,{"user-notice":e.hosting.UserNotice,id:e.hosting.OrderID,emit:"updateHostingList",class:"tw-m-0 tw-p-0"},null,8,["user-notice","id"]),n(E,{right:"",class:"dropdown-dots"},{"button-content":r(()=>[s("span",gt,[n(w)])]),default:r(()=>[n(l,{onClick:t[3]||(t[3]=a=>O())},{default:r(()=>t[16]||(t[16]=[d("Управлять заказом",-1)])),_:1,__:[16]}),n(l,null,{default:r(()=>[n(p,{to:e.infoLink},{default:r(()=>t[17]||(t[17]=[d("Дополнительная информация",-1)])),_:1,__:[17]},8,["to"])]),_:1}),n(l,null,{default:r(()=>[n(p,{to:`/HostingOrderPay/${e.hosting.OrderID}`},{default:r(()=>t[18]||(t[18]=[d("Продлить",-1)])),_:1,__:[18]},8,["to"])]),_:1}),n(l,null,{default:r(()=>[n(p,{to:`/HostingOrders/${e.hosting.OrderID}/SchemeChange`},{default:r(()=>t[19]||(t[19]=[d("Изменить тариф",-1)])),_:1,__:[19]},8,["to"])]),_:1}),n(l,{onClick:t[4]||(t[4]=a=>j())},{default:r(()=>t[20]||(t[20]=[d("Передать на другой аккаунт",-1)])),_:1,__:[20]}),n(l,{onClick:t[5]||(t[5]=a=>P())},{default:r(()=>t[21]||(t[21]=[d("Сменить пароль",-1)])),_:1,__:[21]}),n(T),n(l,{class:"color-red",onClick:t[6]||(t[6]=a=>M())},{default:r(()=>t[22]||(t[22]=[d("Удалить",-1)])),_:1,__:[22]})]),_:1})]),s("div",ft,[s("div",wt,[e.isSeveral?(h(),D("div",{key:0,onClick:t[9]||(t[9]=c(()=>{},["stop"]))},[n(U,{id:"checkbox-"+e.hosting.OrderID,modelValue:_.value[e.hosting.OrderID],"onUpdate:modelValue":t[8]||(t[8]=a=>_.value[e.hosting.OrderID]=a),name:"checkbox-"+e.hosting.OrderID,onChange:H},null,8,["id","modelValue","name"])])):y("",!0),s("div",pt,[n(z,{indicators:e.hosting.Graphs?.Last},null,8,["indicators"]),n(F,{orderId:e.hosting.OrderID},null,8,["orderId"])])]),s("div",Dt,[s("a",{href:B.value,target:"_blank",onClick:t[10]||(t[10]=c(()=>{},["stop"])),class:"tw-flex tw-items-center tw-gap-2 tw-text-lg"},[s("div",null,g(e.hosting.Domain),1),n(A,{class:"tw-size-5"})],8,ht)]),e.hosting.Parked&&e.hosting.Parked.split(",").length>1?(h(),D("div",vt,[s("div",_t,[d(" +"+g(k(e.hosting.Parked).count)+" ",1),s("div",It,[s("div",{class:"hosting-domains__item",innerHTML:k(e.hosting.Parked).html},null,8,xt)])])])):y("",!0)]),s("div",kt,g(e.userName),1),s("div",Ot,[s("div",St,[(h(!0),D(ut,null,mt(e.params,a=>(h(),D("div",{class:C({"tw-font-bold":a.bold})},g(a.text),3))),256))]),s("div",yt,[s("span",{class:C(["hosting-item__date tw-pl-0",{danger:Number(e.hosting.DaysRemainded)<14}])},g(N(e.hosting.DaysRemainded))+" • "+g(e.hosting.DaysRemainded||0)+" дн. ",3),n(W,{class:"status-badge",status:e.hosting.StatusID,"status-table":"HostingOrders",onClick:t[11]||(t[11]=c(a=>R(e.hosting.ID),["stop"]))},null,8,["status"]),s("div",Ct,g(V(e.hosting.StatusDate)),1)])])])}}},Et=ct($t,[["__scopeId","data-v-e13ee43d"]]);export{Et as _};
