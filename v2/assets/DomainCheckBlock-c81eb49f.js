import{o as l,c as t,a as s,b as g,F as V,x as W,n as Z,ac as K,t as u,k as b,w as Q,T as j,y as G,p as J,l as X,_ as Y,r as d,h as $,e as oo,a7 as no,H as eo,g as ao,i as L,O as so,C as q}from"./index-59dbe3d3.js";import{u as co}from"./domain-68920d34.js";import{s as lo}from"./multiselect-49fa0a82.js";import{E as io}from"./EmptyStateBlock-03e9aa9e.js";import{b as ro,f as _o}from"./bootstrap-vue-next.es-faf1dad1.js";import{I as to}from"./IconClose-0bef5a37.js";import{_ as uo}from"./ButtonDefault-a62141a4.js";const fo=f=>(J("data-v-26921d6a"),f=f(),X(),f),vo={class:"section"},ho={class:"container"},ko={class:"domain-block"},po=fo(()=>s("div",{class:"section-title"},[s("h2",{class:"section-block_title"},"Проверить домен")],-1)),mo={class:"domain-field"},yo={key:0,class:"domain__grid"},Do=["onClick"],Io={class:"domain__item-wrapper"},go={class:"domain__item-info__title"},wo={class:"domain__item-info__text"},No={class:"domain__info-wrapper"},Co={class:"domain__info-wrapper-vertical"},So={class:"domain__info-wrapper"},xo={class:"domain__info-title"},bo={class:"domain__info-title"},Lo={class:"domain__package-name"},Eo={key:1,class:"domain__loader"},Fo={key:1,class:"domain__info-wrapper"},Bo={class:"domain__price"},Po={class:"domain__price-order"},Ao={class:"domain__price-prolong"};function Oo(f,v,C,a,E,S){var I;const k=ro,D=uo,i=to,x=_o,p=io;return l(),t("div",vo,[s("div",ho,[s("div",ko,[po,s("div",mo,[g(k,{modelValue:a.domainName,"onUpdate:modelValue":v[0]||(v[0]=o=>a.domainName=o),placeholder:"Например, yourName",type:"text"},null,8,["modelValue"]),g(D,{label:"Подобрать",disabled:!a.domainName,onClick:v[1]||(v[1]=o=>a.checkDomain())},null,8,["disabled"])]),a.isListLoaded?(l(),t(V,{key:0},[((I=a.domainsArray)==null?void 0:I.length)>0?(l(),t("div",yo,[(l(!0),t(V,null,W(a.domainsArray,o=>(l(),t("div",{class:Z(["domain__item",{domain__item_inactive:(o==null?void 0:o.isFree)===!1||(o==null?void 0:o.isFree)===null,domain__item_active:a.selectedDomain.some(r=>r.ID===o.ID)}]),onClick:r=>{a.selectDomain(o),a.checkInfo(o==null?void 0:o.info,o==null?void 0:o.PackageID)}},[o!=null&&o.info&&a.selectedDomainInfo===(o==null?void 0:o.info)&&(!a.displayedInfo[o.info+o.PackageID]||a.showSinglePackageInfo)?(l(),t("div",{key:0,class:"domain__item-info",onClick:v[2]||(v[2]=K(()=>{},["stop"]))},[s("div",Io,[s("div",go,"Данные домена "+u(a.checkedDomain)+"."+u(o==null?void 0:o.Name),1),g(i,{class:"domain__item-icon",onClick:r=>a.checkInfo(o==null?void 0:o.info,o==null?void 0:o.PackageID)},null,8,["onClick"])]),s("pre",wo,u(o==null?void 0:o.info),1)])):b("",!0),s("div",No,[s("div",Co,[s("div",So,[s("div",xo,u(a.checkedDomain),1),s("div",bo,"."+u(o==null?void 0:o.Name),1)]),s("div",Lo,u(o==null?void 0:o.PackageID),1)]),g(j,{name:"fade",mode:"out-in"},{default:Q(()=>[(o==null?void 0:o.isFree)!==null?(l(),t("div",{key:0,class:Z(["domain__info-status",{available:(o==null?void 0:o.isFree)===!0}])},u(o!=null&&o.isFree?"Свободен":"Занят"),3)):(l(),t("div",Eo))]),_:2},1024)]),o!=null&&o.isFree?(l(),t("div",Fo,[s("div",Bo,[s("div",Po,u(o==null?void 0:o.CostOrder)+" ₽ / год",1),s("div",Ao,"Продление: "+u(o==null?void 0:o.CostProlong)+" ₽",1)]),g(x,{class:"domain__checkbox",checked:a.selectedDomain.some(r=>r.ID===o.ID),onChange:r=>a.toggleDomain(o)},null,8,["checked","onChange"])])):b("",!0)],10,Do))),256))])):(l(),G(p,{key:1,class:"domain__empty",label:"Неправильное доменное имя"}))],64)):b("",!0)])])])}const To={components:{Multiselect:lo},props:{search:{type:String,default:""},domainList:{type:Array,default:()=>[]}},emits:["select"],setup(f,{emit:v}){const C=co(),a=d(f.search);$(()=>f.search,e=>{a.value=e,e&&N()});const E=oo(),S=no(),k=eo({}),D=d(!1),i=d(null);S.query.DomainName&&(i.value=S.query.DomainName,N());const x=d(null),p=d(null),I=d(!1),o=d(null),r=d(!1),h=d([]),m=d([]),F=e=>{e.key==="Enter"&&!B.value&&N()},B=ao(()=>!i.value);L(()=>{document.addEventListener("keyup",F)}),so(()=>{document.removeEventListener("keyup",F)});let P=e=>{e.key==="Escape"&&(o.value=null)};function U(){E.replace({query:{DomainName:i.value}})}function z(e,_){const n=e+_;k[n]?(o.value=null,delete k[n],D.value=!1):(o.value=e,k[n]=!0,D.value=!0)}function M(e){A(e)}function w(){const e=document.querySelector(".domain__info-title");e&&(r.value=e.scrollWidth>e.clientWidth)}function N(){U(),C.DomainNameCheck({DomainName:i.value}).then(e=>{var O;const{result:_,resultData:n}=e;if(n!=null&&n.DomainName&&(i.value=n.DomainName,p.value=n.DomainName,console.log(p)),n!=null&&n.Zones){h.value=f.domainList.filter(c=>{var y;return((y=n==null?void 0:n.Zones)==null?void 0:y.includes(c==null?void 0:c.Name))&&(c==null?void 0:c.IsActive)}).sort((c,y)=>(n==null?void 0:n.Zones.indexOf(c==null?void 0:c.Name))-(n==null?void 0:n.Zones.indexOf(y==null?void 0:y.Name))).map(c=>({...c,isFree:null,info:_.Info})),I.value=!0;let T=0;const R=setInterval(()=>{H(T),T++},100);setTimeout(()=>{clearInterval(R)},((O=h.value)==null?void 0:O.length)*100)}else h.value=[]})}function H(e){var _;C.DomainCheck({DomainName:p.value,DomainZone:(_=h.value[e])==null?void 0:_.Name}).then(n=>{h.value[e]={...h.value[e],isFree:n.status==="SUCCESS",info:n.info}}).catch(n=>{console.error("An error occurred:",n)})}function A(e){if(e.isFree){const _=m.value.findIndex(n=>n.ID===e.ID);_===-1?m.value.push(e):m.value.splice(_,1),v("select",m.value.map(n=>({...n,line:i.value}))),console.log("Selected Domains:",m.value)}}return L(()=>{w(),window.addEventListener("resize",w)}),q(()=>{window.removeEventListener("resize",w)}),L(()=>{window.addEventListener("keydown",P)}),q(()=>{window.removeEventListener("keydown",P)}),{domainName:i,isListLoaded:I,checkedDomain:p,domain:x,domainsArray:h,selectedDomain:m,selectDomain:A,checkDomain:N,isTextOverflow:r,checkTextOverflow:w,buttonDisabled:B,checkInfo:z,selectedDomainInfo:o,toggleDomain:M,displayedInfo:k,showSinglePackageInfo:D}}},Ro=Y(To,[["render",Oo],["__scopeId","data-v-26921d6a"]]);export{Ro as D};
