import{j as pt,o as f,c as S,b as l,a as t,t as a,w as I,d as O,Y as B,ae as R,Z as Dt,F as ft,p as St,l as It,_ as Ot,a7 as wt,e as Ht,f as bt,R as Pt,r as lt,g as w}from"./index-041dff1e.js";import{_ as kt}from"./IconCard-2ba2ac7a.js";import{I as Ct}from"./IconProfile-de337285.js";import{I as yt}from"./IconSettings-91ea64f8.js";import{I as dt}from"./IconEye-232db817.js";import{S as mt}from"./StatusBadge-72e39b02.js";import{h as xt}from"./hostStatuses-94d00f20.js";import{u as Bt}from"./testTransforms-eec373ee.js";import{f as _t}from"./useTimeFunction-8602dd60.js";import{u as Nt}from"./hosting-0de2c472.js";import{u as At}from"./resetServer-bc13c951.js";import{u as Et}from"./globalActions-56c36e7b.js";import{_ as gt}from"./ClausesKeeper-a9c75480.js";import{_ as vt}from"./ServicesContractBalanceBlock-317f61cc.js";import{s as ut}from"./SettingsEngineItem-0d80de64.js";import{B as ht}from"./BlockBalanceAgreement-ab137d5a.js";import{E as Tt}from"./EmptyStateBlock-0c3a34a2.js";import{_ as Mt}from"./paramsAccordionBlock-215d3477.js";import{_ as Rt}from"./ButtonDefault-80267555.js";import{z as Vt}from"./bootstrap-vue-next.es-dd4e7f7d.js";import"./IconClose-4ba86278.js";import"./contracts-fabeed86.js";import"./IconArrow-ce6e1d64.js";const d=m=>(St("data-v-e9afc209"),m=m(),It(),m),Lt={key:0,class:"my-hosting-order"},Gt={class:"section"},jt={class:"container"},Ft={class:"section-header"},Ut={class:"section-title"},qt={class:"section-label"},zt={class:"section-nav"},Kt={class:"list"},Wt={class:"list-col list-col--md"},Yt={class:"list-item"},Zt={class:"list-item__row"},Jt={class:"list-item__title"},Qt={class:"list-item__status"},Xt={class:"list-item__row"},$t={class:"list-item__ul"},te={class:"list-item__row list-item__row--column"},ee={class:"list-item__text"},se={class:"list-item__text"},oe={class:"list-item__text"},ie={class:"list-item__row"},ne={class:"btn btn--border btn--switch"},ae=d(()=>t("span",{class:"btn-switch__text"},"Автопродление",-1)),re=d(()=>t("span",{class:"btn-switch__toggle"},null,-1)),ce={class:"list-col list-col--md"},le={class:"list-item"},_e={class:"list-item__row"},de=d(()=>t("div",{class:"list-item__title"},"Панель управления",-1)),me={class:"list-item__row list-item__row--table"},ge=d(()=>t("div",{class:"list-item__item"},"Адрес",-1)),ve={class:"list-item__item"},ue={class:"list-item__row list-item__row--table"},he=d(()=>t("div",{class:"list-item__item"},"Логин",-1)),pe={class:"list-item__item"},De={class:"list-item__row list-item__row--table"},fe=d(()=>t("div",{class:"list-item__item"},"Пароль",-1)),Se={class:"list-item__item hide-button"},Ie={key:0,class:"password-hidden"},Oe={class:"list-item__row list-item__row--table"},we=d(()=>t("div",{class:"list-item__item"},"FTP, POP3, SMTP, IMAP",-1)),He={class:"list-item__item"},be={class:"list-col list-col--md"},Pe={class:"list-item"},ke=d(()=>t("div",{class:"list-item__row"},[t("div",{class:"list-item__title"},"Именные сервера")],-1)),Ce={class:"list-item__row list-item__row--table"},ye={class:"list-item__item"},xe={class:"list-item__item"},Be={class:"list-item__item"},Ne={class:"list-item__item"},Ae={key:1,class:"section"},Ee={class:"container"};function Te(m,i,r,e,v,V){var b,P,k,C,u,y,x,s,o,c,L,G,j,F,U,q,z,K,W,Y,Z,J,Q,X,$,tt,et,st,ot,it,nt,at,rt,ct;const N=ht,g=pt("router-link"),A=gt,h=vt,n=mt,p=Vt,D=ut,H=Rt,E=dt,T=Mt,M=Tt;return f(),S(ft,null,[l(N),(b=e.getHostingOrderData)!=null&&b.ID?(f(),S("div",Lt,[t("div",Gt,[t("div",jt,[t("div",Ft,[t("h1",Ut,a((P=e.getHostingOrderData)==null?void 0:P.Domain),1),t("div",qt,"Хостинг # "+a((k=e.getHostingOrderData)==null?void 0:k.OrderID),1),t("div",zt,[l(g,{class:"section-nav__item",to:`/HostingOrders/${(C=e.getHostingOrderData)==null?void 0:C.OrderID}`},{default:I(()=>[O("Хостинг")]),_:1},8,["to"])])]),l(A,{partition:"Header:/HostingOrders"}),t("div",Kt,[l(h,{"contract-id":(u=e.getHostingOrderData)==null?void 0:u.ContractID,onTransfer:i[0]||(i[0]=_=>e.transferItem())},null,8,["contract-id"]),t("div",Wt,[t("div",Yt,[t("div",Zt,[t("div",Jt,a((y=e.getHostingScheme)==null?void 0:y.Name),1),t("div",Qt,[l(n,{status:(x=e.getHostingOrderData)==null?void 0:x.StatusID,"status-table":"HostingOrders"},null,8,["status"])]),l(D,null,{default:I(()=>[l(p,{onClick:i[1]||(i[1]=_=>e.changeScheme())},{default:I(()=>[O("Изменить тариф")]),_:1}),l(p,{onClick:i[2]||(i[2]=_=>e.openOrderRestore())},{default:I(()=>[O("Просмотреть учет заказа")]),_:1}),l(p,{onClick:i[3]||(i[3]=_=>e.openPasswordChange())},{default:I(()=>[O("Сменить пароль от аккаунта")]),_:1})]),_:1})]),t("div",Xt,[t("ul",$t,[B(t("li",null,a(e.formDescriptionLine((o=(s=e.getHostingScheme)==null?void 0:s.SchemeParams)==null?void 0:o.limit_webdomains)),513),[[R,(G=(L=(c=e.getHostingScheme)==null?void 0:c.SchemeParams)==null?void 0:L.limit_webdomains)==null?void 0:G.Value]]),B(t("li",null,a(e.formDescriptionLine((F=(j=e.getHostingScheme)==null?void 0:j.SchemeParams)==null?void 0:F.limit_quota)),513),[[R,(z=(q=(U=e.getHostingScheme)==null?void 0:U.SchemeParams)==null?void 0:q.limit_quota)==null?void 0:z.Value]]),B(t("li",null,a(e.formDescriptionLine((W=(K=e.getHostingScheme)==null?void 0:K.SchemeParams)==null?void 0:W.limit_emails)),513),[[R,(J=(Z=(Y=e.getHostingScheme)==null?void 0:Y.SchemeParams)==null?void 0:Z.limit_emails)==null?void 0:J.Value]])])]),t("div",te,[t("div",ee,a((Q=e.getHostingScheme)==null?void 0:Q.CostMonth)+" ₽ в месяц",1),t("div",se,"Дней осталось "+a(((X=e.getHostingOrderData)==null?void 0:X.DaysRemainded)||0),1),t("div",oe,"Дата окончания "+a(e.calculateExpirationDate(($=e.getHostingOrderData)==null?void 0:$.DaysRemainded)),1)]),t("div",ie,[t("div",{class:"btn btn-default btn--blue",onClick:i[4]||(i[4]=_=>e.navigateToProlong())},a(((tt=e.getHostingOrderData)==null?void 0:tt.StatusID)==="Waiting"?"Оплатить":"Продлить"),1),t("label",ne,[B(t("input",{type:"checkbox","onUpdate:modelValue":i[5]||(i[5]=_=>e.isAutoProlong=_),onInput:i[6]||(i[6]=_=>e.setProlongValue())},null,544),[[Dt,e.isAutoProlong]]),ae,re])])])]),t("div",ce,[t("div",le,[t("div",_e,[de,l(H,{class:"ml-auto",onClick:i[7]||(i[7]=_=>e.orderManage()),label:"Вход"})]),t("div",me,[ge,t("div",ve,a(`https://${(et=e.getServerGroup)==null?void 0:et.Address}/manager`),1)]),t("div",ue,[he,t("div",pe,a((st=e.getHostingOrderData)==null?void 0:st.Login),1)]),t("div",De,[fe,t("div",Se,[e.passwordShow?(f(),S("div",Ie,a(e.getHostingOrderData.Password),1)):(f(),S("button",{key:1,class:"btn btn--border btn--md hide-button",onClick:i[8]||(i[8]=_=>e.passwordShow=!0)},[l(E),O("Показать")]))])]),t("div",Oe,[we,t("div",He,a((ot=e.getServerGroup)==null?void 0:ot.Address),1)])])]),t("div",be,[t("div",Pe,[ke,t("div",Ce,[t("div",ye,a((it=e.getHostingOrderData)==null?void 0:it.Ns1Name),1),t("div",xe,a((nt=e.getHostingOrderData)==null?void 0:nt.Ns2Name),1),t("div",Be,a((at=e.getHostingOrderData)==null?void 0:at.Ns3Name),1),t("div",Ne,a((rt=e.getHostingOrderData)==null?void 0:rt.Ns4Name),1)])])])])])]),l(T,{"params-list":(ct=e.getHostingScheme)==null?void 0:ct.SchemeParams,label:"Общая информация","main-param":"InternalName"},null,8,["params-list"])])):(f(),S("div",Ae,[t("div",Ee,[l(M,{label:"Заказ не найден"})])]))],64)}const Me={components:{IconCard:kt,IconProfile:Ct,IconSettings:yt,IconEye:dt,StatusBadge:mt,ClausesKeeper:gt,settingsEngineItem:ut,ServicesContractBalanceBlock:vt,BlockBalanceAgreement:ht},async setup(){const m=wt(),i=Ht(),r=Nt(),e=At(),v=bt(),V=Et(),{formDescriptionLine:N}=Bt(),g=Pt("emitter");g.on("updateHostingIDPage",()=>{r.fetchHostingOrders()});const A=lt(!1),h=lt(!1),n=w(()=>Object.keys(r==null?void 0:r.hostingList).map(s=>r==null?void 0:r.hostingList[s]).find(s=>s.OrderID===m.params.id)),p=w(()=>r==null?void 0:r.hostingSchemes),D=w(()=>{var s,o;return(o=p.value)==null?void 0:o[(s=n.value)==null?void 0:s.SchemeID]}),H=w(()=>{var s,o;return(o=v==null?void 0:v.userOrders)==null?void 0:o[(s=n.value)==null?void 0:s.OrderID]}),E=w(()=>{var s,o,c;return(c=(s=e==null?void 0:e.serverGroupsList)==null?void 0:s.Servers)==null?void 0:c[(o=n.value)==null?void 0:o.ServerID]});function T(s){if(!s)return _t(new Date);const o=new Date,c=new Date(o.getTime()+s*24*60*60*1e3);return _t(c)}function M(){var s,o;g.emit("open-modal",{component:"OrdersTransfer",data:{ServiceOrderID:(s=n.value)==null?void 0:s.ID,ServiceID:(o=n.value)==null?void 0:o.ServiceID}})}function b(){var s;v.prolongOrder({IsAutoProlong:h.value?0:1,OrderID:(s=n.value)==null?void 0:s.OrderID})}function P(){var s;i.push(`/HostingOrders/${(s=n.value)==null?void 0:s.OrderID}/SchemeChange`),u()}function k(){var s;i.push(`/HostingOrderPay/${(s=n.value)==null?void 0:s.OrderID}`)}function C(){var s,o,c;V.OrderManage({ServiceOrderID:(s=n.value)==null?void 0:s.ID,OrderID:(o=n.value)==null?void 0:o.OrderID,ServiceID:(c=n.value)==null?void 0:c.ServiceID})}function u(){var s,o;g.emit("open-modal",{component:"HostingOrderSchemeChange",data:{hostingID:(s=n.value)==null?void 0:s.ID,ServerGroup:(o=D.value)==null?void 0:o.ServersGroupID,emitEvent:"updateHostingIDPage"}})}function y(){var s,o;g.emit("open-modal",{component:"OrderPasswordChange",data:{OrderID:(s=n.value)==null?void 0:s.ID,ServiceID:(o=n.value)==null?void 0:o.ServiceID,emitEvent:"updateHostingIDPage"}})}function x(){var s,o,c;g.emit("open-modal",{component:"OrderRestore",data:{OrderID:(s=n.value)==null?void 0:s.OrderID,CostDay:(o=D.value)==null?void 0:o.CostDay,DaysRemainded:(c=n.value)==null?void 0:c.DaysRemainded,emitEvent:"updateHostingIDPage"}})}return await r.fetchHostingOrders(),await r.fetchHostingSchemes(),await e.fetchServerGroups().then(()=>{m.name==="default.MyHostingOrderSchemeChange"&&u()}),await v.fetchUserOrders().then(()=>{var s;h.value=(s=H.value)==null?void 0:s.IsAutoProlong}),{getHostingOrderData:n,getHostingScheme:D,getUserOrder:H,getServerGroup:E,isAutoProlong:h,passwordShow:A,openOrderRestore:x,openPackageChangeModal:u,orderManage:C,navigateToProlong:k,setProlongValue:b,openPasswordChange:y,hostStatuses:xt,transferItem:M,formDescriptionLine:N,calculateExpirationDate:T,changeScheme:P}}},as=Ot(Me,[["render",Te],["__scopeId","data-v-e9afc209"]]);export{as as default};
