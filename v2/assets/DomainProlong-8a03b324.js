import{o as a,c as n,b as d,a as o,t as p,F as L,k as A,p as T,l as K,_ as M,a7 as R,e as V,S as j,r as U,i as W,O as q,g as y}from"./index-59dbe3d3.js";import{u as z}from"./domain-68920d34.js";import{u as G}from"./contracts-d90f6cbb.js";import{s as H}from"./multiselect-49fa0a82.js";import{B as N}from"./BlockBalanceAgreement-f093da58.js";import{E as J}from"./EmptyStateBlock-03e9aa9e.js";import{_ as Q}from"./ButtonDefault-a62141a4.js";import{_ as X}from"./ClausesKeeper-b1ff97f6.js";import"./bootstrap-vue-next.es-faf1dad1.js";import"./IconArrow-ad4e318c.js";import"./IconClose-0bef5a37.js";const _=s=>(T("data-v-1954f0f7"),s=s(),K(),s),Y={key:0,class:"domain-scheme"},Z={class:"section"},$={class:"container"},ee={class:"section-header"},oe={key:0,class:"section-title"},te={key:1,class:"section-title"},se={key:2,class:"section-title"},ae={class:"section-label"},ne={class:"section"},ie={class:"container"},ce={class:"domain-prolong__data"},le={key:0,class:"form-field"},re=_(()=>o("div",{class:"form-field__label"},"Стоимость заказа (в год)",-1)),de=["value"],_e={class:"form-field"},me=_(()=>o("div",{class:"form-field__label"},"Стоимость продления (в год)",-1)),he=["value"],ge=_(()=>o("label",{class:"form-field"},[o("div",{class:"form-field__label"},"Количество лет"),o("input",{type:"text",placeholder:"1",value:"1",disabled:""})],-1)),fe={key:1,class:"form-field__msg"},De={class:"form-field"},ue=_(()=>o("div",{class:"form-field__label"},"Всего к оплате",-1)),ve=["value"],pe={class:"section"},ye={class:"container"},be={class:"domain-prolong__data"},ke={class:"total-block"},Se={class:"total-block__row total-block__row--big"},Ce=_(()=>o("div",{class:"total-block__col"},"Итого за 1 год",-1)),Ie={class:"total-block__col"},Pe={key:1,class:"section"},Be={class:"container"},Fe={key:1,class:"section"},xe={class:"container"};function Oe(s,c,b,e,m,u){var t,l,D,r,v,k,S,C,I,P,B,F,x,O,E,w;const h=N,i=X,g=Q,f=J;return a(),n(L,null,[d(h),e.getDomain?(a(),n("div",Y,[o("div",Z,[o("div",$,[o("div",ee,[e.getDomain.StatusID==="Waiting"?(a(),n("h1",oe,"Оплата заказа доменного имени")):e.getDomain.StatusID==="ForTransfer"?(a(),n("h1",te,"Оплата переноса домена")):(a(),n("h1",se,"Оплата продления доменного имени")),o("div",ae,p((t=e.getDomain)!=null&&t.DomainName?`#${(l=e.getDomain)==null?void 0:l.DomainName}`:""),1)]),d(i)])]),(D=e.getDomainSchemes)!=null&&D.IsPayed&&((r=e.getDomainSchemes)!=null&&r.IsProlong)||!((v=e.getDomainSchemes)!=null&&v.IsPayed)?(a(),n(L,{key:0},[o("div",ne,[o("div",ie,[o("div",ce,[e.getDomain.StatusID==="Waiting"||e.getDomain.StatusID==="ForTransfer"?(a(),n("label",le,[re,o("input",{type:"text",placeholder:"0 руб",value:((k=e.getDomainSchemes)==null?void 0:k.CostOrder)+" руб",disabled:""},null,8,de)])):A("",!0),o("label",_e,[me,o("input",{type:"text",placeholder:"0 руб",value:((S=e.getDomainSchemes)==null?void 0:S.CostProlong)+" руб",disabled:""},null,8,he)]),ge,(C=e.getDomain)!=null&&C.AdditionalCost?(a(),n("div",fe,[o("p",null,p((I=e.getDomain)==null?void 0:I.AdditionalCost.Message),1)])):A("",!0),o("label",De,[ue,o("input",{type:"text",placeholder:"0 руб",value:e.getDomain.IsPayed?parseFloat((B=e.getDomainSchemes)==null?void 0:B.CostProlong).toFixed(2)+" руб":parseFloat((P=e.getDomainSchemes)==null?void 0:P.CostOrder).toFixed(2)+" руб",disabled:""},null,8,ve)])])])]),o("div",pe,[o("div",ye,[o("div",be,[o("div",ke,[o("div",Se,[Ce,o("div",Ie,p(e.getDomain.IsPayed?parseFloat((x=e.getDomainSchemes)==null?void 0:x.CostProlong).toFixed(2)||"0.00":parseFloat((F=e.getDomainSchemes)==null?void 0:F.CostOrder).toFixed(2))+" ₽",1)])]),d(g,{class:"btn--wide",label:+((O=e.getContract)==null?void 0:O.Balance)>(e.getDomain.StatusID==="ClaimForRegister"?+((E=e.getDomainSchemes)==null?void 0:E.CostOrder):+((w=e.getDomainSchemes)==null?void 0:w.CostProlong))?"Оплатить c баланса договора":"Добавить в корзину",onClick:c[0]||(c[0]=we=>e.orderPay()),"is-loading":e.isLoading},null,8,["label","is-loading"])])])])],64)):(a(),n("div",Pe,[o("div",Be,[d(f,{class:"no-margin",label:"Заказ нельзя продлить"})])]))])):(a(),n("div",Fe,[o("div",xe,[d(f,{label:"Заказ домена не найден"})])]))],64)}const Ee={components:{Multiselect:H,BlockBalanceAgreement:N},async setup(){const s=z(),c=G(),b=R(),e=V();j("emitter");const m=U(!1);function u(){var t,l;m.value=!0,s.DomainOrderPay({DomainOrderID:(t=i.value)==null?void 0:t.ID,DaysToProlong:(l=g.value)==null?void 0:l.DaysToProlong}).then(D=>{let{result:r,error:v}=D;r==="SUCCESS"?e.push("/DomainOrders"):r==="BASKET"&&e.push("/Basket"),m.value=!1})}const h=t=>{t.key==="Enter"&&t.ctrlKey&&u()};W(()=>{document.addEventListener("keyup",h)}),q(()=>{document.removeEventListener("keyup",h)});const i=y(()=>Object.keys(s==null?void 0:s.domainsList).map(t=>s==null?void 0:s.domainsList[t]).find(t=>t.OrderID===b.params.id)),g=y(()=>{var t;return s==null?void 0:s.domainSchemes[(t=i.value)==null?void 0:t.SchemeID]}),f=y(()=>{var t;return c.contractsList[(t=i.value)==null?void 0:t.ContractID]});return await s.fetchDomains(),await s.fetchDomainSchemes(),await c.fetchContracts(),{getDomain:i,getDomainSchemes:g,getContract:f,isLoading:m,orderPay:u}}},qe=M(Ee,[["render",Oe],["__scopeId","data-v-1954f0f7"]]);export{qe as default};
