import{o as openBlock,c as createElementBlock,b as createVNode,a as createBaseVNode,t as toDisplayString,_ as _export_sfc,S as inject,r as ref,i as onMounted,O as onBeforeUnmount}from"./index-4466e2da.js";import{I as IconHelpCircle}from"./IconHelpCircle-f14224d7.js";import{u as useDeleteStore}from"./globalActions-a65ed06f.js";import{_ as __unplugin_components_0}from"./ButtonDefault-18fa1414.js";const _hoisted_1={class:"modal__body"},_hoisted_2={class:"modal__info"},_hoisted_3={class:"modal__alert-title"};function render(t,o,n,a,d,l){var s;const e=IconHelpCircle,i=__unplugin_components_0;return openBlock(),createElementBlock("div",_hoisted_1,[createVNode(e,{class:"modal__alert-icon"}),createBaseVNode("div",_hoisted_2,[createBaseVNode("div",_hoisted_3,toDisplayString((s=n.data)==null?void 0:s.message),1)]),createVNode(i,{class:"modal__alert-button",onClick:o[0]||(o[0]=c=>a.deleteHosting()),label:"УДАЛИТЬ","is-loading":a.isLoading},null,8,["is-loading"])])}const ModalWindowDeleteItem_vue_vue_type_style_index_0_scoped_55f05b9c_lang="",_sfc_main={components:{IconHelpCircle},props:{data:{type:Object,default:()=>{}}},emits:["modalClose"],setup(props,{emit}){const deleteStore=useDeleteStore(),emitter=inject("emitter"),isLoading=ref(!1);function deleteHosting(){var t,o,n,a,d;if(isLoading.value=!0,props.data&&((t=props.data)!=null&&t.callback)){const l=props.data.callback.match(/RowsIDs:(\d+)/);deleteStore.deleteItem({TableID:(o=props.data)==null?void 0:o.tableID,RowsIDs:l[1]}).then(({result:e,error:i})=>{var s;e==="SUCCESS"&&(emitter.emit((s=props.data)==null?void 0:s.successEmit),emit("modalClose")),isLoading.value=!1})}else props.data?deleteStore.deleteItem({TableID:(n=props.data)==null?void 0:n.tableID,RowsIDs:(a=props.data)==null?void 0:a.id}).then(({result:l})=>{var e;l==="SUCCESS"&&(emitter.emit((e=props.data)==null?void 0:e.successEmit),emit("modalClose")),isLoading.value=!1}):(eval((d=props.data)==null?void 0:d.callback),emit("modalClose"))}const handleKeyup=t=>{t.key==="Enter"&&deleteHosting()};return onMounted(()=>{document.addEventListener("keyup",handleKeyup)}),onBeforeUnmount(()=>{document.removeEventListener("keyup",handleKeyup)}),{deleteHosting,isLoading}}},ModalWindowDeleteItem=_export_sfc(_sfc_main,[["render",render],["__scopeId","data-v-55f05b9c"]]);export{ModalWindowDeleteItem as default};
