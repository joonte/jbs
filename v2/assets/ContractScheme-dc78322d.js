import{j as z,o as _,c as T,b as e,a as t,w as d,d as r,t as y,x as S,k as j,F as A,v as G,p as J,l as K,_ as M,u as Q,a7 as U,e as W,g as p}from"./index-c7c24b76.js";import{u as X}from"./contracts-397b53fe.js";import{u as Y}from"./hosting-ef6b8c8f.js";import{H as F}from"./HostingItem-f236e867.js";import{I as R}from"./IconPlus-64792f9f.js";import{B as q}from"./BlockBalanceAgreement-f11c65ba.js";import{E as Z}from"./EmptyStateBlock-b9aefc49.js";import{_ as $}from"./ButtonDefault-626291b9.js";import{_ as tt}from"./ClausesKeeper-e7acf2fb.js";import"./IconDots-e4b0dd23.js";import"./IconCard-57c0e3d6.js";import"./StatusBadge-8575efce.js";import"./hostStatuses-94d00f20.js";import"./HelperComponent-71bfb594.js";import"./IconArrow-dfacb3d4.js";import"./useTimeFunction-8602dd60.js";import"./bootstrap-vue-next.es-3f66213d.js";import"./OrderIDBadge-0e604e6d.js";import"./IconClose-447d7f82.js";const h=n=>(J("data-v-9fc72117"),n=n(),K(),n),st={class:"section"},ot={class:"container"},et={class:"section-header column"},it={class:"section-label-wrapper"},nt={class:"section-title"},ct={class:"section-label"},at={class:"list grid-list-three"},lt={class:"list-col list-col--sm"},rt={class:"list-item"},_t=h(()=>t("div",{class:"list-item__row"},[t("div",{class:"list-item__title"},"Профиль")],-1)),dt={class:"list-item__row flex flex-column"},mt={class:"list-item__row"},ft={class:"list-col list-col--sm"},gt={class:"list-item"},ut={class:"list-item__row flex space-between"},vt=h(()=>t("div",{class:"list-item__title"},"Баланс",-1)),pt={class:"list-item__simple-balance"},ht={class:"list-item__row flex flex-column"},Ct={key:0,class:"list-item__row"},kt={class:"list-col list-col--sm"},It={class:"list-item"},bt=h(()=>t("div",{class:"list-item__row"},[t("div",{class:"list-item__title"},"Поддержка")],-1)),wt={class:"list-item__row flex flex-column"},Tt={class:"list-item__row"},yt={class:"contracts__section"},St={class:"contracts__section-header"},xt=h(()=>t("div",{class:"contracts__section-title"},"Хостинги",-1)),Bt={class:"contracts__section-list"};function Pt(n,i,u,s,m,v){var o,g,x,B,P,D,H,L,N,E,V,O;const C=q,c=z("router-link"),k=tt,f=$,I=R,b=F,w=Z;return _(),T(A,null,[e(C),t("div",st,[t("div",ot,[t("div",et,[t("div",it,[e(c,{class:"section-label",to:"/Contracts"},{default:d(()=>[r("Договора")]),_:1})]),t("h1",nt,y(((o=s.getProfile)==null?void 0:o.Name)||((g=s.getContract)==null?void 0:g.Customer)),1),t("div",ct,y((H=(D=(B=(x=s.getConfig)==null?void 0:x.Contracts)==null?void 0:B.Types)==null?void 0:D[(P=s.getContract)==null?void 0:P.TypeID])==null?void 0:H.Name),1)]),e(k),t("div",at,[t("div",lt,[t("div",rt,[_t,t("div",dt,[e(c,{class:"item-link",to:`/ContractSettings/${(L=s.getContract)==null?void 0:L.ID}`},{default:d(()=>[r("Настройки")]),_:1},8,["to"]),e(c,{class:"item-link",to:`/ContractDocuments/${(N=s.getContract)==null?void 0:N.ID}`},{default:d(()=>[r("Документы")]),_:1},8,["to"])]),t("div",mt,[(E=s.getContract)!=null&&E.ProfileID?(_(),S(f,{key:0,label:"Редактировать данные",onClick:i[0]||(i[0]=a=>{var l;return s.navigateToEditPage((l=s.getContract)==null?void 0:l.ProfileID)})})):j("",!0)])])]),t("div",ft,[t("div",gt,[t("div",ut,[vt,t("div",pt,y((V=s.getContract)==null?void 0:V.Balance)+" ₽",1)]),t("div",ht,[e(c,{class:"item-link",to:"/Postings"},{default:d(()=>[r("История операций")]),_:1}),e(c,{class:"item-link",to:"/Invoices"},{default:d(()=>[r("Отчетные документы (Счета)")]),_:1})]),((O=s.getContract)==null?void 0:O.TypeID)!="NaturalPartner"?(_(),T("div",Ct,[e(f,{label:"Пополнить баланс",onClick:i[1]||(i[1]=a=>{var l;return s.navigateToBalancePage((l=s.getContract)==null?void 0:l.ID)})})])):j("",!0)])]),t("div",kt,[t("div",It,[bt,t("div",wt,[e(c,{class:"item-link",to:"/Tickets"},{default:d(()=>[r("Тикеты")]),_:1})]),t("div",Tt,[e(f,{label:"Создать тикет",onClick:i[2]||(i[2]=a=>s.navigateToTicketsCreation())})])])])]),t("div",yt,[t("div",St,[xt,t("button",{class:"btn btn-default btn--border small",onClick:i[3]||(i[3]=a=>s.navigateToHostingList())},[e(I),r("Купить еще хостинг")])]),t("div",Bt,[s.getHostingList.length>0?(_(!0),T(A,{key:0},G(s.getHostingList,a=>{var l;return _(),S(b,{"item-data":a,"user-name":(l=s.getContract)==null?void 0:l.Customer,"info-link":`/HostingOrders/${a==null?void 0:a.ID}`},null,8,["item-data","user-name","info-link"])}),256)):(_(),S(w,{key:1,class:"contracts__empty-state",label:"У Вас нет купленного хостинга"}))])])])])],64)}const Dt={components:{HostingItem:F,IconPlus:R,BlockBalanceAgreement:q},async setup(){const n=X(),i=Q(),u=Y(),s=U(),m=W(),v=p(()=>{var o;return(o=n.contractsList)==null?void 0:o[s.params.id]}),C=p(()=>{var o;return n.profileList[(o=v.value)==null?void 0:o.ProfileID]}),c=p(()=>i.ConfigList),k=p(()=>Object.keys(u.hostingList).map(o=>u.hostingList[o]).filter(o=>{var g;return(o==null?void 0:o.ContractID)===((g=v.value)==null?void 0:g.ID)}).reverse());function f(o){m.push(`/Balance/${o}`)}function I(){m.push({name:"default.NewTicket"})}function b(o){m.push(`/ContractEdit/${o}`)}function w(){m.push("/HostingSchemes")}return await n.fetchContracts(),await n.fetchProfiles(),await u.fetchHostingOrders(),{getConfig:c,getProfile:C,getContract:v,getHostingList:k,navigateToBalancePage:f,navigateToHostingList:w,navigateToEditPage:b,navigateToTicketsCreation:I}}},Xt=M(Dt,[["render",Pt],["__scopeId","data-v-9fc72117"]]);export{Xt as default};
