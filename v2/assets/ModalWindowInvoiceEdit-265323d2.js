import{o as a,c as l,F as y,x as E,n as N,a as v,t as B,k as L,b as T,p as V,l as F,_ as O,u as W,r as p,S as z,g as M}from"./index-83b4b7ba.js";import{_ as j}from"./ButtonDefault-dc248ec6.js";import{u as U}from"./invoices-7828d146.js";const q=n=>(V("data-v-8bbb0637"),n=n(),F(),n),G={class:"list-part"},H=q(()=>v("div",{class:"list-item__title"},"Платежные системы",-1)),J={key:0,class:"list-row grid-net"},K=["onClick"],Q=["src"],R={class:"list-item__image-title"},X={class:"modal__error"};function Y(n,i,S,t,d,f){const m=j;return a(),l("div",G,[H,t.filterActiveSystems?(a(),l("div",J,[(a(!0),l(y,null,E(t.filterActiveSystems,s=>(a(),l(y,null,[(a(!0),l(y,null,E(s,e=>{var u;return a(),l(y,null,[e!=null&&e.IsActive?(a(),l("div",{key:0,class:N(["list-item",{"list-item_active":((u=t.paymentSystem)==null?void 0:u.id)===(e==null?void 0:e.ID)}]),onClick:g=>t.paymentSystem={id:e==null?void 0:e.ID,type:e==null?void 0:e.Source}},[v("img",{class:"list-item__image",src:e==null?void 0:e.Image},null,8,Q),v("div",R,B(e==null?void 0:e.Description),1)],10,K)):L("",!0)],64)}),256))],64))),256))])):L("",!0),v("div",X,B(t.errorMessage),1),T(m,{label:"Выбрать","is-loading":t.isLoading,onClick:i[0]||(i[0]=s=>t.switchPaymentSystem())},null,8,["is-loading"])])}const Z={components:{ButtonDefault:j},props:{data:{type:Object,default:()=>{}}},emits:["modalClose"],setup(n,{emit:i}){const S=W(),t=U(),d=p(!1),f=p(null),m=z("emitter"),s=M(()=>S.ConfigList),e=p(null),u=M(()=>{var r,c;return(r=s.value)!=null&&r.PaymentSystems?Object.keys((c=s.value)==null?void 0:c.PaymentSystems).map(o=>{var _,I,b,C,h,k,D,P,w,x,A;return String((b=(I=(_=s.value)==null?void 0:_.PaymentSystems)==null?void 0:I[o])==null?void 0:b.IsActive)==="1"&&((P=(k=(h=(C=s.value)==null?void 0:C.PaymentSystems)==null?void 0:h[o])==null?void 0:k.ContractsTypes)==null?void 0:P[(D=n.data)==null?void 0:D.TypeID])==="1"?(A=(x=(w=s.value)==null?void 0:w.PaymentSystems)==null?void 0:x[o])==null?void 0:A.Collations:null}).filter(o=>o!==null):null});function g(){var r,c,o;e.value!==null&&(d.value=!0,t.InvoiceEdit({InvoiceID:(r=n.data)==null?void 0:r.ItemID,PaymentSystemID:(c=e.value)==null?void 0:c.type,Summ:(o=n.data)==null?void 0:o.Summ}).then(_=>{_==="SUCCESS"&&(i("modalClose"),m.emit("updateInvoicesTable")),d.value=!1}))}return{getConfig:s,errorMessage:f,filterActiveSystems:u,switchPaymentSystem:g,isLoading:d,paymentSystem:e}}},se=O(Z,[["render",Y],["__scopeId","data-v-8bbb0637"]]);export{se as default};
