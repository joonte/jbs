import{_ as f}from"./ButtonDefault-CgQ13ecW.js";import{c as N,o as m,a as l,t as b,I as v,P as y,D,i as U,b as g,y as C,r as _,h as u,v as k}from"./index-DakgQwZZ.js";import{u as E}from"./globalActions-BG7EYttN.js";import{_ as I}from"./_plugin-vue_export-helper-DlAUqK2U.js";const S={props:{data:{type:Object,default:()=>{}}},emits:["modalClose"],setup(e,{emit:t}){const o=E(),a=C("emitter"),s=_(null),c=_(!1);function n(){o?.NoticeEdit({TableID:e.data?.noteTable,RowID:e.data?.OrderID,UserNotice:s.value}).then(i=>{i==="SUCCESS"&&(t("modalClose"),e?.data?.emit&&a.emit(e?.data?.emit))})}function d(){o?.NoticeEdit({TableID:e.data?.noteTable,RowID:e.data?.OrderID,UserNotice:""}).then(i=>{i==="SUCCESS"&&(t("modalClose"),e?.data?.emit&&a.emit(e?.data?.emit))})}u(()=>{s.value=e?.data?.UserNotice});const r=i=>{i.key==="Enter"&&(i.ctrlKey||i.metaKey)&&n()};return u(()=>{document.addEventListener("keyup",r)}),k(()=>{document.removeEventListener("keyup",r)}),{inputValue:s,isLoading:c,editNotice:n,deleteNotice:d}}},h={class:"modal__body"},V={class:"list-item__title"},x={class:"modal__input-row"},w={class:"list-form_col list-form_col--xl"},B={class:"search-field form-field"},L={class:"modal__buttons"};function T(e,t,o,a,s,c){const n=f;return m(),N("div",h,[l("div",V,"Редактирование примечания, заказ # "+b(o.data?.OrderID),1),l("div",x,[l("div",w,[l("div",B,[v(l("textarea",{"onUpdate:modelValue":t[0]||(t[0]=d=>a.inputValue=d)},null,512),[[y,a.inputValue]])])])]),l("div",L,[o.data?.UserNotice!==null&&o.data?.UserNotice!==""?(m(),D(n,{key:0,class:"modal__button",label:"Удалить","is-loading":a.isLoading,onClick:t[1]||(t[1]=d=>a.deleteNotice())},null,8,["is-loading"])):U("",!0),g(n,{class:"modal__button",label:o.data?.UserNotice!==null&&o.data?.UserNotice!==""?"Изменить":"Добавить","is-loading":a.isLoading,onClick:t[2]||(t[2]=d=>a.editNotice())},null,8,["label","is-loading"])])])}const R=I(S,[["render",T],["__scopeId","data-v-d3f250ae"]]);export{R as default};
