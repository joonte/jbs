import{m as U,r as F,Y,v as q}from"./bootstrap-vue-next-CDL_Y1-V.js";import{_ as z}from"./IconDots-DVrfRZR8.js";import{_ as G}from"./Helper-CRfE-MmR.js";import{_ as J}from"./IconCard-CoE2j-B8.js";import{_ as K}from"./IconRotate-kxmItrUB.js";import{_ as Q}from"./StatusBadge-CiYQLfxg.js";import{_ as W}from"./OrderIDBadge-BO42kMt3.js";import{d as X,r as w,p as Z,y as tt,G as et,c as g,o as v,a as o,I as nt,b as a,J as ot,w as r,e as d,t as c,F as at,j as st,n as C,i as it}from"./index-DakgQwZZ.js";import{f as $}from"./time-DenPiOX5.js";import{_ as rt}from"./_plugin-vue_export-helper-DlAUqK2U.js";const dt={class:"hosting-item"},mt={class:"hosting-item__row"},lt={class:"hosting-item__row"},ut={class:"hosting-item__person"},ct={class:"hosting-item__row"},Dt={class:"hosting-item__list"},ft=["innerHTML"],_t={class:"hosting-status__info"},It={class:"hosting-status__date"},bt={class:"hosting-item__controls"},gt={class:"ico"},vt={class:"btn btn--dots"},St={__name:"VpsItem",props:{params:{type:Array,default:()=>[]},itemData:{type:Object,default:()=>{}},isLast:{type:Boolean,default:!1},userName:{type:String,default:""},isSeveral:{type:Boolean,default:!1},selectedRows:{type:Object,required:!0}},emits:["manage","transfer","delete"],setup(e,{emit:h}){const s=e,S=h,y=X(),D=w({...s.selectedRows}),V=()=>{S("update-selected-rows",D.value)};Z(()=>s.selectedRows,n=>{D.value={...n}},{deep:!0});const f=tt("emitter"),_=w(!1);function k(n){if(!n)return $(new Date);const t=new Date,I=new Date(t.getTime()+n*24*60*60*1e3);return $(I)}function P(){S("delete",s.itemData?.ID,s.itemData?.OrderID)}function R(n){y.push(`/VPSOrders/${n}`)}function x(){f.emit("open-modal",{component:"OrdersTransfer",data:{ServiceOrderID:s.itemData?.ID,ServiceID:s.itemData?.ServiceID}})}function N(n){f.emit("open-modal",{component:"StatusHistory",data:{modeID:"VPSOrders",rowID:n}})}function L(){f.emit("open-modal",{component:"OrderPasswordChange",data:{OrderID:s.itemData?.ID,ServiceID:s.itemData?.ServiceID,emitEvent:"updateVPSIDPage",Login:s.itemData?.Login}})}function B(){function n(t){_.value=t}f.emit("open-modal",{component:"ReloadVPS",data:{VPSOrderID:s.itemData?.ID,isReloading:_.value,onReloadStatusChange:n}})}function M(){S("manage",{ServiceOrderID:s.itemData?.ID,ServiceID:s.itemData?.ServiceID,OrderID:s.itemData?.OrderID})}function T(n){if(!n)return"";const t=new Date(parseInt(n)*1e3),p=new Date-t,m=Math.floor(p/1e3),l=Math.floor(m/60),u=Math.floor(l/60),O=Math.floor(u/24);return m<60?`${m} сек. от статуса`:l<60?`${l} мин. от статуса`:u<24?`${u} ч. от статуса`:`${O} дн. от статуса`}return(n,t)=>{const I=U,p=W,m=et("router-link"),l=Q,u=K,O=J,j=G,H=z,b=F,A=Y,E=q;return v(),g("div",dt,[o("div",mt,[nt(a(I,{id:"checkbox-"+e.itemData?.OrderID,modelValue:D.value[e.itemData?.OrderID],"onUpdate:modelValue":t[0]||(t[0]=i=>D.value[e.itemData?.OrderID]=i),name:"checkbox-"+e.itemData?.OrderID,onChange:V},null,8,["id","modelValue","name"]),[[ot,e.isSeveral]]),a(p,{orderID:e.itemData?.OrderID,onClick:t[1]||(t[1]=i=>R(e.itemData?.OrderID))},null,8,["orderID"]),a(m,{class:"hosting-item__name",to:`/VPSOrders/${e.itemData.OrderID}`},{default:r(()=>[d(c(e.itemData.IP||e.itemData.Domain),1)]),_:1},8,["to"])]),o("div",lt,[o("div",ut,c(e.userName),1)]),o("div",ct,[o("ul",Dt,[(v(!0),g(at,null,st(e.params,i=>(v(),g("li",{key:i?.text,innerHTML:i?.text},null,8,ft))),128))]),o("button",{class:"btn btn--md btn--bold btn-manage",onClick:t[2]||(t[2]=i=>M())},"Управлять заказом"),o("div",_t,[o("div",{class:C(["hosting-item__date",{danger:Number(e.itemData?.DaysRemainded)<14}])},c(k(e.itemData?.DaysRemainded))+" • "+c(e.itemData?.DaysRemainded||0)+" дн. ",3),a(l,{class:"status-badge",status:e.itemData?.StatusID,"status-table":"VPSOrders",onClick:t[3]||(t[3]=i=>N(e.itemData?.ID))},null,8,["status"]),o("div",It,c(T(e.itemData?.StatusDate)),1)])]),o("div",bt,[e.itemData?.StatusID==="Active"?(v(),g("button",{key:0,class:C(["btn btn--md btn--border btn--rotate btn--rotate_green button-large btn-reload",{"btn--rotate_gray":e.itemData?.StatusID!=="Active"||_.value,"btn--rotate_loading":_.value}]),onClick:B},[t[9]||(t[9]=d(" Включен ",-1)),o("span",gt,[a(u)]),t[10]||(t[10]=o("div",{class:"hosting-item__title"},"Перезагрузить виртуальный сервер",-1))],2)):it("",!0),o("button",{class:"btn btn--md btn--bold",onClick:t[4]||(t[4]=i=>n.$router.push(`/VPSOrders/${e.itemData?.OrderID}/SchemeChange`))}," Изменить тариф "),o("button",{class:"btn btn--md btn--bold",onClick:t[5]||(t[5]=i=>n.$router.push(`/VPSOrderPay/${e.itemData?.OrderID}`))},[a(O),t[11]||(t[11]=d(" Оплатить ",-1))]),a(j,{"user-notice":e.itemData?.UserNotice,id:e.itemData?.OrderID,position:e.isLast?"bottom":"top",emit:"updateVPSList"},null,8,["user-notice","id","position"]),a(E,{class:"dropdown-dots",right:""},{"button-content":r(()=>[o("span",vt,[a(H)])]),default:r(()=>[a(b,{onClick:t[6]||(t[6]=i=>x())},{default:r(()=>t[12]||(t[12]=[d("Передать на другой аккаунт",-1)])),_:1,__:[12]}),a(b,{onClick:t[7]||(t[7]=i=>L())},{default:r(()=>t[13]||(t[13]=[d("Сменить пароль",-1)])),_:1,__:[13]}),a(b,null,{default:r(()=>[a(m,{to:`/VPSOrders/${e.itemData?.OrderID}/SchemeChange`},{default:r(()=>t[14]||(t[14]=[d("Изменить тариф",-1)])),_:1,__:[14]},8,["to"])]),_:1}),a(A),a(b,{class:"color-red",onClick:t[8]||(t[8]=i=>P())},{default:r(()=>t[15]||(t[15]=[d("Удалить",-1)])),_:1,__:[15]})]),_:1})])])}}},Rt=rt(St,[["__scopeId","data-v-1b93a2db"]]);export{Rt as _};
