import{_ as Z,a as ee}from"./CopyToClipboard.vue_vue_type_script_setup_true_lang-BSBKPmEv.js";import{_ as te}from"./StatusBadge-CiYQLfxg.js";import{_ as se}from"./ServicesContractBalanceBlock-p9zlFW-0.js";import{_ as re}from"./ClausesKeeper-Cjjq7JUL.js";import{_ as ae}from"./ButtonDefault-CgQ13ecW.js";import{_ as oe}from"./BlockBalanceAgreement-BNU6bIWW.js";import{u as ne,r as B,E as D,f as p,g as le,y as ie,h as ue,c as u,b as d,a as s,D as y,i,t as m,I as de,K as ce,F as _,e as ve,d as me,o}from"./index-DakgQwZZ.js";import{u as pe}from"./postings-CaUZn88T.js";import{u as Se}from"./services-De9u6bRn.js";import{u as Ie}from"./resetServer-DJv4Ps11.js";import{u as De}from"./globalActions-BG7EYttN.js";import{_ as _e}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./IconCopy-DZ-eqbI0.js";import"./IconProfile-C5q7Wd6m.js";import"./IconCard-CoE2j-B8.js";import"./contracts-C-xJvA56.js";import"./IconClose-Camrw-uN.js";const we={class:"section"},ge={class:"container"},fe={class:"section-header"},Oe={class:"section-title"},he={class:"section-label"},Pe={class:"list"},be={class:"list-col list-col--md"},ke={class:"list-item"},ye={class:"list-item__row"},Ce={class:"list-item__title"},xe={class:"list-item__status"},Ne={class:"list-item__row"},$e={class:"list-item__ul"},Ae={key:0},Me={class:"list-item__row"},Le={class:"btn btn--border btn--switch"},Ge={key:0,class:"list-col list-col--md"},Be={class:"tw-grid tw-grid-cols-3 tw-gap-6 md:tw-border md:tw-border-gray-200 md:tw-rounded-md md:tw-p-6"},Ee={class:"tw-col-span-3 tw-flex tw-items-center tw-justify-between tw-gap-2"},Te={class:"tw-col-span-2 tw-flex tw-items-center tw-gap-1"},He={class:"tw-break-all"},Ve={class:"tw-col-span-2 tw-flex tw-items-center tw-gap-1"},je={class:"tw-break-all"},Re={class:"tw-col-span-2 tw-flex tw-items-center tw-gap-1"},Fe={class:"tw-col-span-2 tw-flex tw-flex-wrap tw-items-center tw-gap-2"},qe={key:0,class:"password-hidden"},Ue={key:0,class:"tw-col-span-2 tw-flex tw-items-center tw-gap-1"},Xe={class:"tw-col-span-2 tw-flex tw-items-center tw-gap-1"},Ke={__name:"AdditionalServicesID",async setup(We){let n,l;const w=le(),b=me(),a=Se(),C=Ie(),N=De(),x=pe(),O=ne(),k=B(!1),$=B(!1),g=ie("emitter");[n,l]=D(()=>a.fetchServices()),await n,l(),[n,l]=D(()=>a.fetchDNSmanagerOrders()),await n,l(),[n,l]=D(()=>a.fetchISPswOrders()),await n,l(),[n,l]=D(()=>a.fetchExtraIPOrders()),await n,l();const t=p(()=>Object.keys(O?.userOrders).map(r=>O?.userOrders[r]).find(r=>r.ID===w.params.id)),E=p(()=>x?.servicesList[O.userOrders[t.value?.DependOrderID]?.ServiceID]),I=p(()=>x?.servicesList[t.value?.ServiceID]),S=p(()=>Object.keys(a?.ISPswOrdersList).map(r=>a?.ISPswOrdersList[r]).find(r=>r.OrderID===t.value?.ID)),c=p(()=>Object.keys(a?.DNSmanagerOrdersList).map(r=>a?.DNSmanagerOrdersList[r]).find(r=>r.OrderID===t.value?.ID)),A=p(()=>a?.additionalServicesScheme),M=p(()=>C?.serverGroupsList?.Servers?.[c.value?.ServerID]),L=p(()=>C?.serverGroupsList?.Servers?.[S.value?.ServerID]);g.on("updateDNSManagerPage",()=>{a.fetchDNSmanagerOrders()});const T=p(()=>{const r=c.value;return r&&A.value.DNSmanager[r.SchemeID]||null}),H=p(()=>{const r=S.value;return r&&A.value.ISPsw[r.SchemeID]||null});function V(r,e){let h="";switch(e){case"Default":h="Orders";break;default:h=e+"Orders";break}g.emit("open-modal",{component:"StatusHistory",data:{modeID:h,rowID:r}})}function j(){g.emit("open-modal",{component:"OrderPasswordChange",data:{OrderID:c.value?.ID,ServiceID:c.value?.ServiceID,emitEvent:"updateDNSManagerPage"}})}function R(){g.emit("open-modal",{component:"OrdersTransfer",data:{ServiceOrderID:t.value?.ID,ServiceID:t.value?.ServiceID}})}function F(){N.OrderManageHosting({ServiceOrderID:c.value?.ID,OrderID:c.value?.OrderID,ServiceID:c.value?.ServiceID,XMLHttpRequest:"yes"})}function q(){N.OrderManageHosting({ServiceOrderID:S.value?.ID,OrderID:S.value?.OrderID,ServiceID:S.value?.ServiceID,XMLHttpRequest:"yes"})}function U(){t?.value?.ServiceID==="50000"?b.push(`/ExtraIPOrderPay/${w.params.id}`):t?.value?.ServiceID==="51000"?b.push(`/ISPswOrderPay/${w.params.id}`):t?.value?.ServiceID==="52000"?b.push(`/DNSmanagerOrderPay/${w.params.id}`):b.push(`/ServiceOrderPay/${w.params.id}`)}function X(){O.prolongOrder({IsAutoProlong:k.value?0:1,OrderID:t.value?.ID})}function G(){g.emit("open-modal",{component:"ISPswSchemeChange",data:{ISPswID:t.value?.ID,ServerGroup:H.value?.ServersGroupID,Code:I.value?.Code}})}function K(){W()}function W(){g.emit("open-modal",{component:"DNSOrderSchemeChange",data:{DNSID:t.value?.ID,ServerGroup:T.value?.ServersGroupID,Code:I.value?.Code}})}return ue(async()=>{t.value?.ServiceID==="52000"&&(await a.fetchAdditionalServiceScheme(I.value?.Code),await a.fetchDNSmanagerOrders()),t.value?.ServiceID==="51000"&&(await a.fetchAdditionalServiceScheme(I.value?.Code),await a.fetchISPswOrders()),t.value?.ServiceID==="50000"&&(await a.fetchAdditionalServiceScheme(I.value?.Code),await a.fetchExtraIPOrders()),w.name==="ISPswOrdersIdSchemeChange"&&G()}),[n,l]=D(()=>O.fetchUserOrders().then(()=>{k.value=t.value?.IsAutoProlong})),await n,l(),[n,l]=D(()=>x.fetchServices()),await n,l(),[n,l]=D(()=>C.fetchServerGroups()),await n,l(),(r,e)=>{const h=oe,P=ae,z=re,J=se,Q=te,f=Z,Y=ee;return o(),u(_,null,[d(h),s("section",we,[s("div",ge,[s("div",fe,[s("h1",Oe,m(I.value?.Name),1),s("div",he,"# "+m(t.value?.ID),1),t.value?.ServiceID==="52000"?(o(),y(P,{key:0,class:"section-scheme",label:"Изменить тариф",onClick:e[0]||(e[0]=v=>K())})):i("",!0),t.value?.ServiceID==="51000"?(o(),y(P,{key:1,class:"section-scheme",label:"Изменить тариф",onClick:e[1]||(e[1]=v=>G())})):i("",!0)]),d(z),s("div",Pe,[d(J,{"contract-id":t.value?.ContractID,onTransfer:e[2]||(e[2]=v=>R())},null,8,["contract-id"]),s("div",be,[s("div",ke,[s("div",ye,[s("div",Ce,m(I.value?.Name),1),s("div",xe,[d(Q,{status:t.value?.StatusID,"status-table":"Orders",onClick:e[3]||(e[3]=v=>V(t.value?.ServiceOrderID,t.value?.Code))},null,8,["status"])])]),s("div",Ne,[s("ul",$e,[t.value?.DependOrderID&&t.value?.DependOrderID!=="0"?(o(),u("li",Ae," Относится к заказу "+m(t.value?.DependOrderID)+"/"+m(E.value?.Name),1)):i("",!0)])]),s("div",Me,[d(P,{label:t.value?.StatusID==="ClaimForRegister"||t.value?.StatusID==="Waiting"?"Оплатить":"Продлить",onClick:e[4]||(e[4]=v=>U())},null,8,["label"]),s("label",Le,[de(s("input",{type:"checkbox","onUpdate:modelValue":e[5]||(e[5]=v=>k.value=v),onInput:e[6]||(e[6]=v=>X())},null,544),[[ce,k.value]]),e[11]||(e[11]=s("span",{class:"btn-switch__text"},"Автопродление",-1)),e[12]||(e[12]=s("span",{class:"btn-switch__toggle"},null,-1))])])])]),t.value?.ServiceID==="52000"||t.value?.ServiceID==="51000"?(o(),u("div",Ge,[s("div",Be,[s("div",Ee,[e[13]||(e[13]=s("div",{class:"tw-text-2xl"},"Панель управления",-1)),t.value?.ServiceID==="52000"?(o(),y(P,{key:0,class:"tw-text-xs tw-h-10",onClick:e[7]||(e[7]=v=>F()),label:"Вход"})):i("",!0),t.value?.ServiceID==="51000"?(o(),y(P,{key:1,class:"tw-text-xs tw-h-10",onClick:e[8]||(e[8]=v=>q()),label:"Вход"})):i("",!0)]),t.value?.ServiceID==="51000"?(o(),u(_,{key:0},[e[14]||(e[14]=s("div",null,"Адрес",-1)),s("div",Te,[s("div",He,m(S.value?.ControlPanel),1),d(f,{value:S.value?.ControlPanel},null,8,["value"])])],64)):i("",!0),t.value?.ServiceID==="52000"?(o(),u(_,{key:1},[e[15]||(e[15]=s("div",null,"Адрес",-1)),s("div",Ve,[s("div",je,m(`https://${M.value?.Address}/manager`),1),d(f,{value:`https://${M.value?.Address}/manager`},null,8,["value"])])],64)):i("",!0),t.value?.ServiceID==="52000"?(o(),u(_,{key:2},[e[16]||(e[16]=s("div",null,"Логин",-1)),s("div",Re,[s("div",null,m(c.value?.Login),1),d(f,{value:c.value?.Login},null,8,["value"])])],64)):i("",!0),t.value?.ServiceID==="52000"?(o(),u(_,{key:3},[e[18]||(e[18]=s("div",null,"Пароль",-1)),s("div",Fe,[$.value?(o(),u("span",qe,m(c.value?.Password),1)):(o(),u("button",{key:1,class:"btn btn--border btn--md tw-h-8 tw-gap-1",onClick:e[9]||(e[9]=v=>$.value=!0)},[d(Y),e[17]||(e[17]=ve(" Показать ",-1))])),s("button",{class:"btn btn--border btn--md tw-h-8",onClick:e[10]||(e[10]=v=>j())},"Сменить пароль"),d(f,{value:c.value?.Password},null,8,["value"])])],64)):i("",!0),t.value?.ServiceID==="51000"?(o(),u(_,{key:4},[e[19]||(e[19]=s("div",null,"FTP, POP3, SMTP, IMAP",-1)),t.value?.ServiceID==="51000"?(o(),u("div",Ue,[s("div",null,m(L.value?.Address),1),d(f,{value:L.value?.Address},null,8,["value"])])):i("",!0)],64)):i("",!0),t.value?.ServiceID==="51000"?(o(),u(_,{key:5},[e[20]||(e[20]=s("div",null,"IP адрес",-1)),s("div",Xe,[s("div",null,m(S.value?.IP),1),d(f,{value:S.value?.IP},null,8,["value"])])],64)):i("",!0)])])):i("",!0)])])])],64)}}},vt=_e(Ke,[["__scopeId","data-v-0a010dcc"]]);export{vt as default};
