import{o as v,c as y,a as c,t as U,Z as k,af as C,y as D,k as E,b as I,_ as g,S as x,r as N,i as b,O as V}from"./index-b5b5ce3d.js";import{u as h}from"./globalActions-6936f67f.js";import{_ as w}from"./ButtonDefault-0006f72a.js";const S={class:"modal__body"},B={class:"list-item__title"},L={class:"modal__input-row"},O={class:"list-form_col list-form_col--xl"},T={class:"search-field form-field"},M={class:"modal__buttons"};function j(e,i,a,n,m,r){var f,_,t,o,l;const s=w;return v(),y("div",S,[c("div",B,"Редактирование примечания, заказ # "+U((f=a.data)==null?void 0:f.OrderID),1),c("div",L,[c("div",O,[c("div",T,[k(c("textarea",{"onUpdate:modelValue":i[0]||(i[0]=d=>n.inputValue=d)},null,512),[[C,n.inputValue]])])])]),c("div",M,[((_=a.data)==null?void 0:_.UserNotice)!==null&&((t=a.data)==null?void 0:t.UserNotice)!==""?(v(),D(s,{key:0,class:"modal__button",label:"Удалить","is-loading":n.isLoading,onClick:i[1]||(i[1]=d=>n.deleteNotice())},null,8,["is-loading"])):E("",!0),I(s,{class:"modal__button",label:((o=a.data)==null?void 0:o.UserNotice)!==null&&((l=a.data)==null?void 0:l.UserNotice)!==""?"Изменить":"Добавить","is-loading":n.isLoading,onClick:i[2]||(i[2]=d=>n.editNotice())},null,8,["label","is-loading"])])])}const R={props:{data:{type:Object,default:()=>{}}},emits:["modalClose"],setup(e,{emit:i}){const a=h(),n=x("emitter"),m=N(null),r=N(!1);function s(){var t,o;a==null||a.NoticeEdit({TableID:(t=e.data)==null?void 0:t.noteTable,RowID:(o=e.data)==null?void 0:o.OrderID,UserNotice:m.value}).then(l=>{var d,u;l==="SUCCESS"&&(i("modalClose"),(d=e==null?void 0:e.data)!=null&&d.emit&&n.emit((u=e==null?void 0:e.data)==null?void 0:u.emit))})}function f(){var t,o;a==null||a.NoticeEdit({TableID:(t=e.data)==null?void 0:t.noteTable,RowID:(o=e.data)==null?void 0:o.OrderID,UserNotice:""}).then(l=>{var d,u;l==="SUCCESS"&&(i("modalClose"),(d=e==null?void 0:e.data)!=null&&d.emit&&n.emit((u=e==null?void 0:e.data)==null?void 0:u.emit))})}b(()=>{var t;m.value=(t=e==null?void 0:e.data)==null?void 0:t.UserNotice});const _=t=>{t.key==="Enter"&&s()};return b(()=>{document.addEventListener("keyup",_)}),V(()=>{document.removeEventListener("keyup",_)}),{inputValue:m,isLoading:r,editNotice:s,deleteNotice:f}}},q=g(R,[["render",j],["__scopeId","data-v-ab7878d8"]]);export{q as default};
