import{j as C,o as P,c as T,b as s,a as e,w as r,d as p,t as w,F as V,p as H,l as N,_ as R,f as j,S as M,e as E,g as I}from"./index-83b4b7ba.js";import{u as L}from"./postings-05f51b78.js";import{u as U}from"./contracts-623ec7a8.js";import{I as O,a as B,b as F,c as $}from"./IconWeb-9e7fba56.js";import{S as x}from"./StatusBadge-0d170ac0.js";import{B as W}from"./BlockBalanceAgreement-c5fad736.js";import{C as q}from"./bootstrap-vue-next.es-8f3ae81a.js";import{_ as z}from"./ButtonDefault-dc248ec6.js";import{_ as G}from"./ClausesKeeper-55c14b7f.js";import"./IconArrow-80c72216.js";import"./IconClose-86aafc4e.js";const J=[{key:"ID",label:"Заказ",variant:"td-gray td-order"},{key:"ContractID",label:"Договор",variant:"td-blue"},{key:"ServiceID",label:"Услуга",variant:"td-gray td-order"},{key:"StatusID",label:"Статус",sortable:!0,variant:"td-gray td-order"},{key:"controls",label:"",variant:"td-controls"}],K={Deleted:{id:1,label:"Удален",color:"#DF5747",background:"#DF57471A"},Suspended:{id:2,label:"Заблокирован",color:"#DF5747",background:"#DF57471A"},OnService:{id:3,label:"Сервер на обслуживании",color:"#FFC107",background:"rgba(255,193,7,0.1)"}},_=o=>(H("data-v-5f00f673"),o=o(),N(),o),Q={class:"section"},X={class:"container"},Y=_(()=>e("div",{class:"section-header"},[e("h1",{class:"section-title"},"Домашняя страница")],-1)),Z={class:"list-grid-three-col"},ee={class:"list-col"},te={class:"list-item"},se=_(()=>e("div",{class:"list-item__row"},[e("div",{class:"list-item__title"},"Услуги")],-1)),oe={class:"list-col"},ae={class:"list-item"},ne=_(()=>e("div",{class:"list-item__row"},[e("div",{class:"list-item__title"},"Мой офис")],-1)),ce={class:"list-item__row icon-row"},re={class:"list-col"},ie={class:"list-item"},le=_(()=>e("div",{class:"list-item__row"},[e("div",{class:"list-item__title"},"Поддержка")],-1)),de={class:"list-item__row icon-row"},_e=_(()=>e("div",{class:"section-header"},[e("h2",{class:"sub-section-title"},"Требует внимания")],-1)),ue=_(()=>e("span",{class:"td-mobile"},"Заказ",-1)),me={class:"d-block"},pe=_(()=>e("span",{class:"td-mobile"},"Договор",-1)),ve=_(()=>e("span",{class:"td-mobile"},"Услуга",-1)),fe={class:"d-block"},be=_(()=>e("span",{class:"td-mobile"},"Статус",-1));function ge(o,c,v,i,g,k){const S=C("BalanceAgreement"),f=G,D=O,l=C("router-link"),h=B,a=F,t=$,d=z,u=x,A=q;return P(),T(V,null,[s(S),e("div",Q,[e("div",X,[Y,s(f,{partition:"Header:/Home"}),e("div",Z,[e("div",ee,[e("div",te,[se,s(l,{class:"list-item__row icon-row",to:"/HostingOrders"},{default:r(()=>[s(D),p("Заказать хостинг")]),_:1}),s(l,{class:"list-item__row icon-row",to:"/DomainOrders"},{default:r(()=>[s(h),p("Заказать домен")]),_:1}),s(l,{class:"list-item__row icon-row",to:"/DSOrders"},{default:r(()=>[s(a),p("Заказать выделенный сервер")]),_:1}),s(l,{class:"list-item__row icon-row",to:"/VPSOrders"},{default:r(()=>[s(t),p("Заказать VPS/VDS сервер")]),_:1})])]),e("div",oe,[e("div",ae,[e("div",null,[ne,s(l,{class:"list-item__row icon-row",to:"/Contracts"},{default:r(()=>[p("Мои договора")]),_:1})]),e("div",ce,[s(d,{label:"Создать договор",onClick:c[0]||(c[0]=n=>o.$router.push("/ContractMake"))})])])]),e("div",re,[e("div",ie,[e("div",null,[le,s(l,{class:"list-item__row icon-row",to:"/Tickets"},{default:r(()=>[p("Тикеты")]),_:1}),s(l,{class:"list-item__row icon-row",to:"/Contacts"},{default:r(()=>[p("Контакты")]),_:1})]),e("div",de,[s(d,{label:"Создать тикет",onClick:c[1]||(c[1]=n=>o.$router.push("/NewTicket"))})])])])]),_e,s(A,{class:"basic-table",items:i.getOrders,fields:i.dashboardTableFields,"show-empty":!0,"per-page":5,page:1,"empty-text":"Пока не требуется никаких действий","empty-filtered-text":"Пока не требуется никаких действий",onRowClicked:c[2]||(c[2]=(n,m,b)=>i.navigateToOrderPage(n,b))},{"cell(ID)":r(n=>[ue,e("span",me,w(n.value),1)]),"cell(ContractID)":r(n=>{var m;return[pe,e("span",null,w((m=i.getContracts[n.value])==null?void 0:m.Customer),1)]}),"cell(ServiceID)":r(n=>{var m;return[ve,e("span",fe,w((m=i.getServices[n.value])==null?void 0:m.Name),1)]}),"cell(StatusID)":r(n=>[be,s(u,{class:"clickable-element",status:n.value,"status-table":"Orders",onClick:m=>{var b,y;return i.openHistoryStatuses((b=n.item)==null?void 0:b.ServiceOrderID,(y=n.item)==null?void 0:y.Code)}},null,8,["status","onClick"])]),_:1},8,["items","fields"])])])],64)}const Se={components:{IconServer:O,IconDedicatedServers:F,IconWeb:B,IconVPS:$,StatusBadge:x,BalanceAgreement:W},async setup(){const o=j(),c=L(),v=U(),i=M("emitter"),g=E(),k=I(()=>{var a;return(a=Object.keys(o==null?void 0:o.userOrders).map(t=>o==null?void 0:o.userOrders[t]))==null?void 0:a.reverse().filter(t=>(t==null?void 0:t.StatusID)==="Deleted"||(t==null?void 0:t.StatusID)==="Suspended"||(t==null?void 0:t.StatusID)==="OnService"||(t==null?void 0:t.DaysRemainded)>0&&(t==null?void 0:t.DaysRemainded)<14)}),S=I(()=>v==null?void 0:v.contractsList),f=I(()=>c==null?void 0:c.servicesList);function D(a,t){var d;if(!t.target.closest("button, a, .clickable-element")){let u=(d=f.value[a.ServiceID])==null?void 0:d.Code;u==="Default"||u==="ExtraIP"||u==="ISPsw"||u==="DNSmanager"?g.push(`/AdditionalServices/${a.ID}`):g.push(`/${u}Orders/${a.ID}`)}}function l(a){i.emit("open-modal",{component:"DeleteItem",data:{id:a,message:`Вы действительно хотите удалить заказ #${a}?`,tableID:"Orders"}})}function h(a,t){let d="";t==="Default"?d="Orders":d=t+"Orders",i.emit("open-modal",{component:"StatusHistory",data:{modeID:d,rowID:a}})}return await o.fetchUserOrders(),await c.fetchServices(),await v.fetchContracts(),{getOrders:k,getContracts:S,getServices:f,dangerStatuses:K,dashboardTableFields:J,deleteItem:l,navigateToOrderPage:D,openHistoryStatuses:h}}},xe=R(Se,[["render",ge],["__scopeId","data-v-5f00f673"]]);export{xe as default};
