import{k as T,o as w,c as O,a as c,Z as A,ab as E,b as n,w as m,d as f,t as I,F,y as P,n as q,l as Z,_ as G,e as J,U as K,r as Q,j as W}from"./index-aeb1df1e.js";import{_ as X}from"./HelperComponent-470cfccf.js";import{S as z}from"./StatusBadge-ca078fa4.js";import{I as Y}from"./IconRotate-7f250028.js";import"./dedicatedServer-1b91e01e.js";import{f as U}from"./useTimeFunction-8602dd60.js";import"./resetServer-1c71747e.js";import{f as $,z as tt,k as et,d as at}from"./bootstrap-vue-next.es-c6bcf011.js";import{_ as ot}from"./IconDots-76437be9.js";import{_ as nt}from"./IconCard-47752060.js";import{_ as st}from"./OrderIDBadge-3a2e7e5e.js";const rt={class:"hosting-item"},it={class:"hosting-item__row"},dt={class:"hosting-item__row"},ct={class:"hosting-item__person"},lt={key:0,class:"hosting-item__row"},mt={class:"hosting-item__list"},_t=["innerHTML"],ut={class:"hosting-status__info"},Dt={class:"hosting-status__date"},ft={class:"hosting-item__controls"},It={class:"btn btn--dots"};function St(s,a,t,r,S,p){var g,_,u,D,h,B,H,M,N,V,L,j;const b=$,y=st,v=T("router-link"),k=z,C=nt,R=T("Helper"),x=ot,e=tt,o=et,l=at;return w(),O("div",rt,[c("div",it,[A(n(b,{id:"checkbox-"+((g=t.itemData)==null?void 0:g.OrderID),modelValue:r.localSelectedRows[(_=t.itemData)==null?void 0:_.OrderID],"onUpdate:modelValue":a[0]||(a[0]=i=>{var d;return r.localSelectedRows[(d=t.itemData)==null?void 0:d.OrderID]=i}),name:"checkbox-"+((u=t.itemData)==null?void 0:u.OrderID),onChange:r.updateSelectedRows},null,8,["id","modelValue","name","onChange"]),[[E,t.isSeveral]]),n(y,{orderID:(D=t.itemData)==null?void 0:D.OrderID,onClick:a[1]||(a[1]=i=>{var d;return r.toItem((d=t.itemData)==null?void 0:d.OrderID)})},null,8,["orderID"]),n(v,{class:"hosting-item__name",to:`/DSOrders/${t.itemData.OrderID}`},{default:m(()=>[f(I(t.itemData.IP),1)]),_:1},8,["to"])]),c("div",dt,[c("div",ct,I((h=t.itemData)==null?void 0:h.Customer),1)]),t.params.length?(w(),O("div",lt,[c("ul",mt,[(w(!0),O(F,null,P(t.params,i=>(w(),O("li",{innerHTML:i},null,8,_t))),256))]),c("div",ut,[c("div",{class:q(["hosting-item__date",{danger:Number((B=t.itemData)==null?void 0:B.DaysRemainded)<14}])},I(r.calculateExpirationDate((H=t.itemData)==null?void 0:H.DaysRemainded))+" • "+I(((M=t.itemData)==null?void 0:M.DaysRemainded)||0)+" дн.",3),n(k,{class:"status-badge",status:(N=t.itemData)==null?void 0:N.StatusID,"status-table":"DSOrders",onClick:a[2]||(a[2]=i=>{var d;return r.openHistoryStatuses((d=t.itemData)==null?void 0:d.ID)})},null,8,["status"]),c("div",Dt,I(r.calculateDaysSinceStatusUpdate((V=t.itemData)==null?void 0:V.StatusDate)),1)])])):Z("",!0),c("div",ft,[c("div",{class:"btn btn--md btn--bold",onClick:a[3]||(a[3]=i=>{var d;return s.$router.push(`/DSOrderPay/${(d=t.itemData)==null?void 0:d.OrderID}`)})},[n(C),f("Оплатить")]),n(R,{"user-notice":(L=t.itemData)==null?void 0:L.UserNotice,id:(j=t.itemData)==null?void 0:j.OrderID,position:t.isLast?"bottom":"top",emit:"updateDSOrdersList"},null,8,["user-notice","id","position"]),n(l,{class:"dropdown-dots",right:""},{"button-content":m(()=>[c("div",It,[n(x)])]),default:m(()=>[n(e,null,{default:m(()=>{var i;return[n(v,{to:`DSOrders/${(i=t.itemData)==null?void 0:i.OrderID}`},{default:m(()=>[f("Дополнительная информация")]),_:1},8,["to"])]}),_:1}),n(e,{onClick:a[4]||(a[4]=i=>r.transferAccount())},{default:m(()=>[f("Передать на другой аккаунт")]),_:1}),n(o),n(e,{class:"color-red",onClick:a[5]||(a[5]=i=>r.deleteItem())},{default:m(()=>[f("Удалить")]),_:1})]),_:1})])])}const vt={components:{StatusBadge:z,IconRotate:Y,Helper:X},props:{params:{type:Array,default:()=>[]},itemData:{type:Object,default:()=>{}},isLast:{type:Boolean,default:!1},isSeveral:{type:Boolean,default:!1},selectedRows:{type:Object,required:!0}},emits:["delete","transfer","manage"],setup(s,{emit:a}){const t=J(),r=K("emitter"),S=Q({...s.selectedRows}),p=()=>{a("update-selected-rows",S.value)};W(()=>s.selectedRows,e=>{S.value={...e}},{deep:!0});function b(e){if(!e)return U(new Date);const o=new Date,l=new Date(o.getTime()+e*24*60*60*1e3);return U(l)}function y(e){t.push(`/DSOrders/${e}`)}function v(){var e,o;a("delete",(e=s.itemData)==null?void 0:e.ID,(o=s.itemData)==null?void 0:o.OrderID)}function k(){var e,o;a("transfer",{ServiceOrderID:(e=s.itemData)==null?void 0:e.ID,ServiceID:(o=s.itemData)==null?void 0:o.ServiceID})}function C(e){r.emit("open-modal",{component:"StatusHistory",data:{modeID:"DSOrders",rowID:e}})}function R(){var e,o,l;a("manage",{ServiceOrderID:(e=s.itemData)==null?void 0:e.ID,ServiceID:(o=s.itemData)==null?void 0:o.ServiceID,OrderID:(l=s.itemData)==null?void 0:l.OrderID})}function x(e){if(!e)return"";const o=new Date(parseInt(e)*1e3),g=new Date-o,_=Math.floor(g/1e3),u=Math.floor(_/60),D=Math.floor(u/60),h=Math.floor(D/24);return _<60?`${_} сек. от статуса`:u<60?`${u} мин. от статуса`:D<24?`${D} ч. от статуса`:`${h} дн. от статуса`}return{deleteItem:v,orderManage:R,transferAccount:k,calculateExpirationDate:b,openHistoryStatuses:C,toItem:y,calculateDaysSinceStatusUpdate:x,localSelectedRows:S,updateSelectedRows:p}}},Bt=G(vt,[["render",St],["__scopeId","data-v-58e1cca7"]]);export{Bt as D};
