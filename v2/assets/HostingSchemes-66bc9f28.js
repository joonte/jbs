import{j as E,o as _,c as d,a,t as m,k as x,F as f,v as G,m as P,b as k,w as $,d as L,n as B,_ as H,x as w,p as V,l as A,r as T,g as D}from"./index-7c70979b.js";import{u as F}from"./hosting-0da40788.js";import{u as q}from"./resetServer-7d1acbe7.js";import{_ as z}from"./IconDots-287ffdeb.js";import{_ as K}from"./IconCard-b77c66c4.js";import{S as M}from"./StatusBadge-d1ca4bcf.js";import{u as J}from"./testTransforms-eec373ee.js";import{B as O}from"./BlockBalanceAgreement-e7636133.js";import{_ as N}from"./ClausesKeeper-db215214.js";import{E as Q}from"./EmptyStateBlock-12618634.js";import"./contracts-6e790117.js";import"./bootstrap-vue-next.es-44836407.js";import"./ButtonDefault-cdd68300.js";import"./IconArrow-6bef9064.js";import"./IconClose-358a4a84.js";const R={class:"hosting-order-item__wrapper"},U={class:"hosting-order-item__header"},W={class:"hosting-order-item__name"},X={key:0,class:"hosting-order-item__price"},Y={class:"hosting-order-item__content"},Z={class:"hosting-order-item__row"},ee={class:"hosting-order-item__list"},oe={class:"hosting-order-item__row"},se={class:"hosting-order-item__note"};function te(c,i,n,r,I,l){var h,v,u,p,s,S,e;const g=E("router-link");return _(),d("div",{class:B(["hosting-order-item",{"hosting-order-item--special":(h=n.data)==null?void 0:h.note}])},[a("div",R,[a("div",U,[a("div",W,m((v=n.data)==null?void 0:v.name),1),(u=n.data)!=null&&u.price?(_(),d("div",X,m((p=n.data)==null?void 0:p.price)+" ₽ в месяц",1)):x("",!0)]),a("div",Y,[a("div",Z,[a("ul",ee,[(_(!0),d(f,null,G((s=n.data)==null?void 0:s.specifications,o=>(_(),d("li",null,m(o),1))),256))])]),(S=n.data)!=null&&S.note?P(c.$slots,"default",{key:0},()=>{var o;return[a("div",oe,[a("div",se,m((o=n.data)==null?void 0:o.note),1)])]},!0):x("",!0),k(g,{class:"btn btn--wide btn--border btn--wide",to:`/HostingSchemes/${(e=n.data)==null?void 0:e.ID}`},{default:$(()=>[L(" Заказать")]),_:1},8,["to"])])])],2)}const re={components:{IconDots:z,IconCard:K,StatusBadge:M},props:{data:{type:Object,default:()=>{}}}},j=H(re,[["render",te],["__scopeId","data-v-62ce5dab"]]),ne=c=>(V("data-v-a54a0971"),c=c(),A(),c),ae={class:"section"},ce={class:"container"},_e={class:"section-header"},ie=ne(()=>a("h1",{class:"section-title"},"Заказать хостинг",-1)),de={class:"section-nav"},le=["onClick"],ue={class:"section-text section-text--margin"},pe={key:0,class:"list"};function he(c,i,n,r,I,l){var p;const g=O,h=N,v=j,u=Q;return _(),d(f,null,[k(g),a("div",ae,[a("div",ce,[a("div",_e,[ie,k(h),a("div",de,[(_(!0),d(f,null,G(r.filterServerGroups(),(s,S)=>{var e;return _(),d("div",{class:B(["section-nav__item",{active:String(r.currentGroup)===String(s==null?void 0:s.ServersGroupID)}]),onClick:o=>r.setCurrentGroup(s==null?void 0:s.ServersGroupID)},m((e=r.getServerGroup(s==null?void 0:s.ServersGroupID))==null?void 0:e.Name),11,le)}),256))])]),a("div",ue,m((p=r.getServerGroup(r.currentGroup))==null?void 0:p.Comment),1),r.filterSchemes?(_(),d("div",pe,[(_(!0),d(f,null,G(r.filterSchemes,s=>(_(),w(v,{data:r.getCardData(s)},null,8,["data"]))),256))])):(_(),w(u,{key:1,label:"Нет доступных тарифов"}))])])],64)}const ve={components:{HostingOrderItem:j,ClausesKeeper:N,BlockBalanceAgreement:O},async setup(){var s,S;const c=F(),i=q(),n=T(0),{formDescriptionLine:r}=J(),I=D(()=>{let e=[];return l.value&&(Object.keys(l.value).forEach(o=>{var t;String((t=l.value[o])==null?void 0:t.ServersGroupID)===String(n.value)&&e.push(l.value[o])}),e.sort((o,t)=>o.SortID-t.SortID)),e}),l=D(()=>c==null?void 0:c.hostingSchemes);function g(e){n.value=e}function h(e){var o,t,b,C,y;return{ID:e==null?void 0:e.ID,name:e==null?void 0:e.Name,price:e==null?void 0:e.CostMonth,specifications:[r((o=e==null?void 0:e.SchemeParams)==null?void 0:o.limit_webdomains),r((t=e==null?void 0:e.SchemeParams)==null?void 0:t.limit_quota),r((b=e==null?void 0:e.SchemeParams)==null?void 0:b.limit_emails),r((C=e==null?void 0:e.SchemeParams)==null?void 0:C.disklimit),r((y=e==null?void 0:e.SchemeParams)==null?void 0:y.maillimit)],note:e==null?void 0:e.Comment}}const v=D(()=>{var e;return(e=i==null?void 0:i.serverGroupsList)==null?void 0:e.Servers});function u(){let e={};return Object.values(v.value).forEach(o=>{if(o.ServiceID==="10000"){const t=o.ServersGroupID;e[t]||(e[t]={SortID:o.SortID,ServersGroupID:t,servers:[]}),e[t].servers.push(o)}}),Object.values(e).sort((o,t)=>o.SortID-t.SortID)}function p(e){var o,t;return(t=(o=i==null?void 0:i.serverGroupsList)==null?void 0:o.ServersGroups)==null?void 0:t[e]}return await c.fetchHostingSchemes(),await i.fetchServerGroups(),n.value=(S=(s=u())==null?void 0:s[0])==null?void 0:S.ServersGroupID,{getHostingSchemes:l,getServerGroup:p,filterServerGroups:u,setCurrentGroup:g,getCardData:h,filterSchemes:I,currentGroup:n}}},Oe=H(ve,[["render",he],["__scopeId","data-v-a54a0971"]]);export{Oe as default};
