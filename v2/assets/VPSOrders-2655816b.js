import{j as k,o as m,c as h,a as r,b as u,w as L,d as C,t as w,F as T,v as F,n as Q,k as W,_ as z,r as x,x as O,p as X,l as Y,R as Z,g as S}from"./index-ed1f28f8.js";import{I as tt}from"./IconSearch-518c61a1.js";import{u as K}from"./vps-526e1f01.js";import{_ as et}from"./HelperComponent-4528cb6e.js";import{S as $}from"./StatusBadge-2304b071.js";import{I as q}from"./IconRotate-9f02186b.js";import{v as st}from"./vpsStatuses-32ffaaf5.js";import{_ as at}from"./IconCard-ec16e358.js";import{_ as ot}from"./OrderIDBadge-7e968b28.js";import{S as nt}from"./Select2-667a8d46.js";import{s as rt}from"./multiselect-198a8c51.js";import{_ as G}from"./ClausesKeeper-9aa8ead7.js";import{u as it}from"./contracts-cedf6a91.js";import{E as lt}from"./EmptyStateBlock-dbc11827.js";import{_ as ct}from"./FormInputSearch-d1c13d60.js";import"./ButtonDefault-a8aacc82.js";import"./IconArrow-6ab5d812.js";import"./IconClose-a1e58263.js";import"./IconPlus-56dc71c7.js";const dt={class:"hosting-item"},_t={class:"hosting-item__row"},mt={class:"hosting-item__row"},ut={class:"hosting-item__person"},ft={class:"hosting-item__row"},pt={class:"hosting-item__list"},vt=["innerHTML"],ht={class:"hosting-item__controls"},gt={class:"ico"};function bt(n,i,s,e,y,d){var p,a,t,o,_,c,v;const f=ot,I=k("router-link"),g=$,V=k("Helper"),D=q,b=at;return m(),h("div",dt,[r("div",_t,[u(f,{orderID:(p=s.itemData)==null?void 0:p.OrderID},null,8,["orderID"]),u(I,{class:"hosting-item__name",to:`/VPSOrders/${s.itemData.OrderID}`},{default:L(()=>[C(w(s.itemData.IP||s.itemData.Domain),1)]),_:1},8,["to"]),u(g,{status:(a=s.itemData)==null?void 0:a.StatusID,DaysRemainded:(t=s.itemData)==null?void 0:t.DaysRemainded,"status-table":"VPSOrders"},null,8,["status","DaysRemainded"])]),r("div",mt,[r("div",ut,w(s.userName),1),u(V,{"user-notice":(o=s.itemData)==null?void 0:o.UserNotice,id:(_=s.itemData)==null?void 0:_.OrderID,position:s.isLast?"bottom":"top",emit:"updateVPSList"},null,8,["user-notice","id","position"])]),r("div",ft,[r("ul",pt,[(m(!0),h(T,null,F(s.params,l=>(m(),h("li",{innerHTML:l==null?void 0:l.text},null,8,vt))),256))])]),r("div",ht,[((c=s.itemData)==null?void 0:c.StatusID)==="Active"?(m(),h("div",{key:0,class:Q(["btn btn--md btn--border btn--rotate btn--rotate_green button-large",{"btn--rotate_gray":((v=s.itemData)==null?void 0:v.StatusID)!=="Active"||e.isReloading,"btn--rotate_loading":e.isReloading}]),title:"Перезагрузить выделенный сервер",onClick:i[0]||(i[0]=(...l)=>e.reloadItem&&e.reloadItem(...l))},[C("Включен"),r("button",null,[r("div",gt,[u(D)])])],2)):W("",!0),r("div",{class:"btn btn--md btn--bold",onClick:i[1]||(i[1]=l=>{var P;return n.$router.push(`/VPSOrderPay/${(P=s.itemData)==null?void 0:P.OrderID}`)})},[u(b),C("Оплатить")])])])}const It={components:{StatusBadge:$,IconRotate:q,Helper:et},props:{params:{type:Array,default:()=>[]},itemData:{type:Object,default:()=>{}},isLast:{type:Boolean,default:!1},userName:{type:String,default:""}},setup(n,{emit:i}){const s=K(),e=x(!1);function y(d){var f;e.value=!0,s.VPSReboot({VPSOrderID:(f=n.itemData)==null?void 0:f.ID}).then(()=>{setTimeout(()=>{e.value=!1},1e3)})}return{vpsStatuses:st,reloadItem:y,isReloading:e}}},J=z(It,[["render",bt],["__scopeId","data-v-dacecee7"]]),Vt=n=>(X("data-v-ca085fd2"),n=n(),Y(),n),Dt={class:"section"},Pt={class:"container"},St={class:"section-header"},yt=Vt(()=>r("h1",{class:"section-title"},"VPS/VDS серверы",-1)),Ct={class:"list-form"},kt={class:"list-form_col list-form_col--sm"},Ot={class:"list-form_select"},Lt={class:"multiselect-option"},wt={key:0};function xt(n,i,s,e,y,d){var p,a,t;const f=k("router-link"),I=G,g=k("Multiselect"),V=ct,D=J,b=lt;return m(),h("div",Dt,[r("div",Pt,[r("div",St,[yt,u(f,{class:"btn btn--blue btn-default",to:"/VPSSchemes"},{default:L(()=>[C("Заказать")]),_:1})]),u(I,{partition:"Header:/VPSOrders"}),r("div",Ct,[r("div",kt,[r("div",Ot,[u(g,{modelValue:e.select,"onUpdate:modelValue":i[0]||(i[0]=o=>e.select=o),options:e.getUsers,disabled:((p=e.getUsers)==null?void 0:p.length)<=1,label:"name"},{option:L(({option:o})=>[r("div",Lt,w(o.name),1)]),_:1},8,["modelValue","options","disabled"])])]),u(V,{modelValue:e.search,"onUpdate:modelValue":i[1]||(i[1]=o=>e.search=o)},null,8,["modelValue"])]),e.getVpsOrders&&((a=e.getVpsOrders)==null?void 0:a.length)>0?(m(),h("div",wt,[e.filterProducts&&((t=e.filterProducts)==null?void 0:t.length)>0?(m(!0),h(T,{key:0},F(e.filterProducts,(o,_)=>{var c;return m(),O(D,{"item-data":o,"is-last":_===e.filterProducts.length-1,"user-name":(c=e.getContracts[o==null?void 0:o.ContractID])==null?void 0:c.Customer,params:e.formItemParamList(o)},null,8,["item-data","is-last","user-name","params"])}),256)):(m(),O(b,{key:1,class:"no-margin",label:"Заказы не найдены"}))])):(m(),O(b,{key:1,class:"no-margin",label:"У вас нет заказов на VPS/VDS серверы"}))])])}const Bt={components:{IconSearch:tt,Select2:nt,ClausesKeeper:G,Multiselect:rt,VpsItem:J},async setup(){const n=K(),i=it(),s=x(null),e=x("*");Z("emitter").on("updateVPSList",()=>{n.fetchVPS()});const d=S(()=>{var a;return(a=Object.keys(n==null?void 0:n.vpsList).map(t=>n==null?void 0:n.vpsList[t]))==null?void 0:a.reverse()}),f=S(()=>n.vpsSchemes),I=S(()=>D(V(d.value))),g=S(()=>i==null?void 0:i.contractsList);function V(a){return e.value!=="*"?a.filter(t=>(t==null?void 0:t.ContractID)===e.value):a}function D(a){return s.value!==null?a.filter(t=>t==null?void 0:t.IP.toLowerCase().includes(s.value.toLowerCase())):a}const b=S(()=>{let a=[{value:"*",name:"Все договора"}];return d.value!==null?(Object.keys(d.value).forEach(t=>{var o,_,c;a.find(v=>{var l;return v.value===((l=d.value[t])==null?void 0:l.ContractID)})||a.push({value:(o=d.value[t])==null?void 0:o.ContractID,name:(c=g.value[(_=d.value[t])==null?void 0:_.ContractID])==null?void 0:c.Customer})}),a):{value:"*",name:"Все договора"}});function p(a){var o,_,c,v,l,P,B,R,N,U,H,M,j,A,E;const t=(o=f.value)==null?void 0:o[a.SchemeID];return[{text:`${t==null?void 0:t.Name}`},{text:`${(c=(_=t==null?void 0:t.SchemeParams)==null?void 0:_.hdd_mib)==null?void 0:c.InternalName} ${(l=(v=t==null?void 0:t.SchemeParams)==null?void 0:v.hdd_mib)==null?void 0:l.Value} ${(B=(P=t==null?void 0:t.SchemeParams)==null?void 0:P.hdd_mib)==null?void 0:B.Unit}`},{text:`RAM ${(N=(R=t==null?void 0:t.SchemeParams)==null?void 0:R.ram_mib)==null?void 0:N.Value} ${(H=(U=t==null?void 0:t.SchemeParams)==null?void 0:U.ram_mib)==null?void 0:H.Unit}`},{text:`Канал ${(j=(M=t==null?void 0:t.SchemeParams)==null?void 0:M.net_bandwidth_mbitps)==null?void 0:j.Value} ${(E=(A=t==null?void 0:t.SchemeParams)==null?void 0:A.net_bandwidth_mbitps)==null?void 0:E.Unit}`}]}return await n.fetchVPS(),await n.fetchVPSSchemes(),await i.fetchContracts(),{getVpsOrders:d,search:s,getContracts:g,select:e,formItemParamList:p,getUsers:b,filterProducts:I}}},Yt=z(Bt,[["render",xt],["__scopeId","data-v-ca085fd2"]]);export{Yt as default};
