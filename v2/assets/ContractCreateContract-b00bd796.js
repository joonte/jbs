import{_ as F}from"./ButtonDefault-18fa1414.js";import{s as O}from"./SimpleCheckbox-a9dbe92e.js";import{_ as R}from"./ClausesKeeper-f5a8709e.js";import{_ as M,u as U,e as j,r as v,g as i,i as V,O as A,h as K,ag as $,j as J,o as d,c as f,b as r,a as l,w as q,d as z,F as m,x as G,y as H,k as Q,p as W,l as X}from"./index-4466e2da.js";import{u as Y}from"./contracts-44396072.js";import{B as Z}from"./BlockSelectProfile-782996a5.js";import{B as ee}from"./BlockBalanceAgreement-762408e5.js";/* empty css                                                                       */import"./IconClose-96271d50.js";import"./multiselect-a1f1bb25.js";import"./bootstrap-vue-next.es-61f2820f.js";import"./IconArrow-1085f1dc.js";const S=c=>(W("data-v-af7dea67"),c=c(),X(),c),te={class:"section"},ae={class:"container"},oe={class:"section-header"},le=S(()=>l("h1",{class:"section-title"},"Создать договор",-1)),se=S(()=>l("div",{class:"section-header"},[l("h2",{class:"section-block_title"},"Шаблон")],-1)),ne={class:"form"},re={class:"container-limited"},ce={__name:"ContractCreateContract",async setup(c){let C,h;const T=U(),n=Y(),I=j(),_=v(!1),u=v("Natural"),a=v(null),x=i(()=>T.ConfigList),o=i(()=>n==null?void 0:n.profileList),p=i(()=>Object.keys(o.value).map(e=>{if(o.value[e].TemplateID==="Natural"||o.value[e].TemplateID==="Juridical"||o.value[e].TemplateID==="Individual"||o.value[e].TemplateID==="NaturalPartner")return{value:o.value[e].ID,name:o.value[e].Name,contractID:o.value[e].ContractID}}).filter(e=>e.contractID===0)),k=e=>{e.key==="Enter"&&e.ctrlKey&&!B.value&&g()},B=i(()=>a.value===null||a.value===void 0);V(()=>{document.addEventListener("keyup",k)}),A(()=>{document.removeEventListener("keyup",k)});function g(){_.value=!0,n.contractMake({ProfileID:a.value,TypeID:u.value}).then(e=>{e.Status==="Ok"&&I.push("/Contracts"),_.value=!1})}function b(){var e,s;a.value=((s=(e=p.value)==null?void 0:e[0])==null?void 0:s.value)||null}return K(u,()=>{b()}),V(()=>{p.value.length<1&&I.push("/ProfileMake"),b()}),[C,h]=$(()=>n.fetchProfiles()),await C,h(),(e,s)=>{var y,D;const L=J("router-link"),P=R,N=O,E=F;return d(),f(m,null,[r(ee),l("div",te,[l("div",ae,[l("div",oe,[r(L,{class:"section-label",to:"/Contracts"},{default:q(()=>[z("Мои договора")]),_:1}),le]),r(P),se,l("div",ne,[(d(!0),f(m,null,G((D=(y=x.value)==null?void 0:y.Contracts)==null?void 0:D.Types,t=>(d(),f(m,null,[(t==null?void 0:t.ProfileTemplateID)!==""?(d(),H(N,{key:0,label:t==null?void 0:t.Name,value:t==null?void 0:t.ProfileTemplateID,modelValue:u.value,"onUpdate:modelValue":s[0]||(s[0]=w=>u.value=w)},null,8,["label","value","modelValue"])):Q("",!0)],64))),256))]),l("div",re,[r(Z,{title:"Использовать профиль",items:p.value,modelValue:a.value,"onUpdate:modelValue":s[1]||(s[1]=t=>a.value=t)},null,8,["items","modelValue"]),r(E,{onClick:g,disabled:a.value===null||a.value===void 0,"is-loading":_.value,label:"Зарегистрировать"},null,8,["disabled","is-loading"])])])])],64)}}},ge=M(ce,[["__scopeId","data-v-af7dea67"]]);export{ge as default};
