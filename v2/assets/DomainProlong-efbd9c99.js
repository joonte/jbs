import{o as a,c as i,b as d,a as t,t as f,F as K,k as U,p as z,l as G,_ as H,a7 as J,e as Q,S as X,r as Y,g as v}from"./index-145d9cde.js";import{u as Z}from"./domain-3173c1db.js";import{u as $}from"./contracts-009c925b.js";import{s as oo}from"./multiselect-a2d623ca.js";import{B as q}from"./BlockBalanceAgreement-650ad03e.js";import{E as to}from"./EmptyStateBlock-a6b81e83.js";import{_ as eo}from"./ButtonDefault-6a3a5e1e.js";import{_ as so}from"./ClausesKeeper-d3875457.js";import"./bootstrap-vue-next.es-759b1c9f.js";import"./IconArrow-f2b12a71.js";import"./IconClose-f461656c.js";const r=e=>(z("data-v-9abf0287"),e=e(),G(),e),ao={key:0,class:"domain-scheme"},io={class:"section"},no={class:"container"},co={class:"section-header"},lo={key:0,class:"section-title"},ro={key:1,class:"section-title"},_o={key:2,class:"section-title"},mo={class:"section-label"},ho={class:"section"},go={class:"container"},Do={class:"domain-prolong__data"},fo={key:0,class:"form-field"},vo=r(()=>t("div",{class:"form-field__label"},"Стоимость заказа (в год)",-1)),uo=["value"],po={class:"form-field"},So=r(()=>t("div",{class:"form-field__label"},"Стоимость продления (в год)",-1)),bo=["value"],Co=r(()=>t("label",{class:"form-field"},[t("div",{class:"form-field__label"},"Количество лет"),t("input",{type:"text",placeholder:"1",value:"1",disabled:""})],-1)),ko={key:1,class:"form-field__msg"},yo={class:"form-field"},Io=r(()=>t("div",{class:"form-field__label"},"Всего к оплате",-1)),Fo=["value"],Bo={class:"section"},Po={class:"container"},xo={class:"domain-prolong__data"},Ao={class:"total-block"},Oo={class:"total-block__row total-block__row--big"},wo=r(()=>t("div",{class:"total-block__col"},"Итого за 1 год",-1)),Eo={class:"total-block__col"},Lo={key:1,class:"section"},No={class:"container"},Ro={key:1,class:"section"},To={class:"container"};function Vo(e,c,u,o,_,p){var m,l,D,S,b,C,k,y,I,F,B,P,x,A,O,w,E,L,N,R,T,V,j,M,W;const n=q,h=so,g=eo,s=to;return a(),i(K,null,[d(n),o.getDomain?(a(),i("div",ao,[t("div",io,[t("div",no,[t("div",co,[o.getDomain.StatusID==="Waiting"?(a(),i("h1",lo,"Оплата заказа доменного имени")):o.getDomain.StatusID==="ForTransfer"?(a(),i("h1",ro,"Оплата переноса домена")):(a(),i("h1",_o,"Оплата продления доменного имени")),t("div",mo,f((m=o.getDomain)!=null&&m.DomainName?`#${(l=o.getDomain)==null?void 0:l.DomainName}`:""),1)]),d(h)])]),(D=o.getDomainSchemes)!=null&&D.IsPayed&&((S=o.getDomainSchemes)!=null&&S.IsProlong)||!((b=o.getDomainSchemes)!=null&&b.IsPayed)?(a(),i(K,{key:0},[t("div",ho,[t("div",go,[t("div",Do,[o.getDomain.StatusID==="Waiting"||o.getDomain.StatusID==="ForTransfer"?(a(),i("label",fo,[vo,t("input",{type:"text",placeholder:"0 руб",value:((C=o.getDomainSchemes)==null?void 0:C.CostOrder)+" руб",disabled:""},null,8,uo)])):U("",!0),t("label",po,[So,t("input",{type:"text",placeholder:"0 руб",value:((k=o.getDomainSchemes)==null?void 0:k.CostProlong)+" руб",disabled:""},null,8,bo)]),Co,(y=o.getDomain)!=null&&y.AdditionalCost?(a(),i("div",ko,[t("p",null,f((I=o.getDomain)==null?void 0:I.AdditionalCost.Message),1)])):U("",!0),t("label",yo,[Io,t("input",{type:"text",placeholder:"0 руб",value:o.getDomain.StatusID==="ClaimForRegister"?(F=o.getDomainSchemes)==null?void 0:F.CostOrder:(parseFloat((B=o.getDomainSchemes)==null?void 0:B.CostProlong)+((P=o.getDomain)!=null&&P.AdditionalCost?parseFloat((A=(x=o.getDomain)==null?void 0:x.AdditionalCost)==null?void 0:A.Summ):0)).toFixed(2)+" руб",disabled:""},null,8,Fo)])])])]),t("div",Bo,[t("div",Po,[t("div",xo,[t("div",Ao,[t("div",Oo,[wo,t("div",Eo,f(o.getDomain.StatusID==="ClaimForRegister"?(parseFloat((O=o.getDomainSchemes)==null?void 0:O.CostOrder)+((w=o.getDomain)!=null&&w.AdditionalCost?parseFloat((L=(E=o.getDomain)==null?void 0:E.AdditionalCost)==null?void 0:L.Summ):0)).toFixed(2):(parseFloat((N=o.getDomainSchemes)==null?void 0:N.CostProlong)+((R=o.getDomain)!=null&&R.AdditionalCost?parseFloat((V=(T=o.getDomain)==null?void 0:T.AdditionalCost)==null?void 0:V.Summ):0)).toFixed(2)||"0.00")+" ₽",1)])]),d(g,{class:"btn--wide",label:+((j=o.getContract)==null?void 0:j.Balance)>(o.getDomain.StatusID==="ClaimForRegister"?+((M=o.getDomainSchemes)==null?void 0:M.CostOrder):+((W=o.getDomainSchemes)==null?void 0:W.CostProlong))?"Оплатить c баланса договора":"Добавить в корзину",onClick:c[0]||(c[0]=Mo=>o.orderPay()),"is-loading":o.isLoading},null,8,["label","is-loading"])])])])],64)):(a(),i("div",Lo,[t("div",No,[d(s,{class:"no-margin",label:"Заказ нельзя продлить"})])]))])):(a(),i("div",Ro,[t("div",To,[d(s,{label:"Заказ домена не найден"})])]))],64)}const jo={components:{Multiselect:oo,BlockBalanceAgreement:q},async setup(){const e=Z(),c=$(),u=J(),o=Q();X("emitter");const _=Y(!1);function p(){var s;_.value=!0,e.DomainOrderPay({DomainOrderID:(s=n.value)==null?void 0:s.ID}).then(m=>{let{result:l,error:D}=m;l==="SUCCESS"?o.push("/DomainOrders"):l==="BASKET"&&o.push("/Basket"),_.value=!1})}const n=v(()=>Object.keys(e==null?void 0:e.domainsList).map(s=>e==null?void 0:e.domainsList[s]).find(s=>s.OrderID===u.params.id)),h=v(()=>{var s;return e==null?void 0:e.domainSchemes[(s=n.value)==null?void 0:s.SchemeID]}),g=v(()=>{var s;return c.contractsList[(s=n.value)==null?void 0:s.ContractID]});return await e.fetchDomains(),await e.fetchDomainSchemes(),await c.fetchContracts(),{getDomain:n,getDomainSchemes:h,getContract:g,isLoading:_,orderPay:p}}},Zo=H(jo,[["render",Vo],["__scopeId","data-v-9abf0287"]]);export{Zo as default};
