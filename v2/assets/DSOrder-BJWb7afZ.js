import{_ as U}from"./EmptyStateBlock-DgFyy_gi.js";import{_ as E,a as j}from"./CopyToClipboard.vue_vue_type_script_setup_true_lang-BSBKPmEv.js";import{_ as F}from"./ButtonDefault-CgQ13ecW.js";import{_ as H}from"./SettingsEngineItem-OTQ5qXYy.js";import{_ as G}from"./StatusBadge-CiYQLfxg.js";import{_ as z}from"./ServicesContractBalanceBlock-p9zlFW-0.js";import{_ as K}from"./ClausesKeeper-Cjjq7JUL.js";import{v as W,r as q}from"./bootstrap-vue-next-CDL_Y1-V.js";import{_ as J}from"./IconDots-DVrfRZR8.js";import{_ as Q}from"./BlockBalanceAgreement-BNU6bIWW.js";import{c as l,b as n,a as t,t as r,n as X,w as v,G as Y,i as T,F as p,j as P,I as Z,K as $,e as u,M as tt,u as et,r as h,y as st,f as I,g as ot,o as a}from"./index-DakgQwZZ.js";import{f as L}from"./time-DenPiOX5.js";import{h as rt}from"./hostStatuses-wR2mZwFf.js";import{_ as nt}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./IconCopy-DZ-eqbI0.js";import"./IconSettings-CudvjEMd.js";import"./IconProfile-C5q7Wd6m.js";import"./IconCard-CoE2j-B8.js";import"./contracts-C-xJvA56.js";import"./IconClose-Camrw-uN.js";const it={async setup(){const y=ot(),e=tt(),f=et(),s=h(!1),D=st("emitter");D.on("updateDSIDPage",()=>{e.fetchDSOrders().then(()=>{e.fetchDSOrderIPMI(i.value?.OrderID)}).then(()=>{e.fetchDSOrderIPMISensors(i.value?.OrderID)})});const B=h(!1),k=h(!1),g=h(!0),i=I(()=>Object.keys(e?.DSList).map(_=>e?.DSList[_]).find(_=>_.OrderID===y.params.id)),M=I(()=>i.value?.Names||[]),S=I(()=>e?.DSSchemes?.[i.value?.SchemeID]),b=I(()=>e?.DSOrderIPMI),x=I(()=>f?.userOrders?.[i.value?.OrderID]),C=I(()=>e?.DSOrderIPMISensors);function R(_){D.emit("open-modal",{component:"StatusHistory",data:{modeID:"DSOrders",rowID:_}})}function N(_,d){const m=d[_];if(m==null)return"-";switch(_){case"ram":return`${m} ГБ`;case"chrate":return`${m} Мбит/с`;default:return m}}function w(_){if(!_)return L(new Date);const d=new Date,m=new Date(d.getTime()+_*24*60*60*1e3);return L(m)}function O(_){let d=S.value;d===void 0&&(d=_);let m=[];return d?.Name&&m.push(d?.Name),d?.CPU&&m.push(d?.CPU),d?.ram&&m.push("RAM "+d?.ram+" GB"),d?.disks&&m.push(d?.disks),m}function A(_){function d(m){s.value=m}D.emit("open-modal",{component:"ReloadDS",data:{DSOrderID:_,isReloading:s.value,onReloadStatusChange:d,ServerName:i?.value?.Scheme,SystemPower:b?.value?.IPMI["System Power"],OrderID:i?.value?.OrderID}})}function o(){D.emit("open-modal",{component:"OrdersTransfer",data:{ServiceOrderID:i.value?.ID,ServiceID:i.value?.ServiceID}})}function c(){f.prolongOrder({IsAutoProlong:g.value?0:1,OrderID:i.value?.OrderID})}function V(){D.emit("open-modal",{component:"OrderRestore",data:{OrderID:i.value?.OrderID,CostDay:S.value?.CostDay,DaysRemainded:i.value?.DaysRemainded,emitEvent:"updateDSIDPage"}})}return await e.fetchDSSchemes(),e.fetchDSOrders().then(()=>{e.fetchDSOrderIPMI(i.value?.OrderID)}),await f.fetchUserOrders().then(()=>{g.value=x.value?.IsAutoProlong}),{getDSOrderIPMI:b,getDSServerData:i,getDSScheme:S,getDSOrderIPMISensors:C,isAutoProlong:g,passwordShowOne:B,passwordShowTwo:k,openOrderRestore:V,transferItem:o,setProlongValue:c,serverReset:A,isReloading:s,getDSItemParam:O,hostStatuses:rt,calculateExpirationDate:w,formatData:N,serverDataNames:M,openHistoryStatuses:R}}},lt={key:0,class:"ds-order-page"},at={class:"section"},dt={class:"container"},_t={class:"section-header"},mt={class:"section-title"},ct={class:"hosting-item__controls"},vt={class:"btn btn--dots"},Dt={class:"section-label"},St={class:"section-nav"},ut={class:"list"},It={class:"list-col list-col--md"},gt={class:"list-item"},wt={class:"list-item__row"},pt={class:"list-item__title"},ft={class:"list-item__status"},bt={class:"list-item__row"},Ot={class:"list-item__ul"},Pt={class:"list-item__row list-item__row--column"},ht={class:"list-item__text"},yt={class:"list-item__text"},kt={class:"list-item__text"},Mt={class:"list-item__row"},xt={class:"btn btn--border btn--switch"},Ct={class:"list-col list-col--xl"},Rt={class:"list-item"},Nt={class:"list-item__row list-item__table"},At={class:"list-item__label"},Bt={class:"list-item__text"},Tt={class:"list-col list-col--md"},Lt={class:"tw-grid tw-grid-cols-3 tw-gap-6 md:tw-border md:tw-border-gray-200 md:tw-rounded-md md:tw-p-6"},Vt={class:"tw-col-span-2 tw-flex tw-items-center tw-gap-1"},Ut={class:"tw-col-span-2 tw-flex tw-items-center tw-gap-1"},Et={class:"tw-break-all"},jt={class:"tw-col-span-2 tw-flex tw-flex-wrap tw-items-center tw-gap-2"},Ft={key:0,class:"password-hidden"},Ht={class:"list-col list-col--md"},Gt={class:"list-item"},zt={class:"list-item__row list-item__row--table"},Kt={class:"list-item__item"},Wt={class:"list-item__row list-item__row--table"},qt={class:"list-item__item"},Jt={class:"list-item__row list-item__row--table password-line"},Qt={class:"list-item__item"},Xt={key:0,class:"password-hidden"},Yt={key:0,class:"list-col list-col--md"},Zt={class:"list-item"},$t={class:"list-item__item"},te={class:"list-item__item"},ee={key:1,class:"list-col list-col--md"},se={class:"list-item"},oe={class:"list-item__item"},re={class:"list-item__item"},ne={key:1,class:"section"},ie={class:"container"};function le(y,e,f,s,D,B){const k=Q,g=J,i=q,M=W,S=Y("router-link"),b=K,x=z,C=G,R=H,N=F,w=E,O=j,A=U;return a(),l(p,null,[n(k),s.getDSServerData?.ID?(a(),l("div",lt,[t("div",at,[t("div",dt,[t("div",_t,[t("h1",mt,r(s.getDSServerData?.IPaddr),1),t("div",ct,[t("button",{class:X(["btn btn--md btn--border btn--rotate btn--rotate_green",{"btn--system-off":s.getDSOrderIPMI?.IPMI["System Power"]!=="on"}]),onClick:e[0]||(e[0]=o=>s.serverReset(s.getDSServerData?.ID))},r(s.getDSOrderIPMI?.IPMI["System Power"]==="on"?"Включен":"Выключен"),3),n(M,{class:"dropdown-dots",right:""},{"button-content":v(()=>[t("span",vt,[n(g)])]),default:v(()=>[n(i,{onClick:e[1]||(e[1]=o=>s.serverReset(s.getDSServerData?.ID))},{default:v(()=>e[10]||(e[10]=[u("Перезагрузить",-1)])),_:1,__:[10]})]),_:1})]),t("div",Dt,"Выделенный сервер # "+r(s.getDSServerData?.OrderID),1),t("div",St,[n(S,{class:"section-nav__item",to:`/DSOrders/${s.getDSServerData?.OrderID}`},{default:v(()=>e[11]||(e[11]=[u("Сервер",-1)])),_:1,__:[11]},8,["to"]),n(S,{class:"section-nav__item",to:`/Services/${s.getDSServerData?.OrderID}`},{default:v(()=>e[12]||(e[12]=[u("Услуги",-1)])),_:1,__:[12]},8,["to"])])]),n(b),t("div",ut,[n(x,{"contract-id":s.getDSServerData?.ContractID,onTransfer:e[2]||(e[2]=o=>s.transferItem())},null,8,["contract-id"]),t("div",It,[t("div",gt,[t("div",wt,[t("div",pt,r(s.getDSServerData?.Scheme),1),t("div",ft,[n(C,{status:s.getDSServerData?.StatusID,DaysRemainded:s.getDSServerData?.DaysRemainded,"status-table":"DNSmanagerOrders",onClick:e[3]||(e[3]=o=>s.openHistoryStatuses(s.getDSServerData?.ID))},null,8,["status","DaysRemainded"])]),n(R,null,{default:v(()=>[n(i,{onClick:e[4]||(e[4]=o=>s.openOrderRestore())},{default:v(()=>e[13]||(e[13]=[u("Просмотреть учет заказа",-1)])),_:1,__:[13]})]),_:1})]),t("div",bt,[t("ul",Ot,[(a(!0),l(p,null,P(s.getDSItemParam(s.getDSServerData),o=>(a(),l("li",{key:o},r(o),1))),128))])]),t("div",Pt,[t("div",ht,r(s.getDSScheme?.CostMonth||"0")+" ₽ в месяц",1),t("div",yt,"Дней осталось "+r(s.getDSServerData?.DaysRemainded||"0"),1),t("div",kt," Дата окончания "+r(s.calculateExpirationDate(s.getDSServerData?.DaysRemainded)),1)]),t("div",Mt,[n(N,{label:"Продлить",onClick:e[5]||(e[5]=o=>y.$router.push(`/DSOrderPay/${s.getDSServerData?.OrderID}`))}),t("label",xt,[Z(t("input",{type:"checkbox","onUpdate:modelValue":e[6]||(e[6]=o=>s.isAutoProlong=o),onInput:e[7]||(e[7]=o=>s.setProlongValue())},null,544),[[$,s.isAutoProlong]]),e[14]||(e[14]=t("span",{class:"btn-switch__text"},"Автопродление",-1)),e[15]||(e[15]=t("span",{class:"btn-switch__toggle"},null,-1))])])])]),t("div",Ct,[t("div",Rt,[e[16]||(e[16]=t("div",{class:"list-item__row"},[t("div",{class:"list-item__title"},"Конфигурация")],-1)),t("div",Nt,[(a(!0),l(p,null,P(s.getDSServerData.Names,(o,c)=>(a(),l("div",{class:"list-item__table-col",key:c},[t("div",At,r(o),1),t("div",Bt,r(s.formatData(c,s.getDSServerData)),1)]))),128))])])]),t("div",Tt,[t("div",Lt,[e[18]||(e[18]=t("div",{class:"tw-col-span-3 tw-flex tw-items-center tw-justify-between tw-gap-2"},[t("div",{class:"tw-text-2xl"},"Доступы")],-1)),e[19]||(e[19]=t("div",null,"IP адрес сервера",-1)),t("div",Vt,[t("div",null,r(s.getDSServerData?.IPaddr),1),n(w,{value:s.getDSServerData?.IPaddr},null,8,["value"])]),e[20]||(e[20]=t("div",null,"Пользователь",-1)),t("div",Ut,[t("div",Et,r(s.getDSServerData?.DSuser),1),n(w,{value:s.getDSServerData?.DSuser},null,8,["value"])]),e[21]||(e[21]=t("div",null,"Пароль",-1)),t("div",jt,[s.passwordShowOne?(a(),l("span",Ft,r(s.getDSServerData?.DSpass),1)):(a(),l("button",{key:1,class:"btn btn--border btn--md tw-h-8 tw-gap-1",onClick:e[8]||(e[8]=o=>s.passwordShowOne=!0)},[n(O,{class:"button-icon"}),e[17]||(e[17]=u(" Показать ",-1))])),n(w,{value:s.getDSServerData?.DSpass},null,8,["value"])])])]),t("div",Ht,[t("div",Gt,[e[26]||(e[26]=t("div",{class:"list-item__row"},[t("div",{class:"list-item__title"},"Доступы IPMI")],-1)),t("div",zt,[e[22]||(e[22]=t("div",{class:"list-item__item"},"IP адрес сервера",-1)),t("div",Kt,r(s.getDSServerData?.ILOaddr),1)]),t("div",Wt,[e[23]||(e[23]=t("div",{class:"list-item__item"},"Пользователь",-1)),t("div",qt,r(s.getDSServerData?.ILOuser),1)]),t("div",Jt,[e[25]||(e[25]=t("div",{class:"list-item__item"},"Пароль",-1)),t("div",Qt,[s.passwordShowTwo?(a(),l("span",Xt,r(s.getDSServerData?.ILOpass),1)):(a(),l("button",{key:1,class:"btn btn--border btn--md password-line",onClick:e[9]||(e[9]=o=>s.passwordShowTwo=!0)},[n(O,{class:"button-icon"}),e[24]||(e[24]=u(" Показать ",-1))]))])])])]),s.getDSOrderIPMI&&s.getDSOrderIPMI?.IPMI&&s.getDSOrderIPMI?.IPMI.length>0?(a(),l("div",Yt,[t("div",Zt,[e[27]||(e[27]=t("div",{class:"list-item__row"},[t("div",{class:"list-item__title"},"Общая информация из IPMI")],-1)),(a(!0),l(p,null,P(s.getDSOrderIPMI?.IPMI,o=>(a(),l("div",{class:"list-item__row list-item__row--table",key:o?.name},[t("div",$t,r(o?.name),1),t("div",te,r(o?.value),1)]))),128))])])):T("",!0),s.getDSOrderIPMI?.["IPMI.Sensors"]&&s.getDSOrderIPMI["IPMI.Sensors"].length>0?(a(),l("div",ee,[t("div",se,[e[28]||(e[28]=t("div",{class:"list-item__row"},[t("div",{class:"list-item__title"},"Данные сенсоров")],-1)),(a(!0),l(p,null,P(s.getDSOrderIPMI["IPMI.Sensors"],(o,c)=>(a(),l("div",{class:"list-item__row list-item__row--table",key:c},[t("div",oe,r(c),1),t("div",re,r(o),1)]))),128))])])):T("",!0)])])]),e[29]||(e[29]=t("div",{class:"section"},[t("div",{class:"container"},[t("div",{class:"text"},[t("h3",null,"Что входит в стоимость"),t("p",null,"Для подключения дополнительных услуг"),t("ul",null,[t("li",null,"Размещение в РФ, Москва"),t("li",null,"Предустановленная ОС FreeBSD / CentOS / Debian / Ubuntu / Windows"),t("li",null,"IP адрес, с возможностью расширения"),t("li",null,"Бесплатная панель управления ISPManager Lite"),t("li",null,"Круглосуточная поддержка")])])])],-1))])):(a(),l("div",ne,[t("div",ie,[n(A,{label:"Заказ не найден"})])]))],64)}const Me=nt(it,[["render",le],["__scopeId","data-v-0dacf5ca"]]);export{Me as default};
