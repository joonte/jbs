import{_ as C}from"./ButtonDefault-CgQ13ecW.js";import{c as o,o as a,a as c,i as p,b as D,F as m,j as g,n as b,t as I,an as h,r as u,y as P,f as k,h as E,v as A}from"./index-DakgQwZZ.js";import{u as L}from"./invoices-DGlLCEtv.js";import{_ as j}from"./_plugin-vue_export-helper-DlAUqK2U.js";const w={props:{data:{type:Object,default:()=>{}}},emits:["modalClose"],setup(r,{emit:i}){const y=h(),s=L(),l=u(!1),_=u(null),d=P("emitter"),t=k(()=>y.data),e=u(null),v=k(()=>t.value?.PaymentSystems?Object.keys(t.value?.PaymentSystems).map(n=>String(t.value?.PaymentSystems?.[n]?.IsActive)==="1"&&t.value?.PaymentSystems?.[n]?.ContractsTypes?.[r.data?.TypeID]==="1"?t.value?.PaymentSystems?.[n]?.Collations:null).filter(n=>n!==null):null);function f(){e.value!==null&&(l.value=!0,s.InvoiceEdit({InvoiceID:r.data?.ItemID,PaymentSystemID:e.value?.type,Summ:r.data?.Summ}).then(n=>{n==="SUCCESS"&&(i("modalClose"),d.emit("updateInvoicesTable")),l.value=!1}))}const S=n=>{n.key==="Enter"&&f()};return E(()=>{document.addEventListener("keyup",S)}),A(()=>{document.removeEventListener("keyup",S)}),{getConfig:t,errorMessage:_,filterActiveSystems:v,switchPaymentSystem:f,isLoading:l,paymentSystem:e}}},B={class:"list-part"},M={key:0,class:"list-row grid-net"},x=["onClick"],N=["src"],T={class:"list-item__image-title"},V={class:"modal__error"};function F(r,i,y,s,l,_){const d=C;return a(),o("div",B,[i[1]||(i[1]=c("div",{class:"list-item__title"},"Платежные системы",-1)),s.filterActiveSystems?(a(),o("div",M,[(a(!0),o(m,null,g(s.filterActiveSystems,t=>(a(),o(m,{key:t[0]?.ID},[(a(!0),o(m,null,g(t,e=>(a(),o(m,{key:e?.ID},[e?.IsActive?(a(),o("div",{key:0,class:b(["list-item",{"list-item_active":s.paymentSystem?.id===e?.ID}]),onClick:v=>s.paymentSystem={id:e?.ID,type:e?.Source}},[c("img",{class:"list-item__image",src:e?.Image},null,8,N),c("div",T,I(e?.Description),1)],10,x)):p("",!0)],64))),128))],64))),128))])):p("",!0),c("div",V,I(s.errorMessage),1),D(d,{label:"Выбрать","is-loading":s.isLoading,onClick:i[0]||(i[0]=t=>s.switchPaymentSystem())},null,8,["is-loading"])])}const W=j(w,[["render",F],["__scopeId","data-v-b6c3c9bd"]]);export{W as default};
