import{_ as h,j as g,o as u,x as p,w,c as y,F as D,v as x,k as f,d as C,t as S,J as M,S as N,y as k,a as B,b as W,R as j,r as P,i as R,B as V}from"./index-19d4a9c5.js";import{u as q}from"./postings-f8eb169d.js";const E={name:"RecursiveComponent",props:{data:{type:Object,required:!0}}};function T(s,c,e,n,_,a){var i,r,l,d;const t=g("recursive-component",!0);return((i=e.data)==null?void 0:i.Name)!=="LINK"&&((r=e.data)==null?void 0:r.Name)!=="SCRIPT"?(u(),p(k((l=e.data)==null?void 0:l.Name),M(N({key:0},(d=e.data)==null?void 0:d.Attribs)),{default:w(()=>{var m,o;return[(m=e.data)!=null&&m.Childs?(u(!0),y(D,{key:0},x(e.data.Childs,(v,b)=>(u(),p(t,{key:b,data:v},null,8,["data"]))),128)):f("",!0),C(" "+S((o=e.data)==null?void 0:o.Text),1)]}),_:1},16)):f("",!0)}const I=h(E,[["render",T]]),F={class:"modal__body"},L={class:"html__container",id:"html-container"};function O(s,c,e,n,_,a){const t=I;return u(),y("div",F,[B("div",L,[W(t,{data:n.htmlContent},null,8,["data"])])])}const z={props:{data:{type:Object,default:()=>{}}},components:{RecursiveComponent:I},setup(s){const c=j("emitter"),e=q(),n=P(null);function _(a,t){var i,r,l,d,m;if(console.log("1234"),a==="/InvoiceDocument"&&(t!=null&&t.Mobile))((i=t.Mobile)==null?void 0:i.length)!==11?c.emit("open-error-modal",{component:"ExclusionWindow",data:{message:{String:"Неверный номер телефона"}}}):e.InvoiceDocument({InvoiceID:(r=s.data)==null?void 0:r.ID,Mobile:t.Mobile}).then(o=>{n.value=o});else{let o=(l=document==null?void 0:document.forms[0])==null?void 0:l.querySelector('input[name="Mobile"]');a==="/InvoiceDocument"&&o.value&&(((d=o.value)==null?void 0:d.length)!==11?c.emit("open-error-modal",{component:"ExclusionWindow",data:{message:{String:"Неверный номер телефона"}}}):e.InvoiceDocument({InvoiceID:(m=s.data)==null?void 0:m.ID,Mobile:o.value}).then(v=>{n.value=v}))}}return window.ShowWindow=_.bind(this),R(()=>{n.value=s.data.html;const a=document.querySelector(".modal__close-modal-button");a&&(a.style.display="none")}),V(()=>{c.emit("close-modal")}),{htmlContent:n}}},K=h(z,[["render",O],["__scopeId","data-v-8aa6e0ee"]]);export{K as default};
