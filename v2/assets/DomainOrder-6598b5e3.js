import{j as J,o as u,c as h,b as r,a as e,t as l,w as K,d as Q,x as $,k as B,Y as tt,Z as et,F as ot,p as st,l as it,_ as nt,a7 as at,f as lt,e as ct,R as rt,r as R,g as N,i as _t}from"./index-01c72474.js";import{u as mt}from"./domain-b4e0f5d4.js";import{u as dt}from"./contracts-b8a59bf1.js";import{f as E,a as ut}from"./useTimeFunction-8602dd60.js";import{_ as Dt}from"./IconCard-35ff8a4a.js";import{I as gt}from"./IconProfile-29703432.js";import{I as ht}from"./IconSettings-ac9d3113.js";import{_ as vt,a as ft}from"./ServicesContractBalanceBlock-18027f8d.js";import{S as z}from"./StatusBadge-1436ac85.js";import{B as G}from"./BlockBalanceAgreement-89ea0555.js";import{E as pt}from"./EmptyStateBlock-453d542f.js";import{_ as bt}from"./ButtonDefault-6f60da99.js";import{_ as It}from"./ClausesKeeper-39926d40.js";import"./bootstrap-vue-next.es-44eeb912.js";import"./IconArrow-669aa41b.js";import"./IconClose-6051fe98.js";const wt={Waiting:{id:1,label:"Ожидание оплаты",color:"#459FD1",background:"#ADC1F04C"},ClaimForRegister:{id:2,label:"Заявка на регистрацию",color:"#FFC107",background:"#FFC10733"},ForContractRegister:{id:3,label:"Для регистрации договора",color:"#FFC107",background:"#FFC10733"},OnContractRegister:{id:4,label:"На регистрации договора",color:"#FFC107",background:"#FFC10733"}},c=_=>(st("data-v-d7fb77d4"),_=_(),it(),_),kt={key:0,class:"section"},St={class:"container"},Ct={class:"section-header"},Ot={class:"section-title"},Ft=["href"],Nt={class:"section-label"},yt={class:"section-nav"},xt={class:"list"},Pt={class:"list-col list-col--md"},Bt={class:"list-item"},Rt={class:"list-item__row"},Et={class:"list-item__title"},At={class:"list-item__status"},Tt={class:"list-item__row"},Ut={class:"list-item__ul"},Vt={key:0},Wt={class:"list-item__row list-item__row--column"},jt={key:0,class:"list-item__text"},Lt={class:"list-item__text"},Mt={class:"list-item__text"},qt={class:"list-item__row"},Ht={class:"btn btn--border btn--switch"},Xt=c(()=>e("span",{class:"btn-switch__text"},"Автопродление",-1)),Yt=c(()=>e("span",{class:"btn-switch__toggle"},null,-1)),Zt={class:"list-col list-col--md"},zt={class:"list-item"},Gt={class:"list-item__row list-item__row--nowrap"},Jt=c(()=>e("div",{class:"list-item__title"},"Именные сервера",-1)),Kt={class:"list-item__row list-item__row--table"},Qt=c(()=>e("div",{class:"list-item__item"},"Первичный сервер",-1)),$t={class:"list-item__item"},te={class:"list-item__row list-item__row--table"},ee=c(()=>e("div",{class:"list-item__item"},"Вторичный сервер",-1)),oe={class:"list-item__item"},se={class:"list-col list-col--md"},ie={class:"list-item"},ne=c(()=>e("div",{class:"list-item__row"},[e("div",{class:"list-item__title"},"Контактные данные")],-1)),ae={class:"list-item__row list-item__row--table"},le=c(()=>e("div",{class:"list-item__item"},"Скрыть данные в WhoIs",-1)),ce={class:"btn btn--switch"},re=["checked"],_e=c(()=>e("span",{class:"btn-switch__toggle"},null,-1)),me={class:"list-item__row list-item__row--table"},de=c(()=>e("div",{class:"list-item__item"},"Последнее обновление адрес",-1)),ue={class:"list-item__item"},De={key:1,class:"section"},ge={class:"container"};function he(_,n,a,o,A,v){var b,I,w,k,S,C,O,F,t,i,m,P,T,U,V,W,j,L,M,q,H,X,Y,Z;const D=G,f=J("router-link"),p=It,g=bt,y=vt,s=z,x=pt;return u(),h(ot,null,[r(D),(b=o.getDomain)!=null&&b.ID?(u(),h("div",kt,[e("div",St,[e("div",Ct,[e("h1",Ot,[e("a",{href:o.fullDomainUrl,target:"_blank"},l((I=o.getDomain)==null?void 0:I.Domain),9,Ft)]),e("div",Nt,"Домен # "+l((w=o.getDomain)==null?void 0:w.OrderID),1),e("div",yt,[r(f,{class:"section-nav__item",to:`/DomainOrders/${(k=o.getDomain)==null?void 0:k.OrderID}`},{default:K(()=>[Q("Домен")]),_:1},8,["to"])])]),r(p),((S=o.getDomain)==null?void 0:S.StatusID)==="Waiting"||((C=o.getDomain)==null?void 0:C.StatusID)==="ClaimForRegister"||((O=o.getDomain)==null?void 0:O.StatusID)==="ForContractRegister"||((F=o.getDomain)==null?void 0:F.StatusID)==="ForRegister"||((t=o.getDomain)==null?void 0:t.StatusID)==="ForTransfer"?(u(),$(g,{key:0,class:"btn-mn__bot",label:"Определить владельца",onClick:n[0]||(n[0]=d=>o.designateOwner())})):B("",!0),e("div",xt,[r(y,{"contract-id":(i=o.getDomain)==null?void 0:i.ContractID,onTransfer:n[1]||(n[1]=d=>o.transferItem())},null,8,["contract-id"]),e("div",Pt,[e("div",Bt,[e("div",Rt,[e("div",Et,l((m=o.getDomain)==null?void 0:m.Domain),1),e("div",At,[r(s,{status:(P=o.getDomain)==null?void 0:P.StatusID,"status-table":"DomainOrders"},null,8,["status"])])]),e("div",Tt,[e("ul",Ut,[(T=o.getDomainScheme)!=null&&T.PackageID?(u(),h("li",Vt,l((U=o.getDomainScheme)==null?void 0:U.PackageID),1)):B("",!0)])]),e("div",Wt,[(V=o.getDomainScheme)!=null&&V.CostProlong?(u(),h("div",jt,l((W=o.getDomainScheme)==null?void 0:W.CostProlong)+" ₽ продлить на 12 месяцев",1)):B("",!0),e("div",Lt,"Дней осталось "+l(((j=o.getDomain)==null?void 0:j.DaysRemainded)||0),1),e("div",Mt,"Дата окончания "+l(o.calculateExpirationDate((L=o.getDomain)==null?void 0:L.DaysRemainded)),1)]),e("div",qt,[r(g,{label:((M=o.getDomain)==null?void 0:M.StatusID)==="ClaimForRegister"||((q=o.getDomain)==null?void 0:q.StatusID)==="Waiting"?"Оплатить":"Продлить",onClick:n[2]||(n[2]=d=>o.navigateToProlong())},null,8,["label"]),e("label",Ht,[tt(e("input",{type:"checkbox","onUpdate:modelValue":n[3]||(n[3]=d=>o.isAutoProlong=d),onInput:n[4]||(n[4]=d=>o.setProlongValue())},null,544),[[et,o.isAutoProlong]]),Xt,Yt])])])]),e("div",Zt,[e("div",zt,[e("div",Gt,[Jt,r(g,{class:"ml-auto",label:"Редактировать",onClick:n[5]||(n[5]=d=>o.toggleDomainsEdit())})]),e("div",Kt,[Qt,e("div",$t,l((H=o.getDomain)==null?void 0:H.Ns1Name),1)]),e("div",te,[ee,e("div",oe,l((X=o.getDomain)==null?void 0:X.Ns2Name),1)])])]),e("div",se,[e("div",ie,[ne,e("div",ae,[le,e("label",ce,[e("input",{type:"checkbox",checked:(Y=o.getDomain)==null?void 0:Y.IsPrivateWhoIs,disabled:""},null,8,re),_e])]),e("div",me,[de,e("div",ue,l(o.lastUpdate((Z=o.getDomain)==null?void 0:Z.StatusDate)),1)])])])])])])):(u(),h("div",De,[e("div",ge,[r(x,{label:"Заказ не найден"})])]))],64)}const ve={components:{IconCard:Dt,IconProfile:gt,IconSettings:ht,IconEye:ft,StatusBadge:z,BlockBalanceAgreement:G},async setup(){const _=at(),n=lt(),a=mt(),o=dt(),A=ct(),v=rt("emitter"),D=R(null),f=R(!1),p=R({});function g(){v.emit("open-modal",{component:"DomainsEdit",data:s.value})}function y(){var t;a.DomainOrderNsChange({DomainOrderID:Number((t=s.value)==null?void 0:t.ID),XMLHttpRequest:"yes"}).then(i=>{let{result:m,error:P}=i;m==="SUCCESS"&&(f.value=!1,a.fetchDomains())})}const s=N(()=>Object.keys(a==null?void 0:a.domainsList).map(t=>a==null?void 0:a.domainsList[t]).find(t=>t.OrderID===_.params.id)),x=N(()=>{var t,i;return(i=a==null?void 0:a.domainSchemes)==null?void 0:i[(t=s.value)==null?void 0:t.SchemeID]}),b=N(()=>{var t,i;return(i=n==null?void 0:n.userOrders)==null?void 0:i[(t=s.value)==null?void 0:t.OrderID]}),I=N(()=>{var i;if(!((i=s.value)!=null&&i.Domain))return"";const t=s.value.Domain;return t.startsWith("http://")||t.startsWith("https://")?t:`https://${t}`});function w(t){if(!t)return E(new Date);const i=new Date,m=new Date(i.getTime()+t*24*60*60*1e3);return E(m)}function k(t){return t?E(ut(t)):""}function S(){try{const t={DomainOrderID:s==null?void 0:s.value.ID,Domain:s==null?void 0:s.value.Domain};v.emit("open-modal",{component:"DomainSelectOwner",data:t})}catch(t){console.error(t)}}function C(){var t,i;v.emit("open-modal",{component:"OrdersTransfer",data:{ServiceOrderID:(t=s.value)==null?void 0:t.ID,ServiceID:(i=s.value)==null?void 0:i.ServiceID}})}function O(){var t;n.prolongOrder({IsAutoProlong:D.value?0:1,OrderID:(t=s.value)==null?void 0:t.OrderID})}function F(){var t;A.push(`/DomainOrderPay/${(t=s.value)==null?void 0:t.OrderID}`)}return _t(()=>{var t,i;p.value={Ns1Name:(t=s.value)==null?void 0:t.Ns1Name,Ns2Name:(i=s.value)==null?void 0:i.Ns2Name}}),await a.fetchDomains(),await a.fetchDomainSchemes(),await o.fetchProfiles(),await n.fetchUserOrders().then(()=>{var t;D.value=(t=b.value)==null?void 0:t.IsAutoProlong}),{getDomain:s,getDomainScheme:x,isAutoProlong:D,setProlongValue:O,navigateToProlong:F,domainStatuses:wt,transferItem:C,lastUpdate:k,designateOwner:S,calculateExpirationDate:w,domainsEdit:f,domainNames:p,saveDomains:y,toggleDomainsEdit:g,fullDomainUrl:I}}},Ee=nt(ve,[["render",he],["__scopeId","data-v-d7fb77d4"]]);export{Ee as default};
