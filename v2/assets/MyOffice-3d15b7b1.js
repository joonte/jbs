import{j as O,o as A,c as V,b as s,a as e,w as c,d as p,t as w,F as H,p as N,l as R,_ as j,f as M,S as E,e as L,g as k}from"./index-5e313302.js";import{u as U}from"./postings-03760ecf.js";import{u as W}from"./contracts-3351d68f.js";import{I as P,a as $,b as B,c as F}from"./IconWeb-93b028f1.js";import{S as T}from"./StatusBadge-98696de1.js";import{B as q}from"./BlockBalanceAgreement-bb87adc1.js";import{C as z}from"./bootstrap-vue-next.es-a19a8b41.js";import{_ as G}from"./IconCard-67ad5f17.js";import{_ as J}from"./ButtonDefault-7c216fc6.js";import{_ as K}from"./ClausesKeeper-eb954229.js";import"./IconArrow-555f9d45.js";import"./IconClose-1f889a2e.js";const Q=[{key:"ID",label:"Заказ",variant:"td-gray td-order"},{key:"ContractID",label:"Договор",variant:"td-blue"},{key:"ServiceID",label:"Услуга",variant:"td-gray td-order"},{key:"StatusID",label:"Статус",sortable:!0,variant:"td-gray td-order"},{key:"controls",label:"",variant:"td-controls"}],X={Deleted:{id:1,label:"Удален",color:"#DF5747",background:"#DF57471A"},Suspended:{id:2,label:"Заблокирован",color:"#DF5747",background:"#DF57471A"},OnService:{id:3,label:"Сервер на обслуживании",color:"#FFC107",background:"rgba(255,193,7,0.1)"}},d=n=>(N("data-v-c50dfcda"),n=n(),R(),n),Y={class:"section"},Z={class:"container"},ee=d(()=>e("div",{class:"section-header"},[e("h1",{class:"section-title"},"Домашняя страница")],-1)),te={class:"list-grid-three-col"},se={class:"list-col"},oe={class:"list-item"},ae=d(()=>e("div",{class:"list-item__row"},[e("div",{class:"list-item__title"},"Услуги")],-1)),ne={class:"list-col"},ce={class:"list-item"},re=d(()=>e("div",{class:"list-item__row"},[e("div",{class:"list-item__title"},"Мой офис")],-1)),le={class:"list-item__row icon-row"},ie={class:"list-col"},de={class:"list-item"},_e=d(()=>e("div",{class:"list-item__row"},[e("div",{class:"list-item__title"},"Поддержка")],-1)),ue={class:"list-item__row icon-row"},me=d(()=>e("div",{class:"section-header"},[e("h2",{class:"sub-section-title"},"Требует внимания")],-1)),pe=d(()=>e("span",{class:"td-mobile"},"Заказ",-1)),ve={class:"d-block"},fe=d(()=>e("span",{class:"td-mobile"},"Договор",-1)),be=d(()=>e("span",{class:"td-mobile"},"Услуга",-1)),ge={class:"d-block"},he=d(()=>e("span",{class:"td-mobile"},"Статус",-1)),De={class:"btn__group"},Se=["onClick"],Ie=d(()=>e("p",null,"ОПЛАТИТЬ",-1));function we(n,r,v,i,f,C){const h=O("BalanceAgreement"),b=K,D=P,_=O("router-link"),S=$,I=B,o=F,t=J,l=T,m=G,x=z;return A(),V(H,null,[s(h),e("div",Y,[e("div",Z,[ee,s(b,{partition:"Header:/Home"}),e("div",te,[e("div",se,[e("div",oe,[ae,s(_,{class:"list-item__row icon-row",to:"/HostingOrders"},{default:c(()=>[s(D),p("Заказать хостинг")]),_:1}),s(_,{class:"list-item__row icon-row",to:"/DomainOrders"},{default:c(()=>[s(S),p("Заказать домен")]),_:1}),s(_,{class:"list-item__row icon-row",to:"/DSOrders"},{default:c(()=>[s(I),p("Заказать выделенный сервер")]),_:1}),s(_,{class:"list-item__row icon-row",to:"/VPSOrders"},{default:c(()=>[s(o),p("Заказать VPS/VDS сервер")]),_:1})])]),e("div",ne,[e("div",ce,[e("div",null,[re,s(_,{class:"list-item__row icon-row",to:"/Contracts"},{default:c(()=>[p("Мои договора")]),_:1})]),e("div",le,[s(t,{label:"Создать договор",onClick:r[0]||(r[0]=a=>n.$router.push("/ContractMake"))})])])]),e("div",ie,[e("div",de,[e("div",null,[_e,s(_,{class:"list-item__row icon-row",to:"/Tickets"},{default:c(()=>[p("Тикеты")]),_:1}),s(_,{class:"list-item__row icon-row",to:"/Contacts"},{default:c(()=>[p("Контакты")]),_:1})]),e("div",ue,[s(t,{label:"Создать тикет",onClick:r[1]||(r[1]=a=>n.$router.push("/NewTicket"))})])])])]),me,s(x,{class:"basic-table",items:i.getOrders,fields:i.dashboardTableFields,"show-empty":!0,"per-page":5,page:1,"empty-text":"Пока не требуется никаких действий","empty-filtered-text":"Пока не требуется никаких действий",onRowClicked:r[2]||(r[2]=(a,u,g)=>i.navigateToOrderPage(a,g))},{"cell(ID)":c(a=>[pe,e("span",ve,w(a.value),1)]),"cell(ContractID)":c(a=>{var u;return[fe,e("span",null,w((u=i.getContracts[a.value])==null?void 0:u.Customer),1)]}),"cell(ServiceID)":c(a=>{var u;return[be,e("span",ge,w((u=i.getServices[a.value])==null?void 0:u.Name),1)]}),"cell(StatusID)":c(a=>[he,s(l,{class:"clickable-element",status:a.value,"status-table":"Orders",onClick:u=>{var g,y;return i.openHistoryStatuses((g=a.item)==null?void 0:g.ServiceOrderID,(y=a.item)==null?void 0:y.Code)}},null,8,["status","onClick"])]),"cell(controls)":c(a=>[e("div",De,[e("button",{class:"btn btn-default btn--border",onClick:u=>i.navigateToProlong(a.item)},[s(m),Ie],8,Se)])]),_:1},8,["items","fields"])])])],64)}const ke={components:{IconServer:P,IconDedicatedServers:B,IconWeb:$,IconVPS:F,StatusBadge:T,BalanceAgreement:q},async setup(){const n=M(),r=U(),v=W(),i=E("emitter"),f=L(),C=k(()=>{var o;return(o=Object.keys(n==null?void 0:n.userOrders).map(t=>n==null?void 0:n.userOrders[t]))==null?void 0:o.reverse().filter(t=>(t==null?void 0:t.StatusID)==="Deleted"||(t==null?void 0:t.StatusID)==="Suspended"||(t==null?void 0:t.StatusID)==="OnService"||(t==null?void 0:t.DaysRemainded)>0&&(t==null?void 0:t.DaysRemainded)<14)}),h=k(()=>v==null?void 0:v.contractsList),b=k(()=>r==null?void 0:r.servicesList);function D(o,t){var l;if(!t.target.closest("button, a, .clickable-element")){let m=(l=b.value[o.ServiceID])==null?void 0:l.Code;m==="Default"||m==="ExtraIP"||m==="ISPsw"||m==="DNSmanager"?f.push(`/AdditionalServices/${o.ID}`):f.push(`/${m}Orders/${o.ID}`)}}function _(o){i.emit("open-modal",{component:"DeleteItem",data:{id:o,message:`Вы действительно хотите удалить заказ #${o}?`,tableID:"Orders"}})}function S(o,t){let l="";t==="Default"?l="Orders":l=t+"Orders",i.emit("open-modal",{component:"StatusHistory",data:{modeID:l,rowID:o}})}function I(o){var l;let t=(l=b.value[o.ServiceID])==null?void 0:l.Code;t==="Default"?f.push(`/ServiceOrderPay/${o.ID}`):f.push(`/${t}OrderPay/${o.ID}`)}return await n.fetchUserOrders(),await r.fetchServices(),await v.fetchContracts(),{getOrders:C,getContracts:h,getServices:b,dangerStatuses:X,dashboardTableFields:Q,deleteItem:_,navigateToOrderPage:D,openHistoryStatuses:S,navigateToProlong:I}}},Ne=j(ke,[["render",we],["__scopeId","data-v-c50dfcda"]]);export{Ne as default};
