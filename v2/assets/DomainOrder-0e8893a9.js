import{j as Q,o as u,c as h,b as c,a as e,t as l,w as Y,d as $,y as tt,k as E,Z as et,$ as ot,F as st,p as it,l as nt,_ as at,a7 as lt,f as rt,e as ct,S as _t,r as R,g as N,h as mt}from"./index-83b4b7ba.js";import{u as dt}from"./domain-9fbc7ef8.js";import{u as ut}from"./contracts-623ec7a8.js";import{f as A,a as Dt}from"./useTimeFunction-8602dd60.js";import{_ as gt}from"./IconCard-2cc17a6b.js";import{I as vt}from"./IconProfile-34c25888.js";import{I as ht}from"./IconSettings-bac5439e.js";import{_ as ft,a as pt}from"./ServicesContractBalanceBlock-627f7a8d.js";import{S as J}from"./StatusBadge-0d170ac0.js";import{B as K}from"./BlockBalanceAgreement-c5fad736.js";import{E as It}from"./EmptyStateBlock-68a1c33e.js";import{_ as bt}from"./ButtonDefault-dc248ec6.js";import{_ as wt}from"./ClausesKeeper-55c14b7f.js";import"./bootstrap-vue-next.es-8f3ae81a.js";import"./IconArrow-80c72216.js";import"./IconClose-86aafc4e.js";const St={Waiting:{id:1,label:"Ожидание оплаты",color:"#459FD1",background:"#ADC1F04C"},ClaimForRegister:{id:2,label:"Заявка на регистрацию",color:"#FFC107",background:"#FFC10733"},ForContractRegister:{id:3,label:"Для регистрации договора",color:"#FFC107",background:"#FFC10733"},OnContractRegister:{id:4,label:"На регистрации договора",color:"#FFC107",background:"#FFC10733"}},r=m=>(it("data-v-d5be733d"),m=m(),nt(),m),kt={key:0,class:"section"},Ct={class:"container"},Ot={class:"section-header"},yt={class:"section-title"},Ft=["href"],Nt={class:"section-label"},Pt={class:"section-nav"},xt={class:"list"},Bt={class:"list-col list-col--md"},Et={class:"list-item"},Rt={class:"list-item__row"},At={class:"list-item__title"},Tt={class:"list-item__status"},Ut={class:"list-item__row"},Vt={class:"list-item__ul"},Wt={key:0},Ht={class:"list-item__row list-item__row--column"},jt={key:0,class:"list-item__text"},Lt={class:"list-item__text"},Mt={class:"list-item__text"},qt={class:"list-item__row"},Xt={class:"btn btn--border btn--switch"},Zt=r(()=>e("span",{class:"btn-switch__text"},"Автопродление",-1)),zt=r(()=>e("span",{class:"btn-switch__toggle"},null,-1)),Gt={class:"list-col list-col--md"},Jt={class:"list-item"},Kt={class:"list-item__row list-item__row--nowrap"},Qt=r(()=>e("div",{class:"list-item__title"},"Именные сервера",-1)),Yt={class:"list-item__row list-item__row--table"},$t=r(()=>e("div",{class:"list-item__item"},"Первичный сервер",-1)),te={class:"list-item__item"},ee={class:"list-item__row list-item__row--table"},oe=r(()=>e("div",{class:"list-item__item"},"Вторичный сервер",-1)),se={class:"list-item__item"},ie={class:"list-col list-col--md"},ne={class:"list-item"},ae=r(()=>e("div",{class:"list-item__row"},[e("div",{class:"list-item__title"},"Контактные данные")],-1)),le={class:"list-item__row list-item__row--table"},re=r(()=>e("div",{class:"list-item__item"},"Скрыть данные в WhoIs",-1)),ce={class:"btn btn--switch"},_e=["checked"],me=r(()=>e("span",{class:"btn-switch__toggle"},null,-1)),de={class:"list-item__row list-item__row--table"},ue=r(()=>e("div",{class:"list-item__item"},"Последнее обновление адрес",-1)),De={class:"list-item__item"},ge={key:1,class:"section"},ve={class:"container"};function he(m,n,a,o,T,D){var I,b,w,S,k,C,O,y,F,t,i,d,B,U,V,W,H,j,L,M,q,X,Z,z;const g=K,f=Q("router-link"),p=wt,v=bt,P=ft,x=J,s=It;return u(),h(st,null,[c(g),(I=o.getDomain)!=null&&I.ID?(u(),h("div",kt,[e("div",Ct,[e("div",Ot,[e("h1",yt,[e("a",{href:o.fullDomainUrl,target:"_blank"},l((b=o.getDomain)==null?void 0:b.Domain),9,Ft)]),e("div",Nt,"Домен # "+l((w=o.getDomain)==null?void 0:w.OrderID),1),e("div",Pt,[c(f,{class:"section-nav__item",to:`/DomainOrders/${(S=o.getDomain)==null?void 0:S.OrderID}`},{default:Y(()=>[$("Домен")]),_:1},8,["to"])])]),c(p),((k=o.getDomain)==null?void 0:k.StatusID)==="Waiting"||((C=o.getDomain)==null?void 0:C.StatusID)==="ClaimForRegister"||((O=o.getDomain)==null?void 0:O.StatusID)==="ForContractRegister"||((y=o.getDomain)==null?void 0:y.StatusID)==="ForRegister"||((F=o.getDomain)==null?void 0:F.StatusID)==="ForTransfer"?(u(),tt(v,{key:0,class:"btn-mn__bot",label:"Определить владельца",onClick:n[0]||(n[0]=_=>o.designateOwner())})):E("",!0),e("div",xt,[c(P,{"contract-id":(t=o.getDomain)==null?void 0:t.ContractID,onTransfer:n[1]||(n[1]=_=>o.transferItem())},null,8,["contract-id"]),e("div",Bt,[e("div",Et,[e("div",Rt,[e("div",At,l((i=o.getDomain)==null?void 0:i.Domain),1),e("div",Tt,[c(x,{status:(d=o.getDomain)==null?void 0:d.StatusID,"status-table":"DomainOrders",onClick:n[2]||(n[2]=_=>{var G;return o.openHistoryStatuses((G=o.getDomain)==null?void 0:G.ID)})},null,8,["status"])])]),e("div",Ut,[e("ul",Vt,[(B=o.getDomainScheme)!=null&&B.PackageID?(u(),h("li",Wt,l((U=o.getDomainScheme)==null?void 0:U.PackageID),1)):E("",!0)])]),e("div",Ht,[(V=o.getDomainScheme)!=null&&V.CostProlong?(u(),h("div",jt,l((W=o.getDomainScheme)==null?void 0:W.CostProlong)+" ₽ продлить на 12 месяцев",1)):E("",!0),e("div",Lt,"Дней осталось "+l(((H=o.getDomain)==null?void 0:H.DaysRemainded)||0),1),e("div",Mt,"Дата окончания "+l(o.calculateExpirationDate((j=o.getDomain)==null?void 0:j.DaysRemainded)),1)]),e("div",qt,[c(v,{label:((L=o.getDomain)==null?void 0:L.StatusID)==="ClaimForRegister"||((M=o.getDomain)==null?void 0:M.StatusID)==="Waiting"?"Оплатить":"Продлить",onClick:n[3]||(n[3]=_=>o.navigateToProlong())},null,8,["label"]),e("label",Xt,[et(e("input",{type:"checkbox","onUpdate:modelValue":n[4]||(n[4]=_=>o.isAutoProlong=_),onInput:n[5]||(n[5]=_=>o.setProlongValue())},null,544),[[ot,o.isAutoProlong]]),Zt,zt])])])]),e("div",Gt,[e("div",Jt,[e("div",Kt,[Qt,c(v,{class:"ml-auto",label:"Редактировать",onClick:n[6]||(n[6]=_=>o.toggleDomainsEdit())})]),e("div",Yt,[$t,e("div",te,l((q=o.getDomain)==null?void 0:q.Ns1Name),1)]),e("div",ee,[oe,e("div",se,l((X=o.getDomain)==null?void 0:X.Ns2Name),1)])])]),e("div",ie,[e("div",ne,[ae,e("div",le,[re,e("label",ce,[e("input",{type:"checkbox",checked:(Z=o.getDomain)==null?void 0:Z.IsPrivateWhoIs,disabled:""},null,8,_e),me])]),e("div",de,[ue,e("div",De,l(o.lastUpdate((z=o.getDomain)==null?void 0:z.StatusDate)),1)])])])])])])):(u(),h("div",ge,[e("div",ve,[c(s,{label:"Заказ не найден"})])]))],64)}const fe={components:{IconCard:gt,IconProfile:vt,IconSettings:ht,IconEye:pt,StatusBadge:J,BlockBalanceAgreement:K},async setup(){const m=lt(),n=rt(),a=dt(),o=ut(),T=ct(),D=_t("emitter"),g=R(null),f=R(!1),p=R({});function v(){D.emit("open-modal",{component:"DomainsEdit",data:s.value})}function P(){var t;a.DomainOrderNsChange({DomainOrderID:Number((t=s.value)==null?void 0:t.ID),XMLHttpRequest:"yes"}).then(i=>{let{result:d,error:B}=i;d==="SUCCESS"&&(f.value=!1,a.fetchDomains())})}function x(t){D.emit("open-modal",{component:"StatusHistory",data:{modeID:"DomainOrders",rowID:t}})}const s=N(()=>Object.keys(a==null?void 0:a.domainsList).map(t=>a==null?void 0:a.domainsList[t]).find(t=>t.OrderID===m.params.id)),I=N(()=>{var t,i;return(i=a==null?void 0:a.domainSchemes)==null?void 0:i[(t=s.value)==null?void 0:t.SchemeID]}),b=N(()=>{var t,i;return(i=n==null?void 0:n.userOrders)==null?void 0:i[(t=s.value)==null?void 0:t.OrderID]}),w=N(()=>{var i;if(!((i=s.value)!=null&&i.Domain))return"";const t=s.value.Domain;return t.startsWith("http://")||t.startsWith("https://")?t:`https://${t}`});function S(t){if(!t)return A(new Date);const i=new Date,d=new Date(i.getTime()+t*24*60*60*1e3);return A(d)}function k(t){return t?A(Dt(t)):""}function C(){try{const t={DomainOrderID:s==null?void 0:s.value.ID,Domain:s==null?void 0:s.value.Domain};D.emit("open-modal",{component:"DomainSelectOwner",data:t})}catch(t){console.error(t)}}function O(){var t,i;D.emit("open-modal",{component:"OrdersTransfer",data:{ServiceOrderID:(t=s.value)==null?void 0:t.ID,ServiceID:(i=s.value)==null?void 0:i.ServiceID}})}function y(){var t;n.prolongOrder({IsAutoProlong:g.value?0:1,OrderID:(t=s.value)==null?void 0:t.OrderID})}function F(){var t;T.push(`/DomainOrderPay/${(t=s.value)==null?void 0:t.OrderID}`)}return mt(()=>{var t,i;p.value={Ns1Name:(t=s.value)==null?void 0:t.Ns1Name,Ns2Name:(i=s.value)==null?void 0:i.Ns2Name}}),await a.fetchDomains(),await a.fetchDomainSchemes(),await o.fetchProfiles(),await n.fetchUserOrders().then(()=>{var t;g.value=(t=b.value)==null?void 0:t.IsAutoProlong}),{getDomain:s,getDomainScheme:I,isAutoProlong:g,setProlongValue:y,navigateToProlong:F,domainStatuses:St,transferItem:O,lastUpdate:k,designateOwner:C,calculateExpirationDate:S,domainsEdit:f,domainNames:p,saveDomains:P,toggleDomainsEdit:v,fullDomainUrl:w,openHistoryStatuses:x}}},Ae=at(fe,[["render",he],["__scopeId","data-v-d5be733d"]]);export{Ae as default};
