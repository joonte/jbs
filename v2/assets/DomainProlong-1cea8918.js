import{o as a,c as n,b as d,a as e,t as f,F as E,k as L,p as M,l as R,_ as T,a7 as V,e as j,S as W,r as K,g as v,h as U}from"./index-83b4b7ba.js";import{u as q}from"./domain-9fbc7ef8.js";import{u as z}from"./contracts-623ec7a8.js";import{s as G}from"./multiselect-f2568231.js";import{B as N}from"./BlockBalanceAgreement-c5fad736.js";import{E as H}from"./EmptyStateBlock-68a1c33e.js";import{_ as J}from"./ButtonDefault-dc248ec6.js";import{_ as Q}from"./ClausesKeeper-55c14b7f.js";import"./bootstrap-vue-next.es-8f3ae81a.js";import"./IconArrow-80c72216.js";import"./IconClose-86aafc4e.js";const r=t=>(M("data-v-a1e55293"),t=t(),R(),t),X={key:0,class:"domain-scheme"},Y={class:"section"},Z={class:"container"},$={class:"section-header"},oo={key:0,class:"section-title"},eo={key:1,class:"section-title"},to={key:2,class:"section-title"},so={class:"section-label"},ao={class:"section"},no={class:"container"},io={class:"domain-prolong__data"},co={key:0,class:"form-field"},lo=r(()=>e("div",{class:"form-field__label"},"Стоимость заказа (в год)",-1)),ro=["value"],_o={class:"form-field"},mo=r(()=>e("div",{class:"form-field__label"},"Стоимость продления (в год)",-1)),ho=["value"],go=r(()=>e("label",{class:"form-field"},[e("div",{class:"form-field__label"},"Количество лет"),e("input",{type:"text",placeholder:"1",value:"1",disabled:""})],-1)),Do={key:1,class:"form-field__msg"},fo={class:"form-field"},vo=r(()=>e("div",{class:"form-field__label"},"Всего к оплате",-1)),po=["value"],uo={class:"section"},So={class:"container"},bo={class:"domain-prolong__data"},yo={class:"total-block"},ko={class:"total-block__row total-block__row--big"},Co=r(()=>e("div",{class:"total-block__col"},"Итого за 1 год",-1)),Io={class:"total-block__col"},Po={key:1,class:"section"},Fo={class:"container"},xo={key:1,class:"section"},Bo={class:"container"};function Oo(t,c,p,o,_,u){var h,l,D,S,b,y,k,C,I,P,F,x,B,O,w,A;const i=N,m=Q,g=J,s=H;return a(),n(E,null,[d(i),o.getDomain?(a(),n("div",X,[e("div",Y,[e("div",Z,[e("div",$,[o.getDomain.StatusID==="Waiting"?(a(),n("h1",oo,"Оплата заказа доменного имени")):o.getDomain.StatusID==="ForTransfer"?(a(),n("h1",eo,"Оплата переноса домена")):(a(),n("h1",to,"Оплата продления доменного имени")),e("div",so,f((h=o.getDomain)!=null&&h.DomainName?`#${(l=o.getDomain)==null?void 0:l.DomainName}`:""),1)]),d(m)])]),(D=o.getDomainSchemes)!=null&&D.IsPayed&&((S=o.getDomainSchemes)!=null&&S.IsProlong)||!((b=o.getDomainSchemes)!=null&&b.IsPayed)?(a(),n(E,{key:0},[e("div",ao,[e("div",no,[e("div",io,[o.getDomain.StatusID==="Waiting"||o.getDomain.StatusID==="ForTransfer"?(a(),n("label",co,[lo,e("input",{type:"text",placeholder:"0 руб",value:((y=o.getDomainSchemes)==null?void 0:y.CostOrder)+" руб",disabled:""},null,8,ro)])):L("",!0),e("label",_o,[mo,e("input",{type:"text",placeholder:"0 руб",value:((k=o.getDomainSchemes)==null?void 0:k.CostProlong)+" руб",disabled:""},null,8,ho)]),go,(C=o.getDomain)!=null&&C.AdditionalCost?(a(),n("div",Do,[e("p",null,f((I=o.getDomain)==null?void 0:I.AdditionalCost.Message),1)])):L("",!0),e("label",fo,[vo,e("input",{type:"text",placeholder:"0 руб",value:o.getDomain.IsPayed?parseFloat((F=o.getDomainSchemes)==null?void 0:F.CostProlong).toFixed(2)+" руб":parseFloat((P=o.getDomainSchemes)==null?void 0:P.CostOrder).toFixed(2)+" руб",disabled:""},null,8,po)])])])]),e("div",uo,[e("div",So,[e("div",bo,[e("div",yo,[e("div",ko,[Co,e("div",Io,f(o.getDomain.IsPayed?parseFloat((B=o.getDomainSchemes)==null?void 0:B.CostProlong).toFixed(2)||"0.00":parseFloat((x=o.getDomainSchemes)==null?void 0:x.CostOrder).toFixed(2))+" ₽",1)])]),d(g,{class:"btn--wide",label:+((O=o.getContract)==null?void 0:O.Balance)>(o.getDomain.StatusID==="ClaimForRegister"?+((w=o.getDomainSchemes)==null?void 0:w.CostOrder):+((A=o.getDomainSchemes)==null?void 0:A.CostProlong))?"Оплатить c баланса договора":"Добавить в корзину",onClick:c[0]||(c[0]=Ao=>o.orderPay()),"is-loading":o.isLoading},null,8,["label","is-loading"])])])])],64)):(a(),n("div",Po,[e("div",Fo,[d(s,{class:"no-margin",label:"Заказ нельзя продлить"})])]))])):(a(),n("div",xo,[e("div",Bo,[d(s,{label:"Заказ домена не найден"})])]))],64)}const wo={components:{Multiselect:G,BlockBalanceAgreement:N},async setup(){const t=q(),c=z(),p=V(),o=j();W("emitter");const _=K(!1);function u(){var s;_.value=!0,t.DomainOrderPay({DomainOrderID:(s=i.value)==null?void 0:s.ID}).then(h=>{let{result:l,error:D}=h;l==="SUCCESS"?o.push("/DomainOrders"):l==="BASKET"&&o.push("/Basket"),_.value=!1})}const i=v(()=>Object.keys(t==null?void 0:t.domainsList).map(s=>t==null?void 0:t.domainsList[s]).find(s=>s.OrderID===p.params.id)),m=v(()=>{var s;return t==null?void 0:t.domainSchemes[(s=i.value)==null?void 0:s.SchemeID]}),g=v(()=>{var s;return c.contractsList[(s=i.value)==null?void 0:s.ContractID]});return U(()=>{console.log(i,"Domain"),console.log(m,"Scheme")}),await t.fetchDomains(),await t.fetchDomainSchemes(),await c.fetchContracts(),{getDomain:i,getDomainSchemes:m,getContract:g,isLoading:_,orderPay:u}}},qo=T(wo,[["render",Oo],["__scopeId","data-v-a1e55293"]]);export{qo as default};
