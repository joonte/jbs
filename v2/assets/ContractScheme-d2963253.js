import{j as R,o as f,c as V,b as e,a as t,w as _,d as r,t as S,x as T,k as q,F as O,v as z,p as G,l as J,_ as K,u as M,a7 as Q,e as U,g as p}from"./index-33bd9cf4.js";import{u as W}from"./contracts-141debab.js";import{u as X}from"./hosting-61dcf5ca.js";import{H as j}from"./HostingItem-fd6eee07.js";import{I as A}from"./IconPlus-5f47af9a.js";import{B as F}from"./BlockBalanceAgreement-5028e9bc.js";import{E as Y}from"./EmptyStateBlock-98549fc8.js";import{_ as Z}from"./ButtonDefault-34d9e627.js";import{_ as $}from"./ClausesKeeper-69d31679.js";import"./IconDots-463e8bba.js";import"./IconCard-c2e605c3.js";import"./StatusBadge-b80983a6.js";import"./hostStatuses-94d00f20.js";import"./HelperComponent-ebb207b6.js";import"./IconArrow-dadffb08.js";import"./bootstrap-vue-next.es-6bb0e5cd.js";import"./OrderIDBadge-24fa2e7f.js";import"./IconClose-d9fbf580.js";const h=n=>(G("data-v-73717283"),n=n(),J(),n),tt={class:"section"},st={class:"container"},ot={class:"section-header column"},et={class:"section-label-wrapper"},it={class:"section-title"},nt={class:"section-label"},ct={class:"list grid-list-three"},at={class:"list-col list-col--sm"},lt={class:"list-item"},rt=h(()=>t("div",{class:"list-item__row"},[t("div",{class:"list-item__title"},"Профиль")],-1)),_t={class:"list-item__row flex flex-column"},dt={class:"list-item__row"},mt={class:"list-col list-col--sm"},gt={class:"list-item"},ft={class:"list-item__row flex space-between"},ut=h(()=>t("div",{class:"list-item__title"},"Баланс",-1)),vt={class:"list-item__simple-balance"},pt={class:"list-item__row flex flex-column"},ht={class:"list-item__row"},Ct={class:"list-col list-col--sm"},kt={class:"list-item"},It=h(()=>t("div",{class:"list-item__row"},[t("div",{class:"list-item__title"},"Поддержка")],-1)),bt={class:"list-item__row flex flex-column"},wt={class:"list-item__row"},St={class:"contracts__section"},Tt={class:"contracts__section-header"},xt=h(()=>t("div",{class:"contracts__section-title"},"Хостинги",-1)),Bt={class:"contracts__section-list"};function yt(n,i,u,s,d,v){var o,g,x,B,y,P,D,H,L,N,E;const C=F,c=R("router-link"),k=$,m=Z,I=A,b=j,w=Y;return f(),V(O,null,[e(C),t("div",tt,[t("div",st,[t("div",ot,[t("div",et,[e(c,{class:"section-label",to:"/Contracts"},{default:_(()=>[r("Договора")]),_:1})]),t("h1",it,S(((o=s.getProfile)==null?void 0:o.Name)||((g=s.getContract)==null?void 0:g.Customer)),1),t("div",nt,S((D=(P=(B=(x=s.getConfig)==null?void 0:x.Contracts)==null?void 0:B.Types)==null?void 0:P[(y=s.getContract)==null?void 0:y.TypeID])==null?void 0:D.Name),1)]),e(k),t("div",ct,[t("div",at,[t("div",lt,[rt,t("div",_t,[e(c,{class:"item-link",to:`/ContractSettings/${(H=s.getContract)==null?void 0:H.ID}`},{default:_(()=>[r("Настройки")]),_:1},8,["to"]),e(c,{class:"item-link",to:`/ContractDocuments/${(L=s.getContract)==null?void 0:L.ID}`},{default:_(()=>[r("Документы")]),_:1},8,["to"])]),t("div",dt,[(N=s.getContract)!=null&&N.ProfileID?(f(),T(m,{key:0,label:"Редактировать данные",onClick:i[0]||(i[0]=a=>{var l;return s.navigateToEditPage((l=s.getContract)==null?void 0:l.ProfileID)})})):q("",!0)])])]),t("div",mt,[t("div",gt,[t("div",ft,[ut,t("div",vt,S((E=s.getContract)==null?void 0:E.Balance)+" ₽",1)]),t("div",pt,[e(c,{class:"item-link",to:"/Postings"},{default:_(()=>[r("История операций")]),_:1}),e(c,{class:"item-link",to:"/Invoices"},{default:_(()=>[r("Отчетные документы (Счета)")]),_:1})]),t("div",ht,[e(m,{label:"Пополнить баланс",onClick:i[1]||(i[1]=a=>{var l;return s.navigateToBalancePage((l=s.getContract)==null?void 0:l.ID)})})])])]),t("div",Ct,[t("div",kt,[It,t("div",bt,[e(c,{class:"item-link",to:"/Tickets"},{default:_(()=>[r("Тикеты")]),_:1})]),t("div",wt,[e(m,{label:"Создать тикет",onClick:i[2]||(i[2]=a=>s.navigateToTicketsCreation())})])])])]),t("div",St,[t("div",Tt,[xt,t("button",{class:"btn btn-default btn--border small",onClick:i[3]||(i[3]=a=>s.navigateToHostingList())},[e(I),r("Купить еще хостинг")])]),t("div",Bt,[s.getHostingList.length>0?(f(!0),V(O,{key:0},z(s.getHostingList,a=>{var l;return f(),T(b,{"item-data":a,"user-name":(l=s.getContract)==null?void 0:l.Customer,"info-link":`/HostingOrders/${a==null?void 0:a.ID}`},null,8,["item-data","user-name","info-link"])}),256)):(f(),T(w,{key:1,class:"contracts__empty-state",label:"У Вас нет купленного хостинга"}))])])])])],64)}const Pt={components:{HostingItem:j,IconPlus:A,BlockBalanceAgreement:F},async setup(){const n=W(),i=M(),u=X(),s=Q(),d=U(),v=p(()=>{var o;return(o=n.contractsList)==null?void 0:o[s.params.id]}),C=p(()=>{var o;return n.profileList[(o=v.value)==null?void 0:o.ProfileID]}),c=p(()=>i.ConfigList),k=p(()=>Object.keys(u.hostingList).map(o=>u.hostingList[o]).filter(o=>{var g;return(o==null?void 0:o.ContractID)===((g=v.value)==null?void 0:g.ID)}).reverse());function m(o){d.push(`/Balance/${o}`)}function I(){d.push({name:"default.NewTicket"})}function b(o){d.push(`/ContractEdit/${o}`)}function w(){d.push("/HostingSchemes")}return await n.fetchContracts(),await n.fetchProfiles(),await u.fetchHostingOrders(),{getConfig:c,getProfile:C,getContract:v,getHostingList:k,navigateToBalancePage:m,navigateToHostingList:w,navigateToEditPage:b,navigateToTicketsCreation:I}}},Ut=K(Pt,[["render",yt],["__scopeId","data-v-73717283"]]);export{Ut as default};
