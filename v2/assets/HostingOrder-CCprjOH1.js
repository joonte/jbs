import{_ as E}from"./EmptyStateBlock-Dks67PsT.js";import{_ as U}from"./ParamsAccordionBlock-Bkhx51Zg.js";import{_ as q}from"./IconEye-BDq8X8km.js";import{_ as F}from"./ButtonDefault-tVMF5ozh.js";import{_ as W}from"./SettingsEngineItem-C3F6FBYh.js";import{r as j}from"./bootstrap-vue-next-9iQSFcL_.js";import{_ as K}from"./StatusBadge-DroW9lKR.js";import{_ as X}from"./ServicesContractBalanceBlock-CvRiuffP.js";import{_ as z}from"./ClausesKeeper-DtaNhp0a.js";import{_ as J}from"./BlockBalanceAgreement-ckI0MbGb.js";import{c as m,b as n,a as e,t as i,w as c,G as Q,i as k,I as Y,K as Z,e as g,F as $,u as tt,x as et,r as C,f as u,g as st,d as ot,o as _}from"./index-DxPA2ffO.js";import{h as it}from"./hostStatuses-wR2mZwFf.js";import{u as nt}from"./testTransforms-CtLjUrql.js";import{f as x}from"./time-DenPiOX5.js";import{u as rt}from"./hosting-BRwESFSW.js";import{u as at}from"./resetServer-BdPP9l0n.js";import{u as lt}from"./globalActions-DUlmxNCV.js";import{_ as mt}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./contracts-DD2O0C6m.js";import"./IconSettings-B86P2WL5.js";import"./IconProfile-WOpP3Y6y.js";import"./IconCard-BQu6YZod.js";import"./IconClose-Br7S99e8.js";const _t={async setup(){const S=st(),t=ot(),d=rt(),s=at(),h=tt(),y=lt(),{formDescriptionLine:O}=nt(),l=et("emitter");l.on("updateHostingIDPage",()=>{d.fetchHostingOrders()});const H=C(!1),v=C(!1),o=u(()=>Object.keys(d?.hostingList).map(a=>d?.hostingList[a]).find(a=>a.OrderID===S.params.id)),D=u(()=>d?.hostingSchemes),p=u(()=>D.value?.[o.value?.SchemeID]),f=u(()=>h?.userOrders?.[o.value?.OrderID]),I=u(()=>s?.serverGroupsList?.Servers?.[o.value?.ServerID]),b=u(()=>{if(!o.value?.Domain)return"";const a=o.value.Domain;return a.startsWith("http://")||a.startsWith("https://")?a:`https://${a}`});function w(a){if(!a)return x(new Date);const G=new Date,B=new Date(G.getTime()+a*24*60*60*1e3);return x(B)}function r(a){l.emit("open-modal",{component:"StatusHistory",data:{modeID:"HostingOrders",rowID:a}})}function N(){l.emit("open-modal",{component:"OrdersTransfer",data:{ServiceOrderID:o.value?.ID,ServiceID:o.value?.ServiceID}})}function A(){h.prolongOrder({IsAutoProlong:v.value?0:1,OrderID:o.value?.OrderID})}function M(){t.push(`/HostingOrders/${o.value?.OrderID}/SchemeChange`),P()}function T(){t.push(`/HostingOrderPay/${o.value?.OrderID}`)}function V(){y.OrderManageHosting({ServiceOrderID:o.value?.ID,OrderID:o.value?.OrderID,ServiceID:o.value?.ServiceID,XMLHttpRequest:"yes"})}function P(){l.emit("open-modal",{component:"HostingOrderSchemeChange",data:{hostingID:o.value?.ID,ServerGroup:p.value?.ServersGroupID,emitEvent:"updateHostingIDPage"}})}function L(){l.emit("open-modal",{component:"OrderPasswordChange",data:{OrderID:o.value?.ID,ServiceID:o.value?.ServiceID,emitEvent:"updateHostingIDPage"}})}function R(){l.emit("open-modal",{component:"OrderRestore",data:{OrderID:o.value?.OrderID,CostDay:p.value?.CostDay,DaysRemainded:o.value?.DaysRemainded,emitEvent:"updateHostingIDPage"}})}return await d.fetchHostingOrders(),await d.fetchHostingSchemes(),await s.fetchServerGroups().then(()=>{S.name==="default.MyHostingOrderSchemeChange"&&P()}),await h.fetchUserOrders().then(()=>{v.value=f.value?.IsAutoProlong}),{getHostingOrderData:o,getHostingScheme:p,getUserOrder:f,getServerGroup:I,isAutoProlong:v,passwordShow:H,openOrderRestore:R,openPackageChangeModal:P,orderManage:V,navigateToProlong:T,setProlongValue:A,openPasswordChange:L,hostStatuses:it,transferItem:N,formDescriptionLine:O,calculateExpirationDate:w,changeScheme:M,fullDomainUrl:b,openHistoryStatuses:r}}},dt={key:0,class:"my-hosting-order"},ct={class:"section"},gt={class:"container"},ut={class:"section-title"},vt=["href"],Dt={class:"section-label"},pt={class:"section-nav"},ht={class:"list"},ft={class:"list-col list-col--md"},St={class:"list-item"},Ot={class:"list-item__row"},Ht={class:"list-item__title"},It={class:"list-item__status"},bt={class:"list-item__row"},wt={class:"list-item__ul"},Pt={key:0},kt={key:1},yt={key:2},Ct={class:"list-item__row list-item__row--column"},xt={class:"list-item__text"},Nt={class:"list-item__text"},At={class:"list-item__text"},Mt={class:"list-item__row"},Tt={class:"btn btn--border btn--switch"},Vt={class:"list-col list-col--md"},Lt={class:"list-item"},Rt={class:"list-item__row"},Gt={class:"list-item__row list-item__row--table"},Bt={class:"list-item__item"},Et={class:"list-item__row list-item__row--table"},Ut={class:"list-item__item"},qt={class:"list-item__row list-item__row--table"},Ft={class:"list-item__item hide-button"},Wt={key:0,class:"password-hidden"},jt={class:"list-item__row list-item__row--table"},Kt={class:"list-item__item"},Xt={class:"list-col list-col--md"},zt={class:"list-item"},Jt={class:"list-item__row list-item__row--table"},Qt={class:"list-item__item"},Yt={class:"list-item__item"},Zt={class:"list-item__item"},$t={class:"list-item__item"},te={key:1,class:"section"},ee={class:"container"};function se(S,t,d,s,h,y){const O=J,l=Q("router-link"),H=z,v=X,o=K,D=j,p=W,f=F,I=q,b=U,w=E;return _(),m($,null,[n(O),s.getHostingOrderData?.ID?(_(),m("div",dt,[e("section",ct,[e("div",gt,[e("div",null,[e("h1",ut,[e("a",{href:s.fullDomainUrl,target:"_blank"},i(s.getHostingOrderData?.Domain),9,vt)]),e("div",Dt,"Хостинг # "+i(s.getHostingOrderData?.OrderID),1),e("nav",pt,[n(l,{class:"section-nav__item",to:`/HostingOrders/${s.getHostingOrderData?.OrderID}`},{default:c(()=>t[11]||(t[11]=[g(" Хостинг ",-1)])),_:1,__:[11]},8,["to"]),n(l,{class:"section-nav__item",to:`/HostingServices/${s.getHostingOrderData?.OrderID}`},{default:c(()=>t[12]||(t[12]=[g(" Услуги ",-1)])),_:1,__:[12]},8,["to"])])]),n(H,{partition:"Header:/HostingOrders"}),e("div",ht,[n(v,{"contract-id":s.getHostingOrderData?.ContractID,onTransfer:t[0]||(t[0]=r=>s.transferItem())},null,8,["contract-id"]),e("div",ft,[e("div",St,[e("div",Ot,[e("div",Ht,i(s.getHostingScheme?.Name),1),e("div",It,[n(o,{status:s.getHostingOrderData?.StatusID,"status-table":"HostingOrders",onClick:t[1]||(t[1]=r=>s.openHistoryStatuses(s.getHostingOrderData?.ID))},null,8,["status"])]),n(p,null,{default:c(()=>[n(D,{onClick:t[2]||(t[2]=r=>s.changeScheme())},{default:c(()=>t[13]||(t[13]=[g("Изменить тариф",-1)])),_:1,__:[13]}),n(D,{onClick:t[3]||(t[3]=r=>s.openOrderRestore())},{default:c(()=>t[14]||(t[14]=[g("Просмотреть учет заказа",-1)])),_:1,__:[14]}),n(D,{onClick:t[4]||(t[4]=r=>s.openPasswordChange())},{default:c(()=>t[15]||(t[15]=[g("Сменить пароль",-1)])),_:1,__:[15]})]),_:1})]),e("div",bt,[e("ul",wt,[s.getHostingScheme?.SchemeParams?.limit_webdomains?.Value?(_(),m("li",Pt,i(s.formDescriptionLine(s.getHostingScheme?.SchemeParams?.limit_webdomains)),1)):k("",!0),s.getHostingScheme?.SchemeParams?.limit_quota?.Value?(_(),m("li",kt,i(s.formDescriptionLine(s.getHostingScheme?.SchemeParams?.limit_quota)),1)):k("",!0),s.getHostingScheme?.SchemeParams?.limit_emails?.Value?(_(),m("li",yt,i(s.formDescriptionLine(s.getHostingScheme?.SchemeParams?.limit_emails)),1)):k("",!0)])]),e("div",Ct,[e("div",xt,i(s.getHostingScheme?.CostMonth)+" ₽ в месяц",1),e("div",Nt,"Дней осталось "+i(s.getHostingOrderData?.DaysRemainded||0),1),e("div",At," Дата окончания "+i(s.calculateExpirationDate(s.getHostingOrderData?.DaysRemainded)),1)]),e("div",Mt,[e("button",{class:"btn btn-default btn--blue",onClick:t[5]||(t[5]=r=>s.navigateToProlong())},i(s.getHostingOrderData?.StatusID==="Waiting"?"Оплатить":"Продлить"),1),e("label",Tt,[Y(e("input",{type:"checkbox","onUpdate:modelValue":t[6]||(t[6]=r=>s.isAutoProlong=r),onInput:t[7]||(t[7]=r=>s.setProlongValue())},null,544),[[Z,s.isAutoProlong]]),t[16]||(t[16]=e("span",{class:"btn-switch__text"},"Автопродление",-1)),t[17]||(t[17]=e("span",{class:"btn-switch__toggle"},null,-1))])])])]),e("div",Vt,[e("div",Lt,[e("div",Rt,[t[18]||(t[18]=e("div",{class:"list-item__title"},"Панель управления",-1)),n(f,{class:"ml-auto",onClick:t[8]||(t[8]=r=>s.orderManage()),label:"Вход"})]),e("div",Gt,[t[19]||(t[19]=e("div",{class:"list-item__item"},"Адрес",-1)),e("div",Bt,i(`https://${s.getServerGroup?.Address}/manager`),1)]),e("div",Et,[t[20]||(t[20]=e("div",{class:"list-item__item"},"Логин",-1)),e("div",Ut,i(s.getHostingOrderData?.Login),1)]),e("div",qt,[t[22]||(t[22]=e("div",{class:"list-item__item"},"Пароль",-1)),e("div",Ft,[s.passwordShow?(_(),m("span",Wt,i(s.getHostingOrderData.Password),1)):(_(),m("button",{key:1,class:"btn btn--border btn--md hide-button",onClick:t[9]||(t[9]=r=>s.passwordShow=!0)},[n(I),t[21]||(t[21]=g(" Показать ",-1))])),e("button",{class:"btn btn--border btn--md hide-button",onClick:t[10]||(t[10]=r=>s.openPasswordChange())}," Сменить пароль ")])]),e("div",jt,[t[23]||(t[23]=e("div",{class:"list-item__item"},"FTP, POP3, SMTP, IMAP",-1)),e("div",Kt,i(s.getServerGroup?.Address),1)])])]),e("div",Xt,[e("div",zt,[t[24]||(t[24]=e("div",{class:"list-item__row"},[e("div",{class:"list-item__title"},"Именные сервера")],-1)),e("div",Jt,[e("div",Qt,i(s.getHostingOrderData?.Ns1Name),1),e("div",Yt,i(s.getHostingOrderData?.Ns2Name),1),e("div",Zt,i(s.getHostingOrderData?.Ns3Name),1),e("div",$t,i(s.getHostingOrderData?.Ns4Name),1)])])]),n(b,{"params-list":s.getHostingScheme?.SchemeParams,label:"Общая информация","main-param":"InternalName"},null,8,["params-list"])])])])])):(_(),m("section",te,[e("div",ee,[n(w,{label:"Заказ не найден"})])]))],64)}const Pe=mt(_t,[["render",se],["__scopeId","data-v-6f785cfd"]]);export{Pe as default};
