import{o as w,c as b,b as u,a as e,t as D,$ as d,ag as _,p as S,m as I,_ as U,g as k,f as x,e as y,U as B,r as v,h,i as N}from"./index-918fd9be.js";import{u as P}from"./contracts-580f94dc.js";import{s as C}from"./multiselect-aa389ce5.js";import{B as g}from"./BlockBalanceAgreement-e7f96bc6.js";import{_ as E}from"./ButtonDefault-2f55d117.js";import{_ as R}from"./ClausesKeeper-a5c1abc1.js";import"./bootstrap-vue-next.es-1529a2a7.js";import"./IconArrow-f2d41a4e.js";import"./IconClose-6ceae682.js";const l=a=>(S("data-v-e7b69fa5"),a=a(),I(),a),V={class:"create-referral"},L={class:"section"},M={class:"container"},A={class:"section-header"},j=l(()=>e("h1",{class:"section-title"},"Создать реферала",-1)),H={class:"section-label"},O={class:"section"},T={class:"container"},q={class:"create-referral__data"},z={class:"form-field"},F=l(()=>e("div",{class:"form-field__label"},"ФИО",-1)),G={class:"form-field"},J=l(()=>e("div",{class:"form-field__label"},"Email",-1)),K={class:"form-field"},Q=l(()=>e("div",{class:"form-field__label"},"Пароль",-1)),W={class:"form-field"},X=l(()=>e("div",{class:"form-field__label"},"Подтвердить пароль",-1)),Y={class:"section"},Z={class:"container"},$={class:"create-referral__data"};function ee(a,o,p,s,i,n){var c;const r=g,m=R,f=E;return w(),b("div",V,[u(r),e("div",L,[e("div",M,[e("div",A,[j,e("div",H,D((c=s.getUserInfo)==null?void 0:c.Name),1)]),u(m)])]),e("div",O,[e("div",T,[e("div",q,[e("label",z,[F,d(e("input",{type:"text",placeholder:"","onUpdate:modelValue":o[0]||(o[0]=t=>s.formData.Name=t)},null,512),[[_,s.formData.Name]])]),e("label",G,[J,d(e("input",{type:"text","onUpdate:modelValue":o[1]||(o[1]=t=>s.formData.Email=t)},null,512),[[_,s.formData.Email]])]),e("label",K,[Q,d(e("input",{type:"password","onUpdate:modelValue":o[2]||(o[2]=t=>s.formData.Password=t)},null,512),[[_,s.formData.Password]])]),e("label",W,[X,d(e("input",{type:"password","onUpdate:modelValue":o[3]||(o[3]=t=>s.formData._Password=t)},null,512),[[_,s.formData._Password]])])])])]),e("div",Y,[e("div",Z,[e("div",$,[u(f,{class:"btn--wide",label:"Зарегистрировать","is-loading":s.isLoading,onClick:o[4]||(o[4]=t=>s.createReferral())},null,8,["is-loading"])])])])])}const oe={components:{Multiselect:C,BlockBalanceAgreement:g},async setup(){const a=k(),o=P(),p=x(),s=y();B("emitter");const i=v(!1),n=v({Email:"",Name:"",Password:"",_Password:""}),r=h(()=>a.userInfo),m=h(()=>o.contractsList[p.params.id]);function f(){n.value.Email.length>0&&n.value.Password.length>0&&n.value.Name.length>0&&n.value._Password.length>0&&(i.value=!0,a.registerNewUser({...n.value}).then(c=>{const{response:t,error:se}=c;t==="success"&&s.push({path:"/Home"}),i.value=!1}))}return N(()=>{console.log("depend2"),r.value&&r.value.ID&&(document.cookie=`OwnerID=${r.value.ID}; path=/; SameSite=Lax; Secure`,document.cookie="IsManaged=yes; path=/; SameSite=Lax; Secure",console.log(document.cookie))}),await a.fetchUserData(),await o.fetchContracts(),{formData:n,getUserInfo:r,getContract:m,isLoading:i,createReferral:f}}},me=U(oe,[["render",ee],["__scopeId","data-v-e7b69fa5"]]);export{me as default};
