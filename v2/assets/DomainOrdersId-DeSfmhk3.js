import{_ as tt}from"./EmptyStateBlock-DA3-0YDi.js";import{_ as et}from"./WhiteButton.vue_vue_type_script_setup_true_lang-CdZRVTJ5.js";import{I as st}from"./IconProfile-CyDmeaCw.js";import{_ as P}from"./ButtonDefault-CMw2aBy6.js";import{_ as ot}from"./StatusBadge-BmqDrHzy.js";import{_ as at}from"./ClausesKeeper-iUM0yapS.js";import{_ as it}from"./MessageInfo-C0v9QTnb.js";import{_ as rt}from"./UserNote-9g0f9gxP.js";import{_ as nt}from"./BlockBalanceAgreement-v_bWuiVT.js";import{S as lt,u as dt,r as u,f as I,I as mt,E as ut,o as r,c as _,b as a,a as s,F as x,t as i,e as d,w,v as _t,h as m,C as h,K as ct,L as vt,x as wt,i as pt,G as Dt,d as ft}from"./index-Codq73aV.js";import{u as gt}from"./orders-wJq_IMsK.js";import{u as bt}from"./index-BO2gwtUe.js";import{f as S,s as It}from"./time-DenPiOX5.js";import{g as xt,c as ht}from"./common-DyknwSqv.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./IconClose-Dia1noy8.js";const St={class:"tw-px-4 md:tw-px-8 tw-mb-6"},kt={class:"tw-text-xl sm:tw-text-4xl"},Ot=["href"],yt={class:"tw-flex tw-items-center tw-gap-2 tw-mt-2"},Nt={class:"tw-text-gray-500 tw-text-sm"},Ct={class:"tw-flex tw-items-center tw-gap-8 tw-border-b tw-border-gray-200 tw-mt-4 tw-whitespace-nowrap tw-mb-6"},$t={class:"tw-grid tw-grid-cols-1 lg:tw-grid-cols-2 tw-gap-4"},Pt={class:"tw-border tw-rounded tw-border-gray-200 tw-p-4"},Bt={class:"list-item__row tw-gap-2"},Rt={class:"list-item__title"},Tt={class:"list-item__status"},At={class:"list-item__row"},Ft={class:"list-item__ul"},Mt={key:0},Wt={class:"list-item__row list-item__row--column"},Et={key:0,class:"list-item__text"},Lt={class:"list-item__text"},Ut={class:"list-item__text"},Vt={class:"tw-flex tw-flex-wrap tw-gap-4 tw-mt-4"},Ht={class:"btn btn--border btn--switch tw-ml-0 tw-h-10 sm:tw-h-12"},jt={class:"tw-flex tw-flex-wrap tw-gap-4 tw-mt-4"},Gt={class:"tw-border tw-rounded tw-border-gray-200 tw-p-4"},Kt={class:"list-item__row list-item__row--nowrap"},qt={class:"list-item__row list-item__row--table"},zt={class:"list-item__item"},Jt={class:"list-item__row list-item__row--table"},Qt={class:"list-item__item"},Xt={class:"tw-border tw-rounded tw-border-gray-200 tw-p-4"},Yt={class:"list-item__row list-item__row--table"},Zt={class:"btn btn--switch"},te=["checked"],ee={class:"list-item__row list-item__row--table"},se={class:"list-item__item"},be={__name:"DomainOrdersId",async setup(oe){let k,O;const y=pt(),p=gt(),D=lt(),B=bt(),R=dt(),T=ft(),c=u(null),A=u({}),e=u(null),N=u(!0),f=u(null),l=wt("emitter");l.on("updateDomainOrdersId",()=>{C()});const v=I(()=>D.domainSchemes[e.value?.SchemeID]),F=I(()=>p.orders[y.params.id]),M=I(()=>{const o=e.value?.Domain;return o?o.startsWith("http://")||o.startsWith("https://")?o:`https://${o}`:""});function W(){l.emit("open-modal",{component:"DomainsEdit",data:e.value})}function E(o){l.emit("open-modal",{component:"StatusHistory",data:{modeID:"DomainOrders",rowID:o}})}function L(o){if(!o)return S(new Date);const t=new Date,g=new Date(t.getTime()+o*24*60*60*1e3);return S(g)}function U(o){return o?S(It(o)):""}function V(){try{const o={DomainOrderID:e.value.ID,Domain:e.value.Domain};l.emit("open-modal",{component:"DomainSelectOwner",data:o})}catch(o){console.error(o)}}function H(){l.emit("open-modal",{component:"OrdersTransfer",data:{ServiceOrderID:e.value?.ID,ServiceID:e.value?.ServiceID}})}function j(){R.prolongOrder({IsAutoProlong:c.value?0:1,OrderID:e.value?.OrderID})}function G(){ht(e.value.StatusID,l)&&T.push(`/DomainOrderPay/${e.value.OrderID}`)}mt(async()=>{A.value={Ns1Name:e.value?.Ns1Name,Ns2Name:e.value?.Ns2Name},await C(),c.value=F.value.IsAutoProlong,e.value.DependOrderID&&(f.value=await p.fetchOneOrder(e.value.DependOrderID)),N.value=!1});async function C(){e.value=await D.fetchDomainOrder(y.params.id)}return[k,O]=ut(()=>Promise.all([D.fetchDomainSchemes(),B.fetchProfiles(),p.fetchAllOrders()])),await k,O(),(o,t)=>{const g=nt,b=Dt("RouterLink"),K=rt,q=it,z=at,$=P,J=ot,Q=P,X=st,Y=et,Z=tt;return r(),_(x,null,[a(g,{"contract-id":e.value?.ContractID},null,8,["contract-id"]),s("div",St,[e.value?(r(),_(x,{key:0},[s("h1",kt,[s("a",{href:M.value,target:"_blank"},i(e.value.Domain),9,Ot)]),s("div",yt,[s("div",Nt,[f.value?(r(),_(x,{key:0},[t[7]||(t[7]=d(" Относится к заказу ",-1)),a(b,{to:_t(xt)(f.value.Code,e.value.DependOrderID),class:"tw-text-sky-500"},{default:w(()=>[d(" #"+i(e.value.DependOrderID),1)]),_:1},8,["to"]),t[8]||(t[8]=d(" / ",-1))],64)):m("",!0),d(" Домен #"+i(e.value.OrderID),1)]),a(K,{text:e.value.UserNotice,"order-id":e.value.OrderID,emit:"updateDomainOrdersId",position:"right"},null,8,["text","order-id"])]),e.value.Message?(r(),h(q,{key:0,innerHTML:e.value.Message,class:"tw-mt-4"},null,8,["innerHTML"])):m("",!0),s("div",Ct,[a(b,{class:"tw-py-2 tw-cursor-pointer -tw-mb-[1px]","active-class":"tw-text-sky-400 tw-border-b-2 tw-border-sky-400",to:`/DomainOrders/${e.value.OrderID}`},{default:w(()=>t[9]||(t[9]=[d(" Домен ",-1)])),_:1,__:[9]},8,["to"]),a(b,{class:"tw-py-2 tw-cursor-pointer -tw-mb-[1px]","active-class":"tw-text-sky-400 tw-border-b-2 tw-border-sky-400",to:`/DomainOrders/${e.value.OrderID}/Services`},{default:w(()=>t[10]||(t[10]=[d(" Услуги ",-1)])),_:1,__:[10]},8,["to"])]),a(z),e.value.StatusID==="Waiting"||e.value.StatusID==="ClaimForRegister"||e.value.StatusID==="ForContractRegister"||e.value.StatusID==="ForRegister"||e.value.StatusID==="ForTransfer"?(r(),h($,{key:1,class:"tw-mb-4",label:"Определить владельца",onClick:t[0]||(t[0]=n=>V())})):m("",!0),s("div",$t,[s("div",Pt,[s("div",Bt,[s("div",Rt,i(e.value.Domain),1),s("div",Tt,[a(J,{status:e.value.StatusID,"status-table":"DomainOrders",onClick:t[1]||(t[1]=n=>E(e.value.ID)),class:"tw-cursor-pointer"},null,8,["status"])])]),s("div",At,[s("ul",Ft,[v.value.PackageID?(r(),_("li",Mt,i(v.value.PackageID),1)):m("",!0)])]),s("div",Wt,[v.value.CostProlong?(r(),_("div",Et,i(v.value.CostProlong)+" ₽ продлить на 12 месяцев ",1)):m("",!0),s("div",Lt,"Дней осталось "+i(e.value.DaysRemainded||0),1),s("div",Ut," Дата окончания "+i(L(e.value.DaysRemainded)),1)]),s("div",Vt,[a(Q,{label:e.value.StatusID==="ClaimForRegister"||e.value.StatusID==="Waiting"?"Оплатить":"Продлить",onClick:t[2]||(t[2]=n=>G()),class:"tw-min-w-24"},null,8,["label"]),s("label",Ht,[ct(s("input",{type:"checkbox","onUpdate:modelValue":t[3]||(t[3]=n=>c.value=n),onInput:t[4]||(t[4]=n=>j())},null,544),[[vt,c.value]]),t[11]||(t[11]=s("span",{class:"btn-switch__text tw-text-xs sm:tw-text-sm"},"Автопродление",-1)),t[12]||(t[12]=s("span",{class:"btn-switch__toggle"},null,-1))])]),s("div",jt,[a(Y,{onClick:t[5]||(t[5]=n=>H())},{default:w(()=>[a(X),t[13]||(t[13]=s("div",null,"Передать на другой аккаунт",-1))]),_:1,__:[13]})])]),s("div",Gt,[s("div",Kt,[t[14]||(t[14]=s("div",{class:"list-item__title"},"Именные сервера",-1)),a($,{class:"ml-auto",label:"Редактировать",onClick:t[6]||(t[6]=n=>W())})]),s("div",qt,[t[15]||(t[15]=s("div",{class:"list-item__item"},"Первичный сервер",-1)),s("div",zt,i(e.value.Ns1Name),1)]),s("div",Jt,[t[16]||(t[16]=s("div",{class:"list-item__item"},"Вторичный сервер",-1)),s("div",Qt,i(e.value.Ns2Name),1)])]),s("div",Xt,[t[20]||(t[20]=s("div",{class:"list-item__row"},[s("div",{class:"list-item__title"},"Контактные данные")],-1)),s("div",Yt,[t[18]||(t[18]=s("div",{class:"list-item__item"},"Скрыть данные в WhoIs",-1)),s("label",Zt,[s("input",{type:"checkbox",checked:e.value.IsPrivateWhoIs,disabled:""},null,8,te),t[17]||(t[17]=s("span",{class:"btn-switch__toggle"},null,-1))])]),s("div",ee,[t[19]||(t[19]=s("div",{class:"list-item__item"},"Последнее обновление адрес",-1)),s("div",se,i(U(e.value.StatusDate)),1)])])])],64)):N.value?m("",!0):(r(),h(Z,{key:1,label:"Заказ не найден"}))])],64)}}};export{be as default};
