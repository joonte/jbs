import{E as it}from"./EmptyStateBlock-927727c9.js";import{_ as _t}from"./ButtonDefault-f91c301e.js";import{_ as nt}from"./BlockOrderPayBalance-7d46609b.js";import{_ as rt}from"./ClausesKeeper-68df7f35.js";import{_ as dt,r as W,a7 as ut,e as vt,R as bt,g as y,ag as I,o as i,c as n,b as m,a as s,t as c,F as f,v as X,k as pt,Y as Z,ae as tt,x as st,p as ht,l as mt}from"./index-4434f005.js";import{u as ft}from"./dedicatedServer-a39a43a4.js";import{u as kt}from"./contracts-d017d511.js";import{B as Dt}from"./BlockBalanceAgreement-4e844242.js";import"./bootstrap-vue-next.es-5d8af788.js";import"./IconHelp-d8ebd424.js";import"./globalActions-e617f474.js";import"./BasicInput-50e80b39.js";import"./component2-53fb8201.js";import"./component-6f0e2102.js";import"./IconClose-0cfbf563.js";import"./IconArrow-6847c901.js";const k=p=>(ht("data-v-d4f1ae7b"),p=p(),mt(),p),yt={key:0,class:"domain-scheme"},It={class:"section"},gt={class:"container"},xt={class:"section-header"},wt=k(()=>s("h1",{class:"section-title"},"Оплата заказа выделенного сервера",-1)),Bt={class:"section-label"},Ct={class:"section"},Et={class:"container"},Ot={class:"list"},Pt={class:"list-col list-col--xl"},St={class:"list-item"},$t=k(()=>s("div",{class:"list-item__row"},[s("div",{class:"list-item__title"},"Конфигурация")],-1)),Ft={class:"list-item__row list-item__table"},Lt={class:"list-item__table-col"},At={class:"list-item__label"},Nt={class:"list-item__text"},Rt={class:"section"},Tt={class:"container"},Vt={class:"total-block"},jt={class:"total-block__row divider-bottom"},Ut=k(()=>s("div",{class:"total-block__col"},"Цена тарифа",-1)),Kt={class:"total-block__col"},Yt={class:"total-block__row no-divider"},qt={class:"total-block__col"},zt={class:"total-block__col"},Gt={class:"total-block__row total-block__row--big economy-line"},Ht=k(()=>s("div",{class:"total-block__col red"},"Выгода",-1)),Jt={class:"total-block__col flex-col"},Mt={class:"red"},Qt={class:"total-block__row total-block__row--big"},Wt={class:"total-block__col"},Xt={class:"total-block__col"},Zt={key:1,class:"section"},ts={class:"container"},ss={__name:"DSSchemeProlong",async setup(p){let r,d;const o=W(null),l=ft(),g=kt(),ot=ut(),x=vt();bt("emitter");const D=W(!1),_=y(()=>Object.keys(l==null?void 0:l.DSList).map(t=>l==null?void 0:l.DSList[t]).find(t=>t.OrderID===ot.params.id)),b=y(()=>{var t,a;return(a=l==null?void 0:l.DSSchemes)==null?void 0:a[(t=_.value)==null?void 0:t.SchemeID]}),et=y(()=>g.contractsList);function w(){var a,u;let t=0;return(u=(a=o.value)==null?void 0:a.discounts)==null||u.Bonuses.map(v=>{t+=+v.Economy}),t}function h(t){return Number(t).toFixed(2)||0}function lt(){const t=b==null?void 0:b.value;return[{label:"Процессор",text:(t==null?void 0:t.CPU)||"-"},{label:"Объём оперативной памяти",text:(t==null?void 0:t.ram)||"-"},{label:"Характеристики жёстких дисков",text:(t==null?void 0:t.disks)||"-"},{label:"Предустановленная ОС",text:(t==null?void 0:t.OS)||"-"},{label:"RAID",text:(t==null?void 0:t.raid)||"-"},{label:"Месячный трафик",text:t!=null&&t.trafflimit?`${t==null?void 0:t.trafflimit} ГБ`:"-"},{label:"Скорость канала",text:t!=null&&t.chrate?`${t==null?void 0:t.chrate} Мбит/с`:"-"}]}function at(){var t,a;D.value=!0,l.DSOrderPay({DSOrderID:(t=_.value)==null?void 0:t.ID,DaysPay:(a=o.value)==null?void 0:a.actualDays,IsChange:!0}).then(u=>{let{result:v,error:B}=u;v==="SUCCESS"?x.push("/DSOrders"):v==="BASKET"&&x.push("/Basket"),D.value=!1})}function ct(t){o.value=t}return[r,d]=I(()=>l.fetchDSOrders()),await r,d(),[r,d]=I(()=>l.fetchDSSchemes()),await r,d(),[r,d]=I(()=>g.fetchContracts()),await r,d(),(t,a)=>{var E,O,P,S,$,F,L,A,N,R,T,V,j,U,K,Y,q,z,G,H,J,M,Q;const u=rt,v=nt,B=_t,C=it;return i(),n(f,null,[m(Dt),(E=_.value)!=null&&E.ID&&((O=b.value)!=null&&O.ID)?(i(),n("div",yt,[s("div",It,[s("div",gt,[s("div",xt,[wt,s("div",Bt,c((P=_.value)!=null&&P.IP?`#${(S=_.value)==null?void 0:S.IP}`:""),1)]),m(u)])]),s("div",Ct,[s("div",Et,[s("div",Ot,[s("div",Pt,[s("div",St,[$t,s("div",Ft,[(i(!0),n(f,null,X(lt(),e=>(i(),n("div",Lt,[s("div",At,c(e.label),1),s("div",Nt,c(e.text),1)]))),256))])])])])])]),m(v,{contractID:($=_.value)==null?void 0:$.ContractID,scheme:b.value,serviceID:"40000",isOrderID:!1,onSelect:ct},null,8,["contractID","scheme"]),s("div",Rt,[s("div",Tt,[s("div",Vt,[((A=(L=(F=o.value)==null?void 0:F.discounts)==null?void 0:L.Bonuses)==null?void 0:A.length)>0?(i(),n(f,{key:0},[s("div",jt,[Ut,s("div",Kt,c(h((N=o.value)==null?void 0:N.price))+" ₽",1)]),(i(!0),n(f,null,X((T=(R=o.value)==null?void 0:R.discounts)==null?void 0:T.Bonuses,e=>(i(),n("div",Yt,[s("div",qt,"Скидка "+c(e==null?void 0:e.Discount)+"% на "+c(e==null?void 0:e.Days)+" дней",1),s("div",zt,"-"+c(h(e==null?void 0:e.Economy))+" ₽",1)]))),256))],64)):pt("",!0),Z(s("div",Gt,[Ht,s("div",Jt,[s("span",null,[s("s",null,c(h((V=o.value)==null?void 0:V.price))+" ₽",1)]),s("span",Mt,"-"+c(w())+" ₽",1)])],512),[[tt,((K=(U=(j=o.value)==null?void 0:j.discounts)==null?void 0:U.Bonuses)==null?void 0:K.length)>0]]),Z(s("div",Qt,[s("div",Wt,"Итого за "+c((Y=o.value)==null?void 0:Y.label),1),s("div",Xt,c(h(((q=o.value)==null?void 0:q.price)-w()))+" ₽",1)],512),[[tt,(z=o.value)==null?void 0:z.price]])]),m(B,{class:"btn--wide",label:((H=et.value[(G=_.value)==null?void 0:G.ContractID])==null?void 0:H.Balance)>((J=o.value)==null?void 0:J.price)?"Оплатить c баланса договора":"Добавить в корзину",disabled:o.value===null||((M=o.value)==null?void 0:M.price)===null,"is-loading":D.value,onClick:a[0]||(a[0]=e=>at())},null,8,["label","disabled","is-loading"])])])])):(i(),n("div",Zt,[s("div",ts,[(Q=_.value)!=null&&Q.ID?(i(),st(C,{key:0,label:"Заказ не может быть продлен"})):(i(),st(C,{key:1,label:"Заказ не найден"}))])]))],64)}}},fs=dt(ss,[["__scopeId","data-v-d4f1ae7b"]]);export{fs as default};
