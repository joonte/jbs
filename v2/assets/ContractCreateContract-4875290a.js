import{_ as T}from"./ButtonDefault-ceb0a858.js";import{s as L}from"./SimpleCheckbox-07cde0b2.js";import{_ as E}from"./ClausesKeeper-9fc4bc59.js";import{_ as F,u as j,e as A,r as C,g as h,h as M,i as O,ag as R,j as U,o as f,c as g,b as u,a,w as $,d as q,F as k,v as z,x as G,k as H,p as J,l as K}from"./index-1d7f6848.js";import{u as Q}from"./contracts-97246549.js";import{B as W}from"./BlockSelectProfile-c9073890.js";import{B as X}from"./BlockBalanceAgreement-fc8b62a5.js";import"./IconClose-b09002f7.js";import"./multiselect-3f954972.js";import"./bootstrap-vue-next.es-ee787e70.js";import"./IconArrow-6ea40b14.js";const y=i=>(J("data-v-c6edfade"),i=i(),K(),i),Y={class:"section"},Z={class:"container"},ee={class:"section-header"},te=y(()=>a("h1",{class:"section-title"},"Создать договор",-1)),oe=y(()=>a("div",{class:"section-header"},[a("h2",{class:"section-block_title"},"Шаблон")],-1)),ae={class:"form"},le={class:"container-limited"},se={__name:"ContractCreateContract",async setup(i){let b,V;const D=j(),c=Q(),N=A(),v=C(!1),s=C("Natural"),l=C(null),S=h(()=>D.ConfigList),n=h(()=>c==null?void 0:c.profileList),I=h(()=>Object.keys(n==null?void 0:n.value).map(e=>{var o,_,d,p,m,r;return{template:(_=(o=n.value)==null?void 0:o[e])==null?void 0:_.TemplateID,value:(p=(d=n.value)==null?void 0:d[e])==null?void 0:p.ID,name:(r=(m=n.value)==null?void 0:m[e])==null?void 0:r.Name}}).filter(e=>e.template===s.value));function w(){console.log(l.value),console.log(s.value),v.value=!0,c.contractMake({ProfileID:l.value,TypeID:s.value}).then(e=>{e.Status==="Ok"&&N.push("/Contracts"),v.value=!1})}function x(){var e,o;l.value=((o=(e=I.value)==null?void 0:e[0])==null?void 0:o.value)||null}return M(s,()=>{x()}),O(()=>{x()}),[b,V]=R(()=>c.fetchProfiles()),await b,V(),(e,o)=>{var r,B;const _=U("router-link"),d=E,p=L,m=T;return f(),g(k,null,[u(X),a("div",Y,[a("div",Z,[a("div",ee,[u(_,{class:"section-label",to:"/Contracts"},{default:$(()=>[q("Мои договора")]),_:1}),te]),u(d),oe,a("div",ae,[(f(!0),g(k,null,z((B=(r=S.value)==null?void 0:r.Contracts)==null?void 0:B.Types,t=>(f(),g(k,null,[(t==null?void 0:t.ProfileTemplateID)!==""?(f(),G(p,{key:0,label:t==null?void 0:t.Name,value:t==null?void 0:t.ProfileTemplateID,modelValue:s.value,"onUpdate:modelValue":o[0]||(o[0]=P=>s.value=P)},null,8,["label","value","modelValue"])):H("",!0)],64))),256))]),a("div",le,[u(W,{title:"Использовать профиль",items:I.value,modelValue:l.value,"onUpdate:modelValue":o[1]||(o[1]=t=>l.value=t)},null,8,["items","modelValue"]),u(m,{onClick:w,disabled:l.value===null||l.value===void 0,"is-loading":v.value,label:"Зарегистрировать"},null,8,["disabled","is-loading"])])])])],64)}}},Ce=F(se,[["__scopeId","data-v-c6edfade"]]);export{Ce as default};
