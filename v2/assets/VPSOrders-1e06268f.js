import{j as k,o as f,c as b,a as r,b as d,w as B,d as C,t as L,F as w,v as F,n as W,k as X,_ as z,r as x,x as O,p as Y,l as Z,R as tt,g as S}from"./index-19d4a9c5.js";import{I as et}from"./IconSearch-e2477fb1.js";import{u as K}from"./vps-a622dc44.js";import{_ as st}from"./HelperComponent-c08ea397.js";import{S as $}from"./StatusBadge-5146d4b6.js";import{I as q}from"./IconRotate-2ea96c00.js";import{v as ot}from"./vpsStatuses-32ffaaf5.js";import{_ as at}from"./IconCard-44c1ca60.js";import{_ as nt}from"./OrderIDBadge-01ee9f24.js";import{S as rt}from"./Select2-ae8c0fff.js";import{s as it}from"./multiselect-6b76b6bf.js";import{_ as G}from"./ClausesKeeper-5a7e7f30.js";import{u as lt}from"./contracts-9a2dcfb1.js";import{B as J}from"./BlockBalanceAgreement-46812f15.js";import{E as ct}from"./EmptyStateBlock-a070e35c.js";import{_ as dt}from"./FormInputSearch-4e16a148.js";import"./ButtonDefault-6be40158.js";import"./IconArrow-093f2a46.js";import"./IconClose-ab9f78d6.js";import"./bootstrap-vue-next.es-4c1a1806.js";import"./IconPlus-e3479ae6.js";const _t={class:"hosting-item"},mt={class:"hosting-item__row"},ut={class:"hosting-item__row"},ft={class:"hosting-item__person"},pt={class:"hosting-item__row"},vt={class:"hosting-item__list"},bt=["innerHTML"],gt={class:"hosting-item__controls"},ht={class:"ico"};function It(n,i,s,e,y,_){var v,o,t,c,a,m,u;const p=nt,h=k("router-link"),g=$,I=k("Helper"),V=q,D=at;return f(),b("div",_t,[r("div",mt,[d(p,{orderID:(v=s.itemData)==null?void 0:v.OrderID},null,8,["orderID"]),d(h,{class:"hosting-item__name",to:`/VPSOrders/${s.itemData.OrderID}`},{default:B(()=>[C(L(s.itemData.IP||s.itemData.Domain),1)]),_:1},8,["to"]),d(g,{status:(o=s.itemData)==null?void 0:o.StatusID,DaysRemainded:(t=s.itemData)==null?void 0:t.DaysRemainded,"status-table":"VPSOrders"},null,8,["status","DaysRemainded"])]),r("div",ut,[r("div",ft,L(s.userName),1),d(I,{"user-notice":(c=s.itemData)==null?void 0:c.UserNotice,id:(a=s.itemData)==null?void 0:a.OrderID,position:s.isLast?"bottom":"top",emit:"updateVPSList"},null,8,["user-notice","id","position"])]),r("div",pt,[r("ul",vt,[(f(!0),b(w,null,F(s.params,l=>(f(),b("li",{innerHTML:l==null?void 0:l.text},null,8,bt))),256))])]),r("div",gt,[((m=s.itemData)==null?void 0:m.StatusID)==="Active"?(f(),b("div",{key:0,class:W(["btn btn--md btn--border btn--rotate btn--rotate_green button-large",{"btn--rotate_gray":((u=s.itemData)==null?void 0:u.StatusID)!=="Active"||e.isReloading,"btn--rotate_loading":e.isReloading}]),title:"Перезагрузить выделенный сервер",onClick:i[0]||(i[0]=(...l)=>e.reloadItem&&e.reloadItem(...l))},[C("Включен"),r("button",null,[r("div",ht,[d(V)])])],2)):X("",!0),r("div",{class:"btn btn--md btn--bold",onClick:i[1]||(i[1]=l=>{var P;return n.$router.push(`/VPSOrderPay/${(P=s.itemData)==null?void 0:P.OrderID}`)})},[d(D),C("Оплатить")])])])}const Vt={components:{StatusBadge:$,IconRotate:q,Helper:st},props:{params:{type:Array,default:()=>[]},itemData:{type:Object,default:()=>{}},isLast:{type:Boolean,default:!1},userName:{type:String,default:""}},setup(n,{emit:i}){const s=K(),e=x(!1);function y(_){var p;e.value=!0,s.VPSReboot({VPSOrderID:(p=n.itemData)==null?void 0:p.ID}).then(()=>{setTimeout(()=>{e.value=!1},1e3)})}return{vpsStatuses:ot,reloadItem:y,isReloading:e}}},Q=z(Vt,[["render",It],["__scopeId","data-v-dacecee7"]]),Dt=n=>(Y("data-v-36cdbb20"),n=n(),Z(),n),Pt={class:"section"},St={class:"container"},yt={class:"section-header"},Ct=Dt(()=>r("h1",{class:"section-title"},"VPS/VDS серверы",-1)),kt={class:"list-form"},Ot={class:"list-form_col list-form_col--sm"},Bt={class:"list-form_select"},Lt={class:"multiselect-option"},wt={key:0};function xt(n,i,s,e,y,_){var o,t,c;const p=J,h=k("router-link"),g=G,I=k("Multiselect"),V=dt,D=Q,v=ct;return f(),b(w,null,[d(p),r("div",Pt,[r("div",St,[r("div",yt,[Ct,d(h,{class:"btn btn--blue btn-default",to:"/VPSSchemes"},{default:B(()=>[C("Заказать")]),_:1})]),d(g,{partition:"Header:/VPSOrders"}),r("div",kt,[r("div",Ot,[r("div",Bt,[d(I,{modelValue:e.select,"onUpdate:modelValue":i[0]||(i[0]=a=>e.select=a),options:e.getUsers,disabled:((o=e.getUsers)==null?void 0:o.length)<=1,label:"name"},{option:B(({option:a})=>[r("div",Lt,L(a.name),1)]),_:1},8,["modelValue","options","disabled"])])]),d(V,{modelValue:e.search,"onUpdate:modelValue":i[1]||(i[1]=a=>e.search=a)},null,8,["modelValue"])]),e.getVpsOrders&&((t=e.getVpsOrders)==null?void 0:t.length)>0?(f(),b("div",wt,[e.filterProducts&&((c=e.filterProducts)==null?void 0:c.length)>0?(f(!0),b(w,{key:0},F(e.filterProducts,(a,m)=>{var u;return f(),O(D,{"item-data":a,"is-last":m===e.filterProducts.length-1,"user-name":(u=e.getContracts[a==null?void 0:a.ContractID])==null?void 0:u.Customer,params:e.formItemParamList(a)},null,8,["item-data","is-last","user-name","params"])}),256)):(f(),O(v,{key:1,class:"no-margin",label:"Заказы не найдены"}))])):(f(),O(v,{key:1,class:"no-margin",label:"У вас нет заказов на VPS/VDS серверы"}))])])],64)}const Rt={components:{IconSearch:et,Select2:rt,ClausesKeeper:G,Multiselect:it,VpsItem:Q,BlockBalanceAgreement:J},async setup(){const n=K(),i=lt(),s=x(null),e=x("*");tt("emitter").on("updateVPSList",()=>{n.fetchVPS()});const _=S(()=>{var o;return(o=Object.keys(n==null?void 0:n.vpsList).map(t=>n==null?void 0:n.vpsList[t]))==null?void 0:o.reverse()}),p=S(()=>n.vpsSchemes),h=S(()=>V(I(_.value))),g=S(()=>i==null?void 0:i.contractsList);function I(o){return e.value!=="*"?o.filter(t=>(t==null?void 0:t.ContractID)===e.value):o}function V(o){return s.value!==null?o.filter(t=>t==null?void 0:t.IP.toLowerCase().includes(s.value.toLowerCase())):o}const D=S(()=>{let o=[{value:"*",name:"Все договора"}];return _.value!==null?(Object.keys(_.value).forEach(t=>{var c,a,m;o.find(u=>{var l;return u.value===((l=_.value[t])==null?void 0:l.ContractID)})||o.push({value:(c=_.value[t])==null?void 0:c.ContractID,name:(m=g.value[(a=_.value[t])==null?void 0:a.ContractID])==null?void 0:m.Customer})}),o):{value:"*",name:"Все договора"}});function v(o){var c,a,m,u,l,P,R,N,U,A,H,M,j,E,T;const t=(c=p.value)==null?void 0:c[o.SchemeID];return[{text:`${t==null?void 0:t.Name}`},{text:`${(m=(a=t==null?void 0:t.SchemeParams)==null?void 0:a.hdd_mib)==null?void 0:m.InternalName} ${(l=(u=t==null?void 0:t.SchemeParams)==null?void 0:u.hdd_mib)==null?void 0:l.Value} ${(R=(P=t==null?void 0:t.SchemeParams)==null?void 0:P.hdd_mib)==null?void 0:R.Unit}`},{text:`RAM ${(U=(N=t==null?void 0:t.SchemeParams)==null?void 0:N.ram_mib)==null?void 0:U.Value} ${(H=(A=t==null?void 0:t.SchemeParams)==null?void 0:A.ram_mib)==null?void 0:H.Unit}`},{text:`Канал ${(j=(M=t==null?void 0:t.SchemeParams)==null?void 0:M.net_bandwidth_mbitps)==null?void 0:j.Value} ${(T=(E=t==null?void 0:t.SchemeParams)==null?void 0:E.net_bandwidth_mbitps)==null?void 0:T.Unit}`}]}return await n.fetchVPS(),await n.fetchVPSSchemes(),await i.fetchContracts(),{getVpsOrders:_,search:s,getContracts:g,select:e,formItemParamList:v,getUsers:D,filterProducts:h}}},ee=z(Rt,[["render",xt],["__scopeId","data-v-36cdbb20"]]);export{ee as default};
