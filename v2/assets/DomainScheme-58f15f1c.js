import{j as z,o as J,c as Q,b,a as e,w as L,t as p,Z as f,ae as I,af as O,d as X,F as Y,p as $,l as ee,_ as se,e as oe,a7 as te,r as y,g as h,i as M,O as ae,h as le}from"./index-b5b5ce3d.js";import{u as ne}from"./domain-24e2548a.js";import{u as ce}from"./contracts-74f05bb7.js";import{u as ie}from"./hosting-552a9dd1.js";import{u as de}from"./resetServer-841751d7.js";import{D as T}from"./DomainCheckBlock-1fda6dd3.js";import{_ as F}from"./BlockSelectContract-03150afa.js";import{B as A}from"./BlockBalanceAgreement-a016b94f.js";import{s as re}from"./multiselect-4f7d14de.js";import{_ as me}from"./ButtonDefault-0006f72a.js";import{_ as _e}from"./ClausesKeeper-3a1c11ba.js";import"./EmptyStateBlock-cd0c2748.js";import"./bootstrap-vue-next.es-37aa63ea.js";import"./IconClose-cd6d3917.js";import"./IconArrow-fddabae2.js";const n=a=>($("data-v-f0d14cc4"),a=a(),ee(),a),ue={class:"domain-scheme"},fe={class:"section"},he={class:"container"},ve=n(()=>e("div",{class:"section-header"},[e("h1",{class:"section-title"},"Заказ доменного имени")],-1)),pe={class:"section"},Ne={class:"container"},De=n(()=>e("div",{class:"section-header"},[e("h2",{class:"section-block_title"},"Заказ хостинга"),e("div",{class:"section-label"},"Если домен будет использоваться совместно с заказом хостинга, выберите нужный из существующего списка")],-1)),be={class:"form multy"},ge={class:"multi-top"},Se={class:"multiselect-option"},ke={class:"section"},ye={class:"container"},Ie=n(()=>e("div",{class:"section-header"},[e("div",{class:"section-label"},"Для успешной регистрации, домен должен быть настроен на используемых именных серверах. Для этого в панели управления хостингом необходимо добавить домен, как дополнительный или паркованный.")],-1)),Oe={class:"form form-grid-columns"},we={class:"form-col"},xe=n(()=>e("div",{class:"form-col__title"},"Первичный сервер имен",-1)),Ce={class:"form-field"},Be=n(()=>e("div",{class:"form-field__label"},"Доменный адрес",-1)),Ee=n(()=>e("label",{class:"form-field"},[e("div",{class:"form-field__label"},"IP адрес"),e("input",{type:"text",disabled:""})],-1)),Le={class:"form-col"},Ve=n(()=>e("div",{class:"form-col__title"},"Вторичный сервер имен",-1)),He={class:"form-field"},Ue=n(()=>e("div",{class:"form-field__label"},"Доменный адрес",-1)),Re=n(()=>e("label",{class:"form-field"},[e("div",{class:"form-field__label"},"IP адрес"),e("input",{type:"text",disabled:""})],-1)),Pe={class:"form-col"},je=n(()=>e("div",{class:"form-col__title"},"Дополнительный сервер имен",-1)),Me={class:"form-field"},Te=n(()=>e("div",{class:"form-field__label"},"Доменный адрес",-1)),Fe=n(()=>e("label",{class:"form-field"},[e("div",{class:"form-field__label"},"IP адрес"),e("input",{type:"text",disabled:""})],-1)),Ae={class:"form-col"},Ge=n(()=>e("div",{class:"form-col__title"},"Расширенный сервер имен",-1)),Ke={class:"form-field"},Ze=n(()=>e("div",{class:"form-field__label"},"Доменный адрес",-1)),qe=n(()=>e("label",{class:"form-field"},[e("div",{class:"form-field__label"},"IP адрес"),e("input",{type:"text",disabled:""})],-1)),We={class:"section"},ze={class:"container"},Je={class:"total-block"},Qe={class:"total-block__row total-block__row--big"},Xe=n(()=>e("div",{class:"total-block__col"},"Итого за 12 месяцев",-1)),Ye={class:"total-block__col"};function $e(a,l,c,s,w,G){var _,S,k;const x=A,g=_e,r=F,N=T,D=z("Multiselect"),m=me;return J(),Q(Y,null,[b(x),e("div",ue,[e("div",fe,[e("div",he,[ve,b(g)])]),b(r,{title:"Договор",modelValue:s.contractSelect,"onUpdate:modelValue":l[0]||(l[0]=o=>s.contractSelect=o)},null,8,["modelValue"]),b(N,{"domain-list":s.getDomains,search:s.search,onSelect:s.selectDomain},null,8,["domain-list","search","onSelect"]),e("div",pe,[e("div",Ne,[De,e("div",be,[b(D,{class:"hosting-select multiselect--white",modelValue:s.hostingSelect,"onUpdate:modelValue":l[1]||(l[1]=o=>s.hostingSelect=o),options:s.FILTERED_ORDERS,label:"login",placeholder:"Выберите хостинг","track-by":"value"},{singlelabel:L(({value:o})=>{var v,u;return[e("div",ge,p(o.login),1),f(e("span",{class:"server"},"/ "+p((v=s.getHostingSchemes[o.schemeID])==null?void 0:v.Name),513),[[I,(u=s.getHostingSchemes[o.schemeID])==null?void 0:u.Name]]),f(e("span",{class:"domain"},"/ "+p(o.domain),513),[[I,o.domain]])]}),option:L(({option:o})=>{var v,u;return[e("div",Se,p(o.login),1),f(e("span",{class:"server"},"/ "+p((v=s.getHostingSchemes[o.schemeID])==null?void 0:v.Name),513),[[I,(u=s.getHostingSchemes[o.schemeID])==null?void 0:u.Name]]),f(e("span",{class:"domain"},"/ "+p(o.domain),513),[[I,o.domain]])]}),_:1},8,["modelValue","options"])])])]),e("div",ke,[e("div",ye,[Ie,e("div",Oe,[e("div",we,[xe,e("label",Ce,[Be,f(e("input",{type:"text",placeholder:"dns0.host-food.ru","onUpdate:modelValue":l[2]||(l[2]=o=>s.formData.Ns1Name=o)},null,512),[[O,s.formData.Ns1Name]])]),Ee]),e("div",Le,[Ve,e("label",He,[Ue,f(e("input",{type:"text",placeholder:"dns0.host-food.ru","onUpdate:modelValue":l[3]||(l[3]=o=>s.formData.Ns2Name=o)},null,512),[[O,s.formData.Ns2Name]])]),Re]),e("div",Pe,[je,e("label",Me,[Te,f(e("input",{type:"text","onUpdate:modelValue":l[4]||(l[4]=o=>s.formData.Ns3Name=o)},null,512),[[O,s.formData.Ns3Name]])]),Fe]),e("div",Ae,[Ge,e("label",Ke,[Ze,f(e("input",{type:"text","onUpdate:modelValue":l[5]||(l[5]=o=>s.formData.Ns4Name=o)},null,512),[[O,s.formData.Ns4Name]])]),qe])])])]),e("div",We,[e("div",ze,[e("div",Je,[e("div",Qe,[Xe,e("div",Ye,p(((_=s.domain)==null?void 0:_.CostOrder)||"0")+" ₽",1)])]),b(m,{class:"btn--wide",label:((S=s.getContracts[s.contractSelect])==null?void 0:S.Balance)>((k=s.domain)==null?void 0:k.CostOrder)?"Оплатить c баланса договора":"Добавить в корзину",onClick:l[6]||(l[6]=o=>s.createDomain()),"is-loading":s.isLoading,disabled:s.domain===null},{default:L(()=>[X("Добавить в корзину")]),_:1},8,["label","is-loading","disabled"])])])])],64)}const es={components:{BlockSelectContract:F,DomainCheckBlock:T,BlockBalanceAgreement:A,Multiselect:re},async setup(){const a=ne(),l=ce(),c=ie(),s=de(),w=oe(),x=te().query.DomainName||"",g=y(null),r=y(null),N=y(null),D=y(!1),m=y({Ns1Name:"dns0.host-food.ru",Ns2Name:"dns1.host-food.ru",Ns3Name:null,Ns4Name:null}),_=h(()=>l.contractsList),S=t=>{t.key==="Enter"&&t.ctrlKey&&!k.value&&V()},k=h(()=>r.value===null);M(()=>{document.addEventListener("keyup",S),console.log(B)}),ae(()=>{document.removeEventListener("keyup",S)});const o=h(()=>{var t;return(t=Object.keys(a==null?void 0:a.domainSchemes))==null?void 0:t.map(i=>{var d;return{...a==null?void 0:a.domainSchemes[i],value:(d=a==null?void 0:a.domainSchemes[i])==null?void 0:d.ID}})}),v=h(()=>c==null?void 0:c.hostingSchemes),u=h(()=>Object.keys(c==null?void 0:c.hostingList).map(t=>c==null?void 0:c.hostingList[t])),C=h(()=>c==null?void 0:c.hostingList),B=h(()=>{const t=Object.keys(C.value).map(i=>{const d=C.value[i];return{value:d.ID,login:d.Login,customer:d.Customer,domain:d.Domain,schemeID:d.SchemeID}});return t.unshift({value:0,login:"Без хостинга",customer:"",domain:""}),t}),K=h(()=>{var t;return(t=s==null?void 0:s.serverGroupsList)==null?void 0:t.Servers});le(()=>N.value,t=>{const i=u.value.find(d=>d.ID===t);i?(m.value.Ns1Name=i.Ns1Name,m.value.Ns2Name=i.Ns2Name,m.value.Ns3Name=i.Ns3Name,m.value.Ns4Name=i.Ns4Name):(m.value.Ns1Name="dns0.host-food.ru",m.value.Ns2Name="dns1.host-food.ru",m.value.Ns3Name=null,m.value.Ns4Name=null)});function V(){var t,i,d,H,U,R,P;D.value=!0,a.DomainOrder({ContractID:g.value,Domain:`${(t=r.value)==null?void 0:t.line}${(i=r.value)!=null&&i.line&&((d=r.value)!=null&&d.Name)?"."+((H=r.value)==null?void 0:H.Name):""}`,DomainName:(U=r.value)==null?void 0:U.line,DomainSchemeID:(R=r.value)==null?void 0:R.value,DomainZone:(P=r.value)==null?void 0:P.Name,IsPrivateWhoIs:"yes",HostingOrderID:N.value,...m.value}).then(({result:q,info:E,error:ss})=>{q==="SUCCESS"?a.DomainOrderPay({DomainOrderID:E==null?void 0:E.DomainOrderID}).then(W=>{let{result:j,error:os}=W;j==="SUCCESS"?w.push("/DomainOrders"):j==="BASKET"&&w.push("/Basket"),D.value=!0}):D.value=!1})}function Z(t){r.value=t}return M(()=>{C.value&&(N.value=B.value[0].value)}),await a.fetchDomainSchemes(),await l.fetchContracts().then(()=>{var t;_.value&&(g.value=(t=Object.keys(_==null?void 0:_.value))==null?void 0:t[0])}),await c.fetchHostingOrders(),await c.fetchHostingSchemes(),await s.fetchServerGroups(),{contractSelect:g,selectDomain:Z,domain:r,hostingSelect:N,getDomains:o,getContracts:_,getHostingOrders:u,getServerGroup:K,formData:m,isLoading:D,createDomain:V,buttonDisabled:k,FILTERED_ORDERS:B,getHostingSchemes:v,search:x}}},Ns=se(es,[["render",$e],["__scopeId","data-v-f0d14cc4"]]);export{Ns as default};
