import{_ as dt}from"./EmptyStateBlock-DA3-0YDi.js";import{_ as ut,a as wt,b as mt}from"./SettingsEngineItem-BYnOrDI7.js";import{_ as ct,a as vt}from"./CopyToClipboard.vue_vue_type_script_setup_true_lang-Ds1JMB0b.js";import{_ as _t}from"./WhiteButton.vue_vue_type_script_setup_true_lang-CdZRVTJ5.js";import{I as pt}from"./IconProfile-CyDmeaCw.js";import{_ as ft}from"./BlueButton.vue_vue_type_script_setup_true_lang-BKdLNEec.js";import{_ as It}from"./StatusBadge-BmqDrHzy.js";import{_ as Dt}from"./ClausesKeeper-iUM0yapS.js";import{_ as bt}from"./UserNote-9g0f9gxP.js";import{v as gt,r as St}from"./bootstrap-vue-next-W16P-SAV.js";import{_ as yt}from"./IconDots-BIoh_VC5.js";import{_ as xt}from"./BlockBalanceAgreement-v_bWuiVT.js";import{P as Ot,u as Pt,r as m,J as T,f as ht,I as kt,E as Ct,o as l,c as i,b as o,a as e,F as _,t as n,n as Mt,v as c,w as v,e as u,h as D,K as $t,L as Rt,g as h,C as Lt,x as Bt,i as Nt,G as At}from"./index-Codq73aV.js";import{u as Et}from"./global-CdY51QQZ.js";import{u as Ut}from"./orders-wJq_IMsK.js";import{f as F}from"./time-DenPiOX5.js";import{g as Vt,f as jt}from"./common-DyknwSqv.js";import{_ as Tt}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./LoadingIndicator-y8DeC9jv.js";import"./ServerStatusBadge.vue_vue_type_script_setup_true_lang-CNB3-WyC.js";import"./services-DyPBvbVy.js";import"./IconSettings-Pwo5dDjN.js";import"./IconCopy-CvpXMuV2.js";import"./IconClose-Dia1noy8.js";import"./index-BO2gwtUe.js";import"./ButtonDefault-CMw2aBy6.js";const Ft={class:"tw-px-4 md:tw-px-8"},Ht={class:"tw-flex tw-items-center tw-justify-between tw-gap-2"},Gt={class:"tw-text-xl sm:tw-text-4xl"},Wt={class:"btn btn--dots"},Yt={class:"tw-flex tw-items-center tw-gap-2 tw-mt-2"},zt={class:"tw-text-gray-500 tw-text-sm"},Jt={class:"tw-flex tw-items-center tw-gap-8 tw-border-b tw-border-gray-200 tw-mt-4 tw-whitespace-nowrap tw-mb-6"},Kt={class:"tw-grid tw-grid-cols-1 lg:tw-grid-cols-2 tw-gap-4"},qt={class:"tw-border tw-rounded tw-border-gray-200 tw-p-4"},Qt={class:"tw-flex tw-items-center tw-justify-between tw-gap-2"},Xt={class:"tw-flex tw-items-center tw-gap-2"},Zt={class:"tw-text-lg sm:tw-text-2xl"},te={class:"list-item__row list-item__row--column tw-mt-4"},ee={class:"list-item__text"},se={class:"list-item__text"},oe={class:"list-item__text"},ne={class:"tw-flex tw-gap-4 tw-mt-4"},re={class:"btn btn--border btn--switch tw-ml-0 tw-h-10 sm:tw-h-12"},ae={class:"tw-mt-4"},le={class:"tw-border tw-rounded tw-border-gray-200 tw-p-4"},ie={class:"tw-grid tw-grid-cols-3 tw-gap-4"},de={class:"tw-font-bold tw-hyphens-auto"},ue={class:"tw-col-span-2 tw-flex tw-items-center"},we={class:"tw-col-span-2 tw-flex tw-items-center tw-whitespace-pre-line"},me={class:"tw-border tw-border-gray-200 tw-rounded tw-p-4"},ce={class:"tw-grid tw-grid-cols-3 tw-gap-4"},ve={class:"tw-col-span-2 tw-flex tw-items-center tw-gap-1"},_e={class:"tw-col-span-2 tw-flex tw-items-center tw-gap-1"},pe={class:"tw-break-all"},fe={class:"tw-col-span-2 tw-flex tw-flex-wrap tw-items-center tw-gap-2"},Ie={key:0,class:"password-hidden"},De={class:"tw-border tw-border-gray-200 tw-rounded tw-p-4"},be={class:"tw-grid tw-grid-cols-3 tw-gap-4"},ge={class:"tw-col-span-2 tw-flex tw-items-center tw-gap-1"},Se={class:"tw-col-span-2 tw-flex tw-items-center tw-gap-1"},ye={class:"tw-col-span-2 tw-flex tw-flex-wrap tw-items-center tw-gap-2"},xe={key:0,class:"password-hidden"},Oe={key:0,class:"tw-border tw-rounded tw-border-gray-200 tw-p-4"},Pe={class:"list-item__item"},he={class:"list-item__item"},ke={key:1,class:"tw-border tw-rounded tw-border-gray-200 tw-p-4"},Ce={class:"list-item__item"},Me={class:"list-item__item"},$e={__name:"DSOrdersId",async setup(Re){let k,C;const M=Nt(),d=Ot(),H=Pt(),G=Et(),$=Ut(),R=m(!1),S=m(!0),f=Bt("emitter");f.on("updateDSOrdersId",async()=>{await E(),await d.fetchDSOrderIPMI(s.value?.OrderID),await d.fetchDSOrderIPMISensors(s.value?.OrderID)});const L=m(!1),B=m(!1),b=m(!0),s=m(null),N=m([]),y=m(T.DAY),x=m(!1),O=m(null),g=ht(()=>d.DSSchemes?.[s.value?.SchemeID]);function W(r){f.emit("open-modal",{component:"StatusHistory",data:{modeID:"DSOrders",rowID:r}})}function Y(r,t){const w=t[r];if(w==null)return"-";switch(r){case"ram":return`${w} ГБ`;case"chrate":return`${w} Мбит/с`;default:return w}}function z(r){if(!r)return F(new Date);const t=new Date,w=new Date(t.getTime()+r*24*60*60*1e3);return F(w)}function A(r){function t(w){R.value=w}f.emit("open-modal",{component:"ReloadDS",data:{DSOrderID:r,isReloading:R.value,onReloadStatusChange:t,ServerName:s?.value?.Scheme,SystemPower:d.DSOrderIPMI?.IPMI?.["System Power"],OrderID:s?.value?.OrderID}})}function J(){f.emit("open-modal",{component:"OrdersTransfer",data:{ServiceOrderID:s.value?.ID,ServiceID:s.value?.ServiceID}})}function K(){H.prolongOrder({IsAutoProlong:b.value?0:1,OrderID:s.value?.OrderID})}function q(){f.emit("open-modal",{component:"OrderRestore",data:{OrderID:s.value?.OrderID,CostDay:g.value?.CostDay,DaysRemainded:s.value?.DaysRemainded,emitEvent:"updateDSOrdersId"}})}kt(async()=>{await E()});async function E(){if(S.value=!0,s.value=await d.fetchDSOrder(M.params.id),s.value){await d.fetchDSOrderIPMI(s.value.OrderID);const r=await $.fetchOneOrder(M.params.id);r&&(s.value.Stat=r.Stat,b.value=r.IsAutoProlong,r.DependOrderID&&(O.value=await $.fetchOneOrder(r.DependOrderID)),U(T.DAY))}S.value=!1}async function U(r){x.value=!0,y.value=r,N.value=await G.fetchCharts(s.value.OrderID,y.value),x.value=!1}return[k,C]=Ct(()=>d.fetchDSSchemes()),await k,C(),(r,t)=>{const w=xt,Q=yt,V=St,X=gt,P=At("RouterLink"),Z=bt,tt=Dt,et=It,st=ut,ot=ft,nt=pt,rt=_t,at=wt,p=ct,j=vt,lt=mt,it=dt;return l(),i(_,null,[o(w,{"contract-id":s.value?.ContractID},null,8,["contract-id"]),e("div",Ft,[s.value?(l(),i(_,{key:0},[e("div",null,[e("div",Ht,[e("h1",Gt,n(s.value.IPaddr),1),e("div",null,[e("button",{class:Mt(["btn btn--md btn--border btn--rotate btn--rotate_green",{"btn--system-off":c(d).DSOrderIPMI?.IPMI?.["System Power"]!=="on"}]),onClick:t[0]||(t[0]=a=>A(s.value?.ID))},n(c(d).DSOrderIPMI?.IPMI?.["System Power"]==="on"?"Включен":"Выключен"),3),o(X,{class:"dropdown-dots",right:""},{"button-content":v(()=>[e("span",Wt,[o(Q)])]),default:v(()=>[o(V,{onClick:t[1]||(t[1]=a=>A(s.value.ID))},{default:v(()=>t[10]||(t[10]=[u("Перезагрузить",-1)])),_:1,__:[10]})]),_:1})])]),e("div",Yt,[e("div",zt,[O.value?(l(),i(_,{key:0},[t[11]||(t[11]=u("Относится к заказу ",-1)),o(P,{to:c(Vt)(O.value.Code,s.value.DependOrderID),class:"tw-text-sky-500"},{default:v(()=>[u("#"+n(s.value.DependOrderID),1)]),_:1},8,["to"]),t[12]||(t[12]=u(" /",-1))],64)):D("",!0),u(" Выделенный сервер #"+n(s.value.OrderID),1)]),o(Z,{text:s.value.UserNotice,"order-id":s.value.OrderID,emit:"updateDSOrdersId",position:"right"},null,8,["text","order-id"])]),e("div",Jt,[o(P,{class:"tw-py-2 tw-cursor-pointer -tw-mb-[1px]","active-class":"tw-text-sky-400 tw-border-b-2 tw-border-sky-400",to:`/DSOrders/${s.value.OrderID}`},{default:v(()=>t[13]||(t[13]=[u(" Сервер ",-1)])),_:1,__:[13]},8,["to"]),o(P,{class:"tw-py-2 tw-cursor-pointer -tw-mb-[1px]","active-class":"tw-text-sky-400 tw-border-b-2 tw-border-sky-400",to:`/DSOrders/${s.value.OrderID}/Services`},{default:v(()=>t[14]||(t[14]=[u(" Услуги ",-1)])),_:1,__:[14]},8,["to"])])]),o(tt),e("div",Kt,[e("div",qt,[e("div",Qt,[e("div",Xt,[e("div",Zt,n(s.value.Scheme),1),e("div",null,[o(et,{status:s.value.StatusID,DaysRemainded:s.value.DaysRemainded,"status-table":"DNSmanagerOrders",onClick:t[2]||(t[2]=a=>W(s.value.ID)),class:"tw-cursor-pointer"},null,8,["status","DaysRemainded"])])]),o(st,null,{default:v(()=>[o(V,{onClick:t[3]||(t[3]=a=>q())},{default:v(()=>t[15]||(t[15]=[u("Просмотреть учет заказа",-1)])),_:1,__:[15]})]),_:1})]),e("div",te,[e("div",ee,n(c(jt)(g.value?.CostMonth))+" в месяц",1),e("div",se,"Дней осталось "+n(s.value?.DaysRemainded||"0"),1),e("div",oe," Дата окончания "+n(z(s.value?.DaysRemainded)),1)]),e("div",ne,[o(ot,{onClick:t[4]||(t[4]=a=>r.$router.push(`/DSOrderPay/${s.value?.OrderID}`)),class:"tw-w-30 sm:tw-w-40"},{default:v(()=>t[16]||(t[16]=[u("Продлить",-1)])),_:1,__:[16]}),e("label",re,[$t(e("input",{type:"checkbox","onUpdate:modelValue":t[5]||(t[5]=a=>b.value=a),onInput:t[6]||(t[6]=a=>K())},null,544),[[Rt,b.value]]),t[17]||(t[17]=e("span",{class:"btn-switch__text tw-text-xs sm:tw-text-sm"},"Автопродление",-1)),t[18]||(t[18]=e("span",{class:"btn-switch__toggle"},null,-1))])]),e("div",ae,[o(rt,{onClick:t[7]||(t[7]=a=>J())},{default:v(()=>[o(nt),t[19]||(t[19]=u(" Передать на другой аккаунт ",-1))]),_:1,__:[19]})])]),o(at,{order:s.value},null,8,["order"]),e("div",le,[e("div",ie,[t[21]||(t[21]=e("div",{class:"tw-col-span-3 tw-flex tw-items-center tw-justify-between tw-gap-2"},[e("div",{class:"tw-text-lg sm:tw-text-2xl"},"Конфигурация")],-1)),(l(!0),i(_,null,h(s.value.Names,(a,I)=>(l(),i(_,{key:I},[e("div",de,n(a),1),e("div",ue,n(Y(I,s.value)),1)],64))),128)),g.value?(l(),i(_,{key:0},[t[20]||(t[20]=e("div",{class:"tw-font-bold tw-hyphens-auto"},"Примечание",-1)),e("div",we,n(g.value.UserNotice),1)],64)):D("",!0)])]),e("div",me,[e("div",ce,[t[23]||(t[23]=e("div",{class:"tw-col-span-3 tw-flex tw-items-center tw-justify-between tw-gap-2"},[e("div",{class:"tw-text-lg sm:tw-text-2xl"},"Доступы")],-1)),t[24]||(t[24]=e("div",{class:"tw-font-bold tw-hyphens-auto"},"IP адрес сервера",-1)),e("div",ve,[e("div",null,n(s.value.IPaddr),1),o(p,{value:s.value.IPaddr},null,8,["value"])]),t[25]||(t[25]=e("div",{class:"tw-font-bold tw-hyphens-auto"},"Пользователь",-1)),e("div",_e,[e("div",pe,n(s.value.DSuser),1),o(p,{value:s.value.DSuser},null,8,["value"])]),t[26]||(t[26]=e("div",{class:"tw-font-bold tw-hyphens-auto"},"Пароль",-1)),e("div",fe,[L.value?(l(),i("span",Ie,n(s.value.DSpass),1)):(l(),i("button",{key:1,class:"btn btn--border btn--md tw-h-8 tw-gap-1",onClick:t[8]||(t[8]=a=>L.value=!0)},[o(j,{class:"button-icon"}),t[22]||(t[22]=u(" Показать ",-1))])),o(p,{value:s.value.DSpass},null,8,["value"])])])]),e("div",De,[e("div",be,[t[28]||(t[28]=e("div",{class:"tw-col-span-3 tw-flex tw-items-center tw-justify-between tw-gap-2"},[e("div",{class:"tw-text-lg sm:tw-text-2xl"},"Доступы IPMI")],-1)),t[29]||(t[29]=e("div",{class:"tw-font-bold tw-hyphens-auto"},"IP адрес сервера",-1)),e("div",ge,[e("div",null,n(s.value.ILOaddr),1),o(p,{value:s.value.ILOaddr},null,8,["value"])]),t[30]||(t[30]=e("div",{class:"tw-font-bold tw-hyphens-auto"},"Пользователь",-1)),e("div",Se,[e("div",null,n(s.value.ILOuser),1),o(p,{value:s.value.ILOuser},null,8,["value"])]),t[31]||(t[31]=e("div",{class:"tw-font-bold"},"Пароль",-1)),e("div",ye,[B.value?(l(),i("span",xe,n(s.value.ILOpass),1)):(l(),i("button",{key:1,class:"btn btn--border btn--md tw-h-8 tw-gap-1",onClick:t[9]||(t[9]=a=>B.value=!0)},[o(j,{class:"button-icon"}),t[27]||(t[27]=u(" Показать ",-1))])),o(p,{value:s.value.ILOpass},null,8,["value"])])])]),c(d).DSOrderIPMI?.IPMI&&c(d).DSOrderIPMI?.IPMI.length>0?(l(),i("div",Oe,[t[32]||(t[32]=e("div",{class:"list-item__row"},[e("div",{class:"list-item__title"},"Общая информация из IPMI")],-1)),(l(!0),i(_,null,h(c(d).DSOrderIPMI?.IPMI,a=>(l(),i("div",{class:"list-item__row list-item__row--table",key:a?.name},[e("div",Pe,n(a?.name),1),e("div",he,n(a?.value),1)]))),128))])):D("",!0),c(d).DSOrderIPMI?.["IPMI.Sensors"]&&c(d).DSOrderIPMI["IPMI.Sensors"].length>0?(l(),i("div",ke,[t[33]||(t[33]=e("div",{class:"list-item__row"},[e("div",{class:"list-item__title"},"Данные сенсоров")],-1)),(l(!0),i(_,null,h(c(d).DSOrderIPMI["IPMI.Sensors"],(a,I)=>(l(),i("div",{class:"list-item__row list-item__row--table",key:I},[e("div",Ce,n(I),1),e("div",Me,n(a),1)]))),128))])):D("",!0),o(lt,{data:N.value,period:y.value,loading:x.value,onUpdate:U},null,8,["data","period","loading"])]),t[34]||(t[34]=e("div",{class:"text tw-my-6"},[e("h3",null,"Что входит в стоимость"),e("p",null,"Для подключения дополнительных услуг"),e("ul",null,[e("li",null,"Размещение в РФ, Москва"),e("li",null,"Предустановленная ОС FreeBSD / CentOS / Debian / Ubuntu / Windows"),e("li",null,"IP адрес, с возможностью расширения"),e("li",null,"Бесплатная панель управления ISPManager Lite"),e("li",null,"Круглосуточная поддержка")])],-1))],64)):S.value?D("",!0):(l(),Lt(it,{key:1,label:"Заказ не найден"}))])],64)}}},rs=Tt($e,[["__scopeId","data-v-fea8b16f"]]);export{rs as default};
