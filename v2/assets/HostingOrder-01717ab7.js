import{j as pt,o as D,c as f,b as c,a as t,t as a,w as I,d as S,Y as x,ae as M,Z as Dt,F as ft,p as It,l as St,_ as Ot,a7 as wt,e as Ht,f as bt,R as Pt,r as ct,g as O}from"./index-c7c24b76.js";import{_ as kt}from"./IconCard-57c0e3d6.js";import{I as Ct}from"./IconProfile-da2f6925.js";import{I as yt}from"./IconSettings-1496db0d.js";import{I as dt}from"./IconEye-86bd28ed.js";import{S as mt}from"./StatusBadge-8575efce.js";import{h as xt}from"./hostStatuses-94d00f20.js";import{u as Bt}from"./testTransforms-eec373ee.js";import{f as _t}from"./useTimeFunction-8602dd60.js";import{u as Nt}from"./hosting-ef6b8c8f.js";import{u as At}from"./resetServer-75e2e0c7.js";import{u as Et}from"./globalActions-306d29c7.js";import{_ as gt}from"./ClausesKeeper-e7acf2fb.js";import{_ as vt}from"./ServicesContractBalanceBlock-849a1d97.js";import{s as ut}from"./SettingsEngineItem-f880e99f.js";import{B as ht}from"./BlockBalanceAgreement-f11c65ba.js";import{E as Tt}from"./EmptyStateBlock-b9aefc49.js";import{_ as Mt}from"./paramsAccordionBlock-db172332.js";import{_ as Rt}from"./ButtonDefault-626291b9.js";import{z as Vt}from"./bootstrap-vue-next.es-3f66213d.js";import"./IconClose-447d7f82.js";import"./contracts-397b53fe.js";import"./IconArrow-dfacb3d4.js";const d=g=>(It("data-v-3463c434"),g=g(),St(),g),Lt={key:0,class:"my-hosting-order"},Gt={class:"section"},jt={class:"container"},Ft={class:"section-header"},Ut={class:"section-title"},qt={class:"section-label"},zt={class:"section-nav"},Kt={class:"list"},Wt={class:"list-col list-col--md"},Yt={class:"list-item"},Zt={class:"list-item__row"},Jt={class:"list-item__title"},Qt={class:"list-item__status"},Xt={class:"list-item__row"},$t={class:"list-item__ul"},te={class:"list-item__row list-item__row--column"},ee={class:"list-item__text"},se={class:"list-item__text"},oe={class:"list-item__text"},ie={class:"list-item__row"},ne={class:"btn btn--border btn--switch"},ae=d(()=>t("span",{class:"btn-switch__text"},"Автопродление",-1)),re=d(()=>t("span",{class:"btn-switch__toggle"},null,-1)),le={class:"list-col list-col--md"},ce={class:"list-item"},_e={class:"list-item__row"},de=d(()=>t("div",{class:"list-item__title"},"Панель управления",-1)),me={class:"list-item__row list-item__row--table"},ge=d(()=>t("div",{class:"list-item__item"},"Адрес",-1)),ve={class:"list-item__item"},ue={class:"list-item__row list-item__row--table"},he=d(()=>t("div",{class:"list-item__item"},"Логин",-1)),pe={class:"list-item__item"},De={class:"list-item__row list-item__row--table"},fe=d(()=>t("div",{class:"list-item__item"},"Пароль",-1)),Ie={class:"list-item__item hide-button"},Se={key:0,class:"password-hidden"},Oe={class:"list-item__row list-item__row--table"},we=d(()=>t("div",{class:"list-item__item"},"FTP, POP3, SMTP, IMAP",-1)),He={class:"list-item__item"},be={class:"list-col list-col--md"},Pe={class:"list-item"},ke=d(()=>t("div",{class:"list-item__row"},[t("div",{class:"list-item__title"},"Именные сервера")],-1)),Ce={class:"list-item__row list-item__row--table"},ye={class:"list-item__item"},xe={class:"list-item__item"},Be={class:"list-item__item"},Ne={class:"list-item__item"},Ae={key:1,class:"section"},Ee={class:"container"};function Te(g,i,r,e,v,R){var H,b,P,k,C,y,s,o,l,V,L,G,j,F,U,q,z,K,W,Y,Z,J,Q,X,$,tt,et,st,ot,it,nt,at,rt,lt;const B=ht,m=pt("router-link"),N=gt,u=vt,n=mt,h=Vt,p=ut,w=Rt,A=dt,E=Mt,T=Tt;return D(),f(ft,null,[c(B),(H=e.getHostingOrderData)!=null&&H.ID?(D(),f("div",Lt,[t("div",Gt,[t("div",jt,[t("div",Ft,[t("h1",Ut,a((b=e.getHostingOrderData)==null?void 0:b.Domain),1),t("div",qt,"Хостинг # "+a((P=e.getHostingOrderData)==null?void 0:P.OrderID),1),t("div",zt,[c(m,{class:"section-nav__item",to:`/HostingOrders/${(k=e.getHostingOrderData)==null?void 0:k.OrderID}`},{default:I(()=>[S("Хостинг")]),_:1},8,["to"])])]),c(N,{partition:"Header:/HostingOrders"}),t("div",Kt,[c(u,{"contract-id":(C=e.getHostingOrderData)==null?void 0:C.ContractID,onTransfer:i[0]||(i[0]=_=>e.transferItem())},null,8,["contract-id"]),t("div",Wt,[t("div",Yt,[t("div",Zt,[t("div",Jt,a((y=e.getHostingScheme)==null?void 0:y.Name),1),t("div",Qt,[c(n,{status:(s=e.getHostingOrderData)==null?void 0:s.StatusID,"status-table":"HostingOrders"},null,8,["status"])]),c(p,null,{default:I(()=>[c(h,{onClick:i[1]||(i[1]=_=>e.openPackageChangeModal())},{default:I(()=>[S("Изменить тариф")]),_:1}),c(h,{onClick:i[2]||(i[2]=_=>e.openOrderRestore())},{default:I(()=>[S("Просмотреть учет заказа")]),_:1}),c(h,{onClick:i[3]||(i[3]=_=>e.openPasswordChange())},{default:I(()=>[S("Сменить пароль от аккаунта")]),_:1})]),_:1})]),t("div",Xt,[t("ul",$t,[x(t("li",null,a(e.formDescriptionLine((l=(o=e.getHostingScheme)==null?void 0:o.SchemeParams)==null?void 0:l.limit_webdomains)),513),[[M,(G=(L=(V=e.getHostingScheme)==null?void 0:V.SchemeParams)==null?void 0:L.limit_webdomains)==null?void 0:G.Value]]),x(t("li",null,a(e.formDescriptionLine((F=(j=e.getHostingScheme)==null?void 0:j.SchemeParams)==null?void 0:F.limit_quota)),513),[[M,(z=(q=(U=e.getHostingScheme)==null?void 0:U.SchemeParams)==null?void 0:q.limit_quota)==null?void 0:z.Value]]),x(t("li",null,a(e.formDescriptionLine((W=(K=e.getHostingScheme)==null?void 0:K.SchemeParams)==null?void 0:W.limit_emails)),513),[[M,(J=(Z=(Y=e.getHostingScheme)==null?void 0:Y.SchemeParams)==null?void 0:Z.limit_emails)==null?void 0:J.Value]])])]),t("div",te,[t("div",ee,a((Q=e.getHostingScheme)==null?void 0:Q.CostMonth)+" ₽ в месяц",1),t("div",se,"Дней осталось "+a(((X=e.getHostingOrderData)==null?void 0:X.DaysRemainded)||0),1),t("div",oe,"Дата окончания "+a(e.calculateExpirationDate(($=e.getHostingOrderData)==null?void 0:$.DaysRemainded)),1)]),t("div",ie,[t("div",{class:"btn btn-default btn--blue",onClick:i[4]||(i[4]=_=>e.navigateToProlong())},a(((tt=e.getHostingOrderData)==null?void 0:tt.StatusID)==="Waiting"?"Оплатить":"Продлить"),1),t("label",ne,[x(t("input",{type:"checkbox","onUpdate:modelValue":i[5]||(i[5]=_=>e.isAutoProlong=_),onInput:i[6]||(i[6]=_=>e.setProlongValue())},null,544),[[Dt,e.isAutoProlong]]),ae,re])])])]),t("div",le,[t("div",ce,[t("div",_e,[de,c(w,{class:"ml-auto",onClick:i[7]||(i[7]=_=>e.orderManage()),label:"Вход"})]),t("div",me,[ge,t("div",ve,a(`https://${(et=e.getServerGroup)==null?void 0:et.Address}/manager`),1)]),t("div",ue,[he,t("div",pe,a((st=e.getHostingOrderData)==null?void 0:st.Login),1)]),t("div",De,[fe,t("div",Ie,[e.passwordShow?(D(),f("div",Se,a(e.getHostingOrderData.Password),1)):(D(),f("button",{key:1,class:"btn btn--border btn--md hide-button",onClick:i[8]||(i[8]=_=>e.passwordShow=!0)},[c(A),S("Показать")]))])]),t("div",Oe,[we,t("div",He,a((ot=e.getServerGroup)==null?void 0:ot.Address),1)])])]),t("div",be,[t("div",Pe,[ke,t("div",Ce,[t("div",ye,a((it=e.getHostingOrderData)==null?void 0:it.Ns1Name),1),t("div",xe,a((nt=e.getHostingOrderData)==null?void 0:nt.Ns2Name),1),t("div",Be,a((at=e.getHostingOrderData)==null?void 0:at.Ns3Name),1),t("div",Ne,a((rt=e.getHostingOrderData)==null?void 0:rt.Ns4Name),1)])])])])])]),c(E,{"params-list":(lt=e.getHostingScheme)==null?void 0:lt.SchemeParams,label:"Общая информация","main-param":"InternalName"},null,8,["params-list"])])):(D(),f("div",Ae,[t("div",Ee,[c(T,{label:"Заказ не найден"})])]))],64)}const Me={components:{IconCard:kt,IconProfile:Ct,IconSettings:yt,IconEye:dt,StatusBadge:mt,ClausesKeeper:gt,settingsEngineItem:ut,ServicesContractBalanceBlock:vt,BlockBalanceAgreement:ht},async setup(){const g=wt(),i=Ht(),r=Nt(),e=At(),v=bt(),R=Et(),{formDescriptionLine:B}=Bt(),m=Pt("emitter");m.on("updateHostingIDPage",()=>{r.fetchHostingOrders()});const N=ct(!1),u=ct(!1),n=O(()=>Object.keys(r==null?void 0:r.hostingList).map(s=>r==null?void 0:r.hostingList[s]).find(s=>s.OrderID===g.params.id)),h=O(()=>r==null?void 0:r.hostingSchemes),p=O(()=>{var s,o;return(o=h.value)==null?void 0:o[(s=n.value)==null?void 0:s.SchemeID]}),w=O(()=>{var s,o;return(o=v==null?void 0:v.userOrders)==null?void 0:o[(s=n.value)==null?void 0:s.OrderID]}),A=O(()=>{var s,o,l;return(l=(s=e==null?void 0:e.serverGroupsList)==null?void 0:s.Servers)==null?void 0:l[(o=n.value)==null?void 0:o.ServerID]});function E(s){if(!s)return _t(new Date);const o=new Date,l=new Date(o.getTime()+s*24*60*60*1e3);return _t(l)}function T(){var s,o;m.emit("open-modal",{component:"OrdersTransfer",data:{ServiceOrderID:(s=n.value)==null?void 0:s.ID,ServiceID:(o=n.value)==null?void 0:o.ServiceID}})}function H(){var s;v.prolongOrder({IsAutoProlong:u.value?0:1,OrderID:(s=n.value)==null?void 0:s.OrderID})}function b(){var s;i.push(`/HostingOrderPay/${(s=n.value)==null?void 0:s.OrderID}`)}function P(){var s,o,l;R.OrderManage({ServiceOrderID:(s=n.value)==null?void 0:s.ID,OrderID:(o=n.value)==null?void 0:o.OrderID,ServiceID:(l=n.value)==null?void 0:l.ServiceID})}function k(){var s,o;m.emit("open-modal",{component:"HostingOrderSchemeChange",data:{hostingID:(s=n.value)==null?void 0:s.ID,ServerGroup:(o=p.value)==null?void 0:o.ServersGroupID,emitEvent:"updateHostingIDPage"}})}function C(){var s,o;m.emit("open-modal",{component:"OrderPasswordChange",data:{OrderID:(s=n.value)==null?void 0:s.ID,ServiceID:(o=n.value)==null?void 0:o.ServiceID,emitEvent:"updateHostingIDPage"}})}function y(){var s,o,l;m.emit("open-modal",{component:"OrderRestore",data:{OrderID:(s=n.value)==null?void 0:s.OrderID,CostDay:(o=p.value)==null?void 0:o.CostDay,DaysRemainded:(l=n.value)==null?void 0:l.DaysRemainded,emitEvent:"updateHostingIDPage"}})}return await r.fetchHostingOrders(),await r.fetchHostingSchemes(),await e.fetchServerGroups(),await v.fetchUserOrders().then(()=>{var s;u.value=(s=w.value)==null?void 0:s.IsAutoProlong}),{getHostingOrderData:n,getHostingScheme:p,getUserOrder:w,getServerGroup:A,isAutoProlong:u,passwordShow:N,openOrderRestore:y,openPackageChangeModal:k,orderManage:P,navigateToProlong:b,setProlongValue:H,openPasswordChange:C,hostStatuses:xt,transferItem:T,formDescriptionLine:B,calculateExpirationDate:E}}},as=Ot(Me,[["render",Te],["__scopeId","data-v-3463c434"]]);export{as as default};
