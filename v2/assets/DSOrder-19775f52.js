import{j as rt,o as _,c as d,b as c,a as t,t as l,n as at,w as h,d as O,F as P,v as x,Y as lt,Z as _t,k as tt,p as dt,l as ct,_ as mt,a7 as vt,f as ut,r as B,R as Dt,g as S,i as It}from"./index-58c913f0.js";import"./resetServer-f032e468.js";import{u as ht}from"./dedicatedServer-952a0bdd.js";import{f as st}from"./useTimeFunction-8602dd60.js";import{_ as St}from"./IconCard-94a8b1b0.js";import{I as gt}from"./IconProfile-dd717302.js";import{I as ft}from"./IconSettings-0cf0fa33.js";import{I as et}from"./IconEye-5deceda6.js";import{S as ot}from"./StatusBadge-cd8ad979.js";import{I as wt}from"./IconRotate-53e3b019.js";import{h as bt}from"./hostStatuses-94d00f20.js";import{s as it}from"./SettingsEngineItem-7706180f.js";import{B as nt}from"./BlockBalanceAgreement-59500b1f.js";import{E as pt}from"./EmptyStateBlock-e5319013.js";import{_ as Ot}from"./ButtonDefault-7a589010.js";import{_ as Pt}from"./ServicesContractBalanceBlock-a4202c70.js";import{_ as yt}from"./ClausesKeeper-7b7ef561.js";import{z as kt,d as Mt}from"./bootstrap-vue-next.es-9015192b.js";import{_ as Ct}from"./IconDots-1997c758.js";import"./contracts-5c545170.js";import"./IconArrow-bff54646.js";import"./IconClose-3552080e.js";const m=D=>(dt("data-v-3cfb3c85"),D=D(),ct(),D),Rt={key:0,class:"ds-order-page"},xt={class:"section"},Bt={class:"container"},Nt={class:"section-header"},At={class:"section-title"},Et={class:"hosting-item__controls"},Lt={class:"btn btn--dots"},Tt={class:"section-label"},Vt={class:"section-nav"},Ut={class:"list"},jt={class:"list-col list-col--md"},zt={class:"list-item"},Ft={class:"list-item__row"},Gt={class:"list-item__title"},Wt={class:"list-item__status"},Yt={class:"list-item__row"},Zt={class:"list-item__ul"},qt={class:"list-item__row list-item__row--column"},Ht={class:"list-item__text"},Jt={class:"list-item__text"},Kt={class:"list-item__text"},Qt={class:"list-item__row"},Xt={class:"btn btn--border btn--switch"},$t=m(()=>t("span",{class:"btn-switch__text"},"Автопродление",-1)),ts=m(()=>t("span",{class:"btn-switch__toggle"},null,-1)),ss={class:"list-col list-col--xl"},es={class:"list-item"},os=m(()=>t("div",{class:"list-item__row"},[t("div",{class:"list-item__title"},"Конфигурация")],-1)),is={class:"list-item__row list-item__table"},ns={class:"list-item__label"},rs={class:"list-item__text"},as={class:"list-col list-col--md"},ls={class:"list-item"},_s=m(()=>t("div",{class:"list-item__row"},[t("div",{class:"list-item__title"},"Доступы")],-1)),ds={class:"list-item__row list-item__row--table"},cs=m(()=>t("div",{class:"list-item__item"},"IP адрес сервера",-1)),ms={class:"list-item__item"},vs={class:"list-item__row list-item__row--table"},us=m(()=>t("div",{class:"list-item__item"},"Пользователь",-1)),Ds={class:"list-item__item"},Is={class:"list-item__row list-item__row--table password-line"},hs=m(()=>t("div",{class:"list-item__item"},"Пароль",-1)),Ss={class:"list-item__item"},gs={key:0,class:"password-hidden"},fs={class:"list-col list-col--md"},ws={class:"list-item"},bs=m(()=>t("div",{class:"list-item__row"},[t("div",{class:"list-item__title"},"Доступы IPMI")],-1)),ps={class:"list-item__row list-item__row--table"},Os=m(()=>t("div",{class:"list-item__item"},"IP адрес сервера",-1)),Ps={class:"list-item__item"},ys={class:"list-item__row list-item__row--table"},ks=m(()=>t("div",{class:"list-item__item"},"Пользователь",-1)),Ms={class:"list-item__item"},Cs={class:"list-item__row list-item__row--table password-line"},Rs=m(()=>t("div",{class:"list-item__item"},"Пароль",-1)),xs={class:"list-item__item"},Bs={key:0,class:"password-hidden"},Ns={key:0,class:"list-col list-col--md"},As={class:"list-item"},Es=m(()=>t("div",{class:"list-item__row"},[t("div",{class:"list-item__title"},"Общая информация из IPMI")],-1)),Ls={class:"list-item__row list-item__row--table"},Ts={class:"list-item__item"},Vs={class:"list-item__item"},Us={key:1,class:"list-col list-col--md"},js={class:"list-item"},zs=m(()=>t("div",{class:"list-item__row"},[t("div",{class:"list-item__title"},"Данные сенсоров")],-1)),Fs={class:"list-item__row list-item__row--table"},Gs={class:"list-item__item"},Ws={class:"list-item__item"},Ys=m(()=>t("div",{class:"section"},[t("div",{class:"container"},[t("div",{class:"text"},[t("h3",null,"Что входит в стоимость"),t("p",null,"Для подключения дополнительных услуг"),t("ul",null,[t("li",null,"Размещение в РФ, Москва"),t("li",null,"Предустановленная ОС FreeBSD / CentOS / Debian / Ubuntu / Windows"),t("li",null,"IP адрес, с возможностью расширения"),t("li",null,"Бесплатная панель управления ISPManager Lite"),t("li",null,"Круглосуточная поддержка")])])])],-1)),Zs={key:1,class:"section"},qs={class:"container"};function Hs(D,i,I,s,g,j){var k,M,C,e,o,n,b,p,R,z,F,G,W,Y,Z,q,H,J,K,Q,X,$;const N=nt,f=Ct,a=kt,A=Mt,w=rt("router-link"),u=yt,E=Pt,L=ot,T=it,V=Ot,y=et,U=pt;return _(),d(P,null,[c(N),(k=s.getDSServerData)!=null&&k.ID?(_(),d("div",Rt,[t("div",xt,[t("div",Bt,[t("div",Nt,[t("h1",At,l((M=s.getDSServerData)==null?void 0:M.IPaddr),1),t("div",Et,[t("div",{class:at(["btn btn--md btn--border btn--rotate btn--rotate_green",{"btn--system-off":((C=s.getDSOrderIPMI)==null?void 0:C.IPMI["System Power"])!=="on"}]),onClick:i[0]||(i[0]=r=>{var v;return s.serverReset((v=s.getDSServerData)==null?void 0:v.ID)})},l(((e=s.getDSOrderIPMI)==null?void 0:e.IPMI["System Power"])==="on"?"Включен":"Выключен"),3),c(A,{class:"dropdown-dots",right:""},{"button-content":h(()=>[t("div",Lt,[c(f)])]),default:h(()=>[c(a,{onClick:i[1]||(i[1]=r=>{var v;return s.serverReset((v=s.getDSServerData)==null?void 0:v.ID)})},{default:h(()=>[O("Перезагрузить")]),_:1})]),_:1})]),t("div",Tt,"Выделенный сервер # "+l((o=s.getDSServerData)==null?void 0:o.OrderID),1),t("div",Vt,[c(w,{class:"section-nav__item",to:`/DSOrders/${(n=s.getDSServerData)==null?void 0:n.OrderID}`},{default:h(()=>[O("Сервер")]),_:1},8,["to"])])]),c(u),t("div",Ut,[c(E,{"contract-id":(b=s.getDSServerData)==null?void 0:b.ContractID,onTransfer:i[2]||(i[2]=r=>s.transferItem())},null,8,["contract-id"]),t("div",jt,[t("div",zt,[t("div",Ft,[t("div",Gt,l((p=s.getDSServerData)==null?void 0:p.Scheme),1),t("div",Wt,[c(L,{status:(R=s.getDSServerData)==null?void 0:R.StatusID,DaysRemainded:(z=s.getDSServerData)==null?void 0:z.DaysRemainded,"status-table":"DNSmanagerOrders"},null,8,["status","DaysRemainded"])]),c(T,null,{default:h(()=>[c(a,{onClick:i[3]||(i[3]=r=>s.openOrderRestore())},{default:h(()=>[O("Просмотреть учет заказа")]),_:1})]),_:1})]),t("div",Yt,[t("ul",Zt,[(_(!0),d(P,null,x(s.getDSItemParam(s.getDSServerData),r=>(_(),d("li",null,l(r),1))),256))])]),t("div",qt,[t("div",Ht,l(((F=s.getDSScheme)==null?void 0:F.CostMonth)||"0")+" ₽ в месяц",1),t("div",Jt,"Дней осталось "+l(((G=s.getDSServerData)==null?void 0:G.DaysRemainded)||"0"),1),t("div",Kt,"Дата окончания "+l(s.calculateExpirationDate((W=s.getDSServerData)==null?void 0:W.DaysRemainded)),1)]),t("div",Qt,[c(V,{label:"Продлить",onClick:i[4]||(i[4]=r=>{var v;return D.$router.push(`/DSOrderPay/${(v=s.getDSServerData)==null?void 0:v.OrderID}`)})}),t("label",Xt,[lt(t("input",{type:"checkbox","onUpdate:modelValue":i[5]||(i[5]=r=>s.isAutoProlong=r),onInput:i[6]||(i[6]=r=>s.setProlongValue())},null,544),[[_t,s.isAutoProlong]]),$t,ts])])])]),t("div",ss,[t("div",es,[os,t("div",is,[(_(!0),d(P,null,x(s.getDSServerData.Names,(r,v)=>(_(),d("div",{class:"list-item__table-col",key:v},[t("div",ns,l(r),1),t("div",rs,l(s.formatData(v,s.getDSServerData)),1)]))),128))])])]),t("div",as,[t("div",ls,[_s,t("div",ds,[cs,t("div",ms,l((Y=s.getDSServerData)==null?void 0:Y.IPaddr),1)]),t("div",vs,[us,t("div",Ds,l((Z=s.getDSServerData)==null?void 0:Z.DSuser),1)]),t("div",Is,[hs,t("div",Ss,[s.passwordShowOne?(_(),d("div",gs,l((q=s.getDSServerData)==null?void 0:q.DSpass),1)):(_(),d("button",{key:1,class:"btn btn--border btn--md password-line",onClick:i[7]||(i[7]=r=>s.passwordShowOne=!0)},[c(y,{class:"button-icon"}),O("Показать")]))])])])]),t("div",fs,[t("div",ws,[bs,t("div",ps,[Os,t("div",Ps,l((H=s.getDSServerData)==null?void 0:H.ILOaddr),1)]),t("div",ys,[ks,t("div",Ms,l((J=s.getDSServerData)==null?void 0:J.ILOuser),1)]),t("div",Cs,[Rs,t("div",xs,[s.passwordShowTwo?(_(),d("div",Bs,l((K=s.getDSServerData)==null?void 0:K.ILOpass),1)):(_(),d("button",{key:1,class:"btn btn--border btn--md password-line",onClick:i[8]||(i[8]=r=>s.passwordShowTwo=!0)},[c(y,{class:"button-icon"}),O("Показать")]))])])])]),s.getDSOrderIPMI&&((Q=s.getDSOrderIPMI)==null?void 0:Q.IPMI.length)>0?(_(),d("div",Ns,[t("div",As,[Es,(_(!0),d(P,null,x((X=s.getDSOrderIPMI)==null?void 0:X.IPMI,r=>(_(),d("div",Ls,[t("div",Ts,l(r==null?void 0:r.name),1),t("div",Vs,l(r==null?void 0:r.value),1)]))),256))])])):tt("",!0),($=s.getDSOrderIPMI)!=null&&$["IPMI.Sensors"]&&s.getDSOrderIPMI["IPMI.Sensors"].length>0?(_(),d("div",Us,[t("div",js,[zs,(_(!0),d(P,null,x(s.getDSOrderIPMI["IPMI.Sensors"],(r,v)=>(_(),d("div",Fs,[t("div",Gs,l(v),1),t("div",Ws,l(r),1)]))),256))])])):tt("",!0)])])]),Ys])):(_(),d("div",Zs,[t("div",qs,[c(U,{label:"Заказ не найден"})])]))],64)}const Js={components:{IconCard:St,IconProfile:gt,IconSettings:ft,IconEye:et,StatusBadge:ot,IconRotate:wt,settingsEngineItem:it,BlockBalanceAgreement:nt},async setup(){const D=vt(),i=ht(),I=ut(),s=B(!1),g=Dt("emitter");g.on("updateDSIDPage",()=>{i.fetchDSOrders().then(()=>{var e;i.fetchDSOrderIPMI((e=a.value)==null?void 0:e.OrderID)}).then(()=>{var e;i.fetchDSOrderIPMISensors((e=a.value)==null?void 0:e.OrderID)})});const j=B(!1),N=B(!1),f=B(!0),a=S(()=>Object.keys(i==null?void 0:i.DSList).map(e=>i==null?void 0:i.DSList[e]).find(e=>e.OrderID===D.params.id)),A=S(()=>{var e;return((e=a.value)==null?void 0:e.Names)||[]}),w=S(()=>{var e,o;return(o=i==null?void 0:i.DSSchemes)==null?void 0:o[(e=a.value)==null?void 0:e.SchemeID]}),u=S(()=>i==null?void 0:i.DSOrderIPMI),E=S(()=>{var e,o;return(o=I==null?void 0:I.userOrders)==null?void 0:o[(e=a.value)==null?void 0:e.OrderID]}),L=S(()=>i==null?void 0:i.DSOrderIPMISensors);It(()=>{var e;console.log("getDSOrderIPMI - ",u),console.log("getDSOrderIPMI value - ",(e=u==null?void 0:u.value)==null?void 0:e.IPMI["System Power"])});function T(e,o){const n=o[e];if(n==null)return"-";switch(e){case"ram":return`${n} ГБ`;case"chrate":return`${n} Мбит/с`;default:return n}}function V(e){if(!e)return st(new Date);const o=new Date,n=new Date(o.getTime()+e*24*60*60*1e3);return st(n)}function y(e){let o=w.value;o===void 0&&(o=e);let n=[];return o!=null&&o.Name&&n.push(o==null?void 0:o.Name),o!=null&&o.CPU&&n.push(o==null?void 0:o.CPU),o!=null&&o.ram&&n.push("RAM "+(o==null?void 0:o.ram)+" GB"),o!=null&&o.disks&&n.push(o==null?void 0:o.disks),n}function U(e){var n,b,p;function o(R){s.value=R}g.emit("open-modal",{component:"ReloadDS",data:{DSOrderID:e,isReloading:s.value,onReloadStatusChange:o,ServerName:(n=a==null?void 0:a.value)==null?void 0:n.Scheme,SystemPower:(b=u==null?void 0:u.value)==null?void 0:b.IPMI["System Power"],OrderID:(p=a==null?void 0:a.value)==null?void 0:p.OrderID}})}function k(){var e,o;g.emit("open-modal",{component:"OrdersTransfer",data:{ServiceOrderID:(e=a.value)==null?void 0:e.ID,ServiceID:(o=a.value)==null?void 0:o.ServiceID}})}function M(){var e;I.prolongOrder({IsAutoProlong:f.value?0:1,OrderID:(e=a.value)==null?void 0:e.OrderID})}function C(){var e,o,n;g.emit("open-modal",{component:"OrderRestore",data:{OrderID:(e=a.value)==null?void 0:e.OrderID,CostDay:(o=w.value)==null?void 0:o.CostDay,DaysRemainded:(n=a.value)==null?void 0:n.DaysRemainded,emitEvent:"updateDSIDPage"}})}return await i.fetchDSSchemes(),i.fetchDSOrders().then(()=>{var e;i.fetchDSOrderIPMI((e=a.value)==null?void 0:e.OrderID)}),await I.fetchUserOrders().then(()=>{var e;f.value=(e=E.value)==null?void 0:e.IsAutoProlong}),{getDSOrderIPMI:u,getDSServerData:a,getDSScheme:w,getDSOrderIPMISensors:L,isAutoProlong:f,passwordShowOne:j,passwordShowTwo:N,openOrderRestore:C,transferItem:k,setProlongValue:M,serverReset:U,isReloading:s,getDSItemParam:y,hostStatuses:bt,calculateExpirationDate:V,formatData:T,serverDataNames:A}}},Se=mt(Js,[["render",Hs],["__scopeId","data-v-3cfb3c85"]]);export{Se as default};
