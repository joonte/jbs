import{_ as A}from"./ButtonDefault-598fef28.js";import{s as M}from"./SimpleCheckbox-3ab55ce6.js";import{_ as R}from"./ClausesKeeper-a152fc61.js";import{_ as B,r as g,i as D,h as P,o as f,c as V,Y,ae as q,a as e,t as $,b as p,w as N,L as z,p as T,l as L,d as j,u as G,e as H,g as I,ag as J,j as K,F as x,v as Q,x as W,k as X}from"./index-eaeb1281.js";import{u as Z}from"./contracts-ac470ffa.js";import{s as ee}from"./multiselect-92d0918e.js";import{B as te}from"./BlockBalanceAgreement-11afb494.js";import"./IconClose-e8029cfe.js";import"./bootstrap-vue-next.es-f4c478af.js";import"./IconArrow-ce1bc7b6.js";const oe=a=>(T("data-v-e14078ef"),a=a(),L(),a),le={class:"section"},se={class:"block--mobile_divider"},ae={class:"form-field form-field--basic"},ne=oe(()=>e("div",{class:"form-field__label"},[j("Выбрать профиль"),e("span",null,"*")],-1)),ce={class:"form-field-input__wrapper"},ie={class:"multiselect-option"},re={__name:"BlockSelectProfile",props:["modelValue","title","items"],emits:["update:modelValue","buttonClicked"],setup(a,{emit:v}){const t=a,u=g(null);function i(r){v("update:modelValue",r)}return D(()=>{var r;t.items&&(u.value=(r=Object.keys(t.items))==null?void 0:r[0])}),P(t,()=>{u.value=t.modelValue}),(r,d)=>{var c;return f(),V("div",le,[Y(e("h2",{class:"section-block_title"},$(t.title),513),[[q,t.title]]),e("div",se,[e("div",ae,[ne,e("div",ce,[p(z(ee),{class:"multiselect--white",placeholder:"Выбрать профиль",label:"name",modelValue:u.value,"onUpdate:modelValue":d[0]||(d[0]=o=>u.value=o),options:t.items,disabled:((c=t.items)==null?void 0:c.length)<=1,onChange:i},{option:N(({option:o})=>[e("div",ie,$(o.name),1)]),_:1},8,["modelValue","options","disabled"])])])])])}}},ue=B(re,[["__scopeId","data-v-e14078ef"]]);const E=a=>(T("data-v-c6edfade"),a=a(),L(),a),de={class:"section"},_e={class:"container"},pe={class:"section-header"},me=E(()=>e("h1",{class:"section-title"},"Создать договор",-1)),fe=E(()=>e("div",{class:"section-header"},[e("h2",{class:"section-block_title"},"Шаблон")],-1)),ve={class:"form"},he={class:"container-limited"},Ce={__name:"ContractCreateContract",async setup(a){let v,t;const u=G(),i=Z(),r=H(),d=g(!1),c=g("Natural"),o=g(null),F=I(()=>u.ConfigList),_=I(()=>i==null?void 0:i.profileList),y=I(()=>Object.keys(_==null?void 0:_.value).map(l=>{var n,h,C,k,b,m;return{template:(h=(n=_.value)==null?void 0:n[l])==null?void 0:h.TemplateID,value:(k=(C=_.value)==null?void 0:C[l])==null?void 0:k.ID,name:(m=(b=_.value)==null?void 0:b[l])==null?void 0:m.Name}}).filter(l=>l.template===c.value));function O(){console.log(o.value),console.log(c.value),d.value=!0,i.contractMake({ProfileID:o.value,TypeID:c.value}).then(l=>{l.Status==="Ok"&&r.push("/Contracts"),d.value=!1})}function S(){var l,n;o.value=((n=(l=y.value)==null?void 0:l[0])==null?void 0:n.value)||null}return P(c,()=>{S()}),D(()=>{S()}),[v,t]=J(()=>i.fetchProfiles()),await v,t(),(l,n)=>{var m,w;const h=K("router-link"),C=R,k=M,b=A;return f(),V(x,null,[p(te),e("div",de,[e("div",_e,[e("div",pe,[p(h,{class:"section-label",to:"/Contracts"},{default:N(()=>[j("Мои договора")]),_:1}),me]),p(C),fe,e("div",ve,[(f(!0),V(x,null,Q((w=(m=F.value)==null?void 0:m.Contracts)==null?void 0:w.Types,s=>(f(),V(x,null,[(s==null?void 0:s.ProfileTemplateID)!==""?(f(),W(k,{key:0,label:s==null?void 0:s.Name,value:s==null?void 0:s.ProfileTemplateID,modelValue:c.value,"onUpdate:modelValue":n[0]||(n[0]=U=>c.value=U)},null,8,["label","value","modelValue"])):X("",!0)],64))),256))]),e("div",he,[p(ue,{title:"Использовать профиль",items:y.value,modelValue:o.value,"onUpdate:modelValue":n[1]||(n[1]=s=>o.value=s)},null,8,["items","modelValue"]),p(b,{onClick:O,disabled:o.value===null||o.value===void 0,"is-loading":d.value,label:"Зарегистрировать"},null,8,["disabled","is-loading"])])])])],64)}}},Be=B(Ce,[["__scopeId","data-v-c6edfade"]]);export{Be as default};
