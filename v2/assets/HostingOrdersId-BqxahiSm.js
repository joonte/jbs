import{_ as pt}from"./EmptyStateBlock-Ad1AmtSS.js";import{_ as _t}from"./ParamsAccordionBlock-B6HAmh-U.js";import{_ as ft,a as gt,b as Dt}from"./SettingsEngineItem-CcQJH31T.js";import{_ as xt,a as bt}from"./CopyToClipboard.vue_vue_type_script_setup_true_lang-RZ0BAL8S.js";import{_ as It}from"./WhiteButton.vue_vue_type_script_setup_true_lang-ClwvvVEf.js";import{I as ht}from"./IconProfile-DDO3OQU0.js";import{_ as St}from"./BlueButton.vue_vue_type_script_setup_true_lang-q3k2Q2g8.js";import{r as yt}from"./bootstrap-vue-next-BglOzul_.js";import{_ as Ot}from"./StatusBadge-DZmmWv0G.js";import{_ as kt}from"./ClausesKeeper-gPyacQ05.js";import{_ as Ct}from"./MessageInfo-BrNRfWl8.js";import{_ as Nt}from"./UserNote-Cq01thJ0.js";import{_ as Pt,g as $t,b as C,f as Ht}from"./BlockBalanceAgreement-DSLTUOoQ.js";import{u as At,x as Mt,r as w,I as j,f as N,H as Rt,g as Lt,D as Bt,c as u,b as o,a as s,C as q,h as m,F as P,t as a,e as n,w as v,v as _,E as Tt,n as Vt,J as Et,L as Gt,d as Ut,o as l}from"./index-C9dBN6m4.js";import{f as F}from"./time-DenPiOX5.js";import{u as Wt}from"./hosting-C49ZUiO9.js";import{u as jt}from"./server-D__H3WLv.js";import{u as qt}from"./global-DiPSuX9n.js";import{u as Ft}from"./orders-D_JLVTov.js";import"./contracts-BEc0DZS2.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./LoadingIndicator-DXjOL6Pz.js";import"./ServerStatusBadge.vue_vue_type_script_setup_true_lang-DbXnhqPA.js";import"./services-moLhYNFg.js";import"./IconSettings-BGdLLHON.js";import"./IconCopy-CTfDC5Bz.js";import"./IconClose-CgjzG0Yf.js";import"./ButtonDefault-B1FApUky.js";import"./index-D0iqQ1zq.js";const zt={class:"tw-px-4 md:tw-px-8"},Yt={class:"tw-text-xl sm:tw-text-4xl"},Jt=["href"],Xt={class:"tw-flex tw-items-center tw-gap-2 tw-mt-2"},Kt={class:"tw-text-gray-500 tw-text-sm"},Qt={class:"tw-flex tw-items-center tw-gap-8 tw-border-b tw-border-gray-200 tw-mt-4 tw-whitespace-nowrap tw-mb-6"},Zt={class:"tw-grid tw-grid-cols-1 xl:tw-grid-cols-2 tw-gap-4"},te={class:"tw-border tw-rounded tw-border-gray-200 tw-p-4"},ee={class:"tw-flex tw-justify-between tw-items-center tw-gap-4"},se={class:"tw-flex tw-items-center tw-gap-2"},oe={class:"tw-text-2xl"},ae={class:"tw-flex tw-flex-wrap tw-gap-x-4 tw-gap-y-2 tw-text-gray-500 tw-text-sm tw-mt-4"},ne={key:0},re={key:1},le={key:2},ie={class:"tw-space-y-4 tw-mt-4"},ue={class:"tw-flex tw-gap-4 tw-mt-4"},de={class:"btn btn--border btn--switch tw-ml-0 tw-h-10 sm:tw-h-12"},me={class:"tw-flex tw-flex-wrap tw-gap-4 tw-mt-4"},ve={class:"tw-border tw-border-gray-200 tw-rounded tw-p-4"},ce={class:"tw-grid tw-gap-4 tw-grid-cols-3"},we={class:"tw-col-span-3 tw-flex tw-items-center tw-justify-between tw-gap-2"},pe={class:"tw-col-span-2 tw-flex tw-items-center tw-gap-1"},_e={class:"tw-break-all"},fe={class:"tw-col-span-2 tw-flex tw-items-center tw-gap-1"},ge={class:"tw-col-span-2 tw-flex tw-flex-wrap tw-items-center tw-gap-2"},De={key:0,class:"tw-flex tw-items-center tw-gap-1"},xe={class:"tw-col-span-2 tw-flex tw-items-center tw-gap-1"},be={class:"tw-col-span-2 tw-space-y-2"},Ie={key:0,class:"tw-flex tw-items-center tw-gap-1"},he={key:1,class:"tw-flex tw-items-center tw-gap-1"},Se={key:2,class:"tw-flex tw-items-center tw-gap-1"},ye={key:3,class:"tw-flex tw-items-center tw-gap-1"},ss={__name:"HostingOrdersId",async setup(Oe){let $,H;const f=Lt(),A=Ut(),x=Wt(),M=jt(),z=At(),R=qt(),L=Ft(),p=Mt("emitter");p.on("updateHostingOrdersId",async()=>{await G()});const B=w(!1),g=w(!1),e=w(null),b=w(!0),T=w([]),I=w(j.DAY),h=w(!1),S=w(null),i=N(()=>x.hostingSchemes?.[e.value?.SchemeID]),D=N(()=>M?.serverGroupsList?.Servers?.[e.value?.ServerID]),Y=N(()=>{if(!e.value?.Domain)return"";const r=e.value.Domain;return r.startsWith("http://")||r.startsWith("https://")?r:`https://${r}`});function J(r){if(!r)return F(new Date);const t=new Date,y=new Date(t.getTime()+r*24*60*60*1e3);return F(y)}function X(r){p.emit("open-modal",{component:"StatusHistory",data:{modeID:"HostingOrders",rowID:r}})}function K(){e.value?.ID&&e.value?.ServiceID&&p.emit("open-modal",{component:"OrdersTransfer",data:{ServiceOrderID:e.value?.ID,ServiceID:e.value?.ServiceID}})}function Q(){z.prolongOrder({IsAutoProlong:g.value?0:1,OrderID:e.value?.OrderID})}function Z(){A.push(`/HostingOrders/${e.value?.OrderID}/SchemeChange`),V()}function tt(){A.push(`/HostingOrderPay/${e.value?.OrderID}`)}function et(){R.OrderManageHosting({ServiceOrderID:e.value?.ID,OrderID:e.value?.OrderID,ServiceID:e.value?.ServiceID,XMLHttpRequest:"yes"})}function V(){p.emit("open-modal",{component:"HostingOrderSchemeChange",data:{hostingId:e.value?.ID,hostingScheme:i.value,serverGroupId:i.value?.ServersGroupID,emitEvent:"updateHostingOrdersId"}})}function E(){p.emit("open-modal",{component:"OrderPasswordChange",data:{OrderID:e.value?.ID,ServiceID:e.value?.ServiceID,emitEvent:"updateHostingOrdersId"}})}function st(){p.emit("open-modal",{component:"OrderRestore",data:{OrderID:e.value?.OrderID,CostDay:i.value?.CostDay,DaysRemainded:e.value?.DaysRemainded,emitEvent:"updateHostingOrdersId"}})}Rt(async()=>{await G(),f.path.endsWith("/SchemeChange")&&V()});async function G(){b.value=!0,e.value=await x.fetchHostingOrder(f.params.id);const r=await L.fetchOneOrder(f.params.id);e.value.Stat=r.Stat,g.value=r.IsAutoProlong,r.DependOrderID&&(S.value=await L.fetchOneOrder(r.DependOrderID)),U(j.DAY),b.value=!1}async function U(r){h.value=!0,I.value=r,T.value=await R.fetchCharts(e.value.OrderID,I.value),h.value=!1}return[$,H]=Bt(()=>Promise.all([x.fetchHostingSchemes(),M.fetchServerGroups()])),await $,H(),(r,t)=>{const y=Pt,O=Tt("RouterLink"),ot=Nt,at=Ct,nt=kt,rt=Ot,W=yt,lt=ft,k=St,it=ht,ut=It,c=xt,dt=bt,mt=gt,vt=Dt,ct=_t,wt=pt;return l(),u(P,null,[o(y),s("div",zt,[e.value?(l(),u(P,{key:0},[s("div",null,[s("h1",Yt,[s("a",{href:Y.value,target:"_blank"},a(e.value.Domain),9,Jt)]),s("div",Xt,[s("div",Kt,[S.value?(l(),u(P,{key:0},[t[11]||(t[11]=n("Относится к заказу ",-1)),o(O,{to:_($t)(S.value.Code,e.value.DependOrderID),class:"tw-text-sky-500"},{default:v(()=>[n("#"+a(e.value.DependOrderID),1)]),_:1},8,["to"]),t[12]||(t[12]=n(" /",-1))],64)):m("",!0),n(" Хостинг #"+a(e.value.OrderID),1)]),o(ot,{text:e.value.UserNotice,"order-id":e.value.OrderID,emit:"updateHostingOrdersId",position:"right"},null,8,["text","order-id"])]),e.value.Message?(l(),q(at,{key:0,innerHTML:e.value.Message,class:"tw-mt-4"},null,8,["innerHTML"])):m("",!0),s("div",Qt,[o(O,{class:Vt(["tw-py-2 tw-cursor-pointer -tw-mb-[1px]",{"tw-text-sky-400 tw-border-b-2 tw-border-sky-400":_(f).path.endsWith("/SchemeChange")}]),"active-class":"tw-text-sky-400 tw-border-b-2 tw-border-sky-400",to:`/HostingOrders/${e.value.OrderID}`},{default:v(()=>t[13]||(t[13]=[n(" Хостинг ",-1)])),_:1,__:[13]},8,["class","to"]),o(O,{class:"tw-py-2 tw-cursor-pointer -tw-mb-[1px]","active-class":"tw-text-sky-400 tw-border-b-2 tw-border-sky-400",to:`/HostingOrders/${e.value.OrderID}/Services`},{default:v(()=>t[14]||(t[14]=[n(" Услуги ",-1)])),_:1,__:[14]},8,["to"])])]),o(nt,{partition:"Header:/HostingOrders"}),s("div",Zt,[s("div",te,[s("div",ee,[s("div",se,[s("div",oe,a(i.value?.Name),1),o(rt,{status:e.value.StatusID,"status-table":"HostingOrders",onClick:t[0]||(t[0]=d=>X(e.value.ID)),class:"tw-cursor-pointer"},null,8,["status"])]),o(lt,null,{default:v(()=>[o(W,{onClick:t[1]||(t[1]=d=>st())},{default:v(()=>t[15]||(t[15]=[n("Просмотреть учет заказа",-1)])),_:1,__:[15]}),o(W,{onClick:t[2]||(t[2]=d=>E())},{default:v(()=>t[16]||(t[16]=[n("Сменить пароль",-1)])),_:1,__:[16]})]),_:1})]),s("div",ae,[i.value?.SchemeParams?.limit_webdomains?.Value?(l(),u("div",ne,a(_(C)(i.value?.SchemeParams?.limit_webdomains)),1)):m("",!0),i.value?.SchemeParams?.limit_quota?.Value?(l(),u("div",re,a(_(C)(i.value?.SchemeParams?.limit_quota)),1)):m("",!0),i.value?.SchemeParams?.limit_emails?.Value?(l(),u("div",le,a(_(C)(i.value?.SchemeParams?.limit_emails)),1)):m("",!0)]),s("div",ie,[s("div",null,a(_(Ht)(i.value?.CostMonth))+" в месяц",1),s("div",null,"Дней осталось "+a(e.value.DaysRemainded||0),1),s("div",null,"Дата окончания "+a(J(e.value.DaysRemainded)),1)]),s("div",ue,[o(k,{onClick:t[3]||(t[3]=d=>tt()),class:"tw-w-30 sm:tw-w-40"},{default:v(()=>[n(a(e.value.StatusID==="Waiting"?"Оплатить":"Продлить"),1)]),_:1}),s("label",de,[Et(s("input",{type:"checkbox","onUpdate:modelValue":t[4]||(t[4]=d=>g.value=d),onInput:t[5]||(t[5]=d=>Q())},null,544),[[Gt,g.value]]),t[17]||(t[17]=s("span",{class:"btn-switch__text tw-text-xs sm:tw-text-sm"},"Автопродление",-1)),t[18]||(t[18]=s("span",{class:"btn-switch__toggle"},null,-1))])]),s("div",me,[o(k,{onClick:t[6]||(t[6]=d=>Z()),class:"tw-w-36 sm:tw-w-40"},{default:v(()=>t[19]||(t[19]=[n("Изменить тариф",-1)])),_:1,__:[19]}),o(ut,{onClick:t[7]||(t[7]=d=>K())},{default:v(()=>[o(it),t[20]||(t[20]=s("div",null,"Передать на другой аккаунт",-1))]),_:1,__:[20]})])]),s("div",ve,[s("div",ce,[s("div",we,[t[22]||(t[22]=s("div",{class:"tw-text-2xl"},"Панель управления",-1)),o(k,{onClick:t[8]||(t[8]=d=>et()),type:"small"},{default:v(()=>t[21]||(t[21]=[n("Вход",-1)])),_:1,__:[21]})]),t[24]||(t[24]=s("div",{class:"tw-flex tw-items-center tw-font-bold"},"Адрес",-1)),s("div",pe,[s("div",_e,a(`https://${D.value?.Address}/manager`),1),o(c,{value:`https://${D.value?.Address}/manager`},null,8,["value"])]),t[25]||(t[25]=s("div",{class:"tw-flex tw-items-center tw-font-bold"},"Логин",-1)),s("div",fe,[n(a(e.value.Login)+" ",1),o(c,{value:e.value.Login},null,8,["value"])]),t[26]||(t[26]=s("div",{class:"tw-flex tw-items-center tw-font-bold"},"Пароль",-1)),s("div",ge,[B.value?(l(),u("div",De,a(e.value.Password),1)):(l(),u("button",{key:1,class:"btn btn--border btn--md tw-h-8 tw-gap-1",onClick:t[9]||(t[9]=d=>B.value=!0)},[o(dt,{class:"tw-size-5"}),t[23]||(t[23]=n(" Показать ",-1))])),s("button",{class:"btn btn--border btn--md tw-h-8",onClick:t[10]||(t[10]=d=>E())},"Сменить пароль"),o(c,{value:e.value.Password},null,8,["value"])]),t[27]||(t[27]=s("div",{class:"tw-flex tw-items-center tw-font-bold"},"FTP, POP3, SMTP, IMAP",-1)),s("div",xe,[n(a(D.value?.Address)+" ",1),o(c,{value:D.value?.Address},null,8,["value"])]),t[28]||(t[28]=s("div",{class:"tw-flex tw-font-bold"},"Именные сервера",-1)),s("div",be,[e.value.Ns1Name?(l(),u("div",Ie,[n(a(e.value.Ns1Name),1),o(c,{value:e.value.Ns1Name},null,8,["value"])])):m("",!0),e.value.Ns2Name?(l(),u("div",he,[n(a(e.value.Ns2Name),1),o(c,{value:e.value.Ns2Name},null,8,["value"])])):m("",!0),e.value.Ns3Name?(l(),u("div",Se,[n(a(e.value.Ns3Name),1),o(c,{value:e.value.Ns3Name},null,8,["value"])])):m("",!0),e.value.Ns4Name?(l(),u("div",ye,[n(a(e.value.Ns4Name),1),o(c,{value:e.value.Ns4Name},null,8,["value"])])):m("",!0)])])]),o(mt,{order:e.value},null,8,["order"]),o(vt,{data:T.value,period:I.value,loading:h.value,onUpdate:U},null,8,["data","period","loading"])]),o(ct,{"params-list":i.value?.SchemeParams,label:"Общая информация","main-param":"InternalName"},null,8,["params-list"])],64)):b.value?m("",!0):(l(),q(wt,{key:1,label:"Заказ не найден"}))])],64)}}};export{ss as default};
