import{o as d,c as t,a as s,b as N,F as L,x as U,n as S,t as f,w as Z,T as q,k as E,y as z,p as M,l as P,_ as R,e as W,a7 as K,r as _,g as Q,h as V,O as j,C as G}from"./index-5e313302.js";import{u as H}from"./domain-ae28df08.js";import{s as J}from"./multiselect-bfc29db8.js";import{E as X}from"./EmptyStateBlock-9f752916.js";import{b as Y,f as $}from"./bootstrap-vue-next.es-a19a8b41.js";import{_ as oo}from"./ButtonDefault-7c216fc6.js";const eo=u=>(M("data-v-cb39f37c"),u=u(),P(),u),no={class:"section"},ao={class:"container"},so={class:"domain-block"},co=eo(()=>s("div",{class:"section-title"},[s("h2",{class:"section-block_title"},"Проверить домен")],-1)),lo={class:"domain-field"},io={key:0,class:"domain__grid"},ro=["title","onClick"],to={class:"domain__info-wrapper"},_o={class:"domain__info-wrapper-vertical"},uo={class:"domain__info-wrapper"},vo={class:"domain__info-title"},fo={class:"domain__info-title"},po={class:"domain__package-name"},mo={key:1,class:"domain__loader"},ho={key:0,class:"domain__info-wrapper"},ko={class:"domain__price"},yo={class:"domain__price-order"},Do={class:"domain__price-prolong"};function No(u,i,b,a,C,r){var l;const g=Y,p=oo,h=$,k=X;return d(),t("div",no,[s("div",ao,[s("div",so,[co,s("div",lo,[N(g,{modelValue:a.domainName,"onUpdate:modelValue":i[0]||(i[0]=o=>a.domainName=o),placeholder:"Например, yourName",type:"text"},null,8,["modelValue"]),N(p,{label:"Подобрать",disabled:!a.domainName,onClick:i[1]||(i[1]=o=>a.checkDomain())},null,8,["disabled"])]),a.isListLoaded?(d(),t(L,{key:0},[((l=a.domainsArray)==null?void 0:l.length)>0?(d(),t("div",io,[(d(!0),t(L,null,U(a.domainsArray,o=>(d(),t("div",{class:S(["domain__item",{domain__item_inactive:(o==null?void 0:o.isFree)===!1||(o==null?void 0:o.isFree)===null,domain__item_active:(o==null?void 0:o.ID)===a.selectedDomain}]),title:o==null?void 0:o.info,onClick:m=>a.selectDomain(o)},[s("div",to,[s("div",_o,[s("div",uo,[s("div",vo,f(a.checkedDomain),1),s("div",fo,"."+f(o==null?void 0:o.Name),1)]),s("div",po,f(o==null?void 0:o.PackageID),1)]),N(q,{name:"fade",mode:"out-in"},{default:Z(()=>[(o==null?void 0:o.isFree)!==null?(d(),t("div",{key:0,class:S(["domain__info-status",{available:(o==null?void 0:o.isFree)===!0}])},f(o!=null&&o.isFree?"Свободен":"Занят"),3)):(d(),t("div",mo))]),_:2},1024)]),o!=null&&o.isFree?(d(),t("div",ho,[s("div",ko,[s("div",yo,f(o==null?void 0:o.CostOrder)+" ₽ / год",1),s("div",Do,"Продление: "+f(o==null?void 0:o.CostProlong)+" ₽",1)]),N(h,{class:"domain__checkbox",value:o==null?void 0:o.ID,"unchecked-value":"null",modelValue:a.selectedDomain,"onUpdate:modelValue":i[2]||(i[2]=m=>a.selectedDomain=m)},null,8,["value","modelValue"])])):E("",!0)],10,ro))),256))])):(d(),z(k,{key:1,class:"domain__empty",label:"Неправильное доменное имя"}))],64)):E("",!0)])])])}const bo={components:{Multiselect:J},props:{domainList:{type:Array,default:()=>[]}},emits:["select"],setup(u,{emit:i}){const b=H(),a=W(),C=K(),r=_(null);C.query.DomainName&&(r.value=C.query.DomainName,w());const g=_(null),p=_(null),h=_(!1),k=_(!1),l=_([]),o=_(null),m=n=>{n.key==="Enter"&&!I.value&&w()},I=Q(()=>!r.value);V(()=>{document.addEventListener("keyup",m)}),j(()=>{document.removeEventListener("keyup",m)});function B(){a.replace({query:{DomainName:r.value}})}function y(){const n=document.querySelector(".domain__info-title");n&&(k.value=n.scrollWidth>n.clientWidth)}function w(){B(),b.DomainNameCheck({DomainName:r.value}).then(n=>{var x;const{result:D,resultData:e}=n;if(e!=null&&e.DomainName&&(r.value=e.DomainName,p.value=e.DomainName),e!=null&&e.Zones){l.value=u.domainList.filter(c=>{var v;return((v=e==null?void 0:e.Zones)==null?void 0:v.includes(c==null?void 0:c.Name))&&(c==null?void 0:c.IsActive)}).sort((c,v)=>(e==null?void 0:e.Zones.indexOf(c==null?void 0:c.Name))-(e==null?void 0:e.Zones.indexOf(v==null?void 0:v.Name))).map(c=>({...c,isFree:null,info:D.Info})),h.value=!0;let F=0;const T=setInterval(()=>{A(F),F++},100);setTimeout(()=>{clearInterval(T)},((x=l.value)==null?void 0:x.length)*100)}else l.value=[]})}function A(n){var D;b.DomainCheck({DomainName:p.value,DomainZone:(D=l.value[n])==null?void 0:D.Name}).then(e=>{console.log(e),l.value[n]={...l.value[n],isFree:e.status==="SUCCESS",info:e.info}}).catch(e=>{console.error("An error occurred:",e)})}function O(n){o.value=n==null?void 0:n.ID,i("select",{...n,line:r.value})}return V(()=>{y(),window.addEventListener("resize",y)}),G(()=>{window.removeEventListener("resize",y)}),{domainName:r,isListLoaded:h,checkedDomain:p,domain:g,domainsArray:l,selectedDomain:o,selectDomain:O,checkDomain:w,isTextOverflow:k,checkTextOverflow:y,buttonDisabled:I}}},Lo=R(bo,[["render",No],["__scopeId","data-v-cb39f37c"]]);export{Lo as D};
