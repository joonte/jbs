import{L as B}from"./bootstrap-vue-next-W16P-SAV.js";import{_ as D}from"./ClausesKeeper-iUM0yapS.js";import{_ as U}from"./TabsComponent.vue_vue_type_script_setup_true_lang-DJWDlqyJ.js";import{_ as Y}from"./BlockBalanceAgreement-v_bWuiVT.js";import{u as C,r as c,E as M,f as y,c as m,b as p,a as s,v as N,az as A,t as r,F as E,C as L,w as n,h as F,o as l}from"./index-Codq73aV.js";import{u as P}from"./index-BO2gwtUe.js";import{_ as R}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./IconClose-Dia1noy8.js";import"./ButtonDefault-CMw2aBy6.js";import"./common-DyknwSqv.js";const T={class:"tw-w-full"},V={class:"container"},I={key:0},$={key:2},j={__name:"DependUsersStatistic",async setup(z){let d,_;const f=[{key:"Year",label:"Год",variant:"td-gray",sortable:!0},{key:"Month",label:"Месяц",variant:"td-blue",sortable:!0},{key:"NumUsers",label:"Пользователей",variant:"td-gray"},{key:"NumPayments",label:"Платежей",variant:"td-gray"},{key:"MonthSum",label:"Сумма",variant:"td-gray"}],u=C(),b=P(),v=c("Year"),i=c(!0),S=c("desc");[d,_]=M(()=>Promise.all([u.fetchUserData(),u.fetchDependUsersStatistic(),b.fetchContracts()])),await d,_();const a=y(()=>Object.keys(u.dependStats).map(o=>u.dependStats?.[o])),k=y(()=>!a.value||a.value.length===0?[]:a.value.slice().sort((o,t)=>o.Year!==t.Year?i.value?t.Year-o.Year:o.Year-t.Year:i.value?t.Month-o.Month:o.Month-t.Month));return(o,t)=>{const g=Y,x=U,h=D,w=B;return l(),m("div",T,[p(g),s("div",V,[p(x,{tabs:N(A)},null,8,["tabs"]),t[7]||(t[7]=s("h1",{class:"tw-text-xl sm:tw-text-4xl tw-mb-4"},"Статистика начислений",-1)),p(h,{partition:"Header:/DependUsersStatistic",class:"user-referral__clauses"}),a.value.length===1&&a.value[0]==="Ваши рефералы не оплачивали никаких услуг."?(l(),m("p",I,r(a.value[0]),1)):a.value&&a.value.length>0?(l(),m(E,{key:1},[a.value?(l(),L(w,{key:0,"sort-by":v.value,"onUpdate:sortBy":t[0]||(t[0]=e=>v.value=e),"sort-desc":i.value,"onUpdate:sortDesc":t[1]||(t[1]=e=>i.value=e),class:"basic-table",fields:f,items:k.value,"show-empty":!0,"empty-text":"Ваши рефералы не оплачивали никаких услуг.","empty-filtered-text":"Ваши рефералы не оплачивали никаких услуг.","sort-direction":S.value},{"cell(Year)":n(e=>[t[2]||(t[2]=s("span",{class:"td-mobile"},"Год",-1)),s("span",null,r(e.value),1)]),"cell(Month)":n(e=>[t[3]||(t[3]=s("span",{class:"td-mobile"},"Месяц",-1)),s("span",null,r(e.value),1)]),"cell(NumUsers)":n(e=>[t[4]||(t[4]=s("span",{class:"td-mobile"},"Пользователей",-1)),s("span",null,r(e.value),1)]),"cell(NumPayments)":n(e=>[t[5]||(t[5]=s("span",{class:"td-mobile"},"Платежей",-1)),s("span",null,r(e.value),1)]),"cell(MonthSum)":n(e=>[t[6]||(t[6]=s("span",{class:"td-mobile"},"Сумма",-1)),s("span",null,r(e.value),1)]),_:1},8,["sort-by","sort-desc","items","sort-direction"])):F("",!0)],64)):(l(),m("p",$,"Нет данных для отображения."))])])}}},tt=R(j,[["__scopeId","data-v-bea907c8"]]);export{tt as default};
