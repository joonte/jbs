import{o as P,c as I,a as o,n as r,t as T,Y as d,an as l,b as C,p as R,l as O,_ as g,r as m,R as k}from"./index-b105c350.js";import{u as M}from"./resetServer-3f5de786.js";import{u as V}from"./dedicatedServer-cfc9cb2e.js";import{_ as U}from"./ButtonDefault-d83beda7.js";const n=t=>(R("data-v-76b215a3"),t=t(),O(),t),x={class:"modal__body"},B=n(()=>o("div",{class:"list-item__title"},"Питание сервера",-1)),j={class:"list-item__status"},N=n(()=>o("div",{class:"list-item__status-text"},"Текущий статус",-1)),W=n(()=>o("div",{class:"list-item__subtitle"},"Выбор команды",-1)),z={class:"form"},E=["disabled"],Y=n(()=>o("span",{class:"form-input_border-content"},[o("span",{class:"form-input_border-mark"}),o("span",{class:"form-input_border-info"},[o("span",{class:"form-input_border-address"},"Включить")])],-1)),q=["disabled"],A=n(()=>o("span",{class:"form-input_border-content"},[o("span",{class:"form-input_border-mark"}),o("span",{class:"form-input_border-info"},[o("span",{class:"form-input_border-address"},"Выключить")])],-1)),F=["disabled"],G=n(()=>o("span",{class:"form-input_border-content"},[o("span",{class:"form-input_border-mark"}),o("span",{class:"form-input_border-info"},[o("span",{class:"form-input_border-address"},"Корректно выключить")])],-1)),H=["disabled"],J=n(()=>o("span",{class:"form-input_border-content"},[o("span",{class:"form-input_border-mark"}),o("span",{class:"form-input_border-info"},[o("span",{class:"form-input_border-address"},"Выключить/включить")])],-1)),K=["disabled"],L=n(()=>o("span",{class:"form-input_border-content"},[o("span",{class:"form-input_border-mark"}),o("span",{class:"form-input_border-info"},[o("span",{class:"form-input_border-address"},"Reset")])],-1)),Q={class:"form-input_border"},X=n(()=>o("span",{class:"form-input_border-content"},[o("span",{class:"form-input_border-mark"}),o("span",{class:"form-input_border-info"},[o("span",{class:"form-input_border-address"},"Перезагрузить IPMI")])],-1)),Z={class:"modal__buttons-wrap"};function $(t,s,p,e,u,_){const c=U;return P(),I("div",x,[B,o("div",j,[N,o("div",{class:r(["server-status",{"server-status-on":e.SystemPower==="on","server-status-off":e.SystemPower!=="on"}])},T(e.SystemPower==="on"?"Включен":"Выключен"),3)]),W,o("div",z,[o("label",{class:r(["form-input_border",{"disabled-label":e.SystemPower==="on"}])},[d(o("input",{type:"radio",name:"Command",value:"on","onUpdate:modelValue":s[0]||(s[0]=a=>e.commandType=a),disabled:e.SystemPower==="on"},null,8,E),[[l,e.commandType]]),Y],2),o("label",{class:r(["form-input_border",{"disabled-label":e.SystemPower!=="on"}])},[d(o("input",{type:"radio",name:"Command",value:"off","onUpdate:modelValue":s[1]||(s[1]=a=>e.commandType=a),disabled:e.SystemPower!=="on"},null,8,q),[[l,e.commandType]]),A],2),o("label",{class:r(["form-input_border",{"disabled-label":e.SystemPower!=="on"}])},[d(o("input",{type:"radio",name:"Command",value:"soft","onUpdate:modelValue":s[2]||(s[2]=a=>e.commandType=a),disabled:e.SystemPower!=="on"},null,8,F),[[l,e.commandType]]),G],2),o("label",{class:r(["form-input_border",{"disabled-label":e.SystemPower!=="on"}])},[d(o("input",{type:"radio",name:"Command",value:"cycle","onUpdate:modelValue":s[3]||(s[3]=a=>e.commandType=a),disabled:e.SystemPower!=="on"},null,8,H),[[l,e.commandType]]),J],2),o("label",{class:r(["form-input_border",{"disabled-label":e.SystemPower!=="on"}])},[d(o("input",{type:"radio",name:"Command",value:"reset","onUpdate:modelValue":s[4]||(s[4]=a=>e.commandType=a),disabled:e.SystemPower!=="on"},null,8,K),[[l,e.commandType]]),L],2),o("label",Q,[d(o("input",{type:"radio",name:"Command",value:"mc","onUpdate:modelValue":s[5]||(s[5]=a=>e.commandType=a)},null,512),[[l,e.commandType]]),X])]),o("div",Z,[C(c,{class:"modal__button yes",label:"Выполнить",onClick:s[6]||(s[6]=a=>e.acceptReload())})])])}const oo={props:{data:{type:Object,default:()=>{}}},emits:["modalClose"],setup(t,{emit:s}){var y,S,v,h;const p=M(),e=m(""),u=k("emitter"),_=V(),c=m(((y=t.data)==null?void 0:y.isReloading)||""),a=m(((S=t.data)==null?void 0:S.DSOrderID)||""),b=m(((v=t.data)==null?void 0:v.OrderID)||""),w=m((h=t.data)==null?void 0:h.SystemPower);function D(){c.value=!0,t.data.onReloadStatusChange(!0),p.ServerReset(a.value,e.value).then(()=>{u.emit("open-modal",{component:"Suspense"}),setTimeout(()=>{f(),c.value=!1,t.data.onReloadStatusChange(!1),_.fetchDSOrders().then(()=>{console.log("fetchDSOrders resolved ID - ",b.value),_.fetchDSOrderIPMI(b.value).then(i=>{console.log("fetchDSOrderIPMI result:",i)}).catch(i=>{console.error("fetchDSOrderIPMI error:",i)})}).catch(i=>{console.error("fetchDSOrders error:",i)})},1e4)})}function f(){s("modalClose")}return{acceptReload:D,closeModal:f,commandType:e,SystemPower:w}}},no=g(oo,[["render",$],["__scopeId","data-v-76b215a3"]]);export{no as default};
