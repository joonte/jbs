import{_ as T}from"./ButtonDefault-dafa6215.js";import{_ as M}from"./BasicInput-df2ac90e.js";import{_ as w}from"./BlockSelectContract-2bfc7c50.js";import{_ as O,U as B,r as c,h as u,i as U,P as j,o as m,c as p,a as n,b as v,F as x,y as F,t as h,l as L,p as W,m as $}from"./index-c781268b.js";import{u as P}from"./domain-ca269c7d.js";import"./component-d2f2a50c.js";import"./contracts-7e377877.js";import"./multiselect-9a74535b.js";const N=d=>(W("data-v-d9a1cbc4"),d=d(),$(),d),R={class:"modal__body"},Y={class:"modal__domain-select"},Z=N(()=>n("div",{class:"list-item__title"},"Перенос домена",-1)),H=N(()=>n("div",{class:"list-item__secondary-title"},"Домены в зонах ru/su/рф переносятся без дополнительных условий, во всех остальных зонах переносятся с оплатой продления на год. Ниже приведены цены на продление Вашего доменного имени.",-1)),K={class:"modal__info"},q={class:"modal__lower-block"},z={class:"modal__domain-list"},G={key:0,class:"domain__grid"},J={class:"domain__item domain__item_inactive"},Q={class:"domain__info-wrapper"},X={class:"domain__info-wrapper-vertical"},ee={class:"domain__info-wrapper"},oe={class:"domain__info-title"},ae={class:"domain__package-name"},ne={class:"domain__info-wrapper"},se={class:"domain__price"},te={__name:"ModalWindowDomainTransfer",props:["data"],emits:["modalClose"],setup(d,{emit:S}){const _=P(),g=B("emitter"),l=c(""),r=c(""),f=c(""),D=c(!1),i=u(()=>_==null?void 0:_.domainSchemes),C=u(()=>{var a;return(a=Object.keys(i.value).map(e=>i.value[e]).find(e=>{var t,s;return e.Name===((s=(t=l.value)==null?void 0:t.split("."))==null?void 0:s[1])}))==null?void 0:a.ID}),V=u(()=>{var a;return(a=Object.keys(i.value).map(e=>i.value[e]).find(e=>{var t,s;return e.Name===((s=(t=l.value)==null?void 0:t.split("."))==null?void 0:s[1])}))==null?void 0:a.DaysAfterTransfer}),A=u(()=>{var a;return(a=Object.keys(i.value).map(e=>i.value[e]).find(e=>{var t,s;return e.Name===((s=(t=l.value)==null?void 0:t.split("."))==null?void 0:s[1])}))==null?void 0:a.DaysBeforeTransfer});function y(){S("modalClose")}function b(){D.value=!0,_.CheckDomainTransfer({ContractID:r.value||null,DomainName:l.value||null,StepID:1}).then(({result:a})=>{a==="SUCCESS"?_.DomainTransfer({ContractID:r.value||null,DomainName:l.value.split(".")[0]||null,AuthInfo:f.value||"",DomainSchemeID:C.value||null,DomainZone:l.value.split(".")[1],DaysBeforeTransfer:A.value||null,DaysAfterTransfer:V.value||null}).then(()=>{g.emit("updateDomainsList"),y()}):D.value=!1})}const k=a=>{a.key==="Enter"&&b()};return U(()=>{document.addEventListener("keyup",k)}),j(()=>{document.removeEventListener("keyup",k)}),(a,e)=>{var I;const t=w,s=M,E=T;return m(),p("div",R,[n("div",Y,[Z,H,n("div",K,[v(t,{modelValue:r.value,"onUpdate:modelValue":e[0]||(e[0]=o=>r.value=o),onButtonClicked:e[1]||(e[1]=o=>y())},null,8,["modelValue"]),v(s,{label:"Доменное имя",placeholder:"yourDomain.ru",necessarily:!0,modelValue:l.value,"onUpdate:modelValue":e[2]||(e[2]=o=>l.value=o)},null,8,["modelValue"]),v(s,{label:"Ключ переноса домена (AuthInfo)",placeholder:"",modelValue:f.value,"onUpdate:modelValue":e[3]||(e[3]=o=>f.value=o)},null,8,["modelValue"])])]),n("div",q,[n("div",z,[i.value?(m(),p("div",G,[(m(!0),p(x,null,F(i.value,o=>(m(),p("div",J,[n("div",Q,[n("div",X,[n("div",ee,[n("div",oe,"."+h(o==null?void 0:o.Name),1)]),n("div",ae,h(o==null?void 0:o.PackageID),1)])]),n("div",ne,[n("div",se,h(o==null?void 0:o.CostTransfer)+" ₽",1)])]))),256))])):L("",!0)])]),v(E,{class:"domain__transfer-item",label:"Перенести","is-loading":D.value,disabled:((I=l.value)==null?void 0:I.length)<=0,onClick:e[4]||(e[4]=o=>b())},null,8,["is-loading","disabled"])])}}},pe=O(te,[["__scopeId","data-v-d9a1cbc4"]]);export{pe as default};
