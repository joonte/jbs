import{_ as y}from"./EmptyStateBlock-Dks67PsT.js";import{_ as p}from"./ButtonDefault-tVMF5ozh.js";import{_ as b}from"./ClausesKeeper-DtaNhp0a.js";import{_ as C}from"./BlockBalanceAgreement-ckI0MbGb.js";import{c as s,b as c,a as e,t as D,F as v,i as S,O as k,r as F,h as I,s as P,f as h,g as x,d as A,x as O,o as a}from"./index-DxPA2ffO.js";import{u as B}from"./contracts-DD2O0C6m.js";import{_ as L}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./IconClose-Br7S99e8.js";const w={async setup(){const i=k(),t=B(),f=x(),o=A();O("emitter");const d=F(!1);function g(){d.value=!0,i.DomainOrderPay({DomainOrderID:l.value?.ID,DaysToProlong:m.value?.DaysToProlong}).then(n=>{let{result:u,error:ro}=n;u==="SUCCESS"?o.push("/DomainOrders"):u==="BASKET"&&o.push("/Basket"),d.value=!1})}const r=n=>{n.key==="Enter"&&n.ctrlKey&&g()};I(()=>{document.addEventListener("keyup",r)}),P(()=>{document.removeEventListener("keyup",r)});const l=h(()=>Object.keys(i?.domainsList).map(n=>i?.domainsList[n]).find(n=>n.OrderID===f.params.id)),m=h(()=>i?.domainSchemes[l.value?.SchemeID]),_=h(()=>t.contractsList[l.value?.ContractID]);return await i.fetchDomains(),await i.fetchDomainSchemes(),await t.fetchContracts(),{getDomain:l,getDomainSchemes:m,getContract:_,isLoading:d,orderPay:g}}},E={key:0,class:"domain-scheme"},N={class:"section"},T={class:"container"},K={class:"section-header"},R={key:0,class:"section-title"},V={key:1,class:"section-title"},j={key:2,class:"section-title"},M={class:"section-label"},U={class:"section"},W={class:"container"},Z={class:"domain-prolong__data"},q={key:0,class:"form-field"},z=["value"],G={class:"form-field"},H=["value"],J={key:1,class:"form-field__msg"},Q={class:"form-field"},X=["value"],Y={class:"section"},$={class:"container"},oo={class:"domain-prolong__data"},eo={class:"total-block"},to={class:"total-block__row total-block__row--big"},so={class:"total-block__col"},ao={key:1,class:"section"},no={class:"container"},io={key:1,class:"section"},lo={class:"container"};function co(i,t,f,o,d,g){const r=C,l=b,m=p,_=y;return a(),s(v,null,[c(r),o.getDomain?(a(),s("div",E,[e("div",N,[e("div",T,[e("div",K,[o.getDomain.StatusID==="Waiting"?(a(),s("h1",R,"Оплата заказа доменного имени")):o.getDomain.StatusID==="ForTransfer"?(a(),s("h1",V,"Оплата переноса домена")):(a(),s("h1",j,"Оплата продления доменного имени")),e("div",M,D(o.getDomain?.DomainName?`#${o.getDomain?.DomainName}.${o.getDomain?.DomainZone}`:""),1)]),c(l)])]),o.getDomainSchemes?.IsPayed&&o.getDomainSchemes?.IsProlong||!o.getDomainSchemes?.IsPayed?(a(),s(v,{key:0},[e("div",U,[e("div",W,[e("div",Z,[o.getDomain.StatusID==="Waiting"||o.getDomain.StatusID==="ForTransfer"?(a(),s("label",q,[t[1]||(t[1]=e("div",{class:"form-field__label"},"Стоимость заказа (в год)",-1)),e("input",{type:"text",placeholder:"0 руб",value:o.getDomainSchemes?.CostOrder+" руб",disabled:""},null,8,z)])):S("",!0),e("label",G,[t[2]||(t[2]=e("div",{class:"form-field__label"},"Стоимость продления (в год)",-1)),e("input",{type:"text",placeholder:"0 руб",value:o.getDomainSchemes?.CostProlong+" руб",disabled:""},null,8,H)]),t[4]||(t[4]=e("label",{class:"form-field"},[e("div",{class:"form-field__label"},"Количество лет"),e("input",{type:"text",placeholder:"1",value:"1",disabled:""})],-1)),o.getDomain?.AdditionalCost?(a(),s("div",J,[e("p",null,D(o.getDomain?.AdditionalCost.Message),1)])):S("",!0),e("label",Q,[t[3]||(t[3]=e("div",{class:"form-field__label"},"Всего к оплате",-1)),e("input",{type:"text",placeholder:"0 руб",value:o.getDomain.IsPayed?(parseFloat(o.getDomainSchemes?.CostProlong)+parseFloat(o.getDomain?.AdditionalCost?.Summ||0)).toFixed(2)+" руб":(parseFloat(o.getDomainSchemes?.CostOrder)+parseFloat(o.getDomain?.AdditionalCost?.Summ||0)).toFixed(2)+" руб",disabled:""},null,8,X)])])])]),e("div",Y,[e("div",$,[e("div",oo,[e("div",eo,[e("div",to,[t[5]||(t[5]=e("div",{class:"total-block__col"},"Итого за 1 год",-1)),e("div",so,D(o.getDomain.IsPayed?(parseFloat(o.getDomainSchemes?.CostProlong)+parseFloat(o.getDomain?.AdditionalCost?.Summ||0)).toFixed(2)||"0.00":(parseFloat(o.getDomainSchemes?.CostOrder)+parseFloat(o.getDomain?.AdditionalCost?.Summ||0)).toFixed(2))+" ₽ ",1)])]),c(m,{class:"btn--wide",label:+o.getContract?.Balance>(o.getDomain.StatusID==="ClaimForRegister"?+o.getDomainSchemes?.CostOrder+parseFloat(o.getDomain?.AdditionalCost?.Summ||0):+o.getDomainSchemes?.CostProlong+parseFloat(o.getDomain?.AdditionalCost?.Summ||0))?"Оплатить c баланса договора":"Добавить в корзину",onClick:t[0]||(t[0]=n=>o.orderPay()),"is-loading":o.isLoading},null,8,["label","is-loading"])])])])],64)):(a(),s("div",ao,[e("div",no,[c(_,{class:"no-margin",label:"Заказ нельзя продлить"})])]))])):(a(),s("div",io,[e("div",lo,[c(_,{label:"Заказ домена не найден"})])]))],64)}const So=L(w,[["render",co],["__scopeId","data-v-4b6c6f30"]]);export{So as default};
