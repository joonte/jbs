import{_ as gt}from"./EmptyStateBlock-Ad1AmtSS.js";import{_ as St,a as bt,b as Dt}from"./SettingsEngineItem-CcQJH31T.js";import{_ as It,a as xt}from"./CopyToClipboard.vue_vue_type_script_setup_true_lang-RZ0BAL8S.js";import{_ as ht}from"./WhiteButton.vue_vue_type_script_setup_true_lang-ClwvvVEf.js";import{I as yt}from"./IconProfile-DDO3OQU0.js";import{_ as Pt}from"./BlueButton.vue_vue_type_script_setup_true_lang-q3k2Q2g8.js";import{r as Ot}from"./bootstrap-vue-next-BglOzul_.js";import{_ as kt}from"./ClausesKeeper-gPyacQ05.js";import{_ as Ct}from"./MessageInfo-BrNRfWl8.js";import{_ as Nt}from"./UserNote-Cq01thJ0.js";import{_ as Vt}from"./IconRotate-Bg9kJJlu.js";import{_ as $t}from"./StatusBadge-DZmmWv0G.js";import{_ as Rt,g as At,f as Mt}from"./BlockBalanceAgreement-DSLTUOoQ.js";import{G as Bt,u as Lt,r as w,I as W,x as Et,f as F,H as Ut,g as Tt,D as Gt,c as d,b as a,a as s,C as Y,h as c,F as P,J as z,t as o,K as Ht,n as J,e as n,w as m,v as O,E as jt,L as Wt,d as Ft,o as u}from"./index-C9dBN6m4.js";import{u as Yt}from"./contracts-BEc0DZS2.js";import{u as zt}from"./global-DiPSuX9n.js";import{u as Jt}from"./server-D__H3WLv.js";import{u as Kt}from"./orders-D_JLVTov.js";import{f as K}from"./time-DenPiOX5.js";import"./LoadingIndicator-DXjOL6Pz.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ServerStatusBadge.vue_vue_type_script_setup_true_lang-DbXnhqPA.js";import"./services-moLhYNFg.js";import"./IconSettings-BGdLLHON.js";import"./IconCopy-CTfDC5Bz.js";import"./IconClose-CgjzG0Yf.js";import"./ButtonDefault-B1FApUky.js";import"./index-D0iqQ1zq.js";const qt={class:"tw-px-4 md:tw-px-8"},Qt={class:"tw-flex tw-flex-wrap tw-items-center tw-justify-between tw-gap-2"},Xt={class:"tw-flex tw-items-center tw-gap-2"},Zt={class:"tw-text-xl sm:tw-text-4xl"},te={class:"ico"},ee={class:"tw-flex tw-items-center tw-gap-2 tw-mt-2"},se={class:"tw-text-gray-500 tw-text-sm"},ae={class:"tw-flex tw-items-center tw-gap-8 tw-border-b tw-border-gray-200 tw-mt-4 tw-whitespace-nowrap tw-mb-6"},oe={class:"tw-grid tw-grid-cols-1 xl:tw-grid-cols-2 tw-gap-4"},ne={class:"tw-border tw-rounded tw-border-gray-200 tw-p-4"},le={class:"tw-flex tw-justify-between tw-items-center tw-gap-4"},re={class:"tw-flex tw-items-center tw-gap-2"},ie={class:"tw-text-2xl"},ue={class:"tw-flex tw-flex-wrap tw-gap-x-4 tw-gap-y-2 tw-text-gray-500 tw-text-sm tw-mt-4"},de={key:0},me={class:"tw-space-y-4 tw-mt-4"},ve={class:"tw-flex tw-gap-4 tw-mt-4"},we={class:"btn btn--border btn--switch tw-ml-0 tw-h-10 sm:tw-h-12"},ce={class:"tw-flex tw-flex-wrap tw-gap-4 tw-mt-4"},pe={class:"tw-border tw-border-gray-200 tw-rounded tw-p-4"},_e={class:"tw-grid tw-grid-cols-3 tw-gap-4"},fe={class:"tw-col-span-3 tw-flex tw-items-center tw-justify-between tw-gap-2"},ge={class:"tw-col-span-2 tw-flex tw-items-center tw-gap-1"},Se={class:"tw-break-all"},be={class:"tw-col-span-2 tw-flex tw-items-center tw-gap-1"},De={class:"tw-break-all"},Ie={class:"tw-col-span-2 tw-flex tw-flex-wrap tw-items-center tw-gap-2"},xe={key:0,class:"password-hidden"},he={class:"tw-col-span-2 tw-flex tw-items-center tw-gap-1"},ye={class:"tw-col-span-2 tw-space-y-2"},Pe={class:"tw-flex tw-items-center tw-gap-1"},Oe=["href"],ke={class:"tw-col-span-2 tw-space-y-2"},Ce={key:0,class:"tw-flex tw-items-center tw-gap-1"},Ne={key:1,class:"tw-flex tw-items-center tw-gap-1"},Ve={key:2,class:"tw-flex tw-items-center tw-gap-1"},$e={key:3,class:"tw-flex tw-items-center tw-gap-1"},is={__name:"VPSOrdersId",async setup(Re){let k,C;const S=Bt(),q=Yt(),Q=Lt(),N=zt(),X=Jt(),V=Kt(),_=Tt(),$=Ft(),f=w(!1),g=w(!1),R=w(!0),e=w(null),A=w([]),b=w(W.DAY),D=w(!1),I=w(null),p=Et("emitter");p.on("updateVPSOrdersId",async()=>{await T()});const M=w(!1),l=F(()=>S.vpsSchemes?.[e.value?.SchemeID]);function Z(){function r(t){f.value=t}p.emit("open-modal",{component:"ReloadVPS",data:{VPSOrderID:e.value?.ID,isReloading:f.value,onReloadStatusChange:r}})}function B(r){p.emit("open-modal",{component:"StatusHistory",data:{modeID:"VPSOrders",rowID:r}})}const L=F(()=>X?.serverGroupsList?.Servers?.[e.value?.ServerID]);function tt(r){if(!r)return K(new Date);const t=new Date,x=new Date(t.getTime()+r*24*60*60*1e3);return K(x)}function et(){p.emit("open-modal",{component:"OrdersTransfer",data:{ServiceOrderID:e.value?.ID,ServiceID:e.value?.ServiceID}})}function st(){$.push(`/VPSOrders/${e.value?.OrderID}/SchemeChange`),E()}function at(){$.push(`/VPSOrderPay/${e.value?.OrderID}`)}function ot(){Q.prolongOrder({IsAutoProlong:g.value?0:1,OrderID:e.value?.OrderID})}function E(){p.emit("open-modal",{component:"VPSOrderSchemeChange",data:{vpsId:e.value?.ID,vpsScheme:l.value,serverGroupId:l.value?.ServersGroupID,emitEvent:"updateVPSOrdersId"}})}function U(){p.emit("open-modal",{component:"OrderPasswordChange",data:{OrderID:e.value?.ID,ServiceID:e.value?.ServiceID,emitEvent:"updateVPSOrdersId"}})}function nt(){p.emit("open-modal",{component:"OrderRestore",data:{OrderID:e.value?.OrderID,CostDay:l.value?.CostDay,DaysRemainded:e.value?.DaysRemainded,emitEvent:"updateVPSOrdersId"}})}function lt(){N.OrderManage({ServiceOrderID:e.value?.ID,OrderID:e.value?.OrderID,ServiceID:e.value?.ServiceID})}Ut(async()=>{await T(),_.name==="VPSOrderSchemeChange"&&E()});async function T(){e.value=await S.fetchVPSOrder(_.params.id);const r=await V.fetchOneOrder(_.params.id);e.value.Stat=r.Stat,g.value=r.IsAutoProlong,r.DependOrderID&&(I.value=await V.fetchOneOrder(r.DependOrderID)),G(W.DAY),R.value=!1}async function G(r){D.value=!0,b.value=r,A.value=await N.fetchCharts(e.value.OrderID,b.value),D.value=!1}return[k,C]=Gt(()=>Promise.all([S.fetchVPSSchemes(),q.fetchContracts()])),await k,C(),(r,t)=>{const x=Rt,H=$t,rt=Vt,h=jt("RouterLink"),it=Nt,ut=Ct,dt=kt,j=Ot,mt=St,y=Pt,vt=yt,wt=ht,v=It,ct=xt,pt=bt,_t=Dt,ft=gt;return u(),d(P,null,[a(x),s("div",qt,[e.value?(u(),d(P,{key:0},[s("div",Qt,[s("div",Xt,[s("h1",Zt,o(e.value.Domain),1),a(H,{status:e.value.StatusID,"status-table":"VPSOrders",onClick:t[0]||(t[0]=i=>B(e.value.ID)),class:"tw-cursor-pointer"},null,8,["status"])]),z(s("button",{class:J(["btn btn--md btn--border btn--rotate btn--rotate_green tw-h-12",{"btn--rotate_gray":e.value.StatusID!=="Active"||f.value,"btn--rotate_loading":f.value}]),title:"Перезагрузить виртуальный сервер",onClick:Z},[t[12]||(t[12]=n(" Включен ",-1)),s("span",te,[a(rt)])],2),[[Ht,e.value.StatusID==="Active"]])]),s("div",ee,[s("div",se,[I.value?(u(),d(P,{key:0},[t[13]||(t[13]=n("Относится к заказу ",-1)),a(h,{to:O(At)(I.value.Code,e.value.DependOrderID),class:"tw-text-sky-500"},{default:m(()=>[n("#"+o(e.value.DependOrderID),1)]),_:1},8,["to"]),t[14]||(t[14]=n(" /",-1))],64)):c("",!0),n(" VPS/VDS сервер #"+o(e.value.OrderID),1)]),a(it,{text:e.value.UserNotice,"order-id":e.value.OrderID,emit:"updateVPSOrdersId"},null,8,["text","order-id"])]),e.value.Message?(u(),Y(ut,{key:0,innerHTML:e.value.Message,class:"tw-mt-4"},null,8,["innerHTML"])):c("",!0),s("div",ae,[a(h,{class:J(["tw-py-2 tw-cursor-pointer -tw-mb-[1px]",{"tw-text-sky-400 tw-border-b-2 tw-border-sky-400":O(_).path.endsWith("/SchemeChange")}]),"active-class":"tw-text-sky-400 tw-border-b-2 tw-border-sky-400",to:`/VPSOrders/${e.value.OrderID}`},{default:m(()=>t[15]||(t[15]=[n(" Сервер ",-1)])),_:1,__:[15]},8,["class","to"]),a(h,{class:"tw-py-2 tw-cursor-pointer -tw-mb-[1px]","active-class":"tw-text-sky-400 tw-border-b-2 tw-border-sky-400",to:`/VPSOrders/${e.value.OrderID}/Services`},{default:m(()=>t[16]||(t[16]=[n(" Услуги ",-1)])),_:1,__:[16]},8,["to"])]),a(dt),s("div",oe,[s("div",ne,[s("div",le,[s("div",re,[s("div",ie,o(l.value.Name),1),a(H,{status:e.value.StatusID,"status-table":"VPSOrders",onClick:t[1]||(t[1]=i=>B(e.value.ID)),class:"tw-cursor-pointer"},null,8,["status"])]),a(mt,null,{default:m(()=>[a(j,{onClick:t[2]||(t[2]=i=>nt())},{default:m(()=>t[17]||(t[17]=[n("Просмотреть учет заказа",-1)])),_:1,__:[17]}),a(j,{onClick:t[3]||(t[3]=i=>U())},{default:m(()=>t[18]||(t[18]=[n("Сменить пароль от аккаунта",-1)])),_:1,__:[18]})]),_:1})]),s("div",ue,[l.value?.SchemeParams?.os?.value?(u(),d("div",de,o(l.value.SchemeParams?.os?.value),1)):c("",!0),s("div",null,o(l.value?.SchemeParams?.hdd_mib?.InternalName)+" "+o(l.value?.SchemeParams?.hdd_mib?.Value)+o(l.value?.SchemeParams?.hdd_mib?.Unit),1),s("div",null," RAM "+o(l.value?.SchemeParams?.ram_mib?.Value)+" "+o(l.value?.SchemeParams?.ram_mib?.Unit),1),s("div",null," Канал "+o(l.value?.SchemeParams?.net_bandwidth_mbitps?.Value)+" "+o(l.value?.SchemeParams?.net_bandwidth_mbitps?.Unit),1)]),s("div",me,[s("div",null,o(O(Mt)(l.value?.CostMonth))+" в месяц",1),s("div",null,"Дней осталось "+o(e.value.DaysRemainded),1),s("div",null,"Дата окончания "+o(tt(e.value.DaysRemainded)),1)]),s("div",ve,[a(y,{onClick:t[4]||(t[4]=i=>at()),class:"tw-w-30 sm:tw-w-40"},{default:m(()=>[n(o(e.value.StatusID==="Suspended"||e.value.StatusID==="Waiting"?"Оплатить":"Продлить"),1)]),_:1}),s("label",we,[z(s("input",{type:"checkbox","onUpdate:modelValue":t[5]||(t[5]=i=>g.value=i),onInput:t[6]||(t[6]=i=>ot())},null,544),[[Wt,g.value]]),t[19]||(t[19]=s("span",{class:"btn-switch__text tw-text-xs sm:tw-text-sm"},"Автопродление",-1)),t[20]||(t[20]=s("span",{class:"btn-switch__toggle"},null,-1))])]),s("div",ce,[a(y,{onClick:t[7]||(t[7]=i=>st()),class:"tw-w-36 sm:tw-w-40"},{default:m(()=>t[21]||(t[21]=[n("Изменить тариф",-1)])),_:1,__:[21]}),a(wt,{onClick:t[8]||(t[8]=i=>et())},{default:m(()=>[a(vt),t[22]||(t[22]=s("div",null,"Передать на другой аккаунт",-1))]),_:1,__:[22]})])]),s("div",pe,[s("div",_e,[s("div",fe,[t[24]||(t[24]=s("div",{class:"tw-text-2xl"},"Панель управления",-1)),a(y,{onClick:t[9]||(t[9]=i=>lt()),type:"small"},{default:m(()=>t[23]||(t[23]=[n("Вход",-1)])),_:1,__:[23]})]),t[26]||(t[26]=s("div",{class:"tw-font-bold"},"Адрес",-1)),s("div",ge,[s("div",Se,o(`https://${L.value?.Address}/manager`),1),a(v,{value:`https://${L.value?.Address}/manager`},null,8,["value"])]),t[27]||(t[27]=s("div",{class:"tw-font-bold"},"Логин",-1)),s("div",be,[s("div",De,o(e.value.Login),1),a(v,{value:e.value?.Login},null,8,["value"])]),t[28]||(t[28]=s("div",{class:"tw-font-bold"},"Пароль",-1)),s("div",Ie,[M.value?(u(),d("span",xe,o(e.value?.Password),1)):(u(),d("button",{key:1,class:"btn btn--border btn--md tw-h-8 tw-gap-1",onClick:t[10]||(t[10]=i=>M.value=!0)},[a(ct),t[25]||(t[25]=n(" Показать ",-1))])),s("button",{class:"btn btn--border btn--md tw-h-8",onClick:t[11]||(t[11]=i=>U())},"Сменить пароль"),a(v,{value:e.value?.Password},null,8,["value"])]),t[29]||(t[29]=s("div",{class:"tw-font-bold"},"IP адрес",-1)),s("div",he,[n(o(e.value.IP?e.value.IP:"-")+" ",1),a(v,{value:e.value.IP?e.value.IP:"-"},null,8,["value"])]),t[30]||(t[30]=s("div",{class:"tw-flex tw-font-bold"},"Обратная зона DNS",-1)),s("div",ye,[s("div",Pe,[s("a",{href:`https://${e.value.Domain}`,target:"_blank"},o(e.value.Domain),9,Oe),a(v,{value:e.value.Domain},null,8,["value"])])]),t[31]||(t[31]=s("div",{class:"tw-flex tw-font-bold"},"Именные сервера",-1)),s("div",ke,[e.value.Ns1Name?(u(),d("div",Ce,[n(o(e.value.Ns1Name),1),a(v,{value:e.value.Ns1Name},null,8,["value"])])):c("",!0),e.value.Ns2Name?(u(),d("div",Ne,[n(o(e.value.Ns2Name),1),a(v,{value:e.value.Ns2Name},null,8,["value"])])):c("",!0),e.value.Ns3Name?(u(),d("div",Ve,[n(o(e.value.Ns3Name),1),a(v,{value:e.value.Ns3Name},null,8,["value"])])):c("",!0),e.value.Ns4Name?(u(),d("div",$e,[n(o(e.value.Ns4Name),1),a(v,{value:e.value.Ns4Name},null,8,["value"])])):c("",!0)])])]),a(pt,{order:e.value},null,8,["order"]),a(_t,{data:A.value,period:b.value,loading:D.value,onUpdate:G},null,8,["data","period","loading"])]),t[32]||(t[32]=s("div",{class:"tw-mt-4 tw-mb-6"},[s("div",{class:"text"},[s("h2",{class:"tw-text-2xl tw-mb-2"},"Что входит в стоимость"),s("p",null,"Для подключения дополнительных услуг"),s("ul",null,[s("li",null,"Размещение в РФ, Москва"),s("li",null,"Предустановленная ОС FreeBSD / CentOS / Debian / Ubuntu / Windows"),s("li",null,"IP адрес, с возможностью расширения"),s("li",null,"Бесплатная панель управления ISPManager Lite"),s("li",null,"Круглосуточная поддержка")])])],-1))],64)):R.value?c("",!0):(u(),Y(ft,{key:1,label:"Заказ не найден"}))])],64)}}};export{is as default};
