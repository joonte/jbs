import{j as E,o as _,c as i,a,t as g,k as x,F as f,x as D,m as P,b as k,w as L,d as V,n as B,_ as H,y as w,p as $,l as A,r as T,g as G}from"./index-5e313302.js";import{u as F}from"./hosting-da227957.js";import{u as q}from"./resetServer-2f6a71c3.js";import{_ as z}from"./IconDots-f060bcd6.js";import{_ as K}from"./IconCard-67ad5f17.js";import{S as M}from"./StatusBadge-98696de1.js";import{u as J}from"./testTransforms-eec373ee.js";import{B as O}from"./BlockBalanceAgreement-bb87adc1.js";import{_ as N}from"./ClausesKeeper-eb954229.js";import{E as Q}from"./EmptyStateBlock-9f752916.js";import"./contracts-3351d68f.js";import"./bootstrap-vue-next.es-a19a8b41.js";import"./ButtonDefault-7c216fc6.js";import"./IconArrow-555f9d45.js";import"./IconClose-1f889a2e.js";const R={class:"hosting-order-item__wrapper"},U={class:"hosting-order-item__header"},W={class:"hosting-order-item__name"},X={key:0,class:"hosting-order-item__price"},Y={class:"hosting-order-item__content"},Z={class:"hosting-order-item__row"},ee={class:"hosting-order-item__list"},oe={class:"hosting-order-item__row"},re={class:"hosting-order-item__note"};function se(c,d,n,t,I,l){var h,v,u,p,r,S,e;const m=E("router-link");return _(),i("div",{class:B(["hosting-order-item",{"hosting-order-item--special":(h=n.data)==null?void 0:h.note}])},[a("div",R,[a("div",U,[a("div",W,g((v=n.data)==null?void 0:v.name),1),(u=n.data)!=null&&u.price?(_(),i("div",X,g((p=n.data)==null?void 0:p.price)+" ₽ в месяц",1)):x("",!0)]),a("div",Y,[a("div",Z,[a("ul",ee,[(_(!0),i(f,null,D((r=n.data)==null?void 0:r.specifications,o=>(_(),i("li",null,g(o),1))),256))])]),(S=n.data)!=null&&S.note?P(c.$slots,"default",{key:0},()=>{var o;return[a("div",oe,[a("div",re,g((o=n.data)==null?void 0:o.note),1)])]},!0):x("",!0),k(m,{class:"btn btn--wide btn--border btn--wide",to:`/HostingSchemes/${(e=n.data)==null?void 0:e.ID}`},{default:L(()=>[V(" Заказать")]),_:1},8,["to"])])])],2)}const te={components:{IconDots:z,IconCard:K,StatusBadge:M},props:{data:{type:Object,default:()=>{}}}},j=H(te,[["render",se],["__scopeId","data-v-62ce5dab"]]),ne=c=>($("data-v-96ac5d26"),c=c(),A(),c),ae={class:"section"},ce={class:"container"},_e={class:"section-header"},de=ne(()=>a("h1",{class:"section-title"},"Заказать хостинг",-1)),ie={class:"section-nav"},le=["data-title","onClick"],ue={class:"section-text section-text--margin"},pe={key:0,class:"list"};function he(c,d,n,t,I,l){var p;const m=O,h=N,v=j,u=Q;return _(),i(f,null,[k(m),a("div",ae,[a("div",ce,[a("div",_e,[de,k(h),a("div",ie,[(_(!0),i(f,null,D(t.filterServerGroups(),(r,S)=>{var e,o;return _(),i("div",{class:B(["section-nav__item",{active:String(t.currentGroup)===String(r==null?void 0:r.ServersGroupID)}]),"data-title":(e=t.getServerGroup(r==null?void 0:r.ServersGroupID))==null?void 0:e.Comment,onClick:s=>t.setCurrentGroup(r==null?void 0:r.ServersGroupID)},g((o=t.getServerGroup(r==null?void 0:r.ServersGroupID))==null?void 0:o.Name),11,le)}),256))])]),a("div",ue,g((p=t.getServerGroup(t.currentGroup))==null?void 0:p.Comment),1),t.filterSchemes?(_(),i("div",pe,[(_(!0),i(f,null,D(t.filterSchemes,r=>(_(),w(v,{data:t.getCardData(r)},null,8,["data"]))),256))])):(_(),w(u,{key:1,label:"Нет доступных тарифов"}))])])],64)}const ve={components:{HostingOrderItem:j,ClausesKeeper:N,BlockBalanceAgreement:O},async setup(){var r,S;const c=F(),d=q(),n=T(0),{formDescriptionLine:t}=J(),I=G(()=>{let e=[];return l.value&&(Object.keys(l.value).forEach(o=>{var s;String((s=l.value[o])==null?void 0:s.ServersGroupID)===String(n.value)&&e.push(l.value[o])}),e.sort((o,s)=>o.SortID-s.SortID)),e}),l=G(()=>c==null?void 0:c.hostingSchemes);function m(e){n.value=e}function h(e){var o,s,C,b,y;return{ID:e==null?void 0:e.ID,name:e==null?void 0:e.Name,price:e==null?void 0:e.CostMonth,specifications:[t((o=e==null?void 0:e.SchemeParams)==null?void 0:o.limit_webdomains),t((s=e==null?void 0:e.SchemeParams)==null?void 0:s.limit_quota),t((C=e==null?void 0:e.SchemeParams)==null?void 0:C.limit_emails),t((b=e==null?void 0:e.SchemeParams)==null?void 0:b.disklimit),t((y=e==null?void 0:e.SchemeParams)==null?void 0:y.maillimit)],note:e==null?void 0:e.Comment}}const v=G(()=>{var e;return(e=d==null?void 0:d.serverGroupsList)==null?void 0:e.Servers});function u(){let e={};return Object.values(v.value).forEach(o=>{if(o.ServiceID==="10000"){const s=o.ServersGroupID;e[s]||(e[s]={SortID:o.SortID,ServersGroupID:s,servers:[]}),e[s].servers.push(o)}}),Object.values(e).sort((o,s)=>o.SortID-s.SortID)}function p(e){var o,s;return(s=(o=d==null?void 0:d.serverGroupsList)==null?void 0:o.ServersGroups)==null?void 0:s[e]}return await c.fetchHostingSchemes(),await d.fetchServerGroups(),n.value=(S=(r=u())==null?void 0:r[0])==null?void 0:S.ServersGroupID,{getHostingSchemes:l,getServerGroup:p,filterServerGroups:u,setCurrentGroup:m,getCardData:h,filterSchemes:I,currentGroup:n}}},Oe=H(ve,[["render",he],["__scopeId","data-v-96ac5d26"]]);export{Oe as default};
