import{u as y,_ as h}from"./contracts-BEc0DZS2.js";import{_ as S}from"./ButtonDefault-B1FApUky.js";import{r as k,f as _,H as N,J as $,h as x,v as g,o as u,c as d,a as e,b as m,t as c,j as B,n as C,F as D,i as j,d as L}from"./index-C9dBN6m4.js";import{v as O}from"./index-D0iqQ1zq.js";import{_ as I}from"./_plugin-vue_export-helper-DlAUqK2U.js";function ot(t){const s=t.Names||[],o=[];for(const[a,w]of Object.entries(s))o.push({label:w,text:t[a]||"-"});return o}function rt(t=null){const s=String(t)?.length;let o="";for(let a=0;a<5-s;a++)o="0"+o;return String(o)+String(t)}function R(t){t||(t=0),typeof t=="string"&&(t=t.replace(",","."));const s=Number(t);return isNaN(s)?"0.00 ₽":s.toLocaleString("ru-RU",{style:"currency",currency:"RUB"}).replace(",",".")}function ct(){return window.getSelection().toString().length>0}function it(t,s){return["Waiting","Active","Suspended","ForTransfer"].includes(t)?!0:(s.emit("open-modal",{component:"ExclusionWindow",data:{msg:"Заказ домена не может быть оплачен"}}),!1)}function wt(t,s){return!t||t==="Default"||t==="DNSmanager"||t==="ISPsw"||t==="ExtraIP"?`/AdditionalServices/${s}`:`/${t}Orders/${s}`}function ut(t){return t?`${t?.Name||""}: ${t?.Value||""}${t?.Unit||""}`:""}const A={key:0,class:"tw-relative tw-border-b tw-border-gray-100 tw-mb-4 tw-py-1 tw-px-2 md:tw-px-6"},U={class:"tw-flex tw-flex-wrap tw-gap-1 md:tw-gap-4 tw-w-full tw-items-center tw-justify-between tw-px-2"},V={class:"tw-flex tw-gap-4 md:tw-items-center tw-justify-between tw-flex-1"},E={class:"tw-flex-1 tw-flex tw-flex-col md:tw-flex-row md:tw-items-center tw-gap-1 md:tw-gap-4"},F={class:"tw-text-gray-400 tw-text-left"},P={class:"tw-flex-1 tw-text-sky-400 tw-line-clamp-1 tw-text-left"},T={class:"tw-flex tw-gap-4"},z={class:"tw-flex-1 tw-flex tw-flex-col md:tw-flex-row md:tw-items-center tw-gap-1 md:tw-gap-4"},H={class:"tw-text-gray-800 tw-text-left"},M={class:"balance__pay-btn"},W={key:0,class:"tw-absolute tw-top-[50px] md:tw-top-[58px] tw-left-1 tw-right-1 tw-z-20 tw-pl-1 md:tw-pl-6 tw-pr-8 md:tw-pr-[60px] tw-bg-white tw-border tw-border-gray-100 tw-rounded tw-shadow-md"},J={class:"tw-flex-1 tw-flex tw-flex-col md:tw-flex-row md:tw-items-center tw-gap-1 md:tw-gap-4"},q={class:"tw-text-gray-400 tw-text-left"},G={class:"tw-flex-1 tw-text-sky-400 tw-line-clamp-1 tw-text-left"},K={class:"tw-flex tw-gap-4"},Q={class:"tw-flex-1 tw-flex tw-flex-col md:tw-flex-row md:tw-items-center tw-gap-1 md:tw-gap-4"},X={class:"tw-text-gray-800 tw-text-left"},Y={class:"balance__pay-btn"},Z={__name:"BlockBalanceAgreement",setup(t){const s=y(),o=L(),a=k(!1),w=_(()=>Object.keys(s?.contractsList||[]).map(n=>{const l=s?.contractsList[n];return(l.Orders>0||l.Balance>0)&&l.IsHidden===!1?{value:l.ID,name:l.Customer,balance:l.Balance}:null}).filter(n=>n!==null)),i=_(()=>w.value?.[0]||null);N(async()=>{await s.fetchContracts()});function p(f){o.push(`/Balance/${f}`)}function v(){a.value=!1}return(f,n)=>{const l=S,b=h;return i.value?$((u(),d("div",A,[e("div",U,[e("div",V,[e("div",E,[e("div",F,c(String(i.value.value).padStart(5,"0")),1),e("div",P,c(i.value.name),1)]),e("div",T,[e("div",z,[n[2]||(n[2]=e("div",{class:"tw-text-gray-400 tw-text-left"},"Баланс",-1)),e("div",H,c(g(R)(i.value.balance)),1)]),e("div",M,[m(l,{class:"btn-pay tw-m-0",label:"Пополнить",onClick:n[0]||(n[0]=B(r=>p(i.value.value),["stop"]))})])])]),m(b,{onClick:n[1]||(n[1]=r=>a.value=!a.value),class:C(["tw-cursor-pointer tw-duration-300",{"tw-rotate-180":a.value}])},null,8,["class"])]),a.value?(u(),d("div",W,[(u(!0),d(D,null,j(w.value,r=>(u(),d("div",{key:r.value,class:"tw-flex md:tw-items-center tw-justify-between tw-gap-1 md:tw-gap-4 tw-w-full tw-p-2"},[e("div",J,[e("div",q,c(String(r.value).padStart(5,"0")),1),e("div",G,c(r.name),1)]),e("div",K,[e("div",Q,[n[3]||(n[3]=e("div",{class:"tw-text-gray-400 tw-text-left"},"Баланс",-1)),e("div",X,c(r.balance)+" ₽",1)]),e("div",Y,[m(l,{class:"btn-pay tw-m-0",label:"Пополнить",onClick:tt=>p(r.value)},null,8,["onClick"])])])]))),128))])):x("",!0)])),[[g(O),v]]):x("",!0)}}},dt=I(Z,[["__scopeId","data-v-5553875d"]]);export{dt as _,ot as a,ut as b,it as c,R as f,wt as g,ct as i,rt as t};
