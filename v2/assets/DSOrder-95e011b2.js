import{j as rt,o as _,c as d,b as m,a as t,t as l,n as at,w as S,d as O,F as P,x as B,Z as lt,$ as _t,k as tt,p as dt,l as ct,_ as mt,a7 as vt,f as Dt,r as N,S as ut,g}from"./index-6f846e0d.js";import"./resetServer-008fdf83.js";import{u as It}from"./dedicatedServer-6e120d8e.js";import{f as st}from"./useTimeFunction-8602dd60.js";import{_ as ht}from"./IconCard-b1fefd85.js";import{I as St}from"./IconProfile-df27f7d9.js";import{I as gt}from"./IconSettings-359ff9ea.js";import{_ as ft,a as et}from"./ServicesContractBalanceBlock-8a2caf63.js";import{S as ot}from"./StatusBadge-654ab79e.js";import{I as wt}from"./IconRotate-26c5733c.js";import{h as pt}from"./hostStatuses-94d00f20.js";import{s as it}from"./SettingsEngineItem-0ae50484.js";import{B as nt}from"./BlockBalanceAgreement-4579706c.js";import{E as bt}from"./EmptyStateBlock-c1b0587e.js";import{_ as Ot}from"./ButtonDefault-40efcd87.js";import{_ as Pt}from"./ClausesKeeper-3ae27028.js";import{z as yt,d as kt}from"./bootstrap-vue-next.es-6bf04585.js";import{_ as Mt}from"./IconDots-740076c4.js";import"./contracts-b643bcd5.js";import"./IconArrow-37547b0b.js";import"./IconClose-12869131.js";const v=D=>(dt("data-v-950e7551"),D=D(),ct(),D),Ct={key:0,class:"ds-order-page"},Rt={class:"section"},xt={class:"container"},Bt={class:"section-header"},Nt={class:"section-title"},At={class:"hosting-item__controls"},Et={class:"btn btn--dots"},Lt={class:"section-label"},Tt={class:"section-nav"},Vt={class:"list"},Ut={class:"list-col list-col--md"},jt={class:"list-item"},zt={class:"list-item__row"},Ft={class:"list-item__title"},Ht={class:"list-item__status"},Gt={class:"list-item__row"},Wt={class:"list-item__ul"},Zt={class:"list-item__row list-item__row--column"},qt={class:"list-item__text"},Jt={class:"list-item__text"},Kt={class:"list-item__text"},Qt={class:"list-item__row"},Xt={class:"btn btn--border btn--switch"},Yt=v(()=>t("span",{class:"btn-switch__text"},"Автопродление",-1)),$t=v(()=>t("span",{class:"btn-switch__toggle"},null,-1)),ts={class:"list-col list-col--xl"},ss={class:"list-item"},es=v(()=>t("div",{class:"list-item__row"},[t("div",{class:"list-item__title"},"Конфигурация")],-1)),os={class:"list-item__row list-item__table"},is={class:"list-item__label"},ns={class:"list-item__text"},rs={class:"list-col list-col--md"},as={class:"list-item"},ls=v(()=>t("div",{class:"list-item__row"},[t("div",{class:"list-item__title"},"Доступы")],-1)),_s={class:"list-item__row list-item__row--table"},ds=v(()=>t("div",{class:"list-item__item"},"IP адрес сервера",-1)),cs={class:"list-item__item"},ms={class:"list-item__row list-item__row--table"},vs=v(()=>t("div",{class:"list-item__item"},"Пользователь",-1)),Ds={class:"list-item__item"},us={class:"list-item__row list-item__row--table password-line"},Is=v(()=>t("div",{class:"list-item__item"},"Пароль",-1)),hs={class:"list-item__item"},Ss={key:0,class:"password-hidden"},gs={class:"list-col list-col--md"},fs={class:"list-item"},ws=v(()=>t("div",{class:"list-item__row"},[t("div",{class:"list-item__title"},"Доступы IPMI")],-1)),ps={class:"list-item__row list-item__row--table"},bs=v(()=>t("div",{class:"list-item__item"},"IP адрес сервера",-1)),Os={class:"list-item__item"},Ps={class:"list-item__row list-item__row--table"},ys=v(()=>t("div",{class:"list-item__item"},"Пользователь",-1)),ks={class:"list-item__item"},Ms={class:"list-item__row list-item__row--table password-line"},Cs=v(()=>t("div",{class:"list-item__item"},"Пароль",-1)),Rs={class:"list-item__item"},xs={key:0,class:"password-hidden"},Bs={key:0,class:"list-col list-col--md"},Ns={class:"list-item"},As=v(()=>t("div",{class:"list-item__row"},[t("div",{class:"list-item__title"},"Общая информация из IPMI")],-1)),Es={class:"list-item__row list-item__row--table"},Ls={class:"list-item__item"},Ts={class:"list-item__item"},Vs={key:1,class:"list-col list-col--md"},Us={class:"list-item"},js=v(()=>t("div",{class:"list-item__row"},[t("div",{class:"list-item__title"},"Данные сенсоров")],-1)),zs={class:"list-item__row list-item__row--table"},Fs={class:"list-item__item"},Hs={class:"list-item__item"},Gs=v(()=>t("div",{class:"section"},[t("div",{class:"container"},[t("div",{class:"text"},[t("h3",null,"Что входит в стоимость"),t("p",null,"Для подключения дополнительных услуг"),t("ul",null,[t("li",null,"Размещение в РФ, Москва"),t("li",null,"Предустановленная ОС FreeBSD / CentOS / Debian / Ubuntu / Windows"),t("li",null,"IP адрес, с возможностью расширения"),t("li",null,"Бесплатная панель управления ISPManager Lite"),t("li",null,"Круглосуточная поддержка")])])])],-1)),Ws={key:1,class:"section"},Zs={class:"container"};function qs(D,i,u,s,I,z){var k,M,C,R,e,o,r,p,b,x,F,H,G,W,Z,q,J,K,Q,X,Y,$;const A=nt,f=Mt,a=yt,E=kt,w=rt("router-link"),h=Pt,L=ft,T=ot,V=it,U=Ot,y=et,j=bt;return _(),d(P,null,[m(A),(k=s.getDSServerData)!=null&&k.ID?(_(),d("div",Ct,[t("div",Rt,[t("div",xt,[t("div",Bt,[t("h1",Nt,l((M=s.getDSServerData)==null?void 0:M.IPaddr),1),t("div",At,[t("div",{class:at(["btn btn--md btn--border btn--rotate btn--rotate_green",{"btn--system-off":((C=s.getDSOrderIPMI)==null?void 0:C.IPMI["System Power"])!=="on"}]),onClick:i[0]||(i[0]=n=>{var c;return s.serverReset((c=s.getDSServerData)==null?void 0:c.ID)})},l(((R=s.getDSOrderIPMI)==null?void 0:R.IPMI["System Power"])==="on"?"Включен":"Выключен"),3),m(E,{class:"dropdown-dots",right:""},{"button-content":S(()=>[t("div",Et,[m(f)])]),default:S(()=>[m(a,{onClick:i[1]||(i[1]=n=>{var c;return s.serverReset((c=s.getDSServerData)==null?void 0:c.ID)})},{default:S(()=>[O("Перезагрузить")]),_:1})]),_:1})]),t("div",Lt,"Выделенный сервер # "+l((e=s.getDSServerData)==null?void 0:e.OrderID),1),t("div",Tt,[m(w,{class:"section-nav__item",to:`/DSOrders/${(o=s.getDSServerData)==null?void 0:o.OrderID}`},{default:S(()=>[O("Сервер")]),_:1},8,["to"])])]),m(h),t("div",Vt,[m(L,{"contract-id":(r=s.getDSServerData)==null?void 0:r.ContractID,onTransfer:i[2]||(i[2]=n=>s.transferItem())},null,8,["contract-id"]),t("div",Ut,[t("div",jt,[t("div",zt,[t("div",Ft,l((p=s.getDSServerData)==null?void 0:p.Scheme),1),t("div",Ht,[m(T,{status:(b=s.getDSServerData)==null?void 0:b.StatusID,DaysRemainded:(x=s.getDSServerData)==null?void 0:x.DaysRemainded,"status-table":"DNSmanagerOrders",onClick:i[3]||(i[3]=n=>{var c;return s.openHistoryStatuses((c=s.getDSServerData)==null?void 0:c.ID)})},null,8,["status","DaysRemainded"])]),m(V,null,{default:S(()=>[m(a,{onClick:i[4]||(i[4]=n=>s.openOrderRestore())},{default:S(()=>[O("Просмотреть учет заказа")]),_:1})]),_:1})]),t("div",Gt,[t("ul",Wt,[(_(!0),d(P,null,B(s.getDSItemParam(s.getDSServerData),n=>(_(),d("li",null,l(n),1))),256))])]),t("div",Zt,[t("div",qt,l(((F=s.getDSScheme)==null?void 0:F.CostMonth)||"0")+" ₽ в месяц",1),t("div",Jt,"Дней осталось "+l(((H=s.getDSServerData)==null?void 0:H.DaysRemainded)||"0"),1),t("div",Kt,"Дата окончания "+l(s.calculateExpirationDate((G=s.getDSServerData)==null?void 0:G.DaysRemainded)),1)]),t("div",Qt,[m(U,{label:"Продлить",onClick:i[5]||(i[5]=n=>{var c;return D.$router.push(`/DSOrderPay/${(c=s.getDSServerData)==null?void 0:c.OrderID}`)})}),t("label",Xt,[lt(t("input",{type:"checkbox","onUpdate:modelValue":i[6]||(i[6]=n=>s.isAutoProlong=n),onInput:i[7]||(i[7]=n=>s.setProlongValue())},null,544),[[_t,s.isAutoProlong]]),Yt,$t])])])]),t("div",ts,[t("div",ss,[es,t("div",os,[(_(!0),d(P,null,B(s.getDSServerData.Names,(n,c)=>(_(),d("div",{class:"list-item__table-col",key:c},[t("div",is,l(n),1),t("div",ns,l(s.formatData(c,s.getDSServerData)),1)]))),128))])])]),t("div",rs,[t("div",as,[ls,t("div",_s,[ds,t("div",cs,l((W=s.getDSServerData)==null?void 0:W.IPaddr),1)]),t("div",ms,[vs,t("div",Ds,l((Z=s.getDSServerData)==null?void 0:Z.DSuser),1)]),t("div",us,[Is,t("div",hs,[s.passwordShowOne?(_(),d("div",Ss,l((q=s.getDSServerData)==null?void 0:q.DSpass),1)):(_(),d("button",{key:1,class:"btn btn--border btn--md password-line",onClick:i[8]||(i[8]=n=>s.passwordShowOne=!0)},[m(y,{class:"button-icon"}),O("Показать")]))])])])]),t("div",gs,[t("div",fs,[ws,t("div",ps,[bs,t("div",Os,l((J=s.getDSServerData)==null?void 0:J.ILOaddr),1)]),t("div",Ps,[ys,t("div",ks,l((K=s.getDSServerData)==null?void 0:K.ILOuser),1)]),t("div",Ms,[Cs,t("div",Rs,[s.passwordShowTwo?(_(),d("div",xs,l((Q=s.getDSServerData)==null?void 0:Q.ILOpass),1)):(_(),d("button",{key:1,class:"btn btn--border btn--md password-line",onClick:i[9]||(i[9]=n=>s.passwordShowTwo=!0)},[m(y,{class:"button-icon"}),O("Показать")]))])])])]),s.getDSOrderIPMI&&((X=s.getDSOrderIPMI)==null?void 0:X.IPMI.length)>0?(_(),d("div",Bs,[t("div",Ns,[As,(_(!0),d(P,null,B((Y=s.getDSOrderIPMI)==null?void 0:Y.IPMI,n=>(_(),d("div",Es,[t("div",Ls,l(n==null?void 0:n.name),1),t("div",Ts,l(n==null?void 0:n.value),1)]))),256))])])):tt("",!0),($=s.getDSOrderIPMI)!=null&&$["IPMI.Sensors"]&&s.getDSOrderIPMI["IPMI.Sensors"].length>0?(_(),d("div",Vs,[t("div",Us,[js,(_(!0),d(P,null,B(s.getDSOrderIPMI["IPMI.Sensors"],(n,c)=>(_(),d("div",zs,[t("div",Fs,l(c),1),t("div",Hs,l(n),1)]))),256))])])):tt("",!0)])])]),Gs])):(_(),d("div",Ws,[t("div",Zs,[m(j,{label:"Заказ не найден"})])]))],64)}const Js={components:{IconCard:ht,IconProfile:St,IconSettings:gt,IconEye:et,StatusBadge:ot,IconRotate:wt,settingsEngineItem:it,BlockBalanceAgreement:nt},async setup(){const D=vt(),i=It(),u=Dt(),s=N(!1),I=ut("emitter");I.on("updateDSIDPage",()=>{i.fetchDSOrders().then(()=>{var e;i.fetchDSOrderIPMI((e=a.value)==null?void 0:e.OrderID)}).then(()=>{var e;i.fetchDSOrderIPMISensors((e=a.value)==null?void 0:e.OrderID)})});const z=N(!1),A=N(!1),f=N(!0),a=g(()=>Object.keys(i==null?void 0:i.DSList).map(e=>i==null?void 0:i.DSList[e]).find(e=>e.OrderID===D.params.id)),E=g(()=>{var e;return((e=a.value)==null?void 0:e.Names)||[]}),w=g(()=>{var e,o;return(o=i==null?void 0:i.DSSchemes)==null?void 0:o[(e=a.value)==null?void 0:e.SchemeID]}),h=g(()=>i==null?void 0:i.DSOrderIPMI),L=g(()=>{var e,o;return(o=u==null?void 0:u.userOrders)==null?void 0:o[(e=a.value)==null?void 0:e.OrderID]}),T=g(()=>i==null?void 0:i.DSOrderIPMISensors);function V(e){I.emit("open-modal",{component:"StatusHistory",data:{modeID:"DSOrders",rowID:e}})}function U(e,o){const r=o[e];if(r==null)return"-";switch(e){case"ram":return`${r} ГБ`;case"chrate":return`${r} Мбит/с`;default:return r}}function y(e){if(!e)return st(new Date);const o=new Date,r=new Date(o.getTime()+e*24*60*60*1e3);return st(r)}function j(e){let o=w.value;o===void 0&&(o=e);let r=[];return o!=null&&o.Name&&r.push(o==null?void 0:o.Name),o!=null&&o.CPU&&r.push(o==null?void 0:o.CPU),o!=null&&o.ram&&r.push("RAM "+(o==null?void 0:o.ram)+" GB"),o!=null&&o.disks&&r.push(o==null?void 0:o.disks),r}function k(e){var r,p,b;function o(x){s.value=x}I.emit("open-modal",{component:"ReloadDS",data:{DSOrderID:e,isReloading:s.value,onReloadStatusChange:o,ServerName:(r=a==null?void 0:a.value)==null?void 0:r.Scheme,SystemPower:(p=h==null?void 0:h.value)==null?void 0:p.IPMI["System Power"],OrderID:(b=a==null?void 0:a.value)==null?void 0:b.OrderID}})}function M(){var e,o;I.emit("open-modal",{component:"OrdersTransfer",data:{ServiceOrderID:(e=a.value)==null?void 0:e.ID,ServiceID:(o=a.value)==null?void 0:o.ServiceID}})}function C(){var e;u.prolongOrder({IsAutoProlong:f.value?0:1,OrderID:(e=a.value)==null?void 0:e.OrderID})}function R(){var e,o,r;I.emit("open-modal",{component:"OrderRestore",data:{OrderID:(e=a.value)==null?void 0:e.OrderID,CostDay:(o=w.value)==null?void 0:o.CostDay,DaysRemainded:(r=a.value)==null?void 0:r.DaysRemainded,emitEvent:"updateDSIDPage"}})}return await i.fetchDSSchemes(),i.fetchDSOrders().then(()=>{var e;i.fetchDSOrderIPMI((e=a.value)==null?void 0:e.OrderID)}),await u.fetchUserOrders().then(()=>{var e;f.value=(e=L.value)==null?void 0:e.IsAutoProlong}),{getDSOrderIPMI:h,getDSServerData:a,getDSScheme:w,getDSOrderIPMISensors:T,isAutoProlong:f,passwordShowOne:z,passwordShowTwo:A,openOrderRestore:R,transferItem:M,setProlongValue:C,serverReset:k,isReloading:s,getDSItemParam:j,hostStatuses:pt,calculateExpirationDate:y,formatData:U,serverDataNames:E,openHistoryStatuses:V}}},Ie=mt(Js,[["render",qs],["__scopeId","data-v-950e7551"]]);export{Ie as default};
