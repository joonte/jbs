import{o as c,c as D,b as N,a as o,t as I,y as z,k as m,Z as oe,$ as ae,d as ie,F as ne,p as ce,l as le,_ as de,a7 as _e,e as me,g as v,r as ee,S as ve,f as ue,h as De}from"./index-642cdac5.js";import{u as Ie}from"./postings-500009e8.js";import{u as Se}from"./services-70bbf297.js";import{u as ge}from"./resetServer-c8d5043b.js";import{f as te}from"./useTimeFunction-8602dd60.js";import{u as he}from"./globalActions-c9fc22a3.js";import{S as re}from"./StatusBadge-52b4bbab.js";import{s as pe}from"./servicesStatuses-6293b6ac.js";import{B as se}from"./BlockBalanceAgreement-ccba2ab2.js";import{_ as Oe,a as fe}from"./ServicesContractBalanceBlock-701e01e7.js";import{_ as we}from"./ClausesKeeper-12bc5d50.js";import{_ as Pe}from"./ButtonDefault-eb076df2.js";import"./contracts-16ef7000.js";import"./bootstrap-vue-next.es-9ff54498.js";import"./IconArrow-c0196cbe.js";import"./IconProfile-aba98212.js";import"./IconCard-b302365f.js";import"./IconClose-f1b85910.js";const b=w=>(ce("data-v-fccd63b9"),w=w(),le(),w),be={class:"section"},ke={class:"container"},ye={class:"section-header"},Ce={class:"section-title"},Ne={class:"section-label"},xe={class:"list"},Ae={class:"list-col list-col--md"},Le={class:"list-item"},Me={class:"list-item__row"},Ge={class:"list-item__title"},Be={class:"list-item__status"},Ee={class:"list-item__row"},Te={class:"list-item__ul"},Re={key:0},Ve={class:"list-item__row"},je={class:"btn btn--border btn--switch"},Fe=b(()=>o("span",{class:"btn-switch__text"},"Автопродление",-1)),He=b(()=>o("span",{class:"btn-switch__toggle"},null,-1)),qe={key:0,class:"list-col list-col--md"},Ue={class:"list-item"},Xe={class:"list-item__row"},We=b(()=>o("div",{class:"list-item__title"},"Панель управления",-1)),Ze={class:"list-item__row list-item__row--table"},ze=b(()=>o("div",{class:"list-item__item"},"Адрес",-1)),Je={key:0,class:"list-item__item"},Ke={key:1,class:"list-item__item"},Qe={key:0,class:"list-item__row list-item__row--table"},Ye=b(()=>o("div",{class:"list-item__item"},"Логин",-1)),$e={class:"list-item__item"},et={key:1,class:"list-item__row list-item__row--table"},tt=b(()=>o("div",{class:"list-item__item"},"Пароль",-1)),rt={class:"list-item__item hide-button"},st={key:0,class:"password-hidden"},ot={class:"list-item__row list-item__row--table"},at=b(()=>o("div",{class:"list-item__item"},"FTP, POP3, SMTP, IMAP",-1)),it={key:0,class:"list-item__item"},nt={key:1,class:"list-item__item"};function ct(w,n,s,t,J,Q){var i,T,g,R,l,d,k,y,A,L,V,j,F,C,H,q,U,X,W,Z,e,r,a,p,O,f,M,G,B;const K=se,P=Pe,h=we,S=Oe,u=re,x=fe;return c(),D(ne,null,[N(K),o("div",be,[o("div",ke,[o("div",ye,[o("h1",Ce,I((i=t.getService)==null?void 0:i.Name),1),o("div",Ne,"# "+I((T=t.getOrder)==null?void 0:T.ID),1),((g=t.getOrder)==null?void 0:g.ServiceID)==="52000"?(c(),z(P,{key:0,class:"section-scheme",label:"Изменить тариф",onClick:n[0]||(n[0]=_=>t.changeScheme())})):m("",!0),((R=t.getOrder)==null?void 0:R.ServiceID)==="51000"?(c(),z(P,{key:1,class:"section-scheme",label:"Изменить тариф",onClick:n[1]||(n[1]=_=>t.changeISPScheme())})):m("",!0)]),N(h),o("div",xe,[N(S,{"contract-id":(l=t.getOrder)==null?void 0:l.ContractID,onTransfer:n[2]||(n[2]=_=>t.transferItem())},null,8,["contract-id"]),o("div",Ae,[o("div",Le,[o("div",Me,[o("div",Ge,I((d=t.getService)==null?void 0:d.Name),1),o("div",Be,[N(u,{status:(k=t.getOrder)==null?void 0:k.StatusID,"status-table":"Orders"},null,8,["status"])])]),o("div",Ee,[o("ul",Te,[(y=t.getOrder)!=null&&y.DependOrderID&&((A=t.getOrder)==null?void 0:A.DependOrderID)!=="0"?(c(),D("li",Re,"Относится к заказу "+I((L=t.getOrder)==null?void 0:L.DependOrderID)+"/"+I((V=t.getDependOrderService)==null?void 0:V.Name),1)):m("",!0)])]),o("div",Ve,[N(P,{label:((j=t.getOrder)==null?void 0:j.StatusID)==="ClaimForRegister"||((F=t.getOrder)==null?void 0:F.StatusID)==="Waiting"?"Оплатить":"Продлить",onClick:n[3]||(n[3]=_=>t.navigateToProlong())},null,8,["label"]),o("label",je,[oe(o("input",{type:"checkbox","onUpdate:modelValue":n[4]||(n[4]=_=>t.isAutoProlong=_),onInput:n[5]||(n[5]=_=>t.setProlongValue())},null,544),[[ae,t.isAutoProlong]]),Fe,He])])])]),((C=t.getOrder)==null?void 0:C.ServiceID)==="52000"||((H=t.getOrder)==null?void 0:H.ServiceID)==="51000"?(c(),D("div",qe,[o("div",Ue,[o("div",Xe,[We,((q=t.getOrder)==null?void 0:q.ServiceID)==="52000"?(c(),z(P,{key:0,class:"ml-auto",onClick:n[6]||(n[6]=_=>t.orderManageDNS()),label:"Вход"})):m("",!0),((U=t.getOrder)==null?void 0:U.ServiceID)==="51000"?(c(),z(P,{key:1,class:"ml-auto",onClick:n[7]||(n[7]=_=>t.orderManageISP()),label:"Вход"})):m("",!0)]),o("div",Ze,[ze,((X=t.getOrder)==null?void 0:X.ServiceID)==="52000"?(c(),D("div",Je,I(`https://${(W=t.getServerGroupDNS)==null?void 0:W.Address}/manager`),1)):m("",!0),((Z=t.getOrder)==null?void 0:Z.ServiceID)==="51000"?(c(),D("div",Ke,I(`https://${(e=t.getServerGroupISP)==null?void 0:e.Address}/manager`),1)):m("",!0)]),((r=t.getOrder)==null?void 0:r.ServiceID)==="52000"?(c(),D("div",Qe,[Ye,o("div",$e,I((a=t.getDNSmanagerOrder)==null?void 0:a.Login),1)])):m("",!0),((p=t.getOrder)==null?void 0:p.ServiceID)==="52000"?(c(),D("div",et,[tt,o("div",rt,[t.passwordShow?(c(),D("div",st,I((O=t.getDNSmanagerOrder)==null?void 0:O.Password),1)):(c(),D("button",{key:1,class:"btn btn--border btn--md hide-button",onClick:n[8]||(n[8]=_=>t.passwordShow=!0)},[N(x),ie("Показать")]))])])):m("",!0),o("div",ot,[at,((f=t.getOrder)==null?void 0:f.ServiceID)==="52000"?(c(),D("div",it,I((M=t.getServerGroupDNS)==null?void 0:M.Address),1)):m("",!0),((G=t.getOrder)==null?void 0:G.ServiceID)==="51000"?(c(),D("div",nt,I((B=t.getServerGroupISP)==null?void 0:B.Address),1)):m("",!0)])])])):m("",!0)])])])],64)}const lt={components:{StatusBadge:re,BlockBalanceAgreement:se},async setup(){const w=_e(),n=me(),s=Se(),t=ge(),J=he(),Q=v(()=>{var e,r,a;return(a=(e=t==null?void 0:t.serverGroupsList)==null?void 0:e.Servers)==null?void 0:a[(r=d.value)==null?void 0:r.ServerID]}),K=v(()=>{var e,r,a;return(a=(e=t==null?void 0:t.serverGroupsList)==null?void 0:e.Servers)==null?void 0:a[(r=l.value)==null?void 0:r.ServerID]}),P=ee(!1),h=ve("emitter"),S=Ie(),u=ue(),x=ee(!1),i=v(()=>Object.keys(u==null?void 0:u.userOrders).map(e=>u==null?void 0:u.userOrders[e]).find(e=>e.ID===w.params.id)),T=v(()=>{var e,r;return S==null?void 0:S.servicesList[(r=u.userOrders[(e=i.value)==null?void 0:e.DependOrderID])==null?void 0:r.ServiceID]}),g=v(()=>{var e;return S==null?void 0:S.servicesList[(e=i.value)==null?void 0:e.ServiceID]}),R=v(()=>s==null?void 0:s.ISPswOrdersList),l=v(()=>Object.keys(s==null?void 0:s.ISPswOrdersList).map(e=>s==null?void 0:s.ISPswOrdersList[e]).find(e=>{var r;return e.OrderID===((r=i.value)==null?void 0:r.ID)})),d=v(()=>Object.keys(s==null?void 0:s.DNSmanagerOrdersList).map(e=>s==null?void 0:s.DNSmanagerOrdersList[e]).find(e=>{var r;return e.OrderID===((r=i.value)==null?void 0:r.ID)})),k=v(()=>Object.keys(s==null?void 0:s.ExtraIPOrdersList).map(e=>s==null?void 0:s.ExtraIPOrdersList[e]).find(e=>{var r;return e.OrderID===((r=i.value)==null?void 0:r.ID)})),y=v(()=>s==null?void 0:s.additionalServicesScheme),A=v(()=>{const e=d.value;return e&&y.value.DNSmanager[e.SchemeID]||null}),L=v(()=>{const e=l.value;return e&&y.value.ISPsw[e.SchemeID]||null});function V(){var e,r;h.emit("open-modal",{component:"OrdersTransfer",data:{ServiceOrderID:(e=i.value)==null?void 0:e.ID,ServiceID:(r=i.value)==null?void 0:r.ServiceID}})}function j(){var e,r,a;J.OrderManageHosting({ServiceOrderID:(e=d.value)==null?void 0:e.ID,OrderID:(r=d.value)==null?void 0:r.OrderID,ServiceID:(a=d.value)==null?void 0:a.ServiceID,XMLHttpRequest:"yes"})}function F(){var e,r,a;J.OrderManageHosting({ServiceOrderID:(e=l.value)==null?void 0:e.ID,OrderID:(r=l.value)==null?void 0:r.OrderID,ServiceID:(a=l.value)==null?void 0:a.ServiceID,XMLHttpRequest:"yes"})}function C(e){if(!e)return te(new Date);const r=new Date,a=new Date(r.getTime()+e*24*60*60*1e3);return te(a)}function H(){var e,r,a,p,O,f,M,G,B,_,Y,$;if(((e=i==null?void 0:i.value)==null?void 0:e.ServiceID)==="50000"){const E=C((r=k.value)==null?void 0:r.DaysRemainded);h.emit("open-modal",{component:"ServicePayExtraIP",data:{ServiceOrderID:(a=k.value)==null?void 0:a.ID,contractID:(p=k.value)==null?void 0:p.ContractID,ExpirationDate:E}})}else if(((O=i==null?void 0:i.value)==null?void 0:O.ServiceID)==="51000"){const E=C((f=l.value)==null?void 0:f.DaysRemainded);h.emit("open-modal",{component:"ServicePay",data:{ServiceOrderID:(M=l.value)==null?void 0:M.ID,contractID:(G=l.value)==null?void 0:G.ContractID,ExpirationDate:E}})}else if(((B=i==null?void 0:i.value)==null?void 0:B.ServiceID)==="52000"){const E=C((_=d.value)==null?void 0:_.DaysRemainded);h.emit("open-modal",{component:"ServicePayDNS",data:{ServiceOrderID:(Y=d.value)==null?void 0:Y.ID,contractID:($=d.value)==null?void 0:$.ContractID,ExpirationDate:E}})}else n.push(`/ServiceOrderPay/${w.params.id}`)}function q(){var e;u.prolongOrder({IsAutoProlong:x.value?0:1,OrderID:(e=i.value)==null?void 0:e.ID})}function U(){X()}function X(){var e,r,a;h.emit("open-modal",{component:"ISPswSchemeChange",data:{ISPswID:(e=i.value)==null?void 0:e.ID,ServerGroup:(r=L.value)==null?void 0:r.ServersGroupID,Code:(a=g.value)==null?void 0:a.Code}})}function W(){Z()}function Z(){var e,r,a;h.emit("open-modal",{component:"DNSOrderSchemeChange",data:{DNSID:(e=i.value)==null?void 0:e.ID,ServerGroup:(r=A.value)==null?void 0:r.ServersGroupID,Code:(a=g.value)==null?void 0:a.Code}})}return De(async()=>{var e,r,a,p,O,f;((e=i.value)==null?void 0:e.ServiceID)==="52000"&&(await s.fetchAdditionalServiceScheme((r=g.value)==null?void 0:r.Code),await s.fetchDNSmanagerOrders()),((a=i.value)==null?void 0:a.ServiceID)==="51000"&&(await s.fetchAdditionalServiceScheme((p=g.value)==null?void 0:p.Code),await s.fetchISPswOrders()),((O=i.value)==null?void 0:O.ServiceID)==="50000"&&(await s.fetchAdditionalServiceScheme((f=g.value)==null?void 0:f.Code),await s.fetchExtraIPOrders())}),await u.fetchUserOrders().then(()=>{var e;x.value=(e=i.value)==null?void 0:e.IsAutoProlong}),await S.fetchServices(),await t.fetchServerGroups(),{getService:g,getOrder:i,getDependOrderService:T,isAutoProlong:x,servicesStatuses:pe,transferItem:V,navigateToProlong:H,setProlongValue:q,getDNSmanagerOrder:d,getISPOrder:l,getAdditionalServiceScheme:y,getDNSmanagerOrderScheme:A,getISPOrderScheme:L,changeScheme:W,ISPswOrders:R,changeISPScheme:U,getServerGroupDNS:Q,getServerGroupISP:K,passwordShow:P,orderManageDNS:j,orderManageISP:F}}},Ct=de(lt,[["render",ct],["__scopeId","data-v-fccd63b9"]]);export{Ct as default};
