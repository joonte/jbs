import{_ as pt}from"./EmptyStateBlock-DA3-0YDi.js";import{_ as _t}from"./ParamsAccordionBlock-DEyHfFSp.js";import{_ as ft,a as gt,b as Dt}from"./SettingsEngineItem-BYnOrDI7.js";import{_ as xt,a as It}from"./CopyToClipboard.vue_vue_type_script_setup_true_lang-Ds1JMB0b.js";import{_ as bt}from"./WhiteButton.vue_vue_type_script_setup_true_lang-CdZRVTJ5.js";import{I as ht}from"./IconProfile-CyDmeaCw.js";import{_ as St}from"./BlueButton.vue_vue_type_script_setup_true_lang-BKdLNEec.js";import{r as yt}from"./bootstrap-vue-next-W16P-SAV.js";import{_ as Ot}from"./StatusBadge-BmqDrHzy.js";import{_ as kt}from"./ClausesKeeper-iUM0yapS.js";import{_ as Ct}from"./MessageInfo-C0v9QTnb.js";import{_ as Nt}from"./UserNote-9g0f9gxP.js";import{_ as Pt}from"./BlockBalanceAgreement-v_bWuiVT.js";import{u as $t,r as w,J as j,f as C,I as Ht,E as At,o as l,c as u,b as o,a as s,F as N,t as a,e as r,w as m,v as _,h as v,C as q,n as Mt,K as Rt,L as Lt,x as Bt,i as Tt,G as Vt,d as Et}from"./index-Codq73aV.js";import{f as F}from"./time-DenPiOX5.js";import{u as Gt}from"./hosting-BhryHInW.js";import{u as Ut}from"./server-DnY_Nzbw.js";import{u as Wt}from"./global-CdY51QQZ.js";import{u as jt}from"./orders-wJq_IMsK.js";import{g as qt,b as P,f as Ft}from"./common-DyknwSqv.js";import"./index-BO2gwtUe.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./LoadingIndicator-y8DeC9jv.js";import"./ServerStatusBadge.vue_vue_type_script_setup_true_lang-CNB3-WyC.js";import"./services-DyPBvbVy.js";import"./IconSettings-Pwo5dDjN.js";import"./IconCopy-CvpXMuV2.js";import"./IconClose-Dia1noy8.js";import"./ButtonDefault-CMw2aBy6.js";const zt={class:"tw-px-4 md:tw-px-8"},Yt={class:"tw-text-xl sm:tw-text-4xl"},Jt=["href"],Kt={class:"tw-flex tw-items-center tw-gap-2 tw-mt-2"},Xt={class:"tw-text-gray-500 tw-text-sm"},Qt={class:"tw-flex tw-items-center tw-gap-8 tw-border-b tw-border-gray-200 tw-mt-4 tw-whitespace-nowrap tw-mb-6"},Zt={class:"tw-grid tw-grid-cols-1 xl:tw-grid-cols-2 tw-gap-4"},te={class:"tw-border tw-rounded tw-border-gray-200 tw-p-4"},ee={class:"tw-flex tw-justify-between tw-items-center tw-gap-4"},se={class:"tw-flex tw-items-center tw-gap-2"},oe={class:"tw-text-2xl"},ae={class:"tw-flex tw-flex-wrap tw-gap-x-4 tw-gap-y-2 tw-text-gray-500 tw-text-sm tw-mt-4"},ne={key:0},re={key:1},le={key:2},ie={class:"tw-space-y-4 tw-mt-4"},ue={class:"tw-flex tw-gap-4 tw-mt-4"},de={class:"btn btn--border btn--switch tw-ml-0 tw-h-10 sm:tw-h-12"},me={class:"tw-flex tw-flex-wrap tw-gap-4 tw-mt-4"},ve={class:"tw-border tw-border-gray-200 tw-rounded tw-p-4"},ce={class:"tw-grid tw-gap-4 tw-grid-cols-3"},we={class:"tw-col-span-3 tw-flex tw-items-center tw-justify-between tw-gap-2"},pe={class:"tw-col-span-2 tw-flex tw-items-center tw-gap-1"},_e={class:"tw-break-all"},fe={class:"tw-col-span-2 tw-flex tw-items-center tw-gap-1"},ge={class:"tw-col-span-2 tw-flex tw-flex-wrap tw-items-center tw-gap-2"},De={key:0,class:"tw-flex tw-items-center tw-gap-1"},xe={class:"tw-col-span-2 tw-flex tw-items-center tw-gap-1"},Ie={class:"tw-col-span-2 tw-space-y-2"},be={key:0,class:"tw-flex tw-items-center tw-gap-1"},he={key:1,class:"tw-flex tw-items-center tw-gap-1"},Se={key:2,class:"tw-flex tw-items-center tw-gap-1"},ye={key:3,class:"tw-flex tw-items-center tw-gap-1"},ss={__name:"HostingOrdersId",async setup(Oe){let $,H;const f=Tt(),A=Et(),x=Gt(),M=Ut(),z=$t(),R=Wt(),L=jt(),p=Bt("emitter");p.on("updateHostingOrdersId",async()=>{await G()});const B=w(!1),g=w(!1),e=w(null),I=w(!0),T=w([]),b=w(j.DAY),h=w(!1),S=w(null),i=C(()=>x.hostingSchemes?.[e.value?.SchemeID]),D=C(()=>M?.serverGroupsList?.Servers?.[e.value?.ServerID]),Y=C(()=>{if(!e.value?.Domain)return"";const n=e.value.Domain;return n.startsWith("http://")||n.startsWith("https://")?n:`https://${n}`});function J(n){if(!n)return F(new Date);const t=new Date,y=new Date(t.getTime()+n*24*60*60*1e3);return F(y)}function K(n){p.emit("open-modal",{component:"StatusHistory",data:{modeID:"HostingOrders",rowID:n}})}function X(){e.value?.ID&&e.value?.ServiceID&&p.emit("open-modal",{component:"OrdersTransfer",data:{ServiceOrderID:e.value?.ID,ServiceID:e.value?.ServiceID}})}function Q(){z.prolongOrder({IsAutoProlong:g.value?0:1,OrderID:e.value?.OrderID})}function Z(){A.push(`/HostingOrders/${e.value?.OrderID}/SchemeChange`),V()}function tt(){A.push(`/HostingOrderPay/${e.value?.OrderID}`)}function et(){R.OrderManageHosting({ServiceOrderID:e.value?.ID,OrderID:e.value?.OrderID,ServiceID:e.value?.ServiceID,XMLHttpRequest:"yes"})}function V(){p.emit("open-modal",{component:"HostingOrderSchemeChange",data:{hostingId:e.value?.ID,hostingScheme:i.value,serverGroupId:i.value?.ServersGroupID,emitEvent:"updateHostingOrdersId"}})}function E(){p.emit("open-modal",{component:"OrderPasswordChange",data:{OrderID:e.value?.ID,ServiceID:e.value?.ServiceID,emitEvent:"updateHostingOrdersId"}})}function st(){p.emit("open-modal",{component:"OrderRestore",data:{OrderID:e.value?.OrderID,CostDay:i.value?.CostDay,DaysRemainded:e.value?.DaysRemainded,emitEvent:"updateHostingOrdersId"}})}Ht(async()=>{await G(),f.path.endsWith("/SchemeChange")&&V()});async function G(){I.value=!0,e.value=await x.fetchHostingOrder(f.params.id);const n=await L.fetchOneOrder(f.params.id);n&&(e.value.Stat=n.Stat,g.value=n.IsAutoProlong,n.DependOrderID&&(S.value=await L.fetchOneOrder(n.DependOrderID)),U(j.DAY)),I.value=!1}async function U(n){h.value=!0,b.value=n,T.value=await R.fetchCharts(e.value.OrderID,b.value),h.value=!1}return[$,H]=At(()=>Promise.all([x.fetchHostingSchemes(),M.fetchServerGroups()])),await $,H(),(n,t)=>{const y=Pt,O=Vt("RouterLink"),ot=Nt,at=Ct,nt=kt,rt=Ot,W=yt,lt=ft,k=St,it=ht,ut=bt,c=xt,dt=It,mt=gt,vt=Dt,ct=_t,wt=pt;return l(),u(N,null,[o(y,{"contract-id":e.value?.ContractID},null,8,["contract-id"]),s("div",zt,[e.value?(l(),u(N,{key:0},[s("div",null,[s("h1",Yt,[s("a",{href:Y.value,target:"_blank"},a(e.value.Domain),9,Jt)]),s("div",Kt,[s("div",Xt,[S.value?(l(),u(N,{key:0},[t[11]||(t[11]=r("Относится к заказу ",-1)),o(O,{to:_(qt)(S.value.Code,e.value.DependOrderID),class:"tw-text-sky-500"},{default:m(()=>[r("#"+a(e.value.DependOrderID),1)]),_:1},8,["to"]),t[12]||(t[12]=r(" /",-1))],64)):v("",!0),r(" Хостинг #"+a(e.value.OrderID),1)]),o(ot,{text:e.value.UserNotice,"order-id":e.value.OrderID,emit:"updateHostingOrdersId",position:"right"},null,8,["text","order-id"])]),e.value.Message?(l(),q(at,{key:0,innerHTML:e.value.Message,class:"tw-mt-4"},null,8,["innerHTML"])):v("",!0),s("div",Qt,[o(O,{class:Mt(["tw-py-2 tw-cursor-pointer -tw-mb-[1px]",{"tw-text-sky-400 tw-border-b-2 tw-border-sky-400":_(f).path.endsWith("/SchemeChange")}]),"active-class":"tw-text-sky-400 tw-border-b-2 tw-border-sky-400",to:`/HostingOrders/${e.value.OrderID}`},{default:m(()=>t[13]||(t[13]=[r(" Хостинг ",-1)])),_:1,__:[13]},8,["class","to"]),o(O,{class:"tw-py-2 tw-cursor-pointer -tw-mb-[1px]","active-class":"tw-text-sky-400 tw-border-b-2 tw-border-sky-400",to:`/HostingOrders/${e.value.OrderID}/Services`},{default:m(()=>t[14]||(t[14]=[r(" Услуги ",-1)])),_:1,__:[14]},8,["to"])])]),o(nt,{partition:"Header:/HostingOrders"}),s("div",Zt,[s("div",te,[s("div",ee,[s("div",se,[s("div",oe,a(i.value?.Name),1),o(rt,{status:e.value.StatusID,"status-table":"HostingOrders",onClick:t[0]||(t[0]=d=>K(e.value.ID)),class:"tw-cursor-pointer"},null,8,["status"])]),o(lt,null,{default:m(()=>[o(W,{onClick:t[1]||(t[1]=d=>st())},{default:m(()=>t[15]||(t[15]=[r("Просмотреть учет заказа",-1)])),_:1,__:[15]}),o(W,{onClick:t[2]||(t[2]=d=>E())},{default:m(()=>t[16]||(t[16]=[r("Сменить пароль",-1)])),_:1,__:[16]})]),_:1})]),s("div",ae,[i.value?.SchemeParams?.limit_webdomains?.Value?(l(),u("div",ne,a(_(P)(i.value?.SchemeParams?.limit_webdomains)),1)):v("",!0),i.value?.SchemeParams?.limit_quota?.Value?(l(),u("div",re,a(_(P)(i.value?.SchemeParams?.limit_quota)),1)):v("",!0),i.value?.SchemeParams?.limit_emails?.Value?(l(),u("div",le,a(_(P)(i.value?.SchemeParams?.limit_emails)),1)):v("",!0)]),s("div",ie,[s("div",null,a(_(Ft)(i.value?.CostMonth))+" в месяц",1),s("div",null,"Дней осталось "+a(e.value.DaysRemainded||0),1),s("div",null,"Дата окончания "+a(J(e.value.DaysRemainded)),1)]),s("div",ue,[o(k,{onClick:t[3]||(t[3]=d=>tt()),class:"tw-w-30 sm:tw-w-40"},{default:m(()=>[r(a(e.value.StatusID==="Waiting"?"Оплатить":"Продлить"),1)]),_:1}),s("label",de,[Rt(s("input",{type:"checkbox","onUpdate:modelValue":t[4]||(t[4]=d=>g.value=d),onInput:t[5]||(t[5]=d=>Q())},null,544),[[Lt,g.value]]),t[17]||(t[17]=s("span",{class:"btn-switch__text tw-text-xs sm:tw-text-sm"},"Автопродление",-1)),t[18]||(t[18]=s("span",{class:"btn-switch__toggle"},null,-1))])]),s("div",me,[o(k,{onClick:t[6]||(t[6]=d=>Z()),class:"tw-w-36 sm:tw-w-40"},{default:m(()=>t[19]||(t[19]=[r("Изменить тариф",-1)])),_:1,__:[19]}),o(ut,{onClick:t[7]||(t[7]=d=>X())},{default:m(()=>[o(it),t[20]||(t[20]=s("div",null,"Передать на другой аккаунт",-1))]),_:1,__:[20]})])]),s("div",ve,[s("div",ce,[s("div",we,[t[22]||(t[22]=s("div",{class:"tw-text-2xl"},"Панель управления",-1)),o(k,{onClick:t[8]||(t[8]=d=>et()),type:"small"},{default:m(()=>t[21]||(t[21]=[r("Вход",-1)])),_:1,__:[21]})]),t[24]||(t[24]=s("div",{class:"tw-flex tw-items-center tw-font-bold"},"Адрес",-1)),s("div",pe,[s("div",_e,a(`https://${D.value?.Address}/manager`),1),o(c,{value:`https://${D.value?.Address}/manager`},null,8,["value"])]),t[25]||(t[25]=s("div",{class:"tw-flex tw-items-center tw-font-bold"},"Логин",-1)),s("div",fe,[r(a(e.value.Login)+" ",1),o(c,{value:e.value.Login},null,8,["value"])]),t[26]||(t[26]=s("div",{class:"tw-flex tw-items-center tw-font-bold"},"Пароль",-1)),s("div",ge,[B.value?(l(),u("div",De,a(e.value.Password),1)):(l(),u("button",{key:1,class:"btn btn--border btn--md tw-h-8 tw-gap-1",onClick:t[9]||(t[9]=d=>B.value=!0)},[o(dt,{class:"tw-size-5"}),t[23]||(t[23]=r(" Показать ",-1))])),s("button",{class:"btn btn--border btn--md tw-h-8",onClick:t[10]||(t[10]=d=>E())}," Сменить пароль "),o(c,{value:e.value.Password},null,8,["value"])]),t[27]||(t[27]=s("div",{class:"tw-flex tw-items-center tw-font-bold"},"FTP, POP3, SMTP, IMAP",-1)),s("div",xe,[r(a(D.value?.Address)+" ",1),o(c,{value:D.value?.Address},null,8,["value"])]),t[28]||(t[28]=s("div",{class:"tw-flex tw-font-bold"},"Именные сервера",-1)),s("div",Ie,[e.value.Ns1Name?(l(),u("div",be,[r(a(e.value.Ns1Name),1),o(c,{value:e.value.Ns1Name},null,8,["value"])])):v("",!0),e.value.Ns2Name?(l(),u("div",he,[r(a(e.value.Ns2Name),1),o(c,{value:e.value.Ns2Name},null,8,["value"])])):v("",!0),e.value.Ns3Name?(l(),u("div",Se,[r(a(e.value.Ns3Name),1),o(c,{value:e.value.Ns3Name},null,8,["value"])])):v("",!0),e.value.Ns4Name?(l(),u("div",ye,[r(a(e.value.Ns4Name),1),o(c,{value:e.value.Ns4Name},null,8,["value"])])):v("",!0)])])]),o(mt,{order:e.value},null,8,["order"]),o(vt,{data:T.value,period:b.value,loading:h.value,onUpdate:U},null,8,["data","period","loading"])]),o(ct,{"params-list":i.value?.SchemeParams,label:"Общая информация","main-param":"InternalName"},null,8,["params-list"])],64)):I.value?v("",!0):(l(),q(wt,{key:1,label:"Заказ не найден"}))])],64)}}};export{ss as default};
