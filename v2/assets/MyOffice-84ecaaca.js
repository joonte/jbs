import{j as V,o as x,c as $,a as s,b as e,w as c,d as l,t as v,p as B,l as N,_ as T,f as P,R as j,g as f}from"./index-ed1f28f8.js";import{u as A}from"./postings-71aa09ae.js";import{u as H}from"./contracts-cedf6a91.js";import{I as S,a as g,b as D,c as I}from"./IconWeb-560f5220.js";import{S as k}from"./StatusBadge-2304b071.js";import{C as M}from"./bootstrap-vue-next.es-79226723.js";import{_ as R}from"./ButtonDefault-a8aacc82.js";import{_ as L}from"./ClausesKeeper-9aa8ead7.js";import"./IconClose-a1e58263.js";const E=[{key:"ID",label:"Заказ",variant:"td-gray td-order"},{key:"ContractID",label:"Договор",variant:"td-blue"},{key:"ServiceID",label:"Услуга",variant:"td-gray td-order"},{key:"StatusID",label:"Статус",sortable:!0,variant:"td-gray td-order"},{key:"controls",label:"",variant:"td-controls"}],U={Deleted:{id:1,label:"Удален",color:"#DF5747",background:"#DF57471A"},Suspended:{id:2,label:"Заблокирован",color:"#DF5747",background:"#DF57471A"},OnService:{id:3,label:"Сервер на обслуживании",color:"#FFC107",background:"rgba(255,193,7,0.1)"}},i=o=>(B("data-v-9f64eaff"),o=o(),N(),o),W={class:"section"},q={class:"container"},z=i(()=>s("div",{class:"section-header"},[s("h1",{class:"section-title"},"Дашбоард")],-1)),G={class:"list-grid-three-col"},J={class:"list-col"},K={class:"list-item"},Q=i(()=>s("div",{class:"list-item__row"},[s("div",{class:"list-item__title"},"Услуги")],-1)),X={class:"list-col"},Y={class:"list-item"},Z=i(()=>s("div",{class:"list-item__row"},[s("div",{class:"list-item__title"},"Мой офис")],-1)),ss={class:"list-item__row icon-row"},ts={class:"list-col"},es={class:"list-item"},os=i(()=>s("div",{class:"list-item__row"},[s("div",{class:"list-item__title"},"Поддержка")],-1)),as={class:"list-item__row icon-row"},cs=i(()=>s("div",{class:"section-header"},[s("h2",{class:"sub-section-title"},"Требует внимания")],-1)),ns=i(()=>s("span",{class:"td-mobile"},"Заказ",-1)),rs={class:"d-block"},is=i(()=>s("span",{class:"td-mobile"},"Договор",-1)),ls=i(()=>s("span",{class:"td-mobile"},"Услуга",-1)),ds={class:"d-block"},_s=i(()=>s("span",{class:"td-mobile"},"Статус",-1));function us(o,n,_,d,b,h){const p=L,m=S,a=V("router-link"),t=g,y=D,C=I,w=R,O=k,F=M;return x(),$("div",W,[s("div",q,[z,e(p,{partition:"Header:/Home"}),s("div",G,[s("div",J,[s("div",K,[Q,e(a,{class:"list-item__row icon-row",to:"/HostingOrders"},{default:c(()=>[e(m),l("Заказать хостинг")]),_:1}),e(a,{class:"list-item__row icon-row",to:"/DomainOrders"},{default:c(()=>[e(t),l("Заказать домен")]),_:1}),e(a,{class:"list-item__row icon-row",to:"/DSOrders"},{default:c(()=>[e(y),l("Заказать выделенный сервер")]),_:1}),e(a,{class:"list-item__row icon-row",to:"/VPSOrders"},{default:c(()=>[e(C),l("Заказать VPS/VDS сервер")]),_:1})])]),s("div",X,[s("div",Y,[s("div",null,[Z,e(a,{class:"list-item__row icon-row",to:"/Contracts"},{default:c(()=>[l("Мои договора")]),_:1})]),s("div",ss,[e(w,{label:"Создать договор",onClick:n[0]||(n[0]=r=>o.$router.push("/ContractMake"))})])])]),s("div",ts,[s("div",es,[s("div",null,[os,e(a,{class:"list-item__row icon-row",to:"/Tickets"},{default:c(()=>[l("Тикеты")]),_:1}),e(a,{class:"list-item__row icon-row",to:"/Contacts"},{default:c(()=>[l("Контакты")]),_:1})]),s("div",as,[e(w,{label:"Создать тикет",onClick:n[1]||(n[1]=r=>o.$router.push("/NewTicket"))})])])])]),cs,e(F,{class:"basic-table",items:d.getOrders,fields:d.dashboardTableFields,"show-empty":!0,"per-page":5,page:1,"empty-text":"Пока не требуется никаких действий","empty-filtered-text":"Пока не требуется никаких действий"},{"cell(ID)":c(r=>[ns,s("span",rs,v(r.value),1)]),"cell(ContractID)":c(r=>{var u;return[is,s("span",null,v((u=d.getContracts[r.value])==null?void 0:u.Customer),1)]}),"cell(ServiceID)":c(r=>{var u;return[ls,s("span",ds,v((u=d.getServices[r.value])==null?void 0:u.Name),1)]}),"cell(StatusID)":c(r=>[_s,e(O,{status:r.value,"status-table":"Orders"},null,8,["status"])]),_:1},8,["items","fields"])])])}const ps={components:{IconServer:S,IconDedicatedServers:D,IconWeb:g,IconVPS:I,StatusBadge:k},async setup(){const o=P(),n=A(),_=H(),d=j("emitter"),b=f(()=>{var a;return(a=Object.keys(o==null?void 0:o.userOrders).map(t=>o==null?void 0:o.userOrders[t]))==null?void 0:a.reverse().filter(t=>(t==null?void 0:t.StatusID)==="Deleted"||(t==null?void 0:t.StatusID)==="Suspended"||(t==null?void 0:t.StatusID)==="OnService"||(t==null?void 0:t.DaysRemainded)>0&&(t==null?void 0:t.DaysRemainded)<14)}),h=f(()=>_==null?void 0:_.contractsList),p=f(()=>n==null?void 0:n.servicesList);function m(a){d.emit("open-modal",{component:"DeleteItem",data:{id:a,message:`Вы действительно хотите удалить заказ #${a}?`,tableID:"Orders"}})}return await o.fetchUserOrders(),await n.fetchServices(),await _.fetchContracts(),{getOrders:b,getContracts:h,getServices:p,dangerStatuses:U,dashboardTableFields:E,deleteItem:m}}},Is=T(ps,[["render",us],["__scopeId","data-v-9f64eaff"]]);export{Is as default};
