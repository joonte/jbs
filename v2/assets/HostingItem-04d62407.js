import{j as E,o as b,c as w,a as s,b as i,t as g,Z as W,ae as Z,d as f,F as V,x as q,n as N,k as G,w as c,_ as J,e as K,S as Q,g as X}from"./index-5e313302.js";import{_ as A}from"./IconDots-f060bcd6.js";import{_ as R}from"./IconCard-67ad5f17.js";import{S as F}from"./StatusBadge-98696de1.js";import{h as Y}from"./hostStatuses-94d00f20.js";import{_ as $}from"./HelperComponent-21d9fd2e.js";import"./hosting-da227957.js";import{f as z}from"./useTimeFunction-8602dd60.js";import{z as tt,k as et,d as nt}from"./bootstrap-vue-next.es-a19a8b41.js";import{_ as at}from"./OrderIDBadge-9697206f.js";const ot={class:"hosting-item__row"},st=["href"],it={class:"hosting-domains__wrapper"},rt={class:"hosting-domains"},dt={class:"hosting-domains__items"},lt=["innerHTML"],ct={class:"hosting-item__row"},mt={class:"hosting-item__person"},_t={class:"hosting-item__row hosting-flex"},ut={class:"hosting-item__list"},Dt={class:"hosting-status__info"},ft={class:"hosting-status__date"},gt={class:"hosting-item__controls"},ht={class:"btn btn--dots"};function It(d,a,e,r,P,p){var n,l,h,u,m,I,S,L,M,B,j,T,U;const k=at,H=E("Helper"),O=F,y=R,C=A,v=E("router-link"),_=tt,x=et,t=nt;return b(),w("div",{class:N(["hosting-item",{"hosting-item_deleted":((n=e.itemData)==null?void 0:n.StatusID)==="Deleted"}])},[s("div",ot,[i(k,{orderID:(l=e.itemData)==null?void 0:l.OrderID,onClick:a[0]||(a[0]=o=>{var D;return r.toItem((D=e.itemData)==null?void 0:D.OrderID)})},null,8,["orderID"]),s("a",{class:"hosting-item__name",href:r.fullDomainUrl,target:"_blank"},g((h=e.itemData)==null?void 0:h.Domain),9,st),s("div",it,[W(s("div",rt,[f("+"+g(r.showDNSs((u=e.itemData)==null?void 0:u.Parked).count),1),s("div",dt,[s("div",{class:"hosting-domains__item",innerHTML:r.showDNSs((m=e.itemData)==null?void 0:m.Parked).html},null,8,lt)])],512),[[Z,((I=e.itemData)==null?void 0:I.Parked)&&e.itemData.Parked.split(",").length>1]])])]),s("div",ct,[s("div",mt,g(e.userName),1),i(H,{"user-notice":(S=e.itemData)==null?void 0:S.UserNotice,id:(L=e.itemData)==null?void 0:L.OrderID,position:e.isLast?"bottom":"top",emit:"updateHostingList"},null,8,["user-notice","id","position"])]),s("div",_t,[s("ul",ut,[(b(!0),w(V,null,q(e.params,o=>(b(),w(V,null,[o.text?(b(),w("li",{key:0,class:N({bold:o==null?void 0:o.bold})},g(o.text),3)):G("",!0)],64))),256)),s("div",{class:"btn btn--md btn--bold btn-manage",onClick:a[1]||(a[1]=o=>r.orderManage())},"Управлять заказом")]),s("div",Dt,[s("div",{class:N(["hosting-item__date",{danger:Number((M=e.itemData)==null?void 0:M.DaysRemainded)<14}])},g(r.calculateExpirationDate((B=e.itemData)==null?void 0:B.DaysRemainded))+" • "+g(((j=e.itemData)==null?void 0:j.DaysRemainded)||0)+" дн.",3),i(O,{class:"status-badge",status:(T=e.itemData)==null?void 0:T.StatusID,"status-table":"HostingOrders",onClick:a[2]||(a[2]=o=>{var D;return r.openHistoryStatuses((D=e.itemData)==null?void 0:D.ID)})},null,8,["status"]),s("div",ft,g(r.calculateDaysSinceStatusUpdate((U=e.itemData)==null?void 0:U.StatusDate)),1)])]),s("div",gt,[s("div",{class:"btn btn--md btn--bold",onClick:a[3]||(a[3]=o=>{var D;return d.$router.push(`/HostingOrderPay/${(D=e.itemData)==null?void 0:D.OrderID}`)})},[i(y),f("Оплатить")]),i(t,{class:"dropdown-dots",right:""},{"button-content":c(()=>[s("div",ht,[i(C)])]),default:c(()=>[i(_,null,{default:c(()=>[i(v,{to:e.infoLink},{default:c(()=>[f("Дополнительная информация")]),_:1},8,["to"])]),_:1}),i(_,null,{default:c(()=>{var o;return[i(v,{to:`/HostingOrderPay/${(o=e.itemData)==null?void 0:o.OrderID}`},{default:c(()=>[f("Продлить")]),_:1},8,["to"])]}),_:1}),i(_,null,{default:c(()=>{var o;return[i(v,{to:`/HostingOrders/${(o=e.itemData)==null?void 0:o.OrderID}/SchemeChange`},{default:c(()=>[f("Изменить тариф")]),_:1},8,["to"])]}),_:1}),i(_,{onClick:a[4]||(a[4]=o=>r.transferAccount())},{default:c(()=>[f("Передать на другой аккаунт")]),_:1}),i(_,{onClick:a[5]||(a[5]=o=>r.openPasswordChange())},{default:c(()=>[f("Сменить пароль")]),_:1}),i(x),i(_,{class:"color-red",onClick:a[6]||(a[6]=o=>r.deleteHostingItem())},{default:c(()=>[f("Удалить")]),_:1})]),_:1})])],2)}const vt={components:{IconDots:A,IconCard:R,Helper:$,StatusBadge:F},props:{params:{type:Array,default:()=>[]},itemData:{type:Object,default:()=>{}},userName:{type:String,default:""},infoLink:{type:String,default:"/"},isLast:{type:Boolean,default:!1}},emits:["delete","transfer","manage"],setup(d,{emit:a}){const e=K(),r=Q("emitter"),P=X(()=>{var n,l;if(!((n=d.itemData)!=null&&n.Domain))return"";const t=(l=d.itemData)==null?void 0:l.Domain;return t.startsWith("http://")||t.startsWith("https://")?t:`https://${t}`});function p(t){e.push(`/HostingOrders/${t}`)}function k(t){if(!t)return z(new Date);const n=new Date,l=new Date(n.getTime()+t*24*60*60*1e3);return z(l)}function H(t){r.emit("open-modal",{component:"StatusHistory",data:{modeID:"HostingOrders",rowID:t}})}function O(){var t,n;r.emit("open-modal",{component:"OrderPasswordChange",data:{OrderID:(t=d.itemData)==null?void 0:t.ID,ServiceID:(n=d.itemData)==null?void 0:n.ServiceID,emitEvent:"updateHostingIDPage"}})}function y(){var t;a("delete",(t=d.itemData)==null?void 0:t.ID)}function C(t){if(t===null)return{html:"",count:0};let n=t.includes(",")?t.split(","):[t];n=n.filter(u=>{var m;return u!==((m=d.itemData)==null?void 0:m.Domain)});const l=n.join("<br>"),h=n.length;return{html:l,count:h}}function v(){var t,n;a("transfer",{ServiceOrderID:(t=d.itemData)==null?void 0:t.ID,ServiceID:(n=d.itemData)==null?void 0:n.ServiceID})}function _(){var t,n,l;a("manage",{ServiceOrderID:(t=d.itemData)==null?void 0:t.ID,ServiceID:(n=d.itemData)==null?void 0:n.ServiceID,OrderID:(l=d.itemData)==null?void 0:l.OrderID})}function x(t){if(!t)return"";const n=new Date(parseInt(t)*1e3),h=new Date-n,u=Math.floor(h/1e3),m=Math.floor(u/60),I=Math.floor(m/60),S=Math.floor(I/24);return u<60?`${u} сек. от статуса`:m<60?`${m} мин. от статуса`:I<24?`${I} ч. от статуса`:`${S} дн. от статуса`}return{hostStatuses:Y,deleteHostingItem:y,transferAccount:v,orderManage:_,calculateExpirationDate:k,fullDomainUrl:P,showDNSs:C,toItem:p,openHistoryStatuses:H,calculateDaysSinceStatusUpdate:x,openPasswordChange:O}}},Pt=J(vt,[["render",It],["__scopeId","data-v-fadfeddc"]]);export{Pt as H};
