import{o as w,c as B,b,a as e,Z as f,an as P,F as A,x as M,af as y,t as N,w as R,d as Z,p as K,l as W,_ as q,e as z,r as h,g as x,i as J}from"./index-145d9cde.js";import{u as Q}from"./domain-3173c1db.js";import{u as X}from"./contracts-009c925b.js";import{u as Y}from"./hosting-57e879dc.js";import{u as $}from"./resetServer-000da2ec.js";import{D as E}from"./DomainCheckBlock-a97d3db8.js";import{_ as G}from"./BlockSelectContract-dee687ab.js";import{B as j}from"./BlockBalanceAgreement-650ad03e.js";import{_ as ee}from"./ButtonDefault-6a3a5e1e.js";import{_ as oe}from"./ClausesKeeper-d3875457.js";import"./multiselect-a2d623ca.js";import"./EmptyStateBlock-a6b81e83.js";import"./bootstrap-vue-next.es-759b1c9f.js";import"./IconArrow-f2b12a71.js";import"./IconClose-f461656c.js";const l=n=>(K("data-v-5a5cd554"),n=n(),W(),n),se={class:"domain-scheme"},te={class:"section"},ae={class:"container"},le=l(()=>e("div",{class:"section-header"},[e("h1",{class:"section-title"},"Заказ доменного имени")],-1)),ne={class:"section"},ce={class:"container"},ie=l(()=>e("div",{class:"section-header"},[e("h2",{class:"section-block_title"},"Заказ хостинга"),e("div",{class:"section-label"},"Если домен будет использоваться совместно с заказом хостинга, выберите нужный из существующего списка")],-1)),re={class:"form"},de={class:"form-input_border"},_e=l(()=>e("span",{class:"form-input_border-content"},[e("span",{class:"form-input_border-mark"}),e("span",{class:"form-input_border-info"},[e("span",{class:"form-input_border-address"},"Не использовать")])],-1)),me={class:"form-input_border"},ue=["value"],fe={class:"form-input_border-content"},ve=l(()=>e("span",{class:"form-input_border-mark"},null,-1)),pe={class:"form-input_border-info"},be={class:"form-input_border-address"},Ne={class:"form-input_border-row"},he={class:"form-input_border-name"},De={class:"form-input_border-domain"},Se={class:"section"},ke={class:"container"},Ie=l(()=>e("div",{class:"section-header"},[e("div",{class:"section-label"},"Для успешной регистрации, домен должен быть настроен на используемых именных серверах. Для этого в панели управления хостингом необходимо добавить домен, как дополнительный или паркованный.")],-1)),ye={class:"form form-grid-columns"},xe={class:"form-col"},Ce=l(()=>e("div",{class:"form-col__title"},"Первичный сервер имен",-1)),Oe={class:"form-field"},we=l(()=>e("div",{class:"form-field__label"},"Доменный адрес",-1)),Be=l(()=>e("label",{class:"form-field"},[e("div",{class:"form-field__label"},"IP адрес"),e("input",{type:"text",disabled:""})],-1)),Ve={class:"form-col"},ge=l(()=>e("div",{class:"form-col__title"},"Вторичный сервер имен",-1)),Ue={class:"form-field"},Le=l(()=>e("div",{class:"form-field__label"},"Доменный адрес",-1)),He=l(()=>e("label",{class:"form-field"},[e("div",{class:"form-field__label"},"IP адрес"),e("input",{type:"text",disabled:""})],-1)),Pe={class:"form-col"},Ae=l(()=>e("div",{class:"form-col__title"},"Дополнительный сервер имен",-1)),Ee={class:"form-field"},Ge=l(()=>e("div",{class:"form-field__label"},"Доменный адрес",-1)),je=l(()=>e("label",{class:"form-field"},[e("div",{class:"form-field__label"},"IP адрес"),e("input",{type:"text",disabled:""})],-1)),Te={class:"form-col"},Fe=l(()=>e("div",{class:"form-col__title"},"Расширенный сервер имен",-1)),Me={class:"form-field"},Re=l(()=>e("div",{class:"form-field__label"},"Доменный адрес",-1)),Ze=l(()=>e("label",{class:"form-field"},[e("div",{class:"form-field__label"},"IP адрес"),e("input",{type:"text",disabled:""})],-1)),Ke={class:"section"},We={class:"container"},qe={class:"total-block"},ze={class:"total-block__row total-block__row--big"},Je=l(()=>e("div",{class:"total-block__col"},"Итого за 12 месяцев",-1)),Qe={class:"total-block__col"};function Xe(n,a,d,o,C,D){var S,p,k;const r=j,v=oe,u=G,i=E,_=ee;return w(),B(A,null,[b(r),e("div",se,[e("div",te,[e("div",ae,[le,b(v)])]),b(u,{title:"Договор",modelValue:o.contractSelect,"onUpdate:modelValue":a[0]||(a[0]=s=>o.contractSelect=s)},null,8,["modelValue"]),b(i,{"domain-list":o.getDomains,onSelect:o.selectDomain},null,8,["domain-list","onSelect"]),e("div",ne,[e("div",ce,[ie,e("div",re,[e("label",de,[f(e("input",{type:"radio",name:"hosting",value:null,"onUpdate:modelValue":a[1]||(a[1]=s=>o.hostingSelect=s)},null,512),[[P,o.hostingSelect]]),_e]),(w(!0),B(A,null,M(o.getHostingOrders,s=>{var I,t;return w(),B("label",me,[f(e("input",{type:"radio",name:"hosting",value:s==null?void 0:s.ID,"onUpdate:modelValue":a[2]||(a[2]=c=>o.hostingSelect=c)},null,8,ue),[[P,o.hostingSelect]]),e("span",fe,[ve,e("span",pe,[e("span",be,N(s==null?void 0:s.Login)+" ("+N((I=o.getServerGroup[s==null?void 0:s.ServerID])==null?void 0:I.Address)+")",1),e("span",Ne,[e("span",he,N((t=o.getContracts[s==null?void 0:s.ContractID])==null?void 0:t.Customer),1),e("span",De,N(s==null?void 0:s.Domain),1)])])])])}),256))])])]),e("div",Se,[e("div",ke,[Ie,e("div",ye,[e("div",xe,[Ce,e("label",Oe,[we,f(e("input",{type:"text",placeholder:"dns0.host-food.ru","onUpdate:modelValue":a[3]||(a[3]=s=>o.formData.Ns1Name=s)},null,512),[[y,o.formData.Ns1Name]])]),Be]),e("div",Ve,[ge,e("label",Ue,[Le,f(e("input",{type:"text",placeholder:"dns0.host-food.ru","onUpdate:modelValue":a[4]||(a[4]=s=>o.formData.Ns2Name=s)},null,512),[[y,o.formData.Ns2Name]])]),He]),e("div",Pe,[Ae,e("label",Ee,[Ge,f(e("input",{type:"text","onUpdate:modelValue":a[5]||(a[5]=s=>o.formData.Ns3Name=s)},null,512),[[y,o.formData.Ns3Name]])]),je]),e("div",Te,[Fe,e("label",Me,[Re,f(e("input",{type:"text","onUpdate:modelValue":a[6]||(a[6]=s=>o.formData.Ns4Name=s)},null,512),[[y,o.formData.Ns4Name]])]),Ze])])])]),e("div",Ke,[e("div",We,[e("div",qe,[e("div",ze,[Je,e("div",Qe,N(((S=o.domain)==null?void 0:S.CostOrder)||"0")+" ₽",1)])]),b(_,{class:"btn--wide",label:((p=o.getContracts[o.contractSelect])==null?void 0:p.Balance)>((k=o.domain)==null?void 0:k.CostOrder)?"Оплатить c баланса договора":"Добавить в корзину",onClick:a[7]||(a[7]=s=>o.createDomain()),"is-loading":o.isLoading,disabled:o.domain===null},{default:R(()=>[Z("Добавить в корзину")]),_:1},8,["label","is-loading","disabled"])])])])],64)}const Ye={components:{BlockSelectContract:G,DomainCheckBlock:E,BlockBalanceAgreement:j},async setup(){const n=Q(),a=X(),d=Y(),o=$(),C=z(),D=h(null),r=h(null),v=h(null),u=h(!1),i=h({Ns1Name:"dns0.host-food.ru",Ns2Name:"dns1.host-food.ru",Ns3Name:null,Ns4Name:null}),_=x(()=>a.contractsList),S=x(()=>{var t;return(t=Object.keys(n==null?void 0:n.domainSchemes))==null?void 0:t.map(c=>{var m;return{...n==null?void 0:n.domainSchemes[c],value:(m=n==null?void 0:n.domainSchemes[c])==null?void 0:m.ID}})}),p=x(()=>Object.keys(d==null?void 0:d.hostingList).map(t=>d==null?void 0:d.hostingList[t])),k=x(()=>{var t;return(t=o==null?void 0:o.serverGroupsList)==null?void 0:t.Servers});J(()=>v.value,t=>{const c=p.value.find(m=>m.ID===t);c?(i.value.Ns1Name=c.Ns1Name,i.value.Ns2Name=c.Ns2Name,i.value.Ns3Name=c.Ns3Name,i.value.Ns4Name=c.Ns4Name):(i.value.Ns1Name="dns0.host-food.ru",i.value.Ns2Name="dns1.host-food.ru",i.value.Ns3Name=null,i.value.Ns4Name=null)});function s(){var t,c,m,V,g,U,L;u.value=!0,n.DomainOrder({ContractID:D.value,Domain:`${(t=r.value)==null?void 0:t.line}${(c=r.value)!=null&&c.line&&((m=r.value)!=null&&m.Name)?"."+((V=r.value)==null?void 0:V.Name):""}`,DomainName:(g=r.value)==null?void 0:g.line,DomainSchemeID:(U=r.value)==null?void 0:U.value,DomainZone:(L=r.value)==null?void 0:L.Name,IsPrivateWhoIs:"yes",HostingOrderID:v.value,...i.value}).then(({result:T,info:O,error:$e})=>{T==="SUCCESS"?n.DomainOrderPay({DomainOrderID:O==null?void 0:O.DomainOrderID}).then(F=>{let{result:H,error:eo}=F;H==="SUCCESS"?C.push("/DomainOrders"):H==="BASKET"&&C.push("/Basket"),u.value=!0}):u.value=!1})}function I(t){r.value=t}return await n.fetchDomainSchemes(),await a.fetchContracts().then(()=>{var t;_.value&&(D.value=(t=Object.keys(_==null?void 0:_.value))==null?void 0:t[0])}),await d.fetchHostingOrders(),await o.fetchServerGroups(),{contractSelect:D,selectDomain:I,domain:r,hostingSelect:v,getDomains:S,getContracts:_,getHostingOrders:p,getServerGroup:k,formData:i,isLoading:u,createDomain:s}}},bo=q(Ye,[["render",Xe],["__scopeId","data-v-5a5cd554"]]);export{bo as default};
