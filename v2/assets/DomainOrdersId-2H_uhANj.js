import{_ as z}from"./EmptyStateBlock-D6U_EDq6.js";import{_ as I}from"./ButtonDefault-CghIUDY0.js";import{_ as G}from"./StatusBadge-B65ys1I-.js";import{_ as J}from"./ServicesContractBalanceBlock-C7WdqITd.js";import{_ as X}from"./ClausesKeeper-DVJgfLR3.js";import{_ as Y}from"./MessageInfo-AK7GfiHd.js";import{_ as Z}from"./BlockBalanceAgreement-2iQbaweR.js";import{u as tt,Q as et,r as m,f as x,H as st,g as ot,c as v,b as n,a as s,C as w,h as d,F as y,t as a,w as h,E as at,I as nt,K as it,x as rt,d as lt,o as r,e as k}from"./index-CipWZKo_.js";import{u as ut}from"./contracts-CILh9uSu.js";import{f as D,s as mt}from"./time-DenPiOX5.js";import{_ as dt}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./IconProfile-CLsn7h6L.js";import"./IconCard-jY7IitfY.js";import"./IconClose-ChC2G6HM.js";const _t={class:"tw-px-4 md:tw-px-8 tw-mb-6"},ct={class:"tw-text-xl sm:tw-text-4xl"},vt=["href"],pt={class:"tw-xs tw-text-gray-500 tw-mt-2"},wt={class:"tw-flex tw-items-center tw-gap-8 tw-border-b tw-border-gray-200 tw-mt-4 tw-whitespace-nowrap tw-mb-6"},Dt={class:"tw-grid tw-grid-cols-1 lg:tw-grid-cols-2 tw-gap-4"},ft={class:"tw-border tw-rounded tw-border-gray-200 tw-p-4"},gt={class:"list-item__row tw-gap-2"},bt={class:"list-item__title"},It={class:"list-item__status"},xt={class:"list-item__row"},yt={class:"list-item__ul"},ht={key:0},kt={class:"list-item__row list-item__row--column"},St={key:0,class:"list-item__text"},Nt={class:"list-item__text"},Ot={class:"list-item__text"},Ct={class:"tw-flex tw-flex-wrap tw-gap-4 tw-mt-4"},Pt={class:"btn btn--border btn--switch tw-ml-0 tw-min-w-52"},$t={class:"tw-border tw-rounded tw-border-gray-200 tw-p-4"},Bt={class:"list-item__row list-item__row--nowrap"},Rt={class:"list-item__row list-item__row--table"},Tt={class:"list-item__item"},Et={class:"list-item__row list-item__row--table"},Mt={class:"list-item__item"},Ft={class:"tw-border tw-rounded tw-border-gray-200 tw-p-4"},Wt={class:"list-item__row list-item__row--table"},Vt={class:"btn btn--switch"},At=["checked"],Ht={class:"list-item__row list-item__row--table"},Lt={class:"list-item__item"},Ut={__name:"DomainOrdersId",setup(jt){const S=ot(),N=tt(),p=et(),O=ut(),C=lt(),l=rt("emitter"),_=m(null);m(!1);const P=m({}),t=m(null),f=m(!0),u=x(()=>p.domainSchemes[t.value?.SchemeID]),$=x(()=>{const o=t.value?.Domain;return o?o.startsWith("http://")||o.startsWith("https://")?o:`https://${o}`:""});function B(){l.emit("open-modal",{component:"DomainsEdit",data:t.value})}function R(){if(!t.value?.ExpirationDate)return!1;const o=parseInt(t.value.ExpirationDate,10);return Math.floor(Date.now()/1e3)>=o}function T(){const o=R(),e=Number(u.value.DaysBeforeTransfer)??0;return(Number(t.value?.DaysRemainded)??0)>e||o&&t.value?.IsPayed}function E(o){l.emit("open-modal",{component:"StatusHistory",data:{modeID:"DomainOrders",rowID:o}})}function M(o){if(!o)return D(new Date);const e=new Date,c=new Date(e.getTime()+o*24*60*60*1e3);return D(c)}function F(o){return o?D(mt(o)):""}function W(){try{const o={DomainOrderID:t.value.ID,Domain:t.value.Domain};l.emit("open-modal",{component:"DomainSelectOwner",data:o})}catch(o){console.error(o)}}function V(){l.emit("open-modal",{component:"OrdersTransfer",data:{ServiceOrderID:t.value?.ID,ServiceID:t.value?.ServiceID}})}function A(){N.prolongOrder({IsAutoProlong:_.value?0:1,OrderID:t.value?.OrderID})}function H(){T()===!0?l.emit("open-modal",{component:"ExclusionWindow",data:{msg:"Заказ домена не может быть оплачен"}}):C.push(`/DomainOrderPay/${t.value?.OrderID}`)}return st(async()=>{P.value={Ns1Name:t.value?.Ns1Name,Ns2Name:t.value?.Ns2Name},await p.fetchDomainSchemes(),await O.fetchProfiles(),t.value=await p.fetchDomainOrder(S.params.id),_.value=t.value.IsAutoProlong,f.value=!1}),(o,e)=>{const c=Z,L=Y,g=at("RouterLink"),U=X,b=I,j=J,K=G,Q=I,q=z;return r(),v(y,null,[n(c),s("div",_t,[t.value?(r(),v(y,{key:0},[s("h1",ct,[s("a",{href:$.value,target:"_blank"},a(t.value.Domain),9,vt)]),s("div",pt,"Домен #"+a(t.value?.OrderID),1),t.value.Message?(r(),w(L,{key:0,innerHTML:t.value.Message,class:"tw-mt-4"},null,8,["innerHTML"])):d("",!0),s("div",wt,[n(g,{class:"tw-py-2 tw-cursor-pointer -tw-mb-[1px]","active-class":"tw-text-sky-400 tw-border-b-2 tw-border-sky-400",to:`/DomainOrders/${t.value?.OrderID}`},{default:h(()=>e[7]||(e[7]=[k(" Домен ",-1)])),_:1,__:[7]},8,["to"]),n(g,{class:"tw-py-2 tw-cursor-pointer -tw-mb-[1px]","active-class":"tw-text-sky-400 tw-border-b-2 tw-border-sky-400",to:`/DomainServices/${t.value?.OrderID}`},{default:h(()=>e[8]||(e[8]=[k(" Услуги ",-1)])),_:1,__:[8]},8,["to"])]),n(U),t.value.StatusID==="Waiting"||t.value.StatusID==="ClaimForRegister"||t.value.StatusID==="ForContractRegister"||t.value.StatusID==="ForRegister"||t.value.StatusID==="ForTransfer"?(r(),w(b,{key:1,class:"btn-mn__bot",label:"Определить владельца",onClick:e[0]||(e[0]=i=>W())})):d("",!0),s("div",Dt,[n(j,{"contract-id":t.value.ContractID,onTransfer:e[1]||(e[1]=i=>V())},null,8,["contract-id"]),s("div",ft,[s("div",gt,[s("div",bt,a(t.value.Domain),1),s("div",It,[n(K,{status:t.value.StatusID,"status-table":"DomainOrders",onClick:e[2]||(e[2]=i=>E(t.value.ID))},null,8,["status"])])]),s("div",xt,[s("ul",yt,[u.value.PackageID?(r(),v("li",ht,a(u.value.PackageID),1)):d("",!0)])]),s("div",kt,[u.value.CostProlong?(r(),v("div",St,a(u.value.CostProlong)+" ₽ продлить на 12 месяцев ",1)):d("",!0),s("div",Nt,"Дней осталось "+a(t.value.DaysRemainded||0),1),s("div",Ot,"Дата окончания "+a(M(t.value.DaysRemainded)),1)]),s("div",Ct,[n(Q,{label:t.value.StatusID==="ClaimForRegister"||t.value.StatusID==="Waiting"?"Оплатить":"Продлить",onClick:e[3]||(e[3]=i=>H()),class:"tw-min-w-24"},null,8,["label"]),s("label",Pt,[nt(s("input",{type:"checkbox","onUpdate:modelValue":e[4]||(e[4]=i=>_.value=i),onInput:e[5]||(e[5]=i=>A())},null,544),[[it,_.value]]),e[9]||(e[9]=s("span",{class:"btn-switch__text"},"Автопродление",-1)),e[10]||(e[10]=s("span",{class:"btn-switch__toggle"},null,-1))])])]),s("div",$t,[s("div",Bt,[e[11]||(e[11]=s("div",{class:"list-item__title"},"Именные сервера",-1)),n(b,{class:"ml-auto",label:"Редактировать",onClick:e[6]||(e[6]=i=>B())})]),s("div",Rt,[e[12]||(e[12]=s("div",{class:"list-item__item"},"Первичный сервер",-1)),s("div",Tt,a(t.value.Ns1Name),1)]),s("div",Et,[e[13]||(e[13]=s("div",{class:"list-item__item"},"Вторичный сервер",-1)),s("div",Mt,a(t.value.Ns2Name),1)])]),s("div",Ft,[e[17]||(e[17]=s("div",{class:"list-item__row"},[s("div",{class:"list-item__title"},"Контактные данные")],-1)),s("div",Wt,[e[15]||(e[15]=s("div",{class:"list-item__item"},"Скрыть данные в WhoIs",-1)),s("label",Vt,[s("input",{type:"checkbox",checked:t.value.IsPrivateWhoIs,disabled:""},null,8,At),e[14]||(e[14]=s("span",{class:"btn-switch__toggle"},null,-1))])]),s("div",Ht,[e[16]||(e[16]=s("div",{class:"list-item__item"},"Последнее обновление адрес",-1)),s("div",Lt,a(F(t.value.StatusDate)),1)])])])],64)):f.value?d("",!0):(r(),w(q,{key:1,label:"Заказ не найден"}))])],64)}}},ne=dt(Ut,[["__scopeId","data-v-c0622fbf"]]);export{ne as default};
