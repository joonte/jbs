import{_ as F}from"./ButtonDefault-7c216fc6.js";import{s as O}from"./SimpleCheckbox-cae4154c.js";import{_ as R}from"./ClausesKeeper-eb954229.js";import{_ as M,u as U,e as j,r as v,g as d,h as V,O as A,i as K,ag as $,j as J,o as _,c as f,b as r,a as l,w as q,d as z,F as m,x as G,y as H,k as Q,p as W,l as X}from"./index-5e313302.js";import{u as Y}from"./contracts-3351d68f.js";import{B as Z}from"./BlockSelectProfile-b014f353.js";import{B as ee}from"./BlockBalanceAgreement-bb87adc1.js";/* empty css                                                                       */import"./IconClose-1f889a2e.js";import"./multiselect-bfc29db8.js";import"./bootstrap-vue-next.es-a19a8b41.js";import"./IconArrow-555f9d45.js";const S=u=>(W("data-v-c4f17575"),u=u(),X(),u),te={class:"section"},oe={class:"container"},ae={class:"section-header"},le=S(()=>l("h1",{class:"section-title"},"Создать договор",-1)),se=S(()=>l("div",{class:"section-header"},[l("h2",{class:"section-block_title"},"Шаблон")],-1)),ne={class:"form"},ce={class:"container-limited"},re={__name:"ContractCreateContract",async setup(u){let C,h;const T=U(),n=Y(),I=j(),p=v(!1),c=v("Natural"),o=v(null),x=d(()=>T.ConfigList),a=d(()=>n==null?void 0:n.profileList),i=d(()=>Object.keys(a.value).map(e=>{if(a.value[e].TemplateID==="Natural"||a.value[e].TemplateID==="Juridical"||a.value[e].TemplateID==="Individual"||a.value[e].TemplateID==="NaturalPartner")return{value:a.value[e].ID,name:a.value[e].Name,contractID:a.value[e].ContractID}}).filter(e=>e.contractID===0)),k=e=>{e.key==="Enter"&&e.ctrlKey&&!B.value&&g()},B=d(()=>o.value===null||o.value===void 0);V(()=>{document.addEventListener("keyup",k)}),A(()=>{document.removeEventListener("keyup",k)});function g(){console.log(o.value),console.log(c.value),p.value=!0,n.contractMake({ProfileID:o.value,TypeID:c.value}).then(e=>{e.Status==="Ok"&&I.push("/Contracts"),p.value=!1})}function b(){var e,s;o.value=((s=(e=i.value)==null?void 0:e[0])==null?void 0:s.value)||null}return K(c,()=>{b()}),V(()=>{i.value.length<1&&I.push("/ProfileMake"),b(),console.log(i)}),[C,h]=$(()=>n.fetchProfiles()),await C,h(),(e,s)=>{var y,D;const L=J("router-link"),P=R,N=O,E=F;return _(),f(m,null,[r(ee),l("div",te,[l("div",oe,[l("div",ae,[r(L,{class:"section-label",to:"/Contracts"},{default:q(()=>[z("Мои договора")]),_:1}),le]),r(P),se,l("div",ne,[(_(!0),f(m,null,G((D=(y=x.value)==null?void 0:y.Contracts)==null?void 0:D.Types,t=>(_(),f(m,null,[(t==null?void 0:t.ProfileTemplateID)!==""?(_(),H(N,{key:0,label:t==null?void 0:t.Name,value:t==null?void 0:t.ProfileTemplateID,modelValue:c.value,"onUpdate:modelValue":s[0]||(s[0]=w=>c.value=w)},null,8,["label","value","modelValue"])):Q("",!0)],64))),256))]),l("div",ce,[r(Z,{title:"Использовать профиль",items:i.value,modelValue:o.value,"onUpdate:modelValue":s[1]||(s[1]=t=>o.value=t)},null,8,["items","modelValue"]),r(E,{onClick:g,disabled:o.value===null||o.value===void 0,"is-loading":p.value,label:"Зарегистрировать"},null,8,["disabled","is-loading"])])])])],64)}}},ge=M(re,[["__scopeId","data-v-c4f17575"]]);export{ge as default};
