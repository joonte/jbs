import{_ as U}from"./EmptyStateBlock-CV1Zaaf7.js";import{_ as E}from"./IconEye-Bjdc0umJ.js";import{_ as j}from"./ButtonDefault-eJbeaBtE.js";import{_ as F}from"./SettingsEngineItem-BBIDwBaS.js";import{_ as H}from"./StatusBadge-DoJSzeeo.js";import{_ as G}from"./ServicesContractBalanceBlock-DSORAI4R.js";import{_ as z}from"./ClausesKeeper-DEgaQ2N3.js";import{v as K,r as W}from"./bootstrap-vue-next-CxxkTytZ.js";import{_ as q}from"./IconDots-DWUcOOJk.js";import{_ as J}from"./BlockBalanceAgreement-DjWMZ940.js";import{c as n,b as m,a as t,t as i,n as Q,w as v,G as X,i as B,F as f,j as O,I as Y,K as Z,e as u,M as $,u as tt,r as h,x as et,f as I,g as st,o as l}from"./index-XtiBO-PZ.js";import{f as L}from"./time-DenPiOX5.js";import{h as ot}from"./hostStatuses-wR2mZwFf.js";import{_ as it}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./IconSettings-BhRdCFsM.js";import"./IconProfile-twpez_2K.js";import"./IconCard-cFowCC2T.js";import"./contracts-BdlSA9YT.js";import"./IconClose-s_NQ_Q4c.js";const rt={async setup(){const P=st(),e=$(),w=tt(),s=h(!1),D=et("emitter");D.on("updateDSIDPage",()=>{e.fetchDSOrders().then(()=>{e.fetchDSOrderIPMI(r.value?.OrderID)}).then(()=>{e.fetchDSOrderIPMISensors(r.value?.OrderID)})});const A=h(!1),y=h(!1),g=h(!0),r=I(()=>Object.keys(e?.DSList).map(d=>e?.DSList[d]).find(d=>d.OrderID===P.params.id)),k=I(()=>r.value?.Names||[]),S=I(()=>e?.DSSchemes?.[r.value?.SchemeID]),p=I(()=>e?.DSOrderIPMI),M=I(()=>w?.userOrders?.[r.value?.OrderID]),C=I(()=>e?.DSOrderIPMISensors);function R(d){D.emit("open-modal",{component:"StatusHistory",data:{modeID:"DSOrders",rowID:d}})}function x(d,a){const _=a[d];if(_==null)return"-";switch(d){case"ram":return`${_} ГБ`;case"chrate":return`${_} Мбит/с`;default:return _}}function b(d){if(!d)return L(new Date);const a=new Date,_=new Date(a.getTime()+d*24*60*60*1e3);return L(_)}function N(d){let a=S.value;a===void 0&&(a=d);let _=[];return a?.Name&&_.push(a?.Name),a?.CPU&&_.push(a?.CPU),a?.ram&&_.push("RAM "+a?.ram+" GB"),a?.disks&&_.push(a?.disks),_}function o(d){function a(_){s.value=_}D.emit("open-modal",{component:"ReloadDS",data:{DSOrderID:d,isReloading:s.value,onReloadStatusChange:a,ServerName:r?.value?.Scheme,SystemPower:p?.value?.IPMI["System Power"],OrderID:r?.value?.OrderID}})}function c(){D.emit("open-modal",{component:"OrdersTransfer",data:{ServiceOrderID:r.value?.ID,ServiceID:r.value?.ServiceID}})}function T(){w.prolongOrder({IsAutoProlong:g.value?0:1,OrderID:r.value?.OrderID})}function V(){D.emit("open-modal",{component:"OrderRestore",data:{OrderID:r.value?.OrderID,CostDay:S.value?.CostDay,DaysRemainded:r.value?.DaysRemainded,emitEvent:"updateDSIDPage"}})}return await e.fetchDSSchemes(),e.fetchDSOrders().then(()=>{e.fetchDSOrderIPMI(r.value?.OrderID)}),await w.fetchUserOrders().then(()=>{g.value=M.value?.IsAutoProlong}),{getDSOrderIPMI:p,getDSServerData:r,getDSScheme:S,getDSOrderIPMISensors:C,isAutoProlong:g,passwordShowOne:A,passwordShowTwo:y,openOrderRestore:V,transferItem:c,setProlongValue:T,serverReset:o,isReloading:s,getDSItemParam:N,hostStatuses:ot,calculateExpirationDate:b,formatData:x,serverDataNames:k,openHistoryStatuses:R}}},nt={key:0,class:"ds-order-page"},lt={class:"section"},at={class:"container"},dt={class:"section-header"},_t={class:"section-title"},mt={class:"hosting-item__controls"},ct={class:"btn btn--dots"},vt={class:"section-label"},Dt={class:"section-nav"},St={class:"list"},ut={class:"list-col list-col--md"},It={class:"list-item"},gt={class:"list-item__row"},ft={class:"list-item__title"},wt={class:"list-item__status"},pt={class:"list-item__row"},bt={class:"list-item__ul"},Ot={class:"list-item__row list-item__row--column"},ht={class:"list-item__text"},Pt={class:"list-item__text"},yt={class:"list-item__text"},kt={class:"list-item__row"},Mt={class:"btn btn--border btn--switch"},Ct={class:"list-col list-col--xl"},Rt={class:"list-item"},xt={class:"list-item__row list-item__table"},Nt={class:"list-item__label"},At={class:"list-item__text"},Bt={class:"list-col list-col--md"},Lt={class:"list-item"},Tt={class:"list-item__row list-item__row--table"},Vt={class:"list-item__item"},Ut={class:"list-item__row list-item__row--table"},Et={class:"list-item__item"},jt={class:"list-item__row list-item__row--table password-line"},Ft={class:"list-item__item"},Ht={key:0,class:"password-hidden"},Gt={class:"list-col list-col--md"},zt={class:"list-item"},Kt={class:"list-item__row list-item__row--table"},Wt={class:"list-item__item"},qt={class:"list-item__row list-item__row--table"},Jt={class:"list-item__item"},Qt={class:"list-item__row list-item__row--table password-line"},Xt={class:"list-item__item"},Yt={key:0,class:"password-hidden"},Zt={key:0,class:"list-col list-col--md"},$t={class:"list-item"},te={class:"list-item__item"},ee={class:"list-item__item"},se={key:1,class:"list-col list-col--md"},oe={class:"list-item"},ie={class:"list-item__item"},re={class:"list-item__item"},ne={key:1,class:"section"},le={class:"container"};function ae(P,e,w,s,D,A){const y=J,g=q,r=W,k=K,S=X("router-link"),p=z,M=G,C=H,R=F,x=j,b=E,N=U;return l(),n(f,null,[m(y),s.getDSServerData?.ID?(l(),n("div",nt,[t("div",lt,[t("div",at,[t("div",dt,[t("h1",_t,i(s.getDSServerData?.IPaddr),1),t("div",mt,[t("button",{class:Q(["btn btn--md btn--border btn--rotate btn--rotate_green",{"btn--system-off":s.getDSOrderIPMI?.IPMI["System Power"]!=="on"}]),onClick:e[0]||(e[0]=o=>s.serverReset(s.getDSServerData?.ID))},i(s.getDSOrderIPMI?.IPMI["System Power"]==="on"?"Включен":"Выключен"),3),m(k,{class:"dropdown-dots",right:""},{"button-content":v(()=>[t("span",ct,[m(g)])]),default:v(()=>[m(r,{onClick:e[1]||(e[1]=o=>s.serverReset(s.getDSServerData?.ID))},{default:v(()=>e[10]||(e[10]=[u("Перезагрузить",-1)])),_:1,__:[10]})]),_:1})]),t("div",vt,"Выделенный сервер # "+i(s.getDSServerData?.OrderID),1),t("div",Dt,[m(S,{class:"section-nav__item",to:`/DSOrders/${s.getDSServerData?.OrderID}`},{default:v(()=>e[11]||(e[11]=[u("Сервер",-1)])),_:1,__:[11]},8,["to"]),m(S,{class:"section-nav__item",to:`/Services/${s.getDSServerData?.OrderID}`},{default:v(()=>e[12]||(e[12]=[u("Услуги",-1)])),_:1,__:[12]},8,["to"])])]),m(p),t("div",St,[m(M,{"contract-id":s.getDSServerData?.ContractID,onTransfer:e[2]||(e[2]=o=>s.transferItem())},null,8,["contract-id"]),t("div",ut,[t("div",It,[t("div",gt,[t("div",ft,i(s.getDSServerData?.Scheme),1),t("div",wt,[m(C,{status:s.getDSServerData?.StatusID,DaysRemainded:s.getDSServerData?.DaysRemainded,"status-table":"DNSmanagerOrders",onClick:e[3]||(e[3]=o=>s.openHistoryStatuses(s.getDSServerData?.ID))},null,8,["status","DaysRemainded"])]),m(R,null,{default:v(()=>[m(r,{onClick:e[4]||(e[4]=o=>s.openOrderRestore())},{default:v(()=>e[13]||(e[13]=[u("Просмотреть учет заказа",-1)])),_:1,__:[13]})]),_:1})]),t("div",pt,[t("ul",bt,[(l(!0),n(f,null,O(s.getDSItemParam(s.getDSServerData),o=>(l(),n("li",{key:o},i(o),1))),128))])]),t("div",Ot,[t("div",ht,i(s.getDSScheme?.CostMonth||"0")+" ₽ в месяц",1),t("div",Pt,"Дней осталось "+i(s.getDSServerData?.DaysRemainded||"0"),1),t("div",yt," Дата окончания "+i(s.calculateExpirationDate(s.getDSServerData?.DaysRemainded)),1)]),t("div",kt,[m(x,{label:"Продлить",onClick:e[5]||(e[5]=o=>P.$router.push(`/DSOrderPay/${s.getDSServerData?.OrderID}`))}),t("label",Mt,[Y(t("input",{type:"checkbox","onUpdate:modelValue":e[6]||(e[6]=o=>s.isAutoProlong=o),onInput:e[7]||(e[7]=o=>s.setProlongValue())},null,544),[[Z,s.isAutoProlong]]),e[14]||(e[14]=t("span",{class:"btn-switch__text"},"Автопродление",-1)),e[15]||(e[15]=t("span",{class:"btn-switch__toggle"},null,-1))])])])]),t("div",Ct,[t("div",Rt,[e[16]||(e[16]=t("div",{class:"list-item__row"},[t("div",{class:"list-item__title"},"Конфигурация")],-1)),t("div",xt,[(l(!0),n(f,null,O(s.getDSServerData.Names,(o,c)=>(l(),n("div",{class:"list-item__table-col",key:c},[t("div",Nt,i(o),1),t("div",At,i(s.formatData(c,s.getDSServerData)),1)]))),128))])])]),t("div",Bt,[t("div",Lt,[e[21]||(e[21]=t("div",{class:"list-item__row"},[t("div",{class:"list-item__title"},"Доступы")],-1)),t("div",Tt,[e[17]||(e[17]=t("div",{class:"list-item__item"},"IP адрес сервера",-1)),t("div",Vt,i(s.getDSServerData?.IPaddr),1)]),t("div",Ut,[e[18]||(e[18]=t("div",{class:"list-item__item"},"Пользователь",-1)),t("div",Et,i(s.getDSServerData?.DSuser),1)]),t("div",jt,[e[20]||(e[20]=t("div",{class:"list-item__item"},"Пароль",-1)),t("div",Ft,[s.passwordShowOne?(l(),n("span",Ht,i(s.getDSServerData?.DSpass),1)):(l(),n("button",{key:1,class:"btn btn--border btn--md password-line",onClick:e[8]||(e[8]=o=>s.passwordShowOne=!0)},[m(b,{class:"button-icon"}),e[19]||(e[19]=u(" Показать ",-1))]))])])])]),t("div",Gt,[t("div",zt,[e[26]||(e[26]=t("div",{class:"list-item__row"},[t("div",{class:"list-item__title"},"Доступы IPMI")],-1)),t("div",Kt,[e[22]||(e[22]=t("div",{class:"list-item__item"},"IP адрес сервера",-1)),t("div",Wt,i(s.getDSServerData?.ILOaddr),1)]),t("div",qt,[e[23]||(e[23]=t("div",{class:"list-item__item"},"Пользователь",-1)),t("div",Jt,i(s.getDSServerData?.ILOuser),1)]),t("div",Qt,[e[25]||(e[25]=t("div",{class:"list-item__item"},"Пароль",-1)),t("div",Xt,[s.passwordShowTwo?(l(),n("span",Yt,i(s.getDSServerData?.ILOpass),1)):(l(),n("button",{key:1,class:"btn btn--border btn--md password-line",onClick:e[9]||(e[9]=o=>s.passwordShowTwo=!0)},[m(b,{class:"button-icon"}),e[24]||(e[24]=u(" Показать ",-1))]))])])])]),s.getDSOrderIPMI&&s.getDSOrderIPMI?.IPMI&&s.getDSOrderIPMI?.IPMI.length>0?(l(),n("div",Zt,[t("div",$t,[e[27]||(e[27]=t("div",{class:"list-item__row"},[t("div",{class:"list-item__title"},"Общая информация из IPMI")],-1)),(l(!0),n(f,null,O(s.getDSOrderIPMI?.IPMI,o=>(l(),n("div",{class:"list-item__row list-item__row--table",key:o?.name},[t("div",te,i(o?.name),1),t("div",ee,i(o?.value),1)]))),128))])])):B("",!0),s.getDSOrderIPMI?.["IPMI.Sensors"]&&s.getDSOrderIPMI["IPMI.Sensors"].length>0?(l(),n("div",se,[t("div",oe,[e[28]||(e[28]=t("div",{class:"list-item__row"},[t("div",{class:"list-item__title"},"Данные сенсоров")],-1)),(l(!0),n(f,null,O(s.getDSOrderIPMI["IPMI.Sensors"],(o,c)=>(l(),n("div",{class:"list-item__row list-item__row--table",key:c},[t("div",ie,i(c),1),t("div",re,i(o),1)]))),128))])])):B("",!0)])])]),e[29]||(e[29]=t("div",{class:"section"},[t("div",{class:"container"},[t("div",{class:"text"},[t("h3",null,"Что входит в стоимость"),t("p",null,"Для подключения дополнительных услуг"),t("ul",null,[t("li",null,"Размещение в РФ, Москва"),t("li",null,"Предустановленная ОС FreeBSD / CentOS / Debian / Ubuntu / Windows"),t("li",null,"IP адрес, с возможностью расширения"),t("li",null,"Бесплатная панель управления ISPManager Lite"),t("li",null,"Круглосуточная поддержка")])])])],-1))])):(l(),n("div",ne,[t("div",le,[m(N,{label:"Заказ не найден"})])]))],64)}const Me=it(rt,[["render",ae],["__scopeId","data-v-175a025b"]]);export{Me as default};
