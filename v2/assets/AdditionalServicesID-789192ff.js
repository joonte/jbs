import{o as w,c as y,a as s,t as c,b as u,k as N,Y as V,Z as B,p as C,l as R,_ as T,a6 as j,e as L,R as U,f as E,r as F,g as I}from"./index-ed1f28f8.js";import{u as M}from"./postings-71aa09ae.js";import{S as A}from"./StatusBadge-2304b071.js";import{s as W}from"./servicesStatuses-6293b6ac.js";import{_ as Y}from"./ButtonDefault-a8aacc82.js";import{_ as Z}from"./ServicesContractBalanceBlock-dd87b12d.js";import{_ as q}from"./ClausesKeeper-9aa8ead7.js";import"./contracts-cedf6a91.js";import"./IconProfile-af74631a.js";import"./IconCard-ec16e358.js";import"./IconClose-a1e58263.js";const x=a=>(C("data-v-8493dd59"),a=a(),R(),a),z={class:"section"},G={class:"container"},H={class:"section-header"},J={class:"section-title"},K={class:"section-label"},Q={class:"list"},X={class:"list-col list-col--md"},$={class:"list-item"},ee={class:"list-item__row"},te={class:"list-item__title"},se={class:"list-item__status"},oe={class:"list-item__row"},re={class:"list-item__ul"},ne={key:0},ie={class:"list-item__row"},ae={class:"btn btn--border btn--switch"},ce=x(()=>s("span",{class:"btn-switch__text"},"Автопродление",-1)),de=x(()=>s("span",{class:"btn-switch__toggle"},null,-1));function le(a,o,D,e,r,d){var l,_,t,i,f,O,h,S,b,P,k;const n=q,v=Z,p=A,g=Y;return w(),y("div",z,[s("div",G,[s("div",H,[s("h1",J,c((l=e.getService)==null?void 0:l.Name),1),s("div",K,"# "+c((_=e.getOrder)==null?void 0:_.ID),1)]),u(n),s("div",Q,[u(v,{"contract-id":(t=e.getOrder)==null?void 0:t.ContractID,onTransfer:o[0]||(o[0]=m=>e.transferItem())},null,8,["contract-id"]),s("div",X,[s("div",$,[s("div",ee,[s("div",te,c((i=e.getService)==null?void 0:i.Name),1),s("div",se,[u(p,{status:(f=e.getOrder)==null?void 0:f.StatusID,"status-table":"Orders"},null,8,["status"])])]),s("div",oe,[s("ul",re,[(O=e.getOrder)!=null&&O.DependOrderID&&((h=e.getOrder)==null?void 0:h.DependOrderID)!=="0"?(w(),y("li",ne,"Относится к заказу "+c((S=e.getOrder)==null?void 0:S.DependOrderID)+"/"+c((b=e.getDependOrderService)==null?void 0:b.Name),1)):N("",!0)])]),s("div",ie,[u(g,{label:((P=e.getOrder)==null?void 0:P.StatusID)==="ClaimForRegister"||((k=e.getOrder)==null?void 0:k.StatusID)==="Waiting"?"Оплатить":"Продлить",onClick:o[1]||(o[1]=m=>e.navigateToProlong())},null,8,["label"]),s("label",ae,[V(s("input",{type:"checkbox","onUpdate:modelValue":o[2]||(o[2]=m=>e.isAutoProlong=m),onInput:o[3]||(o[3]=m=>e.setProlongValue())},null,544),[[B,e.isAutoProlong]]),ce,de])])])])])])])}const _e={components:{StatusBadge:A},async setup(){const a=j(),o=L(),D=U("emitter"),e=M(),r=E(),d=F(!1),n=I(()=>Object.keys(r==null?void 0:r.userOrders).map(t=>r==null?void 0:r.userOrders[t]).find(t=>t.ID===a.params.id)),v=I(()=>{var t,i;return e==null?void 0:e.servicesList[(i=r.userOrders[(t=n.value)==null?void 0:t.DependOrderID])==null?void 0:i.ServiceID]}),p=I(()=>{var t;return e==null?void 0:e.servicesList[(t=n.value)==null?void 0:t.ServiceID]});function g(){var t,i;D.emit("open-modal",{component:"OrdersTransfer",data:{ServiceOrderID:(t=n.value)==null?void 0:t.ID,ServiceID:(i=n.value)==null?void 0:i.ServiceID}})}function l(){o.push(`/ServiceOrderPay/${a.params.id}`)}function _(){var t;r.prolongOrder({IsAutoProlong:d.value?0:1,OrderID:(t=n.value)==null?void 0:t.ID})}return await r.fetchUserOrders().then(()=>{var t;d.value=(t=n.value)==null?void 0:t.IsAutoProlong}),await e.fetchServices(),{getService:p,getOrder:n,getDependOrderService:v,isAutoProlong:d,servicesStatuses:W,transferItem:g,navigateToProlong:l,setProlongValue:_}}},be=T(_e,[["render",le],["__scopeId","data-v-8493dd59"]]);export{be as default};
