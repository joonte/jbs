import{_ as A}from"./ButtonDefault-CgQ13ecW.js";import{_ as E}from"./BasicInput-B071mWFB.js";import{_ as O}from"./BlockSelectContract-B_ApKdUZ.js";import{O as T,y as B,r as i,f as r,h as M,v as w,c as d,o as _,a,b as m,i as $,F as j,j as U,t as v}from"./index-DakgQwZZ.js";import{_ as F}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./component-BXhtJwv0.js";import"./contracts-C-xJvA56.js";import"./multiselect-BdMqqcHq.js";const L={class:"modal__body"},x={class:"modal__domain-select"},R={class:"modal__info"},W={class:"modal__lower-block"},Y={class:"modal__domain-list"},Z={key:0,class:"domain__grid"},H={class:"domain__info-wrapper"},K={class:"domain__info-wrapper-vertical"},P={class:"domain__info-wrapper"},q={class:"domain__info-title"},z={class:"domain__package-name"},G={class:"domain__info-wrapper"},J={class:"domain__price"},Q={__name:"ModalWindowDomainTransfer",props:["data"],emits:["modalClose"],setup(X,{emit:I}){const N=I,u=T(),S=B("emitter"),t=i(""),l=i(""),c=i(""),p=i(!1),s=r(()=>u?.domainSchemes),b=r(()=>Object.keys(s.value).map(e=>s.value[e]).find(e=>e.Name===t.value?.split(".")?.[1])?.ID),C=r(()=>Object.keys(s.value).map(e=>s.value[e]).find(e=>e.Name===t.value?.split(".")?.[1])?.DaysAfterTransfer),g=r(()=>Object.keys(s.value).map(e=>s.value[e]).find(e=>e.Name===t.value?.split(".")?.[1])?.DaysBeforeTransfer);function f(){N("modalClose")}function D(){p.value=!0,u.CheckDomainTransfer({ContractID:l.value||null,DomainName:t.value||null,StepID:1}).then(({result:e})=>{e==="SUCCESS"?u.DomainTransfer({ContractID:l.value||null,DomainName:t.value.split(".")[0]||null,AuthInfo:c.value||"",DomainSchemeID:b.value||null,DomainZone:t.value.split(".")[1],DaysBeforeTransfer:g.value||null,DaysAfterTransfer:C.value||null}).then(()=>{S.emit("updateDomainsList"),f()}):p.value=!1})}const y=e=>{e.key==="Enter"&&D()};return M(()=>{document.addEventListener("keyup",y)}),w(()=>{document.removeEventListener("keyup",y)}),(e,o)=>{const h=O,k=E,V=A;return _(),d("div",L,[a("div",x,[o[5]||(o[5]=a("div",{class:"list-item__title"},"Перенос домена",-1)),o[6]||(o[6]=a("div",{class:"list-item__secondary-title"}," Домены в зонах ru/su/рф переносятся без дополнительных условий, во всех остальных зонах переносятся с оплатой продления на год. Ниже приведены цены на продление Вашего доменного имени. ",-1)),a("div",R,[m(h,{modelValue:l.value,"onUpdate:modelValue":o[0]||(o[0]=n=>l.value=n),onButtonClicked:o[1]||(o[1]=n=>f())},null,8,["modelValue"]),m(k,{label:"Доменное имя",placeholder:"yourDomain.ru",necessarily:!0,modelValue:t.value,"onUpdate:modelValue":o[2]||(o[2]=n=>t.value=n)},null,8,["modelValue"]),m(k,{label:"Ключ переноса домена (AuthInfo)",placeholder:"",modelValue:c.value,"onUpdate:modelValue":o[3]||(o[3]=n=>c.value=n)},null,8,["modelValue"])])]),a("div",W,[a("div",Y,[s.value?(_(),d("div",Z,[(_(!0),d(j,null,U(s.value,n=>(_(),d("div",{class:"domain__item domain__item_inactive",key:n.ID},[a("div",H,[a("div",K,[a("div",P,[a("div",q,"."+v(n?.Name),1)]),a("div",z,v(n?.PackageID),1)])]),a("div",G,[a("div",J,v(n?.CostTransfer)+" ₽",1)])]))),128))])):$("",!0)])]),m(V,{class:"domain__transfer-item",label:"Перенести","is-loading":p.value,disabled:t.value?.length<=0,onClick:o[4]||(o[4]=n=>D())},null,8,["is-loading","disabled"])])}}},re=F(Q,[["__scopeId","data-v-9fc160aa"]]);export{re as default};
