import{j as ht,o as u,c as h,b as l,a as t,t as a,w as I,d as S,Y as y,ae as E,k as pt,Z as Dt,F as ft,p as It,l as St,_ as Ot,a7 as wt,e as Ht,f as bt,R as Pt,r as ct,g as O}from"./index-19d4a9c5.js";import{_ as kt}from"./IconCard-44c1ca60.js";import{I as Ct}from"./IconProfile-a65eed05.js";import{I as yt}from"./IconSettings-b3bb291a.js";import{I as _t}from"./IconEye-4690269d.js";import{S as dt}from"./StatusBadge-5146d4b6.js";import{h as Bt}from"./hostStatuses-94d00f20.js";import{u as Nt}from"./testTransforms-eec373ee.js";import{u as At}from"./hosting-83eaaa02.js";import{u as xt}from"./resetServer-8e453f61.js";import{u as Vt}from"./globalActions-1c9ec915.js";import{_ as mt}from"./ClausesKeeper-5a7e7f30.js";import{_ as gt}from"./ServicesContractBalanceBlock-d47d4dd9.js";import{s as vt}from"./SettingsEngineItem-4698bf9b.js";import{B as ut}from"./BlockBalanceAgreement-46812f15.js";import{E as Et}from"./EmptyStateBlock-a070e35c.js";import{_ as Mt}from"./paramsAccordionBlock-852d9ab8.js";import{_ as Rt}from"./ButtonDefault-6be40158.js";import{z as Tt}from"./bootstrap-vue-next.es-4c1a1806.js";import"./IconClose-ab9f78d6.js";import"./contracts-9a2dcfb1.js";import"./IconArrow-093f2a46.js";const d=g=>(It("data-v-93c89f52"),g=g(),St(),g),Lt={key:0,class:"my-hosting-order"},Gt={class:"section"},jt={class:"container"},Ft={class:"section-header"},Ut={class:"section-title"},qt={class:"section-label"},zt={class:"section-nav"},Wt={class:"list"},Kt={class:"list-col list-col--md"},Yt={class:"list-item"},Zt={class:"list-item__row"},Jt={class:"list-item__title"},Qt={class:"list-item__status"},Xt={class:"list-item__row"},$t={class:"list-item__ul"},te={class:"list-item__row list-item__row--column"},ee={class:"list-item__text"},se={key:0,class:"list-item__text"},oe={class:"list-item__row"},ie={class:"btn btn--border btn--switch"},ne=d(()=>t("span",{class:"btn-switch__text"},"Автопродление",-1)),ae=d(()=>t("span",{class:"btn-switch__toggle"},null,-1)),re={class:"list-col list-col--md"},le={class:"list-item"},ce={class:"list-item__row"},_e=d(()=>t("div",{class:"list-item__title"},"Панель управления",-1)),de={class:"list-item__row list-item__row--table"},me=d(()=>t("div",{class:"list-item__item"},"Адрес",-1)),ge={class:"list-item__item"},ve={class:"list-item__row list-item__row--table"},ue=d(()=>t("div",{class:"list-item__item"},"Логин",-1)),he={class:"list-item__item"},pe={class:"list-item__row list-item__row--table"},De=d(()=>t("div",{class:"list-item__item"},"Пароль",-1)),fe={class:"list-item__item hide-button"},Ie={key:0,class:"password-hidden"},Se={class:"list-item__row list-item__row--table"},Oe=d(()=>t("div",{class:"list-item__item"},"FTP, POP3, SMTP, IMAP",-1)),we={class:"list-item__item"},He={class:"list-col list-col--md"},be={class:"list-item"},Pe=d(()=>t("div",{class:"list-item__row"},[t("div",{class:"list-item__title"},"Именные сервера")],-1)),ke={class:"list-item__row list-item__row--table"},Ce={class:"list-item__item"},ye={class:"list-item__item"},Be={class:"list-item__item"},Ne={class:"list-item__item"},Ae={key:1,class:"section"},xe={class:"container"};function Ve(g,i,r,e,v,M){var H,b,P,k,C,s,o,c,R,T,L,G,j,F,U,q,z,W,K,Y,Z,J,Q,X,$,tt,et,st,ot,it,nt,at,rt,lt;const B=ut,m=ht("router-link"),N=mt,p=gt,n=dt,D=Tt,f=vt,w=Rt,A=_t,x=Mt,V=Et;return u(),h(ft,null,[l(B),(H=e.getHostingOrderData)!=null&&H.ID?(u(),h("div",Lt,[t("div",Gt,[t("div",jt,[t("div",Ft,[t("h1",Ut,a((b=e.getHostingOrderData)==null?void 0:b.Domain),1),t("div",qt,"Хостинг # "+a((P=e.getHostingOrderData)==null?void 0:P.OrderID),1),t("div",zt,[l(m,{class:"section-nav__item",to:`/HostingOrders/${(k=e.getHostingOrderData)==null?void 0:k.OrderID}`},{default:I(()=>[S("Хостинг")]),_:1},8,["to"])])]),l(N,{partition:"Header:/HostingOrders"}),t("div",Wt,[l(p,{"contract-id":(C=e.getHostingOrderData)==null?void 0:C.ContractID,onTransfer:i[0]||(i[0]=_=>e.transferItem())},null,8,["contract-id"]),t("div",Kt,[t("div",Yt,[t("div",Zt,[t("div",Jt,a((s=e.getHostingScheme)==null?void 0:s.Name),1),t("div",Qt,[l(n,{status:(o=e.getHostingOrderData)==null?void 0:o.StatusID,"status-table":"HostingOrders"},null,8,["status"])]),l(f,null,{default:I(()=>[l(D,{onClick:i[1]||(i[1]=_=>e.openPackageChangeModal())},{default:I(()=>[S("Изменить тариф")]),_:1}),l(D,{onClick:i[2]||(i[2]=_=>e.openOrderRestore())},{default:I(()=>[S("Просмотреть учет заказа")]),_:1}),l(D,{onClick:i[3]||(i[3]=_=>e.openPasswordChange())},{default:I(()=>[S("Сменить пароль от аккаунта")]),_:1})]),_:1})]),t("div",Xt,[t("ul",$t,[y(t("li",null,a(e.formDescriptionLine((R=(c=e.getHostingScheme)==null?void 0:c.SchemeParams)==null?void 0:R.limit_webdomains)),513),[[E,(G=(L=(T=e.getHostingScheme)==null?void 0:T.SchemeParams)==null?void 0:L.limit_webdomains)==null?void 0:G.Value]]),y(t("li",null,a(e.formDescriptionLine((F=(j=e.getHostingScheme)==null?void 0:j.SchemeParams)==null?void 0:F.limit_quota)),513),[[E,(z=(q=(U=e.getHostingScheme)==null?void 0:U.SchemeParams)==null?void 0:q.limit_quota)==null?void 0:z.Value]]),y(t("li",null,a(e.formDescriptionLine((K=(W=e.getHostingScheme)==null?void 0:W.SchemeParams)==null?void 0:K.limit_emails)),513),[[E,(J=(Z=(Y=e.getHostingScheme)==null?void 0:Y.SchemeParams)==null?void 0:Z.limit_emails)==null?void 0:J.Value]])])]),t("div",te,[t("div",ee,a((Q=e.getHostingScheme)==null?void 0:Q.CostMonth)+" ₽ в месяц",1),((X=e.getHostingOrderData)==null?void 0:X.StatusID)!=="Waiting"?(u(),h("div",se,"Дней осталось "+a((($=e.getHostingOrderData)==null?void 0:$.DaysRemainded)||0),1)):pt("",!0)]),t("div",oe,[t("div",{class:"btn btn-default btn--blue",onClick:i[4]||(i[4]=_=>e.navigateToProlong())},a(((tt=e.getHostingOrderData)==null?void 0:tt.StatusID)==="Waiting"?"Оплатить":"Продлить"),1),t("label",ie,[y(t("input",{type:"checkbox","onUpdate:modelValue":i[5]||(i[5]=_=>e.isAutoProlong=_),onInput:i[6]||(i[6]=_=>e.setProlongValue())},null,544),[[Dt,e.isAutoProlong]]),ne,ae])])])]),t("div",re,[t("div",le,[t("div",ce,[_e,l(w,{class:"ml-auto",onClick:i[7]||(i[7]=_=>e.orderManage()),label:"Вход"})]),t("div",de,[me,t("div",ge,a(`https://${(et=e.getServerGroup)==null?void 0:et.Address}/manager`),1)]),t("div",ve,[ue,t("div",he,a((st=e.getHostingOrderData)==null?void 0:st.Login),1)]),t("div",pe,[De,t("div",fe,[e.passwordShow?(u(),h("div",Ie,a(e.getHostingOrderData.Password),1)):(u(),h("button",{key:1,class:"btn btn--border btn--md hide-button",onClick:i[8]||(i[8]=_=>e.passwordShow=!0)},[l(A),S("Показать")]))])]),t("div",Se,[Oe,t("div",we,a((ot=e.getServerGroup)==null?void 0:ot.Address),1)])])]),t("div",He,[t("div",be,[Pe,t("div",ke,[t("div",Ce,a((it=e.getHostingOrderData)==null?void 0:it.Ns1Name),1),t("div",ye,a((nt=e.getHostingOrderData)==null?void 0:nt.Ns2Name),1),t("div",Be,a((at=e.getHostingOrderData)==null?void 0:at.Ns3Name),1),t("div",Ne,a((rt=e.getHostingOrderData)==null?void 0:rt.Ns4Name),1)])])])])])]),l(x,{"params-list":(lt=e.getHostingScheme)==null?void 0:lt.SchemeParams,label:"Общая информация","main-param":"InternalName"},null,8,["params-list"])])):(u(),h("div",Ae,[t("div",xe,[l(V,{label:"Заказ не найден"})])]))],64)}const Ee={components:{IconCard:kt,IconProfile:Ct,IconSettings:yt,IconEye:_t,StatusBadge:dt,ClausesKeeper:mt,settingsEngineItem:vt,ServicesContractBalanceBlock:gt,BlockBalanceAgreement:ut},async setup(){const g=wt(),i=Ht(),r=At(),e=xt(),v=bt(),M=Vt(),{formDescriptionLine:B}=Nt(),m=Pt("emitter");m.on("updateHostingIDPage",()=>{r.fetchHostingOrders()});const N=ct(!1),p=ct(!1),n=O(()=>Object.keys(r==null?void 0:r.hostingList).map(s=>r==null?void 0:r.hostingList[s]).find(s=>s.OrderID===g.params.id)),D=O(()=>r==null?void 0:r.hostingSchemes),f=O(()=>{var s,o;return(o=D.value)==null?void 0:o[(s=n.value)==null?void 0:s.SchemeID]}),w=O(()=>{var s,o;return(o=v==null?void 0:v.userOrders)==null?void 0:o[(s=n.value)==null?void 0:s.OrderID]}),A=O(()=>{var s,o,c;return(c=(s=e==null?void 0:e.serverGroupsList)==null?void 0:s.Servers)==null?void 0:c[(o=n.value)==null?void 0:o.ServerID]});function x(){var s,o;m.emit("open-modal",{component:"OrdersTransfer",data:{ServiceOrderID:(s=n.value)==null?void 0:s.ID,ServiceID:(o=n.value)==null?void 0:o.ServiceID}})}function V(){var s;v.prolongOrder({IsAutoProlong:p.value?0:1,OrderID:(s=n.value)==null?void 0:s.OrderID})}function H(){var s;i.push(`/HostingOrderPay/${(s=n.value)==null?void 0:s.OrderID}`)}function b(){var s,o,c;M.OrderManage({ServiceOrderID:(s=n.value)==null?void 0:s.ID,OrderID:(o=n.value)==null?void 0:o.OrderID,ServiceID:(c=n.value)==null?void 0:c.ServiceID})}function P(){var s,o;m.emit("open-modal",{component:"HostingOrderSchemeChange",data:{hostingID:(s=n.value)==null?void 0:s.ID,ServerGroup:(o=f.value)==null?void 0:o.ServersGroupID,emitEvent:"updateHostingIDPage"}})}function k(){var s,o;m.emit("open-modal",{component:"OrderPasswordChange",data:{OrderID:(s=n.value)==null?void 0:s.ID,ServiceID:(o=n.value)==null?void 0:o.ServiceID,emitEvent:"updateHostingIDPage"}})}function C(){var s,o,c;m.emit("open-modal",{component:"OrderRestore",data:{OrderID:(s=n.value)==null?void 0:s.OrderID,CostDay:(o=f.value)==null?void 0:o.CostDay,DaysRemainded:(c=n.value)==null?void 0:c.DaysRemainded,emitEvent:"updateHostingIDPage"}})}return await r.fetchHostingOrders(),await r.fetchHostingSchemes(),await e.fetchServerGroups(),await v.fetchUserOrders().then(()=>{var s;p.value=(s=w.value)==null?void 0:s.IsAutoProlong}),{getHostingOrderData:n,getHostingScheme:f,getUserOrder:w,getServerGroup:A,isAutoProlong:p,passwordShow:N,openOrderRestore:C,openPackageChangeModal:P,orderManage:b,navigateToProlong:H,setProlongValue:V,openPasswordChange:k,hostStatuses:Bt,transferItem:x,formDescriptionLine:B}}},is=Ot(Ee,[["render",Ve],["__scopeId","data-v-93c89f52"]]);export{is as default};
