import{j as E,o as _,c as d,a,t as g,k as x,F as f,x as D,m as P,b,w as L,d as V,n as B,_ as H,y as w,p as $,l as A,r as T,g as G}from"./index-145d9cde.js";import{u as F}from"./hosting-57e879dc.js";import{u as q}from"./resetServer-000da2ec.js";import{_ as z}from"./IconDots-250f781f.js";import{_ as K}from"./IconCard-647fe573.js";import{S as M}from"./StatusBadge-cd3873b5.js";import{u as J}from"./testTransforms-eec373ee.js";import{B as O}from"./BlockBalanceAgreement-650ad03e.js";import{_ as N}from"./ClausesKeeper-d3875457.js";import{E as Q}from"./EmptyStateBlock-a6b81e83.js";import"./contracts-009c925b.js";import"./bootstrap-vue-next.es-759b1c9f.js";import"./ButtonDefault-6a3a5e1e.js";import"./IconArrow-f2b12a71.js";import"./IconClose-f461656c.js";const R={class:"hosting-order-item__wrapper"},U={class:"hosting-order-item__header"},W={class:"hosting-order-item__name"},X={key:0,class:"hosting-order-item__price"},Y={class:"hosting-order-item__content"},Z={class:"hosting-order-item__row"},ee={class:"hosting-order-item__list"},oe={class:"hosting-order-item__row"},re={class:"hosting-order-item__note"};function se(c,i,n,t,I,l){var h,v,u,p,r,S,e;const m=E("router-link");return _(),d("div",{class:B(["hosting-order-item",{"hosting-order-item--special":(h=n.data)==null?void 0:h.note}])},[a("div",R,[a("div",U,[a("div",W,g((v=n.data)==null?void 0:v.name),1),(u=n.data)!=null&&u.price?(_(),d("div",X,g((p=n.data)==null?void 0:p.price)+" ₽ в месяц",1)):x("",!0)]),a("div",Y,[a("div",Z,[a("ul",ee,[(_(!0),d(f,null,D((r=n.data)==null?void 0:r.specifications,o=>(_(),d("li",null,g(o),1))),256))])]),(S=n.data)!=null&&S.note?P(c.$slots,"default",{key:0},()=>{var o;return[a("div",oe,[a("div",re,g((o=n.data)==null?void 0:o.note),1)])]},!0):x("",!0),b(m,{class:"btn btn--wide btn--border btn--wide",to:`/HostingSchemes/${(e=n.data)==null?void 0:e.ID}`},{default:L(()=>[V(" Заказать")]),_:1},8,["to"])])])],2)}const te={components:{IconDots:z,IconCard:K,StatusBadge:M},props:{data:{type:Object,default:()=>{}}}},j=H(te,[["render",se],["__scopeId","data-v-62ce5dab"]]),ne=c=>($("data-v-b4e34947"),c=c(),A(),c),ae={class:"section"},ce={class:"container"},_e={class:"section-header"},ie=ne(()=>a("h1",{class:"section-title"},"Заказать хостинг",-1)),de={class:"section-nav"},le=["title","onClick"],ue={class:"section-text section-text--margin"},pe={key:0,class:"list"};function he(c,i,n,t,I,l){var p;const m=O,h=N,v=j,u=Q;return _(),d(f,null,[b(m),a("div",ae,[a("div",ce,[a("div",_e,[ie,b(h),a("div",de,[(_(!0),d(f,null,D(t.filterServerGroups(),(r,S)=>{var e,o;return _(),d("div",{class:B(["section-nav__item",{active:String(t.currentGroup)===String(r==null?void 0:r.ServersGroupID)}]),title:(e=t.getServerGroup(r==null?void 0:r.ServersGroupID))==null?void 0:e.Comment,onClick:s=>t.setCurrentGroup(r==null?void 0:r.ServersGroupID)},g((o=t.getServerGroup(r==null?void 0:r.ServersGroupID))==null?void 0:o.Name),11,le)}),256))])]),a("div",ue,g((p=t.getServerGroup(t.currentGroup))==null?void 0:p.Comment),1),t.filterSchemes?(_(),d("div",pe,[(_(!0),d(f,null,D(t.filterSchemes,r=>(_(),w(v,{data:t.getCardData(r)},null,8,["data"]))),256))])):(_(),w(u,{key:1,label:"Нет доступных тарифов"}))])])],64)}const ve={components:{HostingOrderItem:j,ClausesKeeper:N,BlockBalanceAgreement:O},async setup(){var r,S;const c=F(),i=q(),n=T(0),{formDescriptionLine:t}=J(),I=G(()=>{let e=[];return l.value&&(Object.keys(l.value).forEach(o=>{var s;String((s=l.value[o])==null?void 0:s.ServersGroupID)===String(n.value)&&e.push(l.value[o])}),e.sort((o,s)=>o.SortID-s.SortID)),e}),l=G(()=>c==null?void 0:c.hostingSchemes);function m(e){n.value=e}function h(e){var o,s,k,C,y;return{ID:e==null?void 0:e.ID,name:e==null?void 0:e.Name,price:e==null?void 0:e.CostMonth,specifications:[t((o=e==null?void 0:e.SchemeParams)==null?void 0:o.limit_webdomains),t((s=e==null?void 0:e.SchemeParams)==null?void 0:s.limit_quota),t((k=e==null?void 0:e.SchemeParams)==null?void 0:k.limit_emails),t((C=e==null?void 0:e.SchemeParams)==null?void 0:C.disklimit),t((y=e==null?void 0:e.SchemeParams)==null?void 0:y.maillimit)],note:e==null?void 0:e.Comment}}const v=G(()=>{var e;return(e=i==null?void 0:i.serverGroupsList)==null?void 0:e.Servers});function u(){let e={};return Object.values(v.value).forEach(o=>{if(o.ServiceID==="10000"){const s=o.ServersGroupID;e[s]||(e[s]={SortID:o.SortID,ServersGroupID:s,servers:[]}),e[s].servers.push(o)}}),Object.values(e).sort((o,s)=>o.SortID-s.SortID)}function p(e){var o,s;return(s=(o=i==null?void 0:i.serverGroupsList)==null?void 0:o.ServersGroups)==null?void 0:s[e]}return await c.fetchHostingSchemes(),await i.fetchServerGroups(),n.value=(S=(r=u())==null?void 0:r[0])==null?void 0:S.ServersGroupID,{getHostingSchemes:l,getServerGroup:p,filterServerGroups:u,setCurrentGroup:m,getCardData:h,filterSchemes:I,currentGroup:n}}},Oe=H(ve,[["render",he],["__scopeId","data-v-b4e34947"]]);export{Oe as default};
