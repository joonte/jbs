import{j as K,o as _,c as f,b as d,a as t,t as l,w as Q,d as $,x as P,k as I,Y as tt,Z as et,F as ot,p as st,l as it,_ as nt,a7 as at,f as lt,e as ct,R as rt,r as E,g as B,i as _t}from"./index-d9e5d80f.js";import{u as mt}from"./domain-c9883067.js";import{u as dt}from"./contracts-0b0db280.js";import{f as R,a as Dt}from"./useTimeFunction-8602dd60.js";import{_ as ut}from"./IconCard-3c442370.js";import{I as gt}from"./IconProfile-05f3ab07.js";import{I as vt}from"./IconSettings-433e5bd2.js";import{I as ht}from"./IconEye-a4c2cded.js";import{S as G}from"./StatusBadge-1111ad36.js";import{B as J}from"./BlockBalanceAgreement-bd5f9bec.js";import{E as ft}from"./EmptyStateBlock-320e221f.js";import{_ as It}from"./ServicesContractBalanceBlock-1cf41c6c.js";import{_ as bt}from"./ButtonDefault-cf4dc84b.js";import{_ as pt}from"./ClausesKeeper-54c941b5.js";import"./bootstrap-vue-next.es-b0c2a08e.js";import"./IconArrow-3cf18905.js";import"./IconClose-b8cba5ec.js";const wt={Waiting:{id:1,label:"Ожидание оплаты",color:"#459FD1",background:"#ADC1F04C"},ClaimForRegister:{id:2,label:"Заявка на регистрацию",color:"#FFC107",background:"#FFC10733"},ForContractRegister:{id:3,label:"Для регистрации договора",color:"#FFC107",background:"#FFC10733"},OnContractRegister:{id:4,label:"На регистрации договора",color:"#FFC107",background:"#FFC10733"}},c=D=>(st("data-v-b3d21093"),D=D(),it(),D),kt={key:0,class:"section"},St={class:"container"},Ct={class:"section-header"},Ot={class:"section-title"},Ft={class:"section-label"},Nt={class:"section-nav"},yt={class:"list"},xt={class:"list-col list-col--md"},Pt={class:"list-item"},Et={class:"list-item__row"},Bt={class:"list-item__title"},Rt={class:"list-item__status"},At={class:"list-item__row"},Tt={class:"list-item__ul"},Ut={key:0},Vt={class:"list-item__row list-item__row--column"},Wt={key:0,class:"list-item__text"},jt={class:"list-item__text"},Lt={class:"list-item__text"},Mt={class:"list-item__row"},qt={class:"btn btn--border btn--switch"},Ht=c(()=>t("span",{class:"btn-switch__text"},"Автопродление",-1)),Xt=c(()=>t("span",{class:"btn-switch__toggle"},null,-1)),Yt={class:"list-col list-col--md"},Zt={class:"list-item"},zt={class:"list-item__row list-item__row--nowrap"},Gt=c(()=>t("div",{class:"list-item__title"},"Именные сервера",-1)),Jt={class:"list-item__row list-item__row--table"},Kt=c(()=>t("div",{class:"list-item__item"},"Первичный сервер",-1)),Qt={class:"list-item__item"},$t={class:"list-item__row list-item__row--table"},te=c(()=>t("div",{class:"list-item__item"},"Вторичный сервер",-1)),ee={class:"list-item__item"},oe={class:"list-col list-col--md"},se={class:"list-item"},ie=c(()=>t("div",{class:"list-item__row"},[t("div",{class:"list-item__title"},"Контактные данные")],-1)),ne={class:"list-item__row list-item__row--table"},ae=c(()=>t("div",{class:"list-item__item"},"Скрыть данные в WhoIs",-1)),le={class:"btn btn--switch"},ce=["checked"],re=c(()=>t("span",{class:"btn-switch__toggle"},null,-1)),_e={class:"list-item__row list-item__row--table"},me=c(()=>t("div",{class:"list-item__item"},"Последнее обновление адрес",-1)),de={class:"list-item__item"},De={key:1,class:"section"},ue={class:"container"};function ge(D,s,a,o,A,b){var w,k,S,C,O,F,N,e,i,r,h,T,U,V,W,j,L,M,q,H,X,Y,Z,z;const g=J,v=K("router-link"),p=pt,u=bt,y=It,n=G,x=ft;return _(),f(ot,null,[d(g),(w=o.getDomain)!=null&&w.ID?(_(),f("div",kt,[t("div",St,[t("div",Ct,[t("h1",Ot,l((k=o.getDomain)==null?void 0:k.Domain),1),t("div",Ft,"Домен # "+l((S=o.getDomain)==null?void 0:S.OrderID),1),t("div",Nt,[d(v,{class:"section-nav__item",to:`/DomainOrders/${(C=o.getDomain)==null?void 0:C.OrderID}`},{default:Q(()=>[$("Домен")]),_:1},8,["to"])])]),d(p),((O=o.getDomain)==null?void 0:O.StatusID)==="Waiting"||((F=o.getDomain)==null?void 0:F.StatusID)==="ClaimForRegister"||((N=o.getDomain)==null?void 0:N.StatusID)==="ForContractRegister"||((e=o.getDomain)==null?void 0:e.StatusID)==="ForRegister"||((i=o.getDomain)==null?void 0:i.StatusID)==="ForTransfer"?(_(),P(u,{key:0,class:"btn-mn__bot",label:"Определить владельца",onClick:s[0]||(s[0]=m=>o.designateOwner())})):I("",!0),t("div",yt,[d(y,{"contract-id":(r=o.getDomain)==null?void 0:r.ContractID,onTransfer:s[1]||(s[1]=m=>o.transferItem())},null,8,["contract-id"]),t("div",xt,[t("div",Pt,[t("div",Et,[t("div",Bt,l((h=o.getDomain)==null?void 0:h.Domain),1),t("div",Rt,[d(n,{status:(T=o.getDomain)==null?void 0:T.StatusID,"status-table":"DomainOrders"},null,8,["status"])])]),t("div",At,[t("ul",Tt,[(U=o.getDomainScheme)!=null&&U.PackageID?(_(),f("li",Ut,l((V=o.getDomainScheme)==null?void 0:V.PackageID),1)):I("",!0)])]),t("div",Vt,[(W=o.getDomainScheme)!=null&&W.CostProlong?(_(),f("div",Wt,l((j=o.getDomainScheme)==null?void 0:j.CostProlong)+" ₽ продлить на 12 месяцев",1)):I("",!0),t("div",jt,"Дней осталось "+l(((L=o.getDomain)==null?void 0:L.DaysRemainded)||0),1),t("div",Lt,"Дата окончания "+l(o.calculateExpirationDate((M=o.getDomain)==null?void 0:M.DaysRemainded)),1)]),t("div",Mt,[d(u,{label:((q=o.getDomain)==null?void 0:q.StatusID)==="ClaimForRegister"||((H=o.getDomain)==null?void 0:H.StatusID)==="Waiting"?"Оплатить":"Продлить",onClick:s[2]||(s[2]=m=>o.navigateToProlong())},null,8,["label"]),t("label",qt,[tt(t("input",{type:"checkbox","onUpdate:modelValue":s[3]||(s[3]=m=>o.isAutoProlong=m),onInput:s[4]||(s[4]=m=>o.setProlongValue())},null,544),[[et,o.isAutoProlong]]),Ht,Xt])])])]),t("div",Yt,[t("div",Zt,[t("div",zt,[Gt,o.domainsEdit?I("",!0):(_(),P(u,{key:0,class:"ml-auto",label:"Редактировать",onClick:s[5]||(s[5]=m=>o.toggleDomainsEdit())})),o.domainsEdit?(_(),P(u,{key:1,class:"ml-auto",label:"Сохранить",onClick:s[6]||(s[6]=m=>o.saveDomains())})):I("",!0)]),t("p",null,l(o.domainNames),1),t("div",Jt,[Kt,t("div",Qt,l((X=o.getDomain)==null?void 0:X.Ns1Name),1)]),t("div",$t,[te,t("div",ee,l((Y=o.getDomain)==null?void 0:Y.Ns2Name),1)])])]),t("div",oe,[t("div",se,[ie,t("div",ne,[ae,t("label",le,[t("input",{type:"checkbox",checked:(Z=o.getDomain)==null?void 0:Z.IsPrivateWhoIs,disabled:""},null,8,ce),re])]),t("div",_e,[me,t("div",de,l(o.lastUpdate((z=o.getDomain)==null?void 0:z.StatusDate)),1)])])])])])])):(_(),f("div",De,[t("div",ue,[d(x,{label:"Заказ не найден"})])]))],64)}const ve={components:{IconCard:ut,IconProfile:gt,IconSettings:vt,IconEye:ht,StatusBadge:G,BlockBalanceAgreement:J},async setup(){const D=at(),s=lt(),a=mt(),o=dt(),A=ct(),b=rt("emitter"),g=E(null),v=E(!1),p=E({});function u(){var e;a.DomainOrderNsChange({DomainOrderID:(e=n.value)==null?void 0:e.ID}).then(i=>{const{result:r,resultData:h}=i;r==="SUCCESS"&&(v.value=!1,b.emit("open-modal",{component:"DomainsEdit",data:h}))})}function y(){var e;a.DomainOrderNsChange({DomainOrderID:Number((e=n.value)==null?void 0:e.ID),XMLHttpRequest:"yes"}).then(i=>{let{result:r,error:h}=i;r==="SUCCESS"&&(v.value=!1,a.fetchDomains())})}const n=B(()=>Object.keys(a==null?void 0:a.domainsList).map(e=>a==null?void 0:a.domainsList[e]).find(e=>e.OrderID===D.params.id)),x=B(()=>{var e,i;return(i=a==null?void 0:a.domainSchemes)==null?void 0:i[(e=n.value)==null?void 0:e.SchemeID]}),w=B(()=>{var e,i;return(i=s==null?void 0:s.userOrders)==null?void 0:i[(e=n.value)==null?void 0:e.OrderID]});function k(e){if(!e)return R(new Date);const i=new Date,r=new Date(i.getTime()+e*24*60*60*1e3);return R(r)}function S(e){return e?R(Dt(e)):""}function C(){console.log(n.value);try{const e={DomainOrderID:n==null?void 0:n.value.ID};b.emit("open-modal",{component:"DomainSelectOwner",data:e})}catch(e){console.error(e)}}function O(){var e,i;b.emit("open-modal",{component:"OrdersTransfer",data:{ServiceOrderID:(e=n.value)==null?void 0:e.ID,ServiceID:(i=n.value)==null?void 0:i.ServiceID}})}function F(){var e;s.prolongOrder({IsAutoProlong:g.value?0:1,OrderID:(e=n.value)==null?void 0:e.OrderID})}function N(){var e;A.push(`/DomainOrderPay/${(e=n.value)==null?void 0:e.OrderID}`)}return _t(()=>{var e,i;p.value={Ns1Name:(e=n.value)==null?void 0:e.Ns1Name,Ns2Name:(i=n.value)==null?void 0:i.Ns2Name}}),await a.fetchDomains(),await a.fetchDomainSchemes(),await o.fetchProfiles(),await s.fetchUserOrders().then(()=>{var e;g.value=(e=w.value)==null?void 0:e.IsAutoProlong}),{getDomain:n,getDomainScheme:x,isAutoProlong:g,setProlongValue:F,navigateToProlong:N,domainStatuses:wt,transferItem:O,lastUpdate:S,designateOwner:C,calculateExpirationDate:k,domainsEdit:v,domainNames:p,saveDomains:y,toggleDomainsEdit:u}}},Re=nt(ve,[["render",ge],["__scopeId","data-v-b3d21093"]]);export{Re as default};
