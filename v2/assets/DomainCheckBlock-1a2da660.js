import{o as d,c as r,a as s,b as N,F as S,v as T,n as g,t as m,w as A,T as O,k as L,x as Z,p as q,l as U,_ as z,e as M,a7 as R,r as _,i as W,B as P}from"./index-5a4e9ca9.js";import{u as Q}from"./domain-a8d17323.js";import{s as j}from"./multiselect-9d256093.js";import{E as G}from"./EmptyStateBlock-6b10d5c6.js";import{b as H,f as J}from"./bootstrap-vue-next.es-19e73c53.js";import{_ as K}from"./ButtonDefault-a3087454.js";const X=u=>(q("data-v-dfe04040"),u=u(),U(),u),Y={class:"section"},$={class:"container"},oo={class:"domain-block"},eo=X(()=>s("div",{class:"section-title"},[s("h2",{class:"section-block_title"},"Проверить домен")],-1)),no={class:"domain-field"},ao={key:0,class:"domain__grid"},so=["title","onClick"],lo={class:"domain__info-wrapper"},co={class:"domain__info-wrapper-vertical"},io={class:"domain__info-wrapper"},ro={class:"domain__info-title"},to={class:"domain__info-title"},_o={class:"domain__package-name"},uo={key:1,class:"domain__loader"},vo={key:0,class:"domain__info-wrapper"},fo={class:"domain__price"};function mo(u,i,w,n,C,t){var l;const I=H,f=K,p=J,h=G;return d(),r("div",Y,[s("div",$,[s("div",oo,[eo,s("div",no,[N(I,{modelValue:n.domainName,"onUpdate:modelValue":i[0]||(i[0]=o=>n.domainName=o),placeholder:"Например, yourName",type:"text"},null,8,["modelValue"]),N(f,{label:"Подобрать",disabled:!n.domainName,onClick:i[1]||(i[1]=o=>n.checkDomain())},null,8,["disabled"])]),n.isListLoaded?(d(),r(S,{key:0},[((l=n.domainsArray)==null?void 0:l.length)>0?(d(),r("div",ao,[(d(!0),r(S,null,T(n.domainsArray,o=>(d(),r("div",{class:g(["domain__item",{domain__item_inactive:(o==null?void 0:o.isFree)===!1||(o==null?void 0:o.isFree)===null,domain__item_active:(o==null?void 0:o.ID)===n.selectedDomain}]),title:o==null?void 0:o.info,onClick:k=>n.selectDomain(o)},[s("div",lo,[s("div",co,[s("div",io,[s("div",ro,m(n.checkedDomain),1),s("div",to,"."+m(o==null?void 0:o.Name),1)]),s("div",_o,m(o==null?void 0:o.PackageID),1)]),N(O,{name:"fade",mode:"out-in"},{default:A(()=>[(o==null?void 0:o.isFree)!==null?(d(),r("div",{key:0,class:g(["domain__info-status",{available:(o==null?void 0:o.isFree)===!0}])},m(o!=null&&o.isFree?"Свободен":"Занят"),3)):(d(),r("div",uo))]),_:2},1024)]),o!=null&&o.isFree?(d(),r("div",vo,[s("div",fo,m(o==null?void 0:o.CostOrder)+" ₽ / год",1),N(p,{class:"domain__checkbox",value:o==null?void 0:o.ID,"unchecked-value":"null",modelValue:n.selectedDomain,"onUpdate:modelValue":i[2]||(i[2]=k=>n.selectedDomain=k)},null,8,["value","modelValue"])])):L("",!0)],10,so))),256))])):(d(),Z(h,{key:1,class:"domain__empty",label:"Неправильное доменное имя"}))],64)):L("",!0)])])])}const po={components:{Multiselect:j},props:{domainList:{type:Array,default:()=>[]}},emits:["select"],setup(u,{emit:i}){const w=Q(),n=M(),C=R(),t=_(null);C.query.DomainName&&(t.value=C.query.DomainName,b());const I=_(null),f=_(null),p=_(!1),h=_(!1),l=_([]),o=_(null);function k(){n.replace({query:{DomainName:t.value}})}function y(){const a=document.querySelector(".domain__info-title");a&&(h.value=a.scrollWidth>a.clientWidth)}function b(){k(),w.DomainNameCheck({DomainName:t.value}).then(a=>{var x;const{result:D,resultData:e}=a;if(e!=null&&e.DomainName&&(t.value=e.DomainName,f.value=e.DomainName),e!=null&&e.Zones){l.value=u.domainList.filter(c=>{var v;return(v=e==null?void 0:e.Zones)==null?void 0:v.includes(c==null?void 0:c.Name)}).sort((c,v)=>(e==null?void 0:e.Zones.indexOf(c==null?void 0:c.Name))-(e==null?void 0:e.Zones.indexOf(v==null?void 0:v.Name))).map(c=>({...c,isFree:null,info:D.Info})),p.value=!0;let F=0;const E=setInterval(()=>{V(F),F++},100);setTimeout(()=>{clearInterval(E)},((x=l.value)==null?void 0:x.length)*100)}else l.value=[]})}function V(a){var D;w.DomainCheck({DomainName:f.value,DomainZone:(D=l.value[a])==null?void 0:D.Name}).then(e=>{console.log(e),l.value[a]={...l.value[a],isFree:e.status==="SUCCESS",info:e.info}}).catch(e=>{console.error("An error occurred:",e)})}function B(a){o.value=a==null?void 0:a.ID,i("select",{...a,line:t.value})}return W(()=>{y(),window.addEventListener("resize",y)}),P(()=>{window.removeEventListener("resize",y)}),{domainName:t,isListLoaded:p,checkedDomain:f,domain:I,domainsArray:l,selectedDomain:o,selectDomain:B,checkDomain:b,isTextOverflow:h,checkTextOverflow:y}}},Co=z(po,[["render",mo],["__scopeId","data-v-dfe04040"]]);export{Co as D};
