import{o as B,c as w,b as f,a as e,Y as m,an as H,F as A,v as M,af as I,t as p,w as R,d as K,p as W,l as Y,_ as Z,e as q,r as v,g as C}from"./index-d9e5d80f.js";import{u as z}from"./domain-c9883067.js";import{u as J}from"./contracts-0b0db280.js";import{u as Q}from"./hosting-efa4851e.js";import{u as X}from"./resetServer-404341d6.js";import{D as E}from"./DomainCheckBlock-3365ad04.js";import{_ as G}from"./BlockSelectContract-b2d03713.js";import{B as j}from"./BlockBalanceAgreement-bd5f9bec.js";import{_ as $}from"./ButtonDefault-cf4dc84b.js";import{_ as ee}from"./ClausesKeeper-54c941b5.js";import"./multiselect-547456cc.js";import"./EmptyStateBlock-320e221f.js";import"./bootstrap-vue-next.es-b0c2a08e.js";import"./IconArrow-3cf18905.js";import"./IconClose-b8cba5ec.js";const l=n=>(W("data-v-267abd82"),n=n(),Y(),n),oe={class:"domain-scheme"},se={class:"section"},te={class:"container"},ae=l(()=>e("div",{class:"section-header"},[e("h1",{class:"section-title"},"Заказ доменного имени")],-1)),le={class:"section"},ne={class:"container"},ce=l(()=>e("div",{class:"section-header"},[e("h2",{class:"section-block_title"},"Заказ хостинга"),e("div",{class:"section-label"},"Если домен будет использоваться совместно с заказом хостинга, выберите нужный из существующего списка")],-1)),ie={class:"form"},re={class:"form-input_border"},de=l(()=>e("span",{class:"form-input_border-content"},[e("span",{class:"form-input_border-mark"}),e("span",{class:"form-input_border-info"},[e("span",{class:"form-input_border-address"},"Не использовать")])],-1)),_e={class:"form-input_border"},me=["value"],ue={class:"form-input_border-content"},fe=l(()=>e("span",{class:"form-input_border-mark"},null,-1)),pe={class:"form-input_border-info"},ve={class:"form-input_border-address"},be={class:"form-input_border-row"},he={class:"form-input_border-name"},De={class:"form-input_border-domain"},Se={class:"section"},Ne={class:"container"},ke=l(()=>e("div",{class:"section-header"},[e("div",{class:"section-label"},"Для успешной регистрации, домен должен быть настроен на используемых именных серверах. Для этого в панели управления хостингом необходимо добавить домен, как дополнительный или паркованный.")],-1)),ye={class:"form form-grid-columns"},Ie={class:"form-col"},Ce=l(()=>e("div",{class:"form-col__title"},"Первичный сервер имен",-1)),xe={class:"form-field"},Oe=l(()=>e("div",{class:"form-field__label"},"Доменный адрес",-1)),Be=l(()=>e("label",{class:"form-field"},[e("div",{class:"form-field__label"},"IP адрес"),e("input",{type:"text",disabled:""})],-1)),we={class:"form-col"},Ve=l(()=>e("div",{class:"form-col__title"},"Вторичный сервер имен",-1)),ge={class:"form-field"},Ue=l(()=>e("div",{class:"form-field__label"},"Доменный адрес",-1)),Le=l(()=>e("label",{class:"form-field"},[e("div",{class:"form-field__label"},"IP адрес"),e("input",{type:"text",disabled:""})],-1)),Pe={class:"form-col"},He=l(()=>e("div",{class:"form-col__title"},"Дополнительный сервер имен",-1)),Ae={class:"form-field"},Ee=l(()=>e("div",{class:"form-field__label"},"Доменный адрес",-1)),Ge=l(()=>e("label",{class:"form-field"},[e("div",{class:"form-field__label"},"IP адрес"),e("input",{type:"text",disabled:""})],-1)),je={class:"form-col"},Te=l(()=>e("div",{class:"form-col__title"},"Расширенный сервер имен",-1)),Fe={class:"form-field"},Me=l(()=>e("div",{class:"form-field__label"},"Доменный адрес",-1)),Re=l(()=>e("label",{class:"form-field"},[e("div",{class:"form-field__label"},"IP адрес"),e("input",{type:"text",disabled:""})],-1)),Ke={class:"section"},We={class:"container"},Ye={class:"total-block"},Ze={class:"total-block__row total-block__row--big"},qe=l(()=>e("div",{class:"total-block__col"},"Итого за 12 месяцев",-1)),ze={class:"total-block__col"};function Je(n,t,i,o,x,b){var S,N,k;const c=j,h=ee,_=G,D=E,r=$;return B(),w(A,null,[f(c),e("div",oe,[e("div",se,[e("div",te,[ae,f(h)])]),f(_,{title:"Договор",modelValue:o.contractSelect,"onUpdate:modelValue":t[0]||(t[0]=s=>o.contractSelect=s)},null,8,["modelValue"]),f(D,{"domain-list":o.getDomains,onSelect:o.selectDomain},null,8,["domain-list","onSelect"]),e("div",le,[e("div",ne,[ce,e("div",ie,[e("label",re,[m(e("input",{type:"radio",name:"hosting",value:null,"onUpdate:modelValue":t[1]||(t[1]=s=>o.hostingSelect=s)},null,512),[[H,o.hostingSelect]]),de]),(B(!0),w(A,null,M(o.getHostingOrders,s=>{var y,a;return B(),w("label",_e,[m(e("input",{type:"radio",name:"hosting",value:s==null?void 0:s.ID,"onUpdate:modelValue":t[2]||(t[2]=d=>o.hostingSelect=d)},null,8,me),[[H,o.hostingSelect]]),e("span",ue,[fe,e("span",pe,[e("span",ve,p(s==null?void 0:s.Login)+" ("+p((y=o.getServerGroup[s==null?void 0:s.ServerID])==null?void 0:y.Address)+")",1),e("span",be,[e("span",he,p((a=o.getContracts[s==null?void 0:s.ContractID])==null?void 0:a.Customer),1),e("span",De,p(s==null?void 0:s.Domain),1)])])])])}),256))])])]),e("div",Se,[e("div",Ne,[ke,e("div",ye,[e("div",Ie,[Ce,e("label",xe,[Oe,m(e("input",{type:"text",placeholder:"dns0.host-food.ru","onUpdate:modelValue":t[3]||(t[3]=s=>o.formData.Ns1Name=s)},null,512),[[I,o.formData.Ns1Name]])]),Be]),e("div",we,[Ve,e("label",ge,[Ue,m(e("input",{type:"text",placeholder:"dns0.host-food.ru","onUpdate:modelValue":t[4]||(t[4]=s=>o.formData.Ns2Name=s)},null,512),[[I,o.formData.Ns2Name]])]),Le]),e("div",Pe,[He,e("label",Ae,[Ee,m(e("input",{type:"text","onUpdate:modelValue":t[5]||(t[5]=s=>o.formData.Ns3Name=s)},null,512),[[I,o.formData.Ns3Name]])]),Ge]),e("div",je,[Te,e("label",Fe,[Me,m(e("input",{type:"text","onUpdate:modelValue":t[6]||(t[6]=s=>o.formData.Ns4Name=s)},null,512),[[I,o.formData.Ns4Name]])]),Re])])])]),e("div",Ke,[e("div",We,[e("div",Ye,[e("div",Ze,[qe,e("div",ze,p(((S=o.domain)==null?void 0:S.CostOrder)||"0")+" ₽",1)])]),f(r,{class:"btn--wide",label:((N=o.getContracts[o.contractSelect])==null?void 0:N.Balance)>((k=o.domain)==null?void 0:k.CostOrder)?"Оплатить c баланса договора":"Добавить в корзину",onClick:t[7]||(t[7]=s=>o.createDomain()),"is-loading":o.isLoading,disabled:o.domain===null},{default:R(()=>[K("Добавить в корзину")]),_:1},8,["label","is-loading","disabled"])])])])],64)}const Qe={components:{BlockSelectContract:G,DomainCheckBlock:E,BlockBalanceAgreement:j},async setup(){const n=z(),t=J(),i=Q(),o=X(),x=q(),b=v(null),c=v(null),h=v(null),_=v(!1),D=v({Ns1Name:"dns0.host-food.ru",Ns2Name:"dns1.host-food.ru",Ns3Name:null,Ns4Name:null}),r=C(()=>t.contractsList),S=C(()=>{var a;return(a=Object.keys(n==null?void 0:n.domainSchemes))==null?void 0:a.map(d=>{var u;return{...n==null?void 0:n.domainSchemes[d],value:(u=n==null?void 0:n.domainSchemes[d])==null?void 0:u.ID}})}),N=C(()=>Object.keys(i==null?void 0:i.hostingList).map(a=>i==null?void 0:i.hostingList[a])),k=C(()=>{var a;return(a=o==null?void 0:o.serverGroupsList)==null?void 0:a.Servers});function s(){var a,d,u,V,g,U,L;_.value=!0,n.DomainOrder({ContractID:b.value,Domain:`${(a=c.value)==null?void 0:a.line}${(d=c.value)!=null&&d.line&&((u=c.value)!=null&&u.Name)?"."+((V=c.value)==null?void 0:V.Name):""}`,DomainName:(g=c.value)==null?void 0:g.line,DomainSchemeID:(U=c.value)==null?void 0:U.value,DomainZone:(L=c.value)==null?void 0:L.Name,IsPrivateWhoIs:"yes",HostingOrderID:h.value,...D.value}).then(({result:T,info:O,error:Xe})=>{T==="SUCCESS"?n.DomainOrderPay({DomainOrderID:O==null?void 0:O.DomainOrderID}).then(F=>{let{result:P,error:$e}=F;P==="SUCCESS"?x.push("/DomainOrders"):P==="BASKET"&&x.push("/Basket"),_.value=!0}):_.value=!1})}function y(a){c.value=a}return await n.fetchDomainSchemes(),await t.fetchContracts().then(()=>{var a;r.value&&(b.value=(a=Object.keys(r==null?void 0:r.value))==null?void 0:a[0])}),await i.fetchHostingOrders(),await o.fetchServerGroups(),{contractSelect:b,selectDomain:y,domain:c,hostingSelect:h,getDomains:S,getContracts:r,getHostingOrders:N,getServerGroup:k,formData:D,isLoading:_,createDomain:s}}},vo=Z(Qe,[["render",Je],["__scopeId","data-v-267abd82"]]);export{vo as default};
