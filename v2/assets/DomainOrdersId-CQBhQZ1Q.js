import{_ as Q}from"./EmptyStateBlock-Ad1AmtSS.js";import{_ as X}from"./WhiteButton.vue_vue_type_script_setup_true_lang-ClwvvVEf.js";import{I as Y}from"./IconProfile-DDO3OQU0.js";import{_ as O}from"./ButtonDefault-B1FApUky.js";import{_ as Z}from"./StatusBadge-DZmmWv0G.js";import{_ as tt}from"./ClausesKeeper-gPyacQ05.js";import{_ as et}from"./MessageInfo-BrNRfWl8.js";import{_ as st}from"./UserNote-Cq01thJ0.js";import{_ as ot,g as at,c as it}from"./BlockBalanceAgreement-DSLTUOoQ.js";import{R as nt,r as d,x as rt,f as y,H as lt,g as dt,c as _,b as a,a as s,C as b,h as m,F as I,t as i,e as u,w,v as mt,E as ut,J as _t,L as ct,d as vt,o as n}from"./index-C9dBN6m4.js";import{u as wt}from"./orders-D_JLVTov.js";import{u as pt}from"./contracts-BEc0DZS2.js";import{f as x,s as Dt}from"./time-DenPiOX5.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./IconClose-CgjzG0Yf.js";import"./index-D0iqQ1zq.js";const ft={class:"tw-px-4 md:tw-px-8 tw-mb-6"},gt={class:"tw-text-xl sm:tw-text-4xl"},bt=["href"],It={class:"tw-flex tw-items-center tw-gap-2 tw-mt-2"},xt={class:"tw-text-gray-500 tw-text-sm"},kt={class:"tw-flex tw-items-center tw-gap-8 tw-border-b tw-border-gray-200 tw-mt-4 tw-whitespace-nowrap tw-mb-6"},St={class:"tw-grid tw-grid-cols-1 lg:tw-grid-cols-2 tw-gap-4"},ht={class:"tw-border tw-rounded tw-border-gray-200 tw-p-4"},Ot={class:"list-item__row tw-gap-2"},yt={class:"list-item__title"},Nt={class:"list-item__status"},Ct={class:"list-item__row"},$t={class:"list-item__ul"},Pt={key:0},Rt={class:"list-item__row list-item__row--column"},Bt={key:0,class:"list-item__text"},Tt={class:"list-item__text"},Ft={class:"list-item__text"},Mt={class:"tw-flex tw-flex-wrap tw-gap-4 tw-mt-4"},Wt={class:"btn btn--border btn--switch tw-ml-0 tw-h-10 sm:tw-h-12"},Et={class:"tw-flex tw-flex-wrap tw-gap-4 tw-mt-4"},Lt={class:"tw-border tw-rounded tw-border-gray-200 tw-p-4"},Ut={class:"list-item__row list-item__row--nowrap"},Vt={class:"list-item__row list-item__row--table"},Ht={class:"list-item__item"},At={class:"list-item__row list-item__row--table"},jt={class:"list-item__item"},Jt={class:"tw-border tw-rounded tw-border-gray-200 tw-p-4"},qt={class:"list-item__row list-item__row--table"},zt={class:"btn btn--switch"},Gt=["checked"],Kt={class:"list-item__row list-item__row--table"},Qt={class:"list-item__item"},ve={__name:"DomainOrdersId",setup(Xt){const N=dt(),C=wt(),p=nt(),$=pt(),P=vt(),c=d(null);d(!1);const R=d({}),e=d(null),k=d(!0),D=d(null),l=rt("emitter");l.on("updateDomainOrdersId",()=>{S()});const v=y(()=>p.domainSchemes[e.value?.SchemeID]),B=y(()=>{const o=e.value?.Domain;return o?o.startsWith("http://")||o.startsWith("https://")?o:`https://${o}`:""});function T(){l.emit("open-modal",{component:"DomainsEdit",data:e.value})}function F(o){l.emit("open-modal",{component:"StatusHistory",data:{modeID:"DomainOrders",rowID:o}})}function M(o){if(!o)return x(new Date);const t=new Date,f=new Date(t.getTime()+o*24*60*60*1e3);return x(f)}function W(o){return o?x(Dt(o)):""}function E(){try{const o={DomainOrderID:e.value.ID,Domain:e.value.Domain};l.emit("open-modal",{component:"DomainSelectOwner",data:o})}catch(o){console.error(o)}}function L(){l.emit("open-modal",{component:"OrdersTransfer",data:{ServiceOrderID:e.value?.ID,ServiceID:e.value?.ServiceID}})}function U(){authStore.prolongOrder({IsAutoProlong:c.value?0:1,OrderID:e.value?.OrderID})}function V(){it(e.value.StatusID,l)&&P.push(`/DomainOrderPay/${e.value.OrderID}`)}lt(async()=>{R.value={Ns1Name:e.value?.Ns1Name,Ns2Name:e.value?.Ns2Name},await p.fetchDomainSchemes(),await $.fetchProfiles(),await S(),c.value=e.value.IsAutoProlong,e.value.DependOrderID&&(D.value=await C.fetchOneOrder(e.value.DependOrderID)),k.value=!1});async function S(){e.value=await p.fetchDomainOrder(N.params.id)}return(o,t)=>{const f=ot,g=ut("RouterLink"),H=st,A=et,j=tt,h=O,J=Z,q=O,z=Y,G=X,K=Q;return n(),_(I,null,[a(f),s("div",ft,[e.value?(n(),_(I,{key:0},[s("h1",gt,[s("a",{href:B.value,target:"_blank"},i(e.value.Domain),9,bt)]),s("div",It,[s("div",xt,[D.value?(n(),_(I,{key:0},[t[7]||(t[7]=u("Относится к заказу ",-1)),a(g,{to:mt(at)(D.value.Code,e.value.DependOrderID),class:"tw-text-sky-500"},{default:w(()=>[u("#"+i(e.value.DependOrderID),1)]),_:1},8,["to"]),t[8]||(t[8]=u(" /",-1))],64)):m("",!0),u(" Домен #"+i(e.value.OrderID),1)]),a(H,{text:e.value.UserNotice,"order-id":e.value.OrderID,emit:"updateDomainOrdersId",position:"right"},null,8,["text","order-id"])]),e.value.Message?(n(),b(A,{key:0,innerHTML:e.value.Message,class:"tw-mt-4"},null,8,["innerHTML"])):m("",!0),s("div",kt,[a(g,{class:"tw-py-2 tw-cursor-pointer -tw-mb-[1px]","active-class":"tw-text-sky-400 tw-border-b-2 tw-border-sky-400",to:`/DomainOrders/${e.value.OrderID}`},{default:w(()=>t[9]||(t[9]=[u(" Домен ",-1)])),_:1,__:[9]},8,["to"]),a(g,{class:"tw-py-2 tw-cursor-pointer -tw-mb-[1px]","active-class":"tw-text-sky-400 tw-border-b-2 tw-border-sky-400",to:`/DomainOrders/${e.value.OrderID}/Services`},{default:w(()=>t[10]||(t[10]=[u(" Услуги ",-1)])),_:1,__:[10]},8,["to"])]),a(j),e.value.StatusID==="Waiting"||e.value.StatusID==="ClaimForRegister"||e.value.StatusID==="ForContractRegister"||e.value.StatusID==="ForRegister"||e.value.StatusID==="ForTransfer"?(n(),b(h,{key:1,class:"tw-mb-4",label:"Определить владельца",onClick:t[0]||(t[0]=r=>E())})):m("",!0),s("div",St,[s("div",ht,[s("div",Ot,[s("div",yt,i(e.value.Domain),1),s("div",Nt,[a(J,{status:e.value.StatusID,"status-table":"DomainOrders",onClick:t[1]||(t[1]=r=>F(e.value.ID)),class:"tw-cursor-pointer"},null,8,["status"])])]),s("div",Ct,[s("ul",$t,[v.value.PackageID?(n(),_("li",Pt,i(v.value.PackageID),1)):m("",!0)])]),s("div",Rt,[v.value.CostProlong?(n(),_("div",Bt,i(v.value.CostProlong)+" ₽ продлить на 12 месяцев ",1)):m("",!0),s("div",Tt,"Дней осталось "+i(e.value.DaysRemainded||0),1),s("div",Ft,"Дата окончания "+i(M(e.value.DaysRemainded)),1)]),s("div",Mt,[a(q,{label:e.value.StatusID==="ClaimForRegister"||e.value.StatusID==="Waiting"?"Оплатить":"Продлить",onClick:t[2]||(t[2]=r=>V()),class:"tw-min-w-24"},null,8,["label"]),s("label",Wt,[_t(s("input",{type:"checkbox","onUpdate:modelValue":t[3]||(t[3]=r=>c.value=r),onInput:t[4]||(t[4]=r=>U())},null,544),[[ct,c.value]]),t[11]||(t[11]=s("span",{class:"btn-switch__text tw-text-xs sm:tw-text-sm"},"Автопродление",-1)),t[12]||(t[12]=s("span",{class:"btn-switch__toggle"},null,-1))])]),s("div",Et,[a(G,{onClick:t[5]||(t[5]=r=>L())},{default:w(()=>[a(z),t[13]||(t[13]=s("div",null,"Передать на другой аккаунт",-1))]),_:1,__:[13]})])]),s("div",Lt,[s("div",Ut,[t[14]||(t[14]=s("div",{class:"list-item__title"},"Именные сервера",-1)),a(h,{class:"ml-auto",label:"Редактировать",onClick:t[6]||(t[6]=r=>T())})]),s("div",Vt,[t[15]||(t[15]=s("div",{class:"list-item__item"},"Первичный сервер",-1)),s("div",Ht,i(e.value.Ns1Name),1)]),s("div",At,[t[16]||(t[16]=s("div",{class:"list-item__item"},"Вторичный сервер",-1)),s("div",jt,i(e.value.Ns2Name),1)])]),s("div",Jt,[t[20]||(t[20]=s("div",{class:"list-item__row"},[s("div",{class:"list-item__title"},"Контактные данные")],-1)),s("div",qt,[t[18]||(t[18]=s("div",{class:"list-item__item"},"Скрыть данные в WhoIs",-1)),s("label",zt,[s("input",{type:"checkbox",checked:e.value.IsPrivateWhoIs,disabled:""},null,8,Gt),t[17]||(t[17]=s("span",{class:"btn-switch__toggle"},null,-1))])]),s("div",Kt,[t[19]||(t[19]=s("div",{class:"list-item__item"},"Последнее обновление адрес",-1)),s("div",Qt,i(W(e.value.StatusDate)),1)])])])],64)):k.value?m("",!0):(n(),b(K,{key:1,label:"Заказ не найден"}))])],64)}}};export{ve as default};
