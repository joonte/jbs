import{o as A,c as F,a as i,b as a,n as E,w as H,d as N,_ as T,u as q,e as D,f as j,r,g as z,h as B,i as G}from"./index-aeb1df1e.js";import{_ as O}from"./BasicInput-67b26a5e.js";import{_ as S}from"./ButtonDefault-11c4541b.js";import X from"./IconGoogle-628a97ba.js";import Y from"./IconOk-c90948ec.js";import J from"./IconVk-dc64e230.js";import K from"./IconYandex-3077da0b.js";import{u as Q}from"./promoStore-cab11180.js";import{B as U}from"./BlockAuthEnter-167df62c.js";import{f as W}from"./bootstrap-vue-next.es-c6bcf011.js";import"./component-60ac2998.js";const Z={class:"sign-in"},$={class:"section"},ee={class:"container"},oe=i("div",{class:"section-header"},[i("h1",{class:"section-title"},"Войти в аккаунт")],-1),te={class:"form-offset_label"},se={class:"form-offset_label"};function ne(u,o,s,e,m,c){const d=O,l=S,f=W,p=U;return A(),F("div",Z,[i("div",$,[i("div",ee,[oe,a(d,{class:E({"form-field-error":e.submitStatus==="ERROR"}),label:"Email",name:"login",modelValue:e.mail,"onUpdate:modelValue":o[0]||(o[0]=t=>e.mail=t)},null,8,["class","modelValue"]),a(d,{class:E({"form-field-error":e.submitStatus==="ERROR"}),label:"Пароль",name:"password",modelValue:e.password,"onUpdate:modelValue":o[1]||(o[1]=t=>e.password=t),"is-password":""},null,8,["class","modelValue"]),i("div",te,[a(l,{class:"button-password-restore",label:"ЗАБЫЛ ПАРОЛЬ",onClick:o[2]||(o[2]=t=>e.navigateToPage("/UserPasswordRestore"))})]),i("div",se,[a(l,{onClick:o[3]||(o[3]=t=>e.signIn()),"is-loading":e.isLoading,label:"Войти"},null,8,["is-loading"]),a(f,{id:"checkbox-1",modelValue:e.isRemember,"onUpdate:modelValue":o[4]||(o[4]=t=>e.isRemember=t),name:"checkbox-1"},{default:H(()=>[N("Запомнить меня")]),_:1},8,["modelValue"])])])]),a(p,{label:"Войти с помощью"})])}const le={components:{BlockAuthEnter:U,BasicInput:O,IconGoogle:X,IconOk:Y,IconVk:J,IconYandex:K,ButtonDefault:S},setup(){const u=q(),o=Q(),s=D(),e=j(),m=r(null),c=r(null),d=r(!0),l=r(null),f=r(!1),p=r(""),t=z();B(()=>t==null?void 0:t.userInfo);const v=B(()=>u==null?void 0:u.ConfigList);function L(){var g;m.value===null||((g=m.value)==null?void 0:g.length)<3||c.value===null||c.value<4?l.value="ERROR":(f.value=!0,t.signIn({Email:m.value,Password:c.value,IsRemember:d.value===!0?"1":"0",ReOpen:"yes",XMLHttpRequest:"yes"}).then(n=>{var b,R,h,C,I,V;if(f.value=!1,(n==null?void 0:n.result)!=="success")l.value="ERROR",p.value=n.errorMessage;else if(u.fetchConfig().then(()=>{var _,k,w;if((_=v.value)!=null&&_.Colors){let P=document.documentElement;Object.keys((k=v.value)==null?void 0:k.Colors).map(x=>{var y;P.style.setProperty(`--${x}`,(y=v.value)==null?void 0:y.Colors[x])}),P.style.setProperty("--btn-hover-transparent",`${(w=v.value)==null?void 0:w.Colors["btn-hover"]}33`)}}),((R=(b=n==null?void 0:n.data)==null?void 0:b.User)==null?void 0:R.InterfaceID)==="User")if((h=s.currentRoute.value.redirectedFrom)!=null&&h.fullPath){const _=(I=(C=s.currentRoute.value.redirectedFrom)==null?void 0:C.query)==null?void 0:I.PromoCode;_&&o.setPromoCode(_),s.push({path:(V=s.currentRoute.value.redirectedFrom)==null?void 0:V.fullPath})}else s.push({path:"/Home"});else window.location.replace("/Administrator/Home")}))}function M(g){s.push(g)}return G(()=>{console.log(e,"route")}),{isRemember:d,submitStatus:l,errorMessage:p,mail:m,password:c,isLoading:f,navigateToPage:M,signIn:L}}},ge=T(le,[["render",ne]]);export{ge as default};
