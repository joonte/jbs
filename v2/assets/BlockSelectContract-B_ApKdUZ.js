import{r as m,f as _,h as v,c as b,o as h,I as S,a as l,J as C,t as s,e as B,b as D,w as c,x as V}from"./index-DakgQwZZ.js";import{u as g}from"./contracts-C-xJvA56.js";import{s as I}from"./multiselect-BdMqqcHq.js";import{_ as w}from"./_plugin-vue_export-helper-DlAUqK2U.js";const N={class:"block--mobile_divider"},T={class:"form-field form-field--basic"},k={class:"form-field-input__wrapper"},x={class:"multiselect-option"},L={__name:"BlockSelectContract",props:{modelValue:Object,title:String,hasBalance:{type:Boolean,default:!1},allowPartner:{type:Boolean,default:!1}},emits:["update:modelValue","buttonClicked"],setup(u,{emit:d}){const o=u,p=d,r=g(),i=m(null),n=_(()=>{const a=["Natural","Juridical","Default","Public","Individual","NaturalPartner"];return Object.values(r.contractsList).filter(e=>!(!a.includes(e.TypeID)||e.IsHidden||!o.allowPartner&&e.TypeID==="NaturalPartner"||o.hasBalance&&Number(e.Balance)<=0)).map(e=>({value:e.ID,name:e.Customer,balance:e.Balance}))});function f(a){p("update:modelValue",a)}return v(()=>{if(n.value?.length&&r.contractsList){const a=n.value[0].value;r.contractsList[a]?i.value=a:console.error("Договор не найден:",a)}}),(a,e)=>(h(),b("div",null,[S(l("h2",{class:"section-block_title"},s(o.title),513),[[C,o.title]]),l("div",N,[l("div",T,[e[1]||(e[1]=l("div",{class:"form-field__label"},[B(" Выбрать договор "),l("span",null,"*")],-1)),l("div",k,[D(V(I),{class:"multiselect--white",placeholder:"Выбрать договор",label:"name",modelValue:i.value,"onUpdate:modelValue":e[0]||(e[0]=t=>i.value=t),options:n.value,disabled:n.value?.length<=1,onChange:f},{singlelabel:c(({value:t})=>[l("span",null," # "+s(t.value?t.value.toString().padStart(5,"0"):t.padStart(5,"0"))+" / "+s(t.name)+" / "+s(t.balance+" руб"),1)]),option:c(({option:t})=>[l("div",x," # "+s(t.value.toString().padStart(5,"0"))+" / "+s(t.name)+" / "+s(t.balance+" руб"),1)]),_:1},8,["modelValue","options","disabled"])])])])]))}},j=w(L,[["__scopeId","data-v-f45c018f"]]);export{j as _};
