import{o as v,c as U,a as c,t as y,$ as C,af as D,z as E,l as k,b as I,_ as g,U as x,r as N,i as b,P as V}from"./index-400feb76.js";import{u as h}from"./globalActions-9f4dbd2c.js";import{_ as w}from"./ButtonDefault-7609cc9e.js";const B={class:"modal__body"},L={class:"list-item__title"},S={class:"modal__input-row"},T={class:"list-form_col list-form_col--xl"},M={class:"search-field form-field"},O={class:"modal__buttons"};function j(e,i,a,n,m,r){var f,_,t,o,l;const s=w;return v(),U("div",B,[c("div",L,"Редактирование примечания, заказ # "+y((f=a.data)==null?void 0:f.OrderID),1),c("div",S,[c("div",T,[c("div",M,[C(c("textarea",{"onUpdate:modelValue":i[0]||(i[0]=d=>n.inputValue=d)},null,512),[[D,n.inputValue]])])])]),c("div",O,[((_=a.data)==null?void 0:_.UserNotice)!==null&&((t=a.data)==null?void 0:t.UserNotice)!==""?(v(),E(s,{key:0,class:"modal__button",label:"Удалить","is-loading":n.isLoading,onClick:i[1]||(i[1]=d=>n.deleteNotice())},null,8,["is-loading"])):k("",!0),I(s,{class:"modal__button",label:((o=a.data)==null?void 0:o.UserNotice)!==null&&((l=a.data)==null?void 0:l.UserNotice)!==""?"Изменить":"Добавить","is-loading":n.isLoading,onClick:i[2]||(i[2]=d=>n.editNotice())},null,8,["label","is-loading"])])])}const R={props:{data:{type:Object,default:()=>{}}},emits:["modalClose"],setup(e,{emit:i}){const a=h(),n=x("emitter"),m=N(null),r=N(!1);function s(){var t,o;a==null||a.NoticeEdit({TableID:(t=e.data)==null?void 0:t.noteTable,RowID:(o=e.data)==null?void 0:o.OrderID,UserNotice:m.value}).then(l=>{var d,u;l==="SUCCESS"&&(i("modalClose"),(d=e==null?void 0:e.data)!=null&&d.emit&&n.emit((u=e==null?void 0:e.data)==null?void 0:u.emit))})}function f(){var t,o;a==null||a.NoticeEdit({TableID:(t=e.data)==null?void 0:t.noteTable,RowID:(o=e.data)==null?void 0:o.OrderID,UserNotice:""}).then(l=>{var d,u;l==="SUCCESS"&&(i("modalClose"),(d=e==null?void 0:e.data)!=null&&d.emit&&n.emit((u=e==null?void 0:e.data)==null?void 0:u.emit))})}b(()=>{var t;m.value=(t=e==null?void 0:e.data)==null?void 0:t.UserNotice});const _=t=>{t.key==="Enter"&&s()};return b(()=>{document.addEventListener("keyup",_)}),V(()=>{document.removeEventListener("keyup",_)}),{inputValue:m,isLoading:r,editNotice:s,deleteNotice:f}}},P=g(R,[["render",j],["__scopeId","data-v-ab7878d8"]]);export{P as default};
