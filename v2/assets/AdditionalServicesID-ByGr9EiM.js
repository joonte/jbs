import{_ as oe}from"./EmptyStateBlock-DA3-0YDi.js";import{_ as ae,a as ne}from"./CopyToClipboard.vue_vue_type_script_setup_true_lang-Ds1JMB0b.js";import{_ as le}from"./WhiteButton.vue_vue_type_script_setup_true_lang-CdZRVTJ5.js";import{I as ie}from"./IconProfile-CyDmeaCw.js";import{_ as ue}from"./BlueButton.vue_vue_type_script_setup_true_lang-BKdLNEec.js";import{_ as de}from"./StatusBadge-BmqDrHzy.js";import{_ as ve}from"./ClausesKeeper-iUM0yapS.js";import{_ as ce}from"./BlockBalanceAgreement-v_bWuiVT.js";import{u as me,r as C,E as we,f as c,m as pe,I as Se,o,c as m,b as a,a as s,F as _,t as l,e as d,w as S,v as Ie,h as v,K as fe,L as De,C as O,x as ge,i as _e,G as Oe,d as Pe}from"./index-Codq73aV.js";import{u as xe}from"./orders-wJq_IMsK.js";import{u as ke}from"./services-DyPBvbVy.js";import{u as be}from"./server-DnY_Nzbw.js";import{u as ye}from"./global-CdY51QQZ.js";import{g as Ce}from"./common-DyknwSqv.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./IconCopy-CvpXMuV2.js";import"./IconClose-Dia1noy8.js";import"./index-BO2gwtUe.js";import"./ButtonDefault-CMw2aBy6.js";const he={class:"tw-px-4 md:tw-px-8"},$e={class:"tw-text-2xl sm:tw-text-4xl"},Ne={class:"tw-text-gray-500 tw-text-sm tw-mt-2"},Me={class:"tw-grid tw-grid-cols-1 xl:tw-grid-cols-2 tw-gap-4 tw-mt-4"},Ae={key:0,class:"tw-border tw-rounded tw-border-gray-200 tw-p-4"},Le={class:"tw-flex tw-items-center tw-gap-2"},Be={class:"tw-text-lg sm:tw-text-2xl"},Ge={key:0,class:"tw-grid tw-grid-cols-2 tw-gap-4 tw-mt-4"},Ee={class:"tw-flex tw-items-center tw-gap-1"},Re={class:"tw-flex tw-gap-4 tw-mt-4"},He={class:"btn btn--border btn--switch tw-ml-0 tw-h-10 sm:tw-h-12"},Te={class:"tw-flex tw-flex-wrap tw-gap-4 tw-mt-4"},Ve={key:1,class:"tw-grid tw-grid-cols-3 tw-gap-6 tw-border tw-border-gray-200 tw-rounded tw-p-4"},je={class:"tw-col-span-3 tw-flex tw-items-center tw-justify-between tw-gap-2"},Fe={class:"tw-col-span-2 tw-flex tw-items-center tw-gap-1"},qe={class:"tw-break-all"},Ue={class:"tw-col-span-2 tw-flex tw-items-center tw-gap-1"},We={class:"tw-col-span-2 tw-flex tw-flex-wrap tw-items-center tw-gap-2"},Xe={key:0,class:"password-hidden"},Ke={class:"tw-col-span-2 tw-flex tw-items-center tw-gap-1"},ze={class:"tw-break-all"},Je={class:"tw-col-span-2 tw-flex tw-items-center tw-gap-1"},Qe={class:"tw-col-span-2 tw-flex tw-items-center tw-gap-1"},ft={__name:"AdditionalServicesID",async setup(Ye){let h,$;const I=_e(),P=Pe(),r=ke(),N=be(),M=ye(),H=me(),b=xe(),x=C(!1),A=C(!1),L=C(!0),f=ge("emitter");[h,$]=we(()=>Promise.all([r.fetchServices(),r.fetchDNSmanagerOrders(),r.fetchISPswOrders(),b.fetchAllOrders()])),await h,$();const t=c(()=>b.orders[I.params.id]),B=c(()=>b.orders[t.value?.DependOrderID]),k=c(()=>r.ServicesList[t.value?.ServiceID]),w=c(()=>Object.values(r.ISPswOrdersList).find(n=>n.OrderID==t.value?.ID)),i=c(()=>Object.values(r.DNSmanagerOrdersList).find(n=>n.OrderID==t.value?.ID)),y=c(()=>Object.values(r.ExtraIPOrdersList).find(n=>n.OrderID==t.value?.ID)),G=c(()=>N.serverGroupsList?.Servers?.[i.value?.ServerID]),E=c(()=>N.serverGroupsList?.Servers?.[w.value?.ServerID]);pe(t,()=>{t.value&&(x.value=t.value.IsAutoProlong)},{immediate:!0}),f.on("updateDNSManagerPage",()=>{r.fetchDNSmanagerOrders()});const T=c(()=>{const n=i.value;return n&&(r.additionalServicesScheme?.DNSmanager)[n.SchemeID]||null}),V=c(()=>{const n=w.value;return n&&(r?.additionalServicesScheme?.ISPsw)[n.SchemeID]||null});function j(n,e){let D="";e==="Default"?D="Orders":D=e+"Orders",f.emit("open-modal",{component:"StatusHistory",data:{modeID:D,rowID:n}})}function F(){f.emit("open-modal",{component:"OrderPasswordChange",data:{OrderID:i.value?.ID,ServiceID:i.value?.ServiceID,emitEvent:"updateDNSManagerPage"}})}function q(){f.emit("open-modal",{component:"OrdersTransfer",data:{ServiceOrderID:t.value?.ID,ServiceID:t.value?.ServiceID}})}function U(){M.OrderManageHosting({ServiceOrderID:i.value?.ID,OrderID:i.value?.OrderID,ServiceID:i.value?.ServiceID,XMLHttpRequest:"yes"})}function W(){M.OrderManageHosting({ServiceOrderID:w.value?.ID,OrderID:w.value?.OrderID,ServiceID:w.value?.ServiceID,XMLHttpRequest:"yes"})}function X(){t.value?.ServiceID==5e4?P.push(`/ExtraIPOrderPay/${I.params.id}`):t.value?.ServiceID==51e3?P.push(`/ISPswOrderPay/${I.params.id}`):t.value?.ServiceID==52e3?P.push(`/DNSmanagerOrderPay/${I.params.id}`):P.push(`/ServiceOrderPay/${I.params.id}`)}function K(){H.prolongOrder({IsAutoProlong:x.value?0:1,OrderID:t.value?.ID})}function R(){f.emit("open-modal",{component:"ISPswSchemeChange",data:{ISPswID:t.value?.ID,ServerGroup:V.value?.ServersGroupID,Code:t.value?.Code}})}function z(){J()}function J(){f.emit("open-modal",{component:"DNSOrderSchemeChange",data:{DNSID:t.value?.ID,ServerGroup:T.value?.ServersGroupID,Code:t.value?.Code}})}return Se(async()=>{t.value?.ServiceID==52e3&&(await r.fetchAdditionalServiceScheme(t.value?.Code),await r.fetchDNSmanagerOrders()),t.value?.ServiceID==51e3&&(await r.fetchAdditionalServiceScheme(t.value?.Code),await r.fetchISPswOrders()),t.value?.ServiceID==5e4&&(await r.fetchAdditionalServiceScheme(t.value?.Code),await r.fetchExtraIPOrders()),I.name==="ISPswOrdersIdSchemeChange"&&R(),L.value=!1}),(n,e)=>{const D=ce,Q=Oe("RouterLink"),Y=ve,Z=de,p=ae,g=ue,ee=ie,te=le,se=ne,re=oe;return o(),m(_,null,[a(D,{"contract-id":t.value?.ContractID},null,8,["contract-id"]),s("div",he,[t.value?(o(),m(_,{key:0},[s("div",null,[s("h1",$e,l(k.value?.Name),1),s("div",Ne,[B.value?(o(),m(_,{key:0},[e[11]||(e[11]=d(" Относится к заказу ",-1)),a(Q,{to:Ie(Ce)(B.value.Code,t.value.DependOrderID),class:"tw-text-sky-500"},{default:S(()=>[d(" #"+l(t.value.DependOrderID),1)]),_:1},8,["to"]),e[12]||(e[12]=d(" / ",-1))],64)):v("",!0),d(" "+l(k.value.Name)+" #"+l(t.value.ID),1)])]),a(Y),s("div",Me,[k.value&&t.value?(o(),m("div",Ae,[s("div",Le,[s("div",Be,l(k.value.Name),1),a(Z,{status:t.value.StatusID,"status-table":"Orders",class:"tw-cursor-pointer",onClick:e[0]||(e[0]=u=>j(t.value.ServiceOrderID,t.value?.Code))},null,8,["status"])]),y.value?(o(),m("div",Ge,[e[13]||(e[13]=s("div",{class:"tw-font-bold"},"IP адрес",-1)),s("div",Ee,[s("div",null,l(y.value.Login),1),a(p,{value:y.value.Login},null,8,["value"])])])):v("",!0),s("div",Re,[a(g,{class:"tw-w-30 sm:tw-w-40",onClick:e[1]||(e[1]=u=>X())},{default:S(()=>[d(l(t.value.StatusID==="ClaimForRegister"||t.value.StatusID==="Waiting"?"Оплатить":"Продлить"),1)]),_:1}),s("label",He,[fe(s("input",{"onUpdate:modelValue":e[2]||(e[2]=u=>x.value=u),type:"checkbox",onInput:e[3]||(e[3]=u=>K())},null,544),[[De,x.value]]),e[14]||(e[14]=s("span",{class:"btn-switch__text tw-text-xs sm:tw-text-sm"},"Автопродление",-1)),e[15]||(e[15]=s("span",{class:"btn-switch__toggle"},null,-1))])]),s("div",Te,[t.value.ServiceID==52e3?(o(),O(g,{key:0,class:"tw-w-36 sm:tw-w-40",onClick:e[4]||(e[4]=u=>z())},{default:S(()=>e[16]||(e[16]=[d(" Изменить тариф ",-1)])),_:1,__:[16]})):v("",!0),t.value.ServiceID==51e3?(o(),O(g,{key:1,class:"tw-w-36 sm:tw-w-40",onClick:e[5]||(e[5]=u=>R())},{default:S(()=>e[17]||(e[17]=[d(" Изменить тариф ",-1)])),_:1,__:[17]})):v("",!0),a(te,{onClick:e[6]||(e[6]=u=>q())},{default:S(()=>[a(ee),e[18]||(e[18]=d(" Передать на другой аккаунт ",-1))]),_:1,__:[18]})])])):v("",!0),t.value&&(t.value.ServiceID==52e3||t.value.ServiceID==51e3)?(o(),m("div",Ve,[s("div",je,[e[21]||(e[21]=s("div",{class:"tw-text-2xl"},"Панель управления",-1)),t.value.ServiceID==52e3?(o(),O(g,{key:0,type:"small",onClick:e[7]||(e[7]=u=>U())},{default:S(()=>e[19]||(e[19]=[d(" Вход ",-1)])),_:1,__:[19]})):v("",!0),t.value.ServiceID==51e3?(o(),O(g,{key:1,type:"small",onClick:e[8]||(e[8]=u=>W())},{default:S(()=>e[20]||(e[20]=[d(" Вход ",-1)])),_:1,__:[20]})):v("",!0)]),t.value.ServiceID==52e3?(o(),m(_,{key:0},[e[23]||(e[23]=s("div",null,"Адрес",-1)),s("div",Fe,[s("div",qe,l(`https://${G.value?.Address}/manager`),1),a(p,{value:`https://${G.value?.Address}/manager`},null,8,["value"])]),e[24]||(e[24]=s("div",null,"Логин",-1)),s("div",Ue,[s("div",null,l(i.value?.Login),1),a(p,{value:i.value?.Login},null,8,["value"])]),e[25]||(e[25]=s("div",null,"Пароль",-1)),s("div",We,[A.value?(o(),m("span",Xe,l(i.value?.Password),1)):(o(),m("button",{key:1,class:"btn btn--border btn--md tw-h-8 tw-gap-1",onClick:e[9]||(e[9]=u=>A.value=!0)},[a(se),e[22]||(e[22]=d(" Показать ",-1))])),s("button",{class:"btn btn--border btn--md tw-h-8",onClick:e[10]||(e[10]=u=>F())}," Сменить пароль "),a(p,{value:i.value?.Password},null,8,["value"])])],64)):v("",!0),t.value.ServiceID==51e3?(o(),m(_,{key:1},[e[26]||(e[26]=s("div",null,"Адрес",-1)),s("div",Ke,[s("div",ze,l(w.value?.ControlPanel),1),a(p,{value:w.value?.ControlPanel},null,8,["value"])]),e[27]||(e[27]=s("div",null,"FTP, POP3, SMTP, IMAP",-1)),s("div",Je,[s("div",null,l(E.value?.Address),1),a(p,{value:E.value?.Address},null,8,["value"])]),e[28]||(e[28]=s("div",null,"IP адрес",-1)),s("div",Qe,[s("div",null,l(w.value?.IP),1),a(p,{value:w.value?.IP},null,8,["value"])])],64)):v("",!0)])):v("",!0)])],64)):L.value?v("",!0):(o(),O(re,{key:1,label:"Заказ не найден"}))])],64)}}};export{ft as default};
