import{o as d,c as t,a as s,b as D,F as S,v as T,n as g,t as f,w as q,T as O,k as L,x as Z,p as A,l as U,_ as z,e as M,a6 as R,r as _,i as W,B as P}from"./index-ed1f28f8.js";import{u as Q}from"./domain-0e22d159.js";import{s as j}from"./multiselect-198a8c51.js";import{E as G}from"./EmptyStateBlock-dbc11827.js";import{b as H,f as J}from"./bootstrap-vue-next.es-79226723.js";import{_ as K}from"./ButtonDefault-a8aacc82.js";const X=u=>(A("data-v-9ed634bf"),u=u(),U(),u),Y={class:"section"},$={class:"container"},oo={class:"domain-block"},eo=X(()=>s("div",{class:"section-title"},[s("h2",{class:"section-block_title"},"Проверить домен")],-1)),no={class:"domain-field"},ao={key:0,class:"domain__grid"},so=["onClick"],lo={class:"domain__info-wrapper"},co={class:"domain__info-wrapper-vertical"},io={class:"domain__info-wrapper"},to={class:"domain__info-title"},ro={class:"domain__info-title"},_o={class:"domain__package-name"},uo={key:1,class:"domain__loader"},mo={key:0,class:"domain__info-wrapper"},vo={class:"domain__price"};function fo(u,i,N,n,b,r){var l;const w=H,v=K,p=J,h=G;return d(),t("div",Y,[s("div",$,[s("div",oo,[eo,s("div",no,[D(w,{modelValue:n.domainName,"onUpdate:modelValue":i[0]||(i[0]=o=>n.domainName=o),placeholder:"Например, yourName",type:"text"},null,8,["modelValue"]),D(v,{label:"Подобрать",disabled:!n.domainName,onClick:i[1]||(i[1]=o=>n.checkDomain())},null,8,["disabled"])]),n.isListLoaded?(d(),t(S,{key:0},[((l=n.domainsArray)==null?void 0:l.length)>0?(d(),t("div",ao,[(d(!0),t(S,null,T(n.domainsArray,o=>(d(),t("div",{class:g(["domain__item",{domain__item_inactive:(o==null?void 0:o.isFree)===!1||(o==null?void 0:o.isFree)===null,domain__item_active:(o==null?void 0:o.ID)===n.selectedDomain}]),onClick:k=>n.selectDomain(o)},[s("div",lo,[s("div",co,[s("div",io,[s("div",to,f(n.checkedDomain),1),s("div",ro,"."+f(o==null?void 0:o.Name),1)]),s("div",_o,f(o==null?void 0:o.PackageID),1)]),D(O,{name:"fade",mode:"out-in"},{default:q(()=>[(o==null?void 0:o.isFree)!==null?(d(),t("div",{key:0,class:g(["domain__info-status",{available:(o==null?void 0:o.isFree)===!0}])},f(o!=null&&o.isFree?"Свободен":"Занят"),3)):(d(),t("div",uo))]),_:2},1024)]),o!=null&&o.isFree?(d(),t("div",mo,[s("div",vo,f(o==null?void 0:o.CostOrder)+" ₽ / год",1),D(p,{class:"domain__checkbox",value:o==null?void 0:o.ID,"unchecked-value":"null",modelValue:n.selectedDomain,"onUpdate:modelValue":i[2]||(i[2]=k=>n.selectedDomain=k)},null,8,["value","modelValue"])])):L("",!0)],10,so))),256))])):(d(),Z(h,{key:1,class:"domain__empty",label:"Неправильное доменное имя"}))],64)):L("",!0)])])])}const po={components:{Multiselect:j},props:{domainList:{type:Array,default:()=>[]}},emits:["select"],setup(u,{emit:i}){const N=Q(),n=M(),b=R(),r=_(null);b.query.DomainName&&(r.value=b.query.DomainName,x());const w=_(null),v=_(null),p=_(!1),h=_(!1),l=_([]),o=_(null);function k(){n.replace({query:{DomainName:r.value}})}function y(){const a=document.querySelector(".domain__info-title");a&&(h.value=a.scrollWidth>a.clientWidth)}function x(){k(),N.DomainNameCheck({DomainName:r.value}).then(a=>{var F;const{result:C,resultData:e}=a;if(e!=null&&e.DomainName&&(r.value=e.DomainName,v.value=e.DomainName),e!=null&&e.Zones){l.value=u.domainList.filter(c=>{var m;return(m=e==null?void 0:e.Zones)==null?void 0:m.includes(c==null?void 0:c.Name)}).sort((c,m)=>(e==null?void 0:e.Zones.indexOf(c==null?void 0:c.Name))-(e==null?void 0:e.Zones.indexOf(m==null?void 0:m.Name))).map(c=>({...c,isFree:null})),console.log(l.value,"qwe1"),p.value=!0;let I=0;const E=setInterval(()=>{V(I),I++},100);setTimeout(()=>{clearInterval(E)},((F=l.value)==null?void 0:F.length)*100)}else l.value=[]})}function V(a){var C;N.DomainCheck({DomainName:v.value,DomainZone:(C=l.value[a])==null?void 0:C.Name}).then(e=>{l.value[a]={...l.value[a],isFree:e==="SUCCESS"}})}function B(a){o.value=a==null?void 0:a.ID,i("select",{...a,line:r.value})}return W(()=>{y(),window.addEventListener("resize",y)}),P(()=>{window.removeEventListener("resize",y)}),{domainName:r,isListLoaded:p,checkedDomain:v,domain:w,domainsArray:l,selectedDomain:o,selectDomain:B,checkDomain:x,isTextOverflow:h,checkTextOverflow:y}}},wo=z(po,[["render",fo],["__scopeId","data-v-9ed634bf"]]);export{wo as D};
