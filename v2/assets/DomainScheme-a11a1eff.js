import{o as w,c as V,a as e,b as y,Y as _,an as H,F as A,v as F,ae as I,t as u,w as M,d as R,p as K,l as W,_ as Y,e as Z,r as p,g as C}from"./index-ed1f28f8.js";import{u as q}from"./domain-0e22d159.js";import{u as z}from"./contracts-cedf6a91.js";import{u as J}from"./hosting-218d9195.js";import{u as Q}from"./resetServer-f1402ced.js";import{D as E}from"./DomainCheckBlock-5fdf7111.js";import{_ as G}from"./BlockSelectContract-c1497cc9.js";import{_ as X}from"./ButtonDefault-a8aacc82.js";import{_ as $}from"./ClausesKeeper-9aa8ead7.js";import"./multiselect-198a8c51.js";import"./EmptyStateBlock-dbc11827.js";import"./bootstrap-vue-next.es-79226723.js";import"./IconClose-a1e58263.js";const a=l=>(K("data-v-ea7ecefb"),l=l(),W(),l),ee={class:"domain-scheme"},oe={class:"section"},se={class:"container"},te=a(()=>e("div",{class:"section-header"},[e("h1",{class:"section-title"},"Заказ доменного имени")],-1)),ae={class:"section"},le={class:"container"},ne=a(()=>e("div",{class:"section-header"},[e("h2",{class:"section-block_title"},"Заказ хостинга"),e("div",{class:"section-label"},"Если домен будет использоваться совместно с заказом хостинга, выберите нужный из существующего списка")],-1)),ce={class:"form"},ie={class:"form-input_border"},re=a(()=>e("span",{class:"form-input_border-content"},[e("span",{class:"form-input_border-mark"}),e("span",{class:"form-input_border-info"},[e("span",{class:"form-input_border-address"},"Не использовать")])],-1)),de={class:"form-input_border"},_e=["value"],me={class:"form-input_border-content"},fe=a(()=>e("span",{class:"form-input_border-mark"},null,-1)),ue={class:"form-input_border-info"},pe={class:"form-input_border-address"},ve={class:"form-input_border-row"},be={class:"form-input_border-name"},he={class:"form-input_border-domain"},De={class:"section"},Se={class:"container"},Ne=a(()=>e("div",{class:"section-header"},[e("div",{class:"section-label"},"Для успешной регистрации, домен должен быть настроен на используемых именных серверах. Для этого в панели управления хостингом необходимо добавить домен, как дополнительный или паркованный.")],-1)),ke={class:"form form-grid-columns"},ye={class:"form-col"},Ie=a(()=>e("div",{class:"form-col__title"},"Первичный сервер имен",-1)),Ce={class:"form-field"},xe=a(()=>e("div",{class:"form-field__label"},"Доменный адрес",-1)),Oe=a(()=>e("label",{class:"form-field"},[e("div",{class:"form-field__label"},"IP адрес"),e("input",{type:"text",disabled:""})],-1)),we={class:"form-col"},Ve=a(()=>e("div",{class:"form-col__title"},"Вторичный сервер имен",-1)),Ue={class:"form-field"},Be=a(()=>e("div",{class:"form-field__label"},"Доменный адрес",-1)),Le=a(()=>e("label",{class:"form-field"},[e("div",{class:"form-field__label"},"IP адрес"),e("input",{type:"text",disabled:""})],-1)),ge={class:"form-col"},Pe=a(()=>e("div",{class:"form-col__title"},"Дополнительный сервер имен",-1)),He={class:"form-field"},Ee=a(()=>e("div",{class:"form-field__label"},"Доменный адрес",-1)),Ge=a(()=>e("label",{class:"form-field"},[e("div",{class:"form-field__label"},"IP адрес"),e("input",{type:"text",disabled:""})],-1)),je={class:"form-col"},Te=a(()=>e("div",{class:"form-col__title"},"Расширенный сервер имен",-1)),Ae={class:"form-field"},Fe=a(()=>e("div",{class:"form-field__label"},"Доменный адрес",-1)),Me=a(()=>e("label",{class:"form-field"},[e("div",{class:"form-field__label"},"IP адрес"),e("input",{type:"text",disabled:""})],-1)),Re={class:"section"},Ke={class:"container"},We={class:"total-block"},Ye={class:"total-block__row total-block__row--big"},Ze=a(()=>e("div",{class:"total-block__col"},"Итого за 12 месяцев",-1)),qe={class:"total-block__col"};function ze(l,t,i,o,x,v){var r,D,S;const c=$,b=G,d=E,h=X;return w(),V("div",ee,[e("div",oe,[e("div",se,[te,y(c)])]),y(b,{title:"Договор",modelValue:o.contractSelect,"onUpdate:modelValue":t[0]||(t[0]=s=>o.contractSelect=s)},null,8,["modelValue"]),y(d,{"domain-list":o.getDomains,onSelect:o.selectDomain},null,8,["domain-list","onSelect"]),e("div",ae,[e("div",le,[ne,e("div",ce,[e("label",ie,[_(e("input",{type:"radio",name:"hosting",value:null,"onUpdate:modelValue":t[1]||(t[1]=s=>o.hostingSelect=s)},null,512),[[H,o.hostingSelect]]),re]),(w(!0),V(A,null,F(o.getHostingOrders,s=>{var N,k;return w(),V("label",de,[_(e("input",{type:"radio",name:"hosting",value:s==null?void 0:s.ID,"onUpdate:modelValue":t[2]||(t[2]=n=>o.hostingSelect=n)},null,8,_e),[[H,o.hostingSelect]]),e("span",me,[fe,e("span",ue,[e("span",pe,u(s==null?void 0:s.Login)+" ("+u((N=o.getServerGroup[s==null?void 0:s.ServerID])==null?void 0:N.Address)+")",1),e("span",ve,[e("span",be,u((k=o.getContracts[s==null?void 0:s.ContractID])==null?void 0:k.Customer),1),e("span",he,u(s==null?void 0:s.Domain),1)])])])])}),256))])])]),e("div",De,[e("div",Se,[Ne,e("div",ke,[e("div",ye,[Ie,e("label",Ce,[xe,_(e("input",{type:"text",placeholder:"dns0.host-food.ru","onUpdate:modelValue":t[3]||(t[3]=s=>o.formData.Ns1Name=s)},null,512),[[I,o.formData.Ns1Name]])]),Oe]),e("div",we,[Ve,e("label",Ue,[Be,_(e("input",{type:"text",placeholder:"dns0.host-food.ru","onUpdate:modelValue":t[4]||(t[4]=s=>o.formData.Ns2Name=s)},null,512),[[I,o.formData.Ns2Name]])]),Le]),e("div",ge,[Pe,e("label",He,[Ee,_(e("input",{type:"text","onUpdate:modelValue":t[5]||(t[5]=s=>o.formData.Ns3Name=s)},null,512),[[I,o.formData.Ns3Name]])]),Ge]),e("div",je,[Te,e("label",Ae,[Fe,_(e("input",{type:"text","onUpdate:modelValue":t[6]||(t[6]=s=>o.formData.Ns4Name=s)},null,512),[[I,o.formData.Ns4Name]])]),Me])])])]),e("div",Re,[e("div",Ke,[e("div",We,[e("div",Ye,[Ze,e("div",qe,u(((r=o.domain)==null?void 0:r.CostOrder)||"0")+" ₽",1)])]),y(h,{class:"btn--wide",label:((D=o.getContracts[o.contractSelect])==null?void 0:D.Balance)>((S=o.domain)==null?void 0:S.CostOrder)?"Оплатить c баланса договора":"Добавить в корзину",onClick:t[7]||(t[7]=s=>o.createDomain()),"is-loading":o.isLoading,disabled:o.domain===null},{default:M(()=>[R("Добавить в корзину")]),_:1},8,["label","is-loading","disabled"])])])])}const Je={components:{BlockSelectContract:G,DomainCheckBlock:E},async setup(){const l=q(),t=z(),i=J(),o=Q(),x=Z(),v=p(null),c=p(null),b=p(null),d=p(!1),h=p({Ns1Name:"dns0.host-food.ru",Ns2Name:"dns1.host-food.ru",Ns3Name:null,Ns4Name:null}),r=C(()=>t.contractsList),D=C(()=>{var n;return(n=Object.keys(l==null?void 0:l.domainSchemes))==null?void 0:n.map(m=>{var f;return{...l==null?void 0:l.domainSchemes[m],value:(f=l==null?void 0:l.domainSchemes[m])==null?void 0:f.ID}})}),S=C(()=>Object.keys(i==null?void 0:i.hostingList).map(n=>i==null?void 0:i.hostingList[n])),s=C(()=>{var n;return(n=o==null?void 0:o.serverGroupsList)==null?void 0:n.Servers});function N(){var n,m,f,U,B,L,g;d.value=!0,l.DomainOrder({ContractID:v.value,Domain:`${(n=c.value)==null?void 0:n.line}${(m=c.value)!=null&&m.line&&((f=c.value)!=null&&f.Name)?"."+((U=c.value)==null?void 0:U.Name):""}`,DomainName:(B=c.value)==null?void 0:B.line,DomainSchemeID:(L=c.value)==null?void 0:L.value,DomainZone:(g=c.value)==null?void 0:g.Name,IsPrivateWhoIs:"yes",HostingOrderID:b.value,...h.value}).then(({result:j,info:O,error:Qe})=>{j==="SUCCESS"?l.DomainOrderPay({DomainOrderID:O==null?void 0:O.DomainOrderID}).then(T=>{let{result:P,error:Xe}=T;P==="SUCCESS"?x.push("/DomainOrders"):P==="BASKET"&&x.push("/Basket"),d.value=!0}):d.value=!1})}function k(n){c.value=n}return await l.fetchDomainSchemes(),await t.fetchContracts().then(()=>{var n;r.value&&(v.value=(n=Object.keys(r==null?void 0:r.value))==null?void 0:n[0])}),await i.fetchHostingOrders(),await o.fetchServerGroups(),{contractSelect:v,selectDomain:k,domain:c,hostingSelect:b,getDomains:D,getContracts:r,getHostingOrders:S,getServerGroup:s,formData:h,isLoading:d,createDomain:N}}},fo=Y(Je,[["render",ze],["__scopeId","data-v-ea7ecefb"]]);export{fo as default};
