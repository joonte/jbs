import{_ as st}from"./EmptyStateBlock-BaR9js3E.js";import{_ as ot,a as nt,b as at}from"./SettingsEngineItem-fipf4X9N.js";import{_ as rt,a as lt}from"./CopyToClipboard.vue_vue_type_script_setup_true_lang-91wn8_BT.js";import{_ as it}from"./WhiteButton-B0VC5rKo.js";import{I as dt}from"./IconProfile-BO-wrWBn.js";import{_ as ut}from"./BlueButton.vue_vue_type_script_setup_true_lang-CnzqAS80.js";import{_ as wt}from"./StatusBadge-CjHHKSUG.js";import{_ as mt}from"./ClausesKeeper-CTja-fCz.js";import{_ as ct}from"./UserNote-8i0DdDDd.js";import{v as _t,r as vt}from"./bootstrap-vue-next-DwS3lKQb.js";import{_ as pt}from"./IconDots-hRD0_8ej.js";import{_ as ft,f as It}from"./BlockBalanceAgreement-qtspRQ_B.js";import{O as bt,u as Dt,r as p,x as gt,f as g,H as St,g as yt,c as d,b as o,a as t,C as xt,h as S,F as _,t as a,n as Ot,v as w,w as m,E as ht,I as Pt,K as kt,i as y,e as c,o as l}from"./index-CmCGXBst.js";import{f as N}from"./time-DenPiOX5.js";import{_ as Mt}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./services-C54cnl9l.js";import"./IconSettings-C_oAltUA.js";import"./IconCopy-JqCg6kwh.js";import"./IconClose-B_k4TzXM.js";import"./contracts-P7YPBhEI.js";import"./ButtonDefault-BIBStZbJ.js";const Ct={class:"tw-px-4 md:tw-px-8"},$t={class:"tw-flex tw-items-center tw-justify-between tw-gap-2"},Rt={class:"tw-text-xl sm:tw-text-4xl"},Bt={class:"btn btn--dots"},Lt={class:"tw-flex tw-items-center tw-gap-2 tw-mt-2"},Nt={class:"tw-text-gray-500 tw-text-sm"},jt={class:"tw-flex tw-items-center tw-gap-8 tw-border-b tw-border-gray-200 tw-mt-4 tw-whitespace-nowrap tw-mb-6"},Ut={class:"tw-grid tw-grid-cols-1 lg:tw-grid-cols-2 tw-gap-4"},Vt={class:"tw-border tw-rounded tw-border-gray-200 tw-p-4"},Et={class:"tw-flex tw-items-center tw-justify-between tw-gap-2"},At={class:"tw-flex tw-items-center tw-gap-2"},Tt={class:"tw-text-lg sm:tw-text-2xl"},Gt={class:"list-item__row list-item__row--column tw-mt-4"},Ft={class:"list-item__text"},Ht={class:"list-item__text"},Wt={class:"list-item__text"},zt={class:"tw-flex tw-gap-4 tw-mt-4"},Kt={class:"btn btn--border btn--switch tw-ml-0 tw-h-10 sm:tw-h-12"},qt={class:"tw-mt-4"},Jt={class:"tw-border tw-rounded tw-border-gray-200 tw-p-4"},Qt={class:"tw-grid tw-grid-cols-3 tw-gap-4"},Xt={class:"tw-font-bold tw-hyphens-auto"},Yt={class:"tw-col-span-2 tw-flex tw-items-center"},Zt={class:"tw-col-span-2 tw-flex tw-items-center tw-whitespace-pre"},te={class:"tw-border tw-border-gray-200 tw-rounded tw-p-4"},ee={class:"tw-grid tw-grid-cols-3 tw-gap-4"},se={class:"tw-col-span-2 tw-flex tw-items-center tw-gap-1"},oe={class:"tw-col-span-2 tw-flex tw-items-center tw-gap-1"},ne={class:"tw-break-all"},ae={class:"tw-col-span-2 tw-flex tw-flex-wrap tw-items-center tw-gap-2"},re={key:0,class:"password-hidden"},le={class:"tw-border tw-border-gray-200 tw-rounded tw-p-4"},ie={class:"tw-grid tw-grid-cols-3 tw-gap-4"},de={class:"tw-col-span-2 tw-flex tw-items-center tw-gap-1"},ue={class:"tw-col-span-2 tw-flex tw-items-center tw-gap-1"},we={class:"tw-col-span-2 tw-flex tw-flex-wrap tw-items-center tw-gap-2"},me={key:0,class:"password-hidden"},ce={key:0,class:"tw-border tw-rounded tw-border-gray-200 tw-p-4"},_e={class:"list-item__item"},ve={class:"list-item__item"},pe={key:1,class:"tw-border tw-rounded tw-border-gray-200 tw-p-4"},fe={class:"list-item__item"},Ie={class:"list-item__item"},be={__name:"DSOrdersId",setup(De){const x=yt(),i=bt(),O=Dt(),h=p(!1),P=p(!0),f=gt("emitter");f.on("updateDSOrdersId",async()=>{await $(),await i.fetchDSOrderIPMI(s.value?.OrderID),await i.fetchDSOrderIPMISensors(s.value?.OrderID)});const k=p(!1),M=p(!1),b=p(!0),s=p(null);g(()=>s.value?.Names||[]);const D=g(()=>i.DSSchemes?.[s.value?.SchemeID]),j=g(()=>{const n=s.value.Graphs?.Graphs;return n?Object.values(n):null}),U=g(()=>{const n=s.value.Graphs?.Last;return n?Object.values(n):null});function V(n){f.emit("open-modal",{component:"StatusHistory",data:{modeID:"DSOrders",rowID:n}})}function E(n,e){const u=e[n];if(u==null)return"-";switch(n){case"ram":return`${u} ГБ`;case"chrate":return`${u} Мбит/с`;default:return u}}function A(n){if(!n)return N(new Date);const e=new Date,u=new Date(e.getTime()+n*24*60*60*1e3);return N(u)}function C(n){function e(u){h.value=u}f.emit("open-modal",{component:"ReloadDS",data:{DSOrderID:n,isReloading:h.value,onReloadStatusChange:e,ServerName:s?.value?.Scheme,SystemPower:i.DSOrderIPMI?.IPMI["System Power"],OrderID:s?.value?.OrderID}})}function T(){f.emit("open-modal",{component:"OrdersTransfer",data:{ServiceOrderID:s.value?.ID,ServiceID:s.value?.ServiceID}})}function G(){O.prolongOrder({IsAutoProlong:b.value?0:1,OrderID:s.value?.OrderID})}function F(){f.emit("open-modal",{component:"OrderRestore",data:{OrderID:s.value?.OrderID,CostDay:D.value?.CostDay,DaysRemainded:s.value?.DaysRemainded,emitEvent:"updateDSOrdersId"}})}St(async()=>{if(await i.fetchDSSchemes(),await $(),s.value){await i.fetchDSOrderIPMI(s.value.OrderID);const n=await O.fetchUserOrder(x.params.id);n&&(b.value=n.IsAutoProlong)}P.value=!1});async function $(){s.value=await i.fetchDSOrder(x.params.id)}return(n,e)=>{const u=ft,H=pt,R=vt,W=_t,z=ct,B=ht("RouterLink"),K=mt,q=wt,J=ot,Q=ut,X=dt,Y=it,Z=nt,v=rt,L=lt,tt=at,et=st;return l(),d(_,null,[o(u),t("div",Ct,[s.value?(l(),d(_,{key:0},[t("div",null,[t("div",$t,[t("h1",Rt,a(s.value.IPaddr),1),t("div",null,[t("button",{class:Ot(["btn btn--md btn--border btn--rotate btn--rotate_green",{"btn--system-off":w(i).DSOrderIPMI?.IPMI["System Power"]!=="on"}]),onClick:e[0]||(e[0]=r=>C(s.value?.ID))},a(w(i).DSOrderIPMI?.IPMI["System Power"]==="on"?"Включен":"Выключен"),3),o(W,{class:"dropdown-dots",right:""},{"button-content":m(()=>[t("span",Bt,[o(H)])]),default:m(()=>[o(R,{onClick:e[1]||(e[1]=r=>C(s.value.ID))},{default:m(()=>e[10]||(e[10]=[c("Перезагрузить",-1)])),_:1,__:[10]})]),_:1})])]),t("div",Lt,[t("div",Nt,"Выделенный сервер # "+a(s.value.OrderID),1),o(z,{text:s.value.UserNotice,"order-id":s.value.OrderID,emit:"updateDSOrdersId",position:"right"},null,8,["text","order-id"])]),t("div",jt,[o(B,{class:"tw-py-2 tw-cursor-pointer -tw-mb-[1px]","active-class":"tw-text-sky-400 tw-border-b-2 tw-border-sky-400",to:`/DSOrders/${s.value.OrderID}`},{default:m(()=>e[11]||(e[11]=[c(" Сервер ",-1)])),_:1,__:[11]},8,["to"]),o(B,{class:"tw-py-2 tw-cursor-pointer -tw-mb-[1px]","active-class":"tw-text-sky-400 tw-border-b-2 tw-border-sky-400",to:`/Services/${s.value.OrderID}`},{default:m(()=>e[12]||(e[12]=[c(" Услуги ",-1)])),_:1,__:[12]},8,["to"])])]),o(K),t("div",Ut,[t("div",Vt,[t("div",Et,[t("div",At,[t("div",Tt,a(s.value.Scheme),1),t("div",null,[o(q,{status:s.value.StatusID,DaysRemainded:s.value.DaysRemainded,"status-table":"DNSmanagerOrders",onClick:e[2]||(e[2]=r=>V(s.value.ID)),class:"tw-cursor-pointer"},null,8,["status","DaysRemainded"])])]),o(J,null,{default:m(()=>[o(R,{onClick:e[3]||(e[3]=r=>F())},{default:m(()=>e[13]||(e[13]=[c("Просмотреть учет заказа",-1)])),_:1,__:[13]})]),_:1})]),t("div",Gt,[t("div",Ft,a(w(It)(D.value?.CostMonth))+" в месяц",1),t("div",Ht,"Дней осталось "+a(s.value?.DaysRemainded||"0"),1),t("div",Wt,"Дата окончания "+a(A(s.value?.DaysRemainded)),1)]),t("div",zt,[o(Q,{onClick:e[4]||(e[4]=r=>n.$router.push(`/DSOrderPay/${s.value?.OrderID}`)),class:"tw-w-30 sm:tw-w-40"},{default:m(()=>e[14]||(e[14]=[c("Продлить",-1)])),_:1,__:[14]}),t("label",Kt,[Pt(t("input",{type:"checkbox","onUpdate:modelValue":e[5]||(e[5]=r=>b.value=r),onInput:e[6]||(e[6]=r=>G())},null,544),[[kt,b.value]]),e[15]||(e[15]=t("span",{class:"btn-switch__text tw-text-xs sm:tw-text-sm"},"Автопродление",-1)),e[16]||(e[16]=t("span",{class:"btn-switch__toggle"},null,-1))])]),t("div",qt,[o(Y,{onClick:e[7]||(e[7]=r=>T())},{default:m(()=>[o(X),e[17]||(e[17]=c(" Передать на другой аккаунт ",-1))]),_:1,__:[17]})])]),o(Z,{data:U.value,date:s.value.Graphs?.UpdateDate},null,8,["data","date"]),t("div",Jt,[t("div",Qt,[e[19]||(e[19]=t("div",{class:"tw-col-span-3 tw-flex tw-items-center tw-justify-between tw-gap-2"},[t("div",{class:"tw-text-lg sm:tw-text-2xl"},"Конфигурация")],-1)),(l(!0),d(_,null,y(s.value.Names,(r,I)=>(l(),d(_,{key:I},[t("div",Xt,a(r),1),t("div",Yt,a(E(I,s.value)),1)],64))),128)),D.value?(l(),d(_,{key:0},[e[18]||(e[18]=t("div",{class:"tw-font-bold tw-hyphens-auto"},"Примечание",-1)),t("div",Zt,a(D.value.UserNotice),1)],64)):S("",!0)])]),t("div",te,[t("div",ee,[e[21]||(e[21]=t("div",{class:"tw-col-span-3 tw-flex tw-items-center tw-justify-between tw-gap-2"},[t("div",{class:"tw-text-lg sm:tw-text-2xl"},"Доступы")],-1)),e[22]||(e[22]=t("div",{class:"tw-font-bold tw-hyphens-auto"},"IP адрес сервера",-1)),t("div",se,[t("div",null,a(s.value.IPaddr),1),o(v,{value:s.value.IPaddr},null,8,["value"])]),e[23]||(e[23]=t("div",{class:"tw-font-bold tw-hyphens-auto"},"Пользователь",-1)),t("div",oe,[t("div",ne,a(s.value.DSuser),1),o(v,{value:s.value.DSuser},null,8,["value"])]),e[24]||(e[24]=t("div",{class:"tw-font-bold tw-hyphens-auto"},"Пароль",-1)),t("div",ae,[k.value?(l(),d("span",re,a(s.value.DSpass),1)):(l(),d("button",{key:1,class:"btn btn--border btn--md tw-h-8 tw-gap-1",onClick:e[8]||(e[8]=r=>k.value=!0)},[o(L,{class:"button-icon"}),e[20]||(e[20]=c(" Показать ",-1))])),o(v,{value:s.value.DSpass},null,8,["value"])])])]),t("div",le,[t("div",ie,[e[26]||(e[26]=t("div",{class:"tw-col-span-3 tw-flex tw-items-center tw-justify-between tw-gap-2"},[t("div",{class:"tw-text-lg sm:tw-text-2xl"},"Доступы IPMI")],-1)),e[27]||(e[27]=t("div",{class:"tw-font-bold tw-hyphens-auto"},"IP адрес сервера",-1)),t("div",de,[t("div",null,a(s.value.ILOaddr),1),o(v,{value:s.value.ILOaddr},null,8,["value"])]),e[28]||(e[28]=t("div",{class:"tw-font-bold tw-hyphens-auto"},"Пользователь",-1)),t("div",ue,[t("div",null,a(s.value.ILOuser),1),o(v,{value:s.value.ILOuser},null,8,["value"])]),e[29]||(e[29]=t("div",{class:"tw-font-bold"},"Пароль",-1)),t("div",we,[M.value?(l(),d("span",me,a(s.value.ILOpass),1)):(l(),d("button",{key:1,class:"btn btn--border btn--md tw-h-8 tw-gap-1",onClick:e[9]||(e[9]=r=>M.value=!0)},[o(L,{class:"button-icon"}),e[25]||(e[25]=c(" Показать ",-1))])),o(v,{value:s.value.ILOpass},null,8,["value"])])])]),w(i).DSOrderIPMI?.IPMI&&w(i).DSOrderIPMI?.IPMI.length>0?(l(),d("div",ce,[e[30]||(e[30]=t("div",{class:"list-item__row"},[t("div",{class:"list-item__title"},"Общая информация из IPMI")],-1)),(l(!0),d(_,null,y(w(i).DSOrderIPMI?.IPMI,r=>(l(),d("div",{class:"list-item__row list-item__row--table",key:r?.name},[t("div",_e,a(r?.name),1),t("div",ve,a(r?.value),1)]))),128))])):S("",!0),w(i).DSOrderIPMI?.["IPMI.Sensors"]&&w(i).DSOrderIPMI["IPMI.Sensors"].length>0?(l(),d("div",pe,[e[31]||(e[31]=t("div",{class:"list-item__row"},[t("div",{class:"list-item__title"},"Данные сенсоров")],-1)),(l(!0),d(_,null,y(w(i).DSOrderIPMI["IPMI.Sensors"],(r,I)=>(l(),d("div",{class:"list-item__row list-item__row--table",key:I},[t("div",fe,a(I),1),t("div",Ie,a(r),1)]))),128))])):S("",!0),o(tt,{data:j.value},null,8,["data"])]),e[32]||(e[32]=t("div",{class:"text tw-my-6"},[t("h3",null,"Что входит в стоимость"),t("p",null,"Для подключения дополнительных услуг"),t("ul",null,[t("li",null,"Размещение в РФ, Москва"),t("li",null,"Предустановленная ОС FreeBSD / CentOS / Debian / Ubuntu / Windows"),t("li",null,"IP адрес, с возможностью расширения"),t("li",null,"Бесплатная панель управления ISPManager Lite"),t("li",null,"Круглосуточная поддержка")])],-1))],64)):P.value?S("",!0):(l(),xt(et,{key:1,label:"Заказ не найден"}))])],64)}}},Ge=Mt(be,[["__scopeId","data-v-d3debf38"]]);export{Ge as default};
