import{j as K,o as u,c as g,b as r,a as e,t as l,w as Q,d as Y,y as $,k as B,Z as tt,$ as et,F as ot,p as st,l as it,_ as nt,a7 as at,f as lt,e as ct,S as rt,r as E,g as y,h as _t}from"./index-145d9cde.js";import{u as mt}from"./domain-3173c1db.js";import{u as dt}from"./contracts-009c925b.js";import{f as R,a as ut}from"./useTimeFunction-8602dd60.js";import{_ as Dt}from"./IconCard-647fe573.js";import{I as ht}from"./IconProfile-5cd93df7.js";import{I as gt}from"./IconSettings-f6e23fa6.js";import{_ as vt,a as ft}from"./ServicesContractBalanceBlock-3c9d7891.js";import{S as G}from"./StatusBadge-cd3873b5.js";import{B as J}from"./BlockBalanceAgreement-650ad03e.js";import{E as pt}from"./EmptyStateBlock-a6b81e83.js";import{_ as bt}from"./ButtonDefault-6a3a5e1e.js";import{_ as It}from"./ClausesKeeper-d3875457.js";import"./bootstrap-vue-next.es-759b1c9f.js";import"./IconArrow-f2b12a71.js";import"./IconClose-f461656c.js";const wt={Waiting:{id:1,label:"Ожидание оплаты",color:"#459FD1",background:"#ADC1F04C"},ClaimForRegister:{id:2,label:"Заявка на регистрацию",color:"#FFC107",background:"#FFC10733"},ForContractRegister:{id:3,label:"Для регистрации договора",color:"#FFC107",background:"#FFC10733"},OnContractRegister:{id:4,label:"На регистрации договора",color:"#FFC107",background:"#FFC10733"}},c=_=>(st("data-v-d7fb77d4"),_=_(),it(),_),kt={key:0,class:"section"},St={class:"container"},Ct={class:"section-header"},Ot={class:"section-title"},Ft=["href"],yt={class:"section-label"},Nt={class:"section-nav"},Pt={class:"list"},xt={class:"list-col list-col--md"},Bt={class:"list-item"},Et={class:"list-item__row"},Rt={class:"list-item__title"},At={class:"list-item__status"},Tt={class:"list-item__row"},Ut={class:"list-item__ul"},Vt={key:0},Wt={class:"list-item__row list-item__row--column"},jt={key:0,class:"list-item__text"},Lt={class:"list-item__text"},Mt={class:"list-item__text"},qt={class:"list-item__row"},Ht={class:"btn btn--border btn--switch"},Xt=c(()=>e("span",{class:"btn-switch__text"},"Автопродление",-1)),Zt=c(()=>e("span",{class:"btn-switch__toggle"},null,-1)),zt={class:"list-col list-col--md"},Gt={class:"list-item"},Jt={class:"list-item__row list-item__row--nowrap"},Kt=c(()=>e("div",{class:"list-item__title"},"Именные сервера",-1)),Qt={class:"list-item__row list-item__row--table"},Yt=c(()=>e("div",{class:"list-item__item"},"Первичный сервер",-1)),$t={class:"list-item__item"},te={class:"list-item__row list-item__row--table"},ee=c(()=>e("div",{class:"list-item__item"},"Вторичный сервер",-1)),oe={class:"list-item__item"},se={class:"list-col list-col--md"},ie={class:"list-item"},ne=c(()=>e("div",{class:"list-item__row"},[e("div",{class:"list-item__title"},"Контактные данные")],-1)),ae={class:"list-item__row list-item__row--table"},le=c(()=>e("div",{class:"list-item__item"},"Скрыть данные в WhoIs",-1)),ce={class:"btn btn--switch"},re=["checked"],_e=c(()=>e("span",{class:"btn-switch__toggle"},null,-1)),me={class:"list-item__row list-item__row--table"},de=c(()=>e("div",{class:"list-item__item"},"Последнее обновление адрес",-1)),ue={class:"list-item__item"},De={key:1,class:"section"},he={class:"container"};function ge(_,n,a,o,A,v){var b,I,w,k,S,C,O,F,t,i,m,x,T,U,V,W,j,L,M,q,H,X,Z,z;const D=J,f=K("router-link"),p=It,h=bt,N=vt,s=G,P=pt;return u(),g(ot,null,[r(D),(b=o.getDomain)!=null&&b.ID?(u(),g("div",kt,[e("div",St,[e("div",Ct,[e("h1",Ot,[e("a",{href:o.fullDomainUrl,target:"_blank"},l((I=o.getDomain)==null?void 0:I.Domain),9,Ft)]),e("div",yt,"Домен # "+l((w=o.getDomain)==null?void 0:w.OrderID),1),e("div",Nt,[r(f,{class:"section-nav__item",to:`/DomainOrders/${(k=o.getDomain)==null?void 0:k.OrderID}`},{default:Q(()=>[Y("Домен")]),_:1},8,["to"])])]),r(p),((S=o.getDomain)==null?void 0:S.StatusID)==="Waiting"||((C=o.getDomain)==null?void 0:C.StatusID)==="ClaimForRegister"||((O=o.getDomain)==null?void 0:O.StatusID)==="ForContractRegister"||((F=o.getDomain)==null?void 0:F.StatusID)==="ForRegister"||((t=o.getDomain)==null?void 0:t.StatusID)==="ForTransfer"?(u(),$(h,{key:0,class:"btn-mn__bot",label:"Определить владельца",onClick:n[0]||(n[0]=d=>o.designateOwner())})):B("",!0),e("div",Pt,[r(N,{"contract-id":(i=o.getDomain)==null?void 0:i.ContractID,onTransfer:n[1]||(n[1]=d=>o.transferItem())},null,8,["contract-id"]),e("div",xt,[e("div",Bt,[e("div",Et,[e("div",Rt,l((m=o.getDomain)==null?void 0:m.Domain),1),e("div",At,[r(s,{status:(x=o.getDomain)==null?void 0:x.StatusID,"status-table":"DomainOrders"},null,8,["status"])])]),e("div",Tt,[e("ul",Ut,[(T=o.getDomainScheme)!=null&&T.PackageID?(u(),g("li",Vt,l((U=o.getDomainScheme)==null?void 0:U.PackageID),1)):B("",!0)])]),e("div",Wt,[(V=o.getDomainScheme)!=null&&V.CostProlong?(u(),g("div",jt,l((W=o.getDomainScheme)==null?void 0:W.CostProlong)+" ₽ продлить на 12 месяцев",1)):B("",!0),e("div",Lt,"Дней осталось "+l(((j=o.getDomain)==null?void 0:j.DaysRemainded)||0),1),e("div",Mt,"Дата окончания "+l(o.calculateExpirationDate((L=o.getDomain)==null?void 0:L.DaysRemainded)),1)]),e("div",qt,[r(h,{label:((M=o.getDomain)==null?void 0:M.StatusID)==="ClaimForRegister"||((q=o.getDomain)==null?void 0:q.StatusID)==="Waiting"?"Оплатить":"Продлить",onClick:n[2]||(n[2]=d=>o.navigateToProlong())},null,8,["label"]),e("label",Ht,[tt(e("input",{type:"checkbox","onUpdate:modelValue":n[3]||(n[3]=d=>o.isAutoProlong=d),onInput:n[4]||(n[4]=d=>o.setProlongValue())},null,544),[[et,o.isAutoProlong]]),Xt,Zt])])])]),e("div",zt,[e("div",Gt,[e("div",Jt,[Kt,r(h,{class:"ml-auto",label:"Редактировать",onClick:n[5]||(n[5]=d=>o.toggleDomainsEdit())})]),e("div",Qt,[Yt,e("div",$t,l((H=o.getDomain)==null?void 0:H.Ns1Name),1)]),e("div",te,[ee,e("div",oe,l((X=o.getDomain)==null?void 0:X.Ns2Name),1)])])]),e("div",se,[e("div",ie,[ne,e("div",ae,[le,e("label",ce,[e("input",{type:"checkbox",checked:(Z=o.getDomain)==null?void 0:Z.IsPrivateWhoIs,disabled:""},null,8,re),_e])]),e("div",me,[de,e("div",ue,l(o.lastUpdate((z=o.getDomain)==null?void 0:z.StatusDate)),1)])])])])])])):(u(),g("div",De,[e("div",he,[r(P,{label:"Заказ не найден"})])]))],64)}const ve={components:{IconCard:Dt,IconProfile:ht,IconSettings:gt,IconEye:ft,StatusBadge:G,BlockBalanceAgreement:J},async setup(){const _=at(),n=lt(),a=mt(),o=dt(),A=ct(),v=rt("emitter"),D=E(null),f=E(!1),p=E({});function h(){v.emit("open-modal",{component:"DomainsEdit",data:s.value})}function N(){var t;a.DomainOrderNsChange({DomainOrderID:Number((t=s.value)==null?void 0:t.ID),XMLHttpRequest:"yes"}).then(i=>{let{result:m,error:x}=i;m==="SUCCESS"&&(f.value=!1,a.fetchDomains())})}const s=y(()=>Object.keys(a==null?void 0:a.domainsList).map(t=>a==null?void 0:a.domainsList[t]).find(t=>t.OrderID===_.params.id)),P=y(()=>{var t,i;return(i=a==null?void 0:a.domainSchemes)==null?void 0:i[(t=s.value)==null?void 0:t.SchemeID]}),b=y(()=>{var t,i;return(i=n==null?void 0:n.userOrders)==null?void 0:i[(t=s.value)==null?void 0:t.OrderID]}),I=y(()=>{var i;if(!((i=s.value)!=null&&i.Domain))return"";const t=s.value.Domain;return t.startsWith("http://")||t.startsWith("https://")?t:`https://${t}`});function w(t){if(!t)return R(new Date);const i=new Date,m=new Date(i.getTime()+t*24*60*60*1e3);return R(m)}function k(t){return t?R(ut(t)):""}function S(){try{const t={DomainOrderID:s==null?void 0:s.value.ID,Domain:s==null?void 0:s.value.Domain};v.emit("open-modal",{component:"DomainSelectOwner",data:t})}catch(t){console.error(t)}}function C(){var t,i;v.emit("open-modal",{component:"OrdersTransfer",data:{ServiceOrderID:(t=s.value)==null?void 0:t.ID,ServiceID:(i=s.value)==null?void 0:i.ServiceID}})}function O(){var t;n.prolongOrder({IsAutoProlong:D.value?0:1,OrderID:(t=s.value)==null?void 0:t.OrderID})}function F(){var t;A.push(`/DomainOrderPay/${(t=s.value)==null?void 0:t.OrderID}`)}return _t(()=>{var t,i;p.value={Ns1Name:(t=s.value)==null?void 0:t.Ns1Name,Ns2Name:(i=s.value)==null?void 0:i.Ns2Name}}),await a.fetchDomains(),await a.fetchDomainSchemes(),await o.fetchProfiles(),await n.fetchUserOrders().then(()=>{var t;D.value=(t=b.value)==null?void 0:t.IsAutoProlong}),{getDomain:s,getDomainScheme:P,isAutoProlong:D,setProlongValue:O,navigateToProlong:F,domainStatuses:wt,transferItem:C,lastUpdate:k,designateOwner:S,calculateExpirationDate:w,domainsEdit:f,domainNames:p,saveDomains:N,toggleDomainsEdit:h,fullDomainUrl:I}}},Re=nt(ve,[["render",ge],["__scopeId","data-v-d7fb77d4"]]);export{Re as default};
