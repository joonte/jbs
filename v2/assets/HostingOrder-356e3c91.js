import{j as pt,o as S,c as I,b as c,a as t,t as a,w as O,d as H,Y as N,ae as L,Z as Dt,F as ft,p as St,l as It,_ as Ot,a7 as Ht,e as wt,f as bt,R as Pt,r as ct,g as h}from"./index-01c72474.js";import{_ as kt}from"./IconCard-35ff8a4a.js";import{I as yt}from"./IconProfile-29703432.js";import{I as Ct}from"./IconSettings-ac9d3113.js";import{_ as dt,a as mt}from"./ServicesContractBalanceBlock-18027f8d.js";import{S as gt}from"./StatusBadge-1436ac85.js";import{h as xt}from"./hostStatuses-94d00f20.js";import{u as Bt}from"./testTransforms-eec373ee.js";import{f as _t}from"./useTimeFunction-8602dd60.js";import{u as Nt}from"./hosting-53554967.js";import{u as At}from"./resetServer-9a5160ca.js";import{u as Et}from"./globalActions-8f995eb9.js";import{_ as vt}from"./ClausesKeeper-39926d40.js";import{s as ut}from"./SettingsEngineItem-6f18c7d8.js";import{B as ht}from"./BlockBalanceAgreement-89ea0555.js";import{E as Mt}from"./EmptyStateBlock-453d542f.js";import{_ as Rt}from"./paramsAccordionBlock-d144bba5.js";import{_ as Tt}from"./ButtonDefault-6f60da99.js";import{z as Lt}from"./bootstrap-vue-next.es-44eeb912.js";import"./contracts-b8a59bf1.js";import"./IconClose-6051fe98.js";import"./IconArrow-669aa41b.js";const d=m=>(St("data-v-5b7aa0d5"),m=m(),It(),m),Vt={key:0,class:"my-hosting-order"},Gt={class:"section"},Ut={class:"container"},jt={class:"section-header"},qt={class:"section-title"},Ft=["href"],Wt={class:"section-label"},zt={class:"section-nav"},Kt={class:"list"},Xt={class:"list-col list-col--md"},Yt={class:"list-item"},Zt={class:"list-item__row"},Jt={class:"list-item__title"},Qt={class:"list-item__status"},$t={class:"list-item__row"},te={class:"list-item__ul"},ee={class:"list-item__row list-item__row--column"},se={class:"list-item__text"},oe={class:"list-item__text"},ie={class:"list-item__text"},ne={class:"list-item__row"},ae={class:"btn btn--border btn--switch"},re=d(()=>t("span",{class:"btn-switch__text"},"Автопродление",-1)),le=d(()=>t("span",{class:"btn-switch__toggle"},null,-1)),ce={class:"list-col list-col--md"},_e={class:"list-item"},de={class:"list-item__row"},me=d(()=>t("div",{class:"list-item__title"},"Панель управления",-1)),ge={class:"list-item__row list-item__row--table"},ve=d(()=>t("div",{class:"list-item__item"},"Адрес",-1)),ue={class:"list-item__item"},he={class:"list-item__row list-item__row--table"},pe=d(()=>t("div",{class:"list-item__item"},"Логин",-1)),De={class:"list-item__item"},fe={class:"list-item__row list-item__row--table"},Se=d(()=>t("div",{class:"list-item__item"},"Пароль",-1)),Ie={class:"list-item__item hide-button"},Oe={key:0,class:"password-hidden"},He={class:"list-item__row list-item__row--table"},we=d(()=>t("div",{class:"list-item__item"},"FTP, POP3, SMTP, IMAP",-1)),be={class:"list-item__item"},Pe={class:"list-col list-col--md"},ke={class:"list-item"},ye=d(()=>t("div",{class:"list-item__row"},[t("div",{class:"list-item__title"},"Именные сервера")],-1)),Ce={class:"list-item__row list-item__row--table"},xe={class:"list-item__item"},Be={class:"list-item__item"},Ne={class:"list-item__item"},Ae={class:"list-item__item"},Ee={key:1,class:"section"},Me={class:"container"};function Re(m,i,r,s,v,V){var b,P,k,y,C,u,x,B,e,o,l,G,U,j,q,F,W,z,K,X,Y,Z,J,Q,$,tt,et,st,ot,it,nt,at,rt,lt;const A=ht,g=pt("router-link"),E=vt,p=dt,n=gt,D=Lt,f=ut,w=Tt,M=mt,R=Rt,T=Mt;return S(),I(ft,null,[c(A),(b=s.getHostingOrderData)!=null&&b.ID?(S(),I("div",Vt,[t("div",Gt,[t("div",Ut,[t("div",jt,[t("h1",qt,[t("a",{href:s.fullDomainUrl,target:"_blank"},a((P=s.getHostingOrderData)==null?void 0:P.Domain),9,Ft)]),t("div",Wt,"Хостинг # "+a((k=s.getHostingOrderData)==null?void 0:k.OrderID),1),t("div",zt,[c(g,{class:"section-nav__item",to:`/HostingOrders/${(y=s.getHostingOrderData)==null?void 0:y.OrderID}`},{default:O(()=>[H("Хостинг")]),_:1},8,["to"])])]),c(E,{partition:"Header:/HostingOrders"}),t("div",Kt,[c(p,{"contract-id":(C=s.getHostingOrderData)==null?void 0:C.ContractID,onTransfer:i[0]||(i[0]=_=>s.transferItem())},null,8,["contract-id"]),t("div",Xt,[t("div",Yt,[t("div",Zt,[t("div",Jt,a((u=s.getHostingScheme)==null?void 0:u.Name),1),t("div",Qt,[c(n,{status:(x=s.getHostingOrderData)==null?void 0:x.StatusID,"status-table":"HostingOrders"},null,8,["status"])]),c(f,null,{default:O(()=>[c(D,{onClick:i[1]||(i[1]=_=>s.changeScheme())},{default:O(()=>[H("Изменить тариф")]),_:1}),c(D,{onClick:i[2]||(i[2]=_=>s.openOrderRestore())},{default:O(()=>[H("Просмотреть учет заказа")]),_:1}),c(D,{onClick:i[3]||(i[3]=_=>s.openPasswordChange())},{default:O(()=>[H("Сменить пароль от аккаунта")]),_:1})]),_:1})]),t("div",$t,[t("ul",te,[N(t("li",null,a(s.formDescriptionLine((e=(B=s.getHostingScheme)==null?void 0:B.SchemeParams)==null?void 0:e.limit_webdomains)),513),[[L,(G=(l=(o=s.getHostingScheme)==null?void 0:o.SchemeParams)==null?void 0:l.limit_webdomains)==null?void 0:G.Value]]),N(t("li",null,a(s.formDescriptionLine((j=(U=s.getHostingScheme)==null?void 0:U.SchemeParams)==null?void 0:j.limit_quota)),513),[[L,(W=(F=(q=s.getHostingScheme)==null?void 0:q.SchemeParams)==null?void 0:F.limit_quota)==null?void 0:W.Value]]),N(t("li",null,a(s.formDescriptionLine((K=(z=s.getHostingScheme)==null?void 0:z.SchemeParams)==null?void 0:K.limit_emails)),513),[[L,(Z=(Y=(X=s.getHostingScheme)==null?void 0:X.SchemeParams)==null?void 0:Y.limit_emails)==null?void 0:Z.Value]])])]),t("div",ee,[t("div",se,a((J=s.getHostingScheme)==null?void 0:J.CostMonth)+" ₽ в месяц",1),t("div",oe,"Дней осталось "+a(((Q=s.getHostingOrderData)==null?void 0:Q.DaysRemainded)||0),1),t("div",ie,"Дата окончания "+a(s.calculateExpirationDate(($=s.getHostingOrderData)==null?void 0:$.DaysRemainded)),1)]),t("div",ne,[t("div",{class:"btn btn-default btn--blue",onClick:i[4]||(i[4]=_=>s.navigateToProlong())},a(((tt=s.getHostingOrderData)==null?void 0:tt.StatusID)==="Waiting"?"Оплатить":"Продлить"),1),t("label",ae,[N(t("input",{type:"checkbox","onUpdate:modelValue":i[5]||(i[5]=_=>s.isAutoProlong=_),onInput:i[6]||(i[6]=_=>s.setProlongValue())},null,544),[[Dt,s.isAutoProlong]]),re,le])])])]),t("div",ce,[t("div",_e,[t("div",de,[me,c(w,{class:"ml-auto",onClick:i[7]||(i[7]=_=>s.orderManage()),label:"Вход"})]),t("div",ge,[ve,t("div",ue,a(`https://${(et=s.getServerGroup)==null?void 0:et.Address}/manager`),1)]),t("div",he,[pe,t("div",De,a((st=s.getHostingOrderData)==null?void 0:st.Login),1)]),t("div",fe,[Se,t("div",Ie,[s.passwordShow?(S(),I("div",Oe,a(s.getHostingOrderData.Password),1)):(S(),I("button",{key:1,class:"btn btn--border btn--md hide-button",onClick:i[8]||(i[8]=_=>s.passwordShow=!0)},[c(M),H("Показать")]))])]),t("div",He,[we,t("div",be,a((ot=s.getServerGroup)==null?void 0:ot.Address),1)])])]),t("div",Pe,[t("div",ke,[ye,t("div",Ce,[t("div",xe,a((it=s.getHostingOrderData)==null?void 0:it.Ns1Name),1),t("div",Be,a((nt=s.getHostingOrderData)==null?void 0:nt.Ns2Name),1),t("div",Ne,a((at=s.getHostingOrderData)==null?void 0:at.Ns3Name),1),t("div",Ae,a((rt=s.getHostingOrderData)==null?void 0:rt.Ns4Name),1)])])])])])]),c(R,{"params-list":(lt=s.getHostingScheme)==null?void 0:lt.SchemeParams,label:"Общая информация","main-param":"InternalName"},null,8,["params-list"])])):(S(),I("div",Ee,[t("div",Me,[c(T,{label:"Заказ не найден"})])]))],64)}const Te={components:{IconCard:kt,IconProfile:yt,IconSettings:Ct,IconEye:mt,StatusBadge:gt,ClausesKeeper:vt,settingsEngineItem:ut,ServicesContractBalanceBlock:dt,BlockBalanceAgreement:ht},async setup(){const m=Ht(),i=wt(),r=Nt(),s=At(),v=bt(),V=Et(),{formDescriptionLine:A}=Bt(),g=Pt("emitter");g.on("updateHostingIDPage",()=>{r.fetchHostingOrders()});const E=ct(!1),p=ct(!1),n=h(()=>Object.keys(r==null?void 0:r.hostingList).map(e=>r==null?void 0:r.hostingList[e]).find(e=>e.OrderID===m.params.id)),D=h(()=>r==null?void 0:r.hostingSchemes),f=h(()=>{var e,o;return(o=D.value)==null?void 0:o[(e=n.value)==null?void 0:e.SchemeID]}),w=h(()=>{var e,o;return(o=v==null?void 0:v.userOrders)==null?void 0:o[(e=n.value)==null?void 0:e.OrderID]}),M=h(()=>{var e,o,l;return(l=(e=s==null?void 0:s.serverGroupsList)==null?void 0:e.Servers)==null?void 0:l[(o=n.value)==null?void 0:o.ServerID]}),R=h(()=>{var o;if(!((o=n.value)!=null&&o.Domain))return"";const e=n.value.Domain;return e.startsWith("http://")||e.startsWith("https://")?e:`https://${e}`});function T(e){if(!e)return _t(new Date);const o=new Date,l=new Date(o.getTime()+e*24*60*60*1e3);return _t(l)}function b(){var e,o;g.emit("open-modal",{component:"OrdersTransfer",data:{ServiceOrderID:(e=n.value)==null?void 0:e.ID,ServiceID:(o=n.value)==null?void 0:o.ServiceID}})}function P(){var e;v.prolongOrder({IsAutoProlong:p.value?0:1,OrderID:(e=n.value)==null?void 0:e.OrderID})}function k(){var e;i.push(`/HostingOrders/${(e=n.value)==null?void 0:e.OrderID}/SchemeChange`),u()}function y(){var e;i.push(`/HostingOrderPay/${(e=n.value)==null?void 0:e.OrderID}`)}function C(){var e,o,l;V.OrderManageHosting({ServiceOrderID:(e=n.value)==null?void 0:e.ID,OrderID:(o=n.value)==null?void 0:o.OrderID,ServiceID:(l=n.value)==null?void 0:l.ServiceID,XMLHttpRequest:"yes"})}function u(){var e,o;g.emit("open-modal",{component:"HostingOrderSchemeChange",data:{hostingID:(e=n.value)==null?void 0:e.ID,ServerGroup:(o=f.value)==null?void 0:o.ServersGroupID,emitEvent:"updateHostingIDPage"}})}function x(){var e,o;g.emit("open-modal",{component:"OrderPasswordChange",data:{OrderID:(e=n.value)==null?void 0:e.ID,ServiceID:(o=n.value)==null?void 0:o.ServiceID,emitEvent:"updateHostingIDPage"}})}function B(){var e,o,l;g.emit("open-modal",{component:"OrderRestore",data:{OrderID:(e=n.value)==null?void 0:e.OrderID,CostDay:(o=f.value)==null?void 0:o.CostDay,DaysRemainded:(l=n.value)==null?void 0:l.DaysRemainded,emitEvent:"updateHostingIDPage"}})}return await r.fetchHostingOrders(),await r.fetchHostingSchemes(),await s.fetchServerGroups().then(()=>{m.name==="default.MyHostingOrderSchemeChange"&&u()}),await v.fetchUserOrders().then(()=>{var e;p.value=(e=w.value)==null?void 0:e.IsAutoProlong}),{getHostingOrderData:n,getHostingScheme:f,getUserOrder:w,getServerGroup:M,isAutoProlong:p,passwordShow:E,openOrderRestore:B,openPackageChangeModal:u,orderManage:C,navigateToProlong:y,setProlongValue:P,openPasswordChange:x,hostStatuses:xt,transferItem:b,formDescriptionLine:A,calculateExpirationDate:T,changeScheme:k,fullDomainUrl:R}}},as=Ot(Te,[["render",Re],["__scopeId","data-v-5b7aa0d5"]]);export{as as default};
