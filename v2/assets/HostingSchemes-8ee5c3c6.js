import{k as P,o as _,c as i,a,t as g,l as w,F as f,y as D,q as j,b as k,w as L,d as V,n as B,_ as H,z as x,p as $,m as A,r as T,h as G}from"./index-777dc609.js";import{u as q}from"./hosting-d8f271af.js";import{u as z}from"./resetServer-cf9e9253.js";import{_ as F}from"./IconDots-d23bdaf1.js";import{_ as K}from"./IconCard-ba144b8a.js";import{S as M}from"./StatusBadge-f0ac8f52.js";import{u as J}from"./testTransforms-eec373ee.js";import{B as O}from"./BlockBalanceAgreement-d9b1b07a.js";import{_ as N}from"./ClausesKeeper-4fcca336.js";import{E as Q}from"./EmptyStateBlock-1f3845f9.js";import"./IconArrow-1d7911e1.js";import"./bootstrap-vue-next.es-8d4e1458.js";import"./ButtonDefault-7f62b822.js";import"./IconClose-166e70a9.js";const R={class:"hosting-order-item__wrapper"},U={class:"hosting-order-item__header"},W={class:"hosting-order-item__name"},X={key:0,class:"hosting-order-item__price"},Y={class:"hosting-order-item__content"},Z={class:"hosting-order-item__row"},ee={class:"hosting-order-item__list"},oe={class:"hosting-order-item__row"},se={class:"hosting-order-item__note"};function re(c,d,n,t,I,l){var h,v,u,p,s,S,e;const m=P("router-link");return _(),i("div",{class:B(["hosting-order-item",{"hosting-order-item--special":(h=n.data)==null?void 0:h.note}])},[a("div",R,[a("div",U,[a("div",W,g((v=n.data)==null?void 0:v.name),1),(u=n.data)!=null&&u.price?(_(),i("div",X,g((p=n.data)==null?void 0:p.price)+" ₽ в месяц",1)):w("",!0)]),a("div",Y,[a("div",Z,[a("ul",ee,[(_(!0),i(f,null,D((s=n.data)==null?void 0:s.specifications,o=>(_(),i("li",null,g(o),1))),256))])]),(S=n.data)!=null&&S.note?j(c.$slots,"default",{key:0},()=>{var o;return[a("div",oe,[a("div",se,g((o=n.data)==null?void 0:o.note),1)])]},!0):w("",!0),k(m,{class:"btn btn--wide btn--border btn--wide",to:`/HostingSchemes/${(e=n.data)==null?void 0:e.ID}`},{default:L(()=>[V(" Заказать")]),_:1},8,["to"])])])],2)}const te={components:{IconDots:F,IconCard:K,StatusBadge:M},props:{data:{type:Object,default:()=>{}}}},E=H(te,[["render",re],["__scopeId","data-v-62ce5dab"]]),ne=c=>($("data-v-96ac5d26"),c=c(),A(),c),ae={class:"section"},ce={class:"container"},_e={class:"section-header"},de=ne(()=>a("h1",{class:"section-title"},"Заказать хостинг",-1)),ie={class:"section-nav"},le=["data-title","onClick"],ue={class:"section-text section-text--margin"},pe={key:0,class:"list"};function he(c,d,n,t,I,l){var p;const m=O,h=N,v=E,u=Q;return _(),i(f,null,[k(m),a("div",ae,[a("div",ce,[a("div",_e,[de,k(h),a("div",ie,[(_(!0),i(f,null,D(t.filterServerGroups(),(s,S)=>{var e,o;return _(),i("div",{class:B(["section-nav__item",{active:String(t.currentGroup)===String(s==null?void 0:s.ServersGroupID)}]),"data-title":(e=t.getServerGroup(s==null?void 0:s.ServersGroupID))==null?void 0:e.Comment,onClick:r=>t.setCurrentGroup(s==null?void 0:s.ServersGroupID)},g((o=t.getServerGroup(s==null?void 0:s.ServersGroupID))==null?void 0:o.Name),11,le)}),256))])]),a("div",ue,g((p=t.getServerGroup(t.currentGroup))==null?void 0:p.Comment),1),t.filterSchemes?(_(),i("div",pe,[(_(!0),i(f,null,D(t.filterSchemes,s=>(_(),x(v,{data:t.getCardData(s)},null,8,["data"]))),256))])):(_(),x(u,{key:1,label:"Нет доступных тарифов"}))])])],64)}const ve={components:{HostingOrderItem:E,ClausesKeeper:N,BlockBalanceAgreement:O},async setup(){var s,S;const c=q(),d=z(),n=T(0),{formDescriptionLine:t}=J(),I=G(()=>{let e=[];return l.value&&(Object.keys(l.value).forEach(o=>{var r;String((r=l.value[o])==null?void 0:r.ServersGroupID)===String(n.value)&&e.push(l.value[o])}),e.sort((o,r)=>o.SortID-r.SortID)),e}),l=G(()=>c==null?void 0:c.hostingSchemes);function m(e){n.value=e}function h(e){var o,r,C,b,y;return{ID:e==null?void 0:e.ID,name:e==null?void 0:e.Name,price:e==null?void 0:e.CostMonth,specifications:[t((o=e==null?void 0:e.SchemeParams)==null?void 0:o.limit_webdomains),t((r=e==null?void 0:e.SchemeParams)==null?void 0:r.limit_quota),t((C=e==null?void 0:e.SchemeParams)==null?void 0:C.limit_emails),t((b=e==null?void 0:e.SchemeParams)==null?void 0:b.disklimit),t((y=e==null?void 0:e.SchemeParams)==null?void 0:y.maillimit)],note:e==null?void 0:e.Comment}}const v=G(()=>{var e;return(e=d==null?void 0:d.serverGroupsList)==null?void 0:e.Servers});function u(){let e={};return Object.values(v.value).forEach(o=>{if(o.ServiceID==="10000"){const r=o.ServersGroupID;e[r]||(e[r]={SortID:o.SortID,ServersGroupID:r,servers:[]}),e[r].servers.push(o)}}),Object.values(e).sort((o,r)=>o.SortID-r.SortID)}function p(e){var o,r;return(r=(o=d==null?void 0:d.serverGroupsList)==null?void 0:o.ServersGroups)==null?void 0:r[e]}return await c.fetchHostingSchemes(),await d.fetchServerGroups(),n.value=(S=(s=u())==null?void 0:s[0])==null?void 0:S.ServersGroupID,{getHostingSchemes:l,getServerGroup:p,filterServerGroups:u,setCurrentGroup:m,getCardData:h,filterSchemes:I,currentGroup:n}}},He=H(ve,[["render",he],["__scopeId","data-v-96ac5d26"]]);export{He as default};
