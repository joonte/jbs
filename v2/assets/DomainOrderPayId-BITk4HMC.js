import{_ as O}from"./EmptyStateBlock-DA3-0YDi.js";import{_ as A}from"./ButtonDefault-CMw2aBy6.js";import{_ as E}from"./TotalAmount.vue_vue_type_script_setup_true_lang-Dg-09YER.js";import{_ as N}from"./ClausesKeeper-iUM0yapS.js";import{_ as $}from"./BlockBalanceAgreement-v_bWuiVT.js";import{S as L,r as F,f as d,E as p,I as T,s as K,o as s,c as o,b as m,a as e,t as x,h as D,C as S,F as V,d as M,i as R}from"./index-Codq73aV.js";import{u as U}from"./index-BO2gwtUe.js";import{_ as W}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./common-DyknwSqv.js";import"./IconClose-Dia1noy8.js";const j={class:"tw-px-4 md:tw-px-8"},Y={key:0},Z={key:0,class:"tw-text-xl sm:tw-text-4xl"},q={key:1,class:"tw-text-xl sm:tw-text-4xl"},z={key:2,class:"tw-text-xl sm:tw-text-4xl"},G={class:"tw-text-gray-500 tw-text-sm tw-mt-2"},H={key:0,class:"tw-mt-4 tw-mb-6"},J={class:"domain-prolong__data"},Q={key:0,class:"form-field"},X=["value"],ee={class:"form-field"},te=["value"],ae={key:1,class:"form-field__msg"},se={class:"form-field"},oe=["value"],le={class:"domain-prolong__data"},ne={__name:"DomainOrderPayId",async setup(re){let r,i;const u=L(),v=U(),k=R(),f=M(),_=F(!1),c=d(()=>t.value?.IsPayed?l.value.CostProlong+Number(t.value?.AdditionalCost?.Summ||0)||0:l.value.CostOrder+Number(t.value?.AdditionalCost?.Summ||0)),g=d(()=>w.value.Balance>c.value?"Оплатить c баланса договора":"Добавить в корзину");async function y(){_.value=!0;const n=await u.DomainOrderPay({DomainOrderID:t.value?.ID,YearsPay:1});let{result:a}=n;a==="SUCCESS"?f.push("/DomainOrders"):a==="BASKET"&&f.push("/Basket"),_.value=!1}const h=n=>{n.key==="Enter"&&n.ctrlKey&&y()},t=d(()=>Object.values(u.domainsList).find(n=>n.OrderID==k.params.id)),l=d(()=>u.domainSchemes[t.value?.SchemeID]),w=d(()=>v.contractsList[t.value?.ContractID]);return[r,i]=p(()=>u.fetchDomainOrders()),await r,i(),[r,i]=p(()=>u.fetchDomainSchemes()),await r,i(),[r,i]=p(()=>v.fetchContracts()),await r,i(),T(()=>{document.addEventListener("keyup",h)}),K(()=>{document.removeEventListener("keyup",h)}),(n,a)=>{const C=$,I=N,B=E,P=A,b=O;return s(),o(V,null,[m(C),e("div",j,[t.value?(s(),o("div",Y,[e("div",null,[t.value.StatusID==="Waiting"?(s(),o("h1",Z," Оплата заказа доменного имени ")):t.value.StatusID==="ForTransfer"?(s(),o("h1",q," Оплата переноса домена ")):(s(),o("h1",z," Оплата продления доменного имени ")),e("div",G,x(t.value?.DomainName?`#${t.value?.DomainName}.${t.value?.DomainZone}`:""),1)]),m(I),l.value?.IsPayed&&l.value?.IsProlong||!l.value?.IsPayed?(s(),o("div",H,[e("div",J,[t.value.StatusID==="Waiting"||t.value.StatusID==="ForTransfer"?(s(),o("label",Q,[a[1]||(a[1]=e("div",{class:"form-field__label"},"Стоимость заказа (в год)",-1)),e("input",{type:"text",placeholder:"0 руб",value:l.value?.CostOrder+" руб",disabled:""},null,8,X)])):D("",!0),e("label",ee,[a[2]||(a[2]=e("div",{class:"form-field__label"},"Стоимость продления (в год)",-1)),e("input",{type:"text",placeholder:"0 руб",value:l.value?.CostProlong+" руб",disabled:""},null,8,te)]),a[4]||(a[4]=e("label",{class:"form-field"},[e("div",{class:"form-field__label"},"Количество лет"),e("input",{type:"text",placeholder:"1",value:"1",disabled:""})],-1)),t.value?.AdditionalCost?(s(),o("div",ae,[e("p",null,x(t.value?.AdditionalCost.Message),1)])):D("",!0),e("label",se,[a[3]||(a[3]=e("div",{class:"form-field__label"},"Всего к оплате",-1)),e("input",{type:"text",placeholder:"0 руб",value:c.value,disabled:""},null,8,oe)])]),e("div",le,[m(B,{tariff:{label:"1 год",price:c.value},price:c.value},null,8,["tariff","price"]),m(P,{class:"btn--wide",label:g.value,onClick:a[0]||(a[0]=ie=>y()),"is-loading":_.value},null,8,["label","is-loading"])])])):(s(),S(b,{key:1,class:"no-margin",label:"Заказ нельзя продлить"}))])):(s(),S(b,{key:1,label:"Заказ домена не найден"}))])],64)}}},be=W(ne,[["__scopeId","data-v-5c661202"]]);export{be as default};
