import{_ as V}from"./ButtonDefault-eJbeaBtE.js";import{m as L}from"./bootstrap-vue-next-CxxkTytZ.js";import{_ as x}from"./BlockSelectProfile-CryEnOWq.js";import{O as P,r,d as $,x as N,f,h as g,s as B,c as T,o as M,a as d,t as R,b as u,w as U,e as j}from"./index-XtiBO-PZ.js";import{u as A}from"./contracts-BdlSA9YT.js";import{_ as F}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./multiselect-eqvbz1NV.js";const W={class:"modal__body"},h={class:"list-item__title"},K={class:"modal__input-row"},q={class:"modal__input-row"},z={class:"modal__buttons-wrap"},G={__name:"ModalWindowDomainSelectOwner",props:["data"],emits:["modalClose","buttonClicked"],setup(m,{emit:w}){const c=P(),k=A(),n=r(null),a=r(!1),_=r(!1);r("Natural"),$();const v=N("emitter"),l=m,C=w,s=f(()=>{const t=Object.values(c.domainsList);return l.data.OrderID!==void 0&&l.data.OrderID!==null?t.filter(e=>e.OrderID.toString()===l.data.OrderID.toString()):null}),i=f(()=>k?.profileList),y=f(()=>Object.keys(i?.value).map(t=>({value:i.value?.[t]?.ID,name:i.value?.[t]?.Name})));g(()=>{y?.value.length<1&&v.emit("open-modal",{component:"NewProfile"})});function D(){C("modalClose")}function E(){v.emit("open-modal",{component:"AcceptCreateProfile"})}function b(){_.value=!0;let t;s.value&&s.value!==void 0?t=s.value[0].ID:t=l.data.DomainOrderID;const e={DomainOrderID:t,OwnerTypeID:"Profile",ProfileID:i.value[n.value]?.ID,Agree:a.value?"yes":"no"};c.DomainSelectOwner(e).then(({result:p,resultData:O})=>{p==="SUCCESS"&&D(),_.value=!1})}const I=t=>{t.key==="Enter"&&b()};return g(()=>{document.addEventListener("keyup",I),c.fetchDomains()}),B(()=>{document.removeEventListener("keyup",I)}),(t,e)=>{const p=x,O=L,S=V;return M(),T("div",W,[d("div",h,"Владелец домена "+R(m.data?.Domain?m.data?.Domain:s.value?.[0]?.Domain),1),d("div",K,[u(p,{title:"",modelValue:n.value,"onUpdate:modelValue":e[0]||(e[0]=o=>n.value=o),domainOwner:!0,onButtonClicked:e[1]||(e[1]=o=>D())},null,8,["modelValue"])]),d("div",q,[u(O,{modelValue:a.value,"onUpdate:modelValue":e[2]||(e[2]=o=>a.value=o)},{default:U(()=>e[5]||(e[5]=[j(" Согласен на передачу моих персональных данных регистратору ",-1)])),_:1,__:[5]},8,["modelValue"])]),d("div",z,[u(S,{class:"select-contract__button modal__button",label:"Создать новый профиль",onClick:e[3]||(e[3]=o=>E())}),u(S,{class:"modal__button",label:"Сохранить",disabled:!a.value||n.value===null,"is-loading":_.value,onClick:e[4]||(e[4]=o=>b())},null,8,["disabled","is-loading"])])])}}},te=F(G,[["__scopeId","data-v-4309d1be"]]);export{te as default};
