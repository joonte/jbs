import{_ as ae}from"./EmptyStateBlock-Ad1AmtSS.js";import{_ as le,a as ne}from"./CopyToClipboard.vue_vue_type_script_setup_true_lang-RZ0BAL8S.js";import{_ as ie}from"./WhiteButton.vue_vue_type_script_setup_true_lang-ClwvvVEf.js";import{I as ue}from"./IconProfile-DDO3OQU0.js";import{_ as de}from"./BlueButton.vue_vue_type_script_setup_true_lang-q3k2Q2g8.js";import{_ as ve}from"./StatusBadge-DZmmWv0G.js";import{_ as me}from"./ClausesKeeper-gPyacQ05.js";import{_ as ce,g as we}from"./BlockBalanceAgreement-DSLTUOoQ.js";import{u as pe,r as C,D as Se,f as d,g as Ie,m as fe,x as ge,H as De,c,b as a,a as s,C as _,h as v,F as O,t as n,e as m,w as S,v as _e,E as Oe,J as Pe,L as xe,d as ke,o as l}from"./index-C9dBN6m4.js";import{u as be}from"./orders-D_JLVTov.js";import{u as ye}from"./services-moLhYNFg.js";import{u as Ce}from"./server-D__H3WLv.js";import{u as he}from"./global-DiPSuX9n.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./IconCopy-CTfDC5Bz.js";import"./IconClose-CgjzG0Yf.js";import"./contracts-BEc0DZS2.js";import"./ButtonDefault-B1FApUky.js";import"./index-D0iqQ1zq.js";const $e={class:"tw-px-4 md:tw-px-8"},Ne={class:"tw-text-2xl sm:tw-text-4xl"},Ae={class:"tw-text-gray-500 tw-text-sm tw-mt-2"},Le={class:"tw-grid tw-grid-cols-1 xl:tw-grid-cols-2 tw-gap-4 tw-mt-4"},Me={key:0,class:"tw-border tw-rounded tw-border-gray-200 tw-p-4"},Be={class:"tw-flex tw-items-center tw-gap-2"},Ge={class:"tw-text-lg sm:tw-text-2xl"},Ee={key:0,class:"tw-grid tw-grid-cols-2 tw-gap-4 tw-mt-4"},Re={class:"tw-flex tw-items-center tw-gap-1"},He={class:"tw-flex tw-gap-4 tw-mt-4"},Te={class:"btn btn--border btn--switch tw-ml-0 tw-h-10 sm:tw-h-12"},Ve={class:"tw-flex tw-flex-wrap tw-gap-4 tw-mt-4"},je={key:1,class:"tw-grid tw-grid-cols-3 tw-gap-6 tw-border tw-border-gray-200 tw-rounded tw-p-4"},Fe={class:"tw-col-span-3 tw-flex tw-items-center tw-justify-between tw-gap-2"},qe={class:"tw-col-span-2 tw-flex tw-items-center tw-gap-1"},Ue={class:"tw-break-all"},We={class:"tw-col-span-2 tw-flex tw-items-center tw-gap-1"},Xe={class:"tw-col-span-2 tw-flex tw-flex-wrap tw-items-center tw-gap-2"},Je={key:0,class:"password-hidden"},ze={class:"tw-col-span-2 tw-flex tw-items-center tw-gap-1"},Ke={class:"tw-break-all"},Qe={class:"tw-col-span-2 tw-flex tw-items-center tw-gap-1"},Ye={class:"tw-col-span-2 tw-flex tw-items-center tw-gap-1"},gt={__name:"AdditionalServicesID",async setup(Ze){let h,$;const I=Ie(),P=ke(),o=ye(),N=Ce(),A=he(),T=pe(),b=be(),x=C(!1),L=C(!1),M=C(!0),f=ge("emitter");[h,$]=Se(()=>Promise.all([o.fetchServices(),o.fetchDNSmanagerOrders(),o.fetchISPswOrders(),b.fetchAllOrders()])),await h,$();const t=d(()=>b.orders[I.params.id]),B=d(()=>b.orders[t.value?.DependOrderID]),k=d(()=>o.ServicesList[t.value?.ServiceID]),w=d(()=>Object.values(o.ISPswOrdersList).find(r=>r.OrderID==t.value?.ID)),i=d(()=>Object.values(o.DNSmanagerOrdersList).find(r=>r.OrderID==t.value?.ID)),y=d(()=>Object.values(o.ExtraIPOrdersList).find(r=>r.OrderID==t.value?.ID)),G=d(()=>o?.additionalServicesScheme),E=d(()=>N?.serverGroupsList?.Servers?.[i.value?.ServerID]),R=d(()=>N?.serverGroupsList?.Servers?.[w.value?.ServerID]);fe(t,r=>{r&&(x.value=r.IsAutoProlong)}),f.on("updateDNSManagerPage",()=>{o.fetchDNSmanagerOrders()});const V=d(()=>{const r=i.value;return r&&G.value.DNSmanager[r.SchemeID]||null}),j=d(()=>{const r=w.value;return r&&G.value.ISPsw[r.SchemeID]||null});function F(r,e){let g="";switch(e){case"Default":g="Orders";break;default:g=e+"Orders";break}f.emit("open-modal",{component:"StatusHistory",data:{modeID:g,rowID:r}})}function q(){f.emit("open-modal",{component:"OrderPasswordChange",data:{OrderID:i.value?.ID,ServiceID:i.value?.ServiceID,emitEvent:"updateDNSManagerPage"}})}function U(){f.emit("open-modal",{component:"OrdersTransfer",data:{ServiceOrderID:t.value?.ID,ServiceID:t.value?.ServiceID}})}function W(){A.OrderManageHosting({ServiceOrderID:i.value?.ID,OrderID:i.value?.OrderID,ServiceID:i.value?.ServiceID,XMLHttpRequest:"yes"})}function X(){A.OrderManageHosting({ServiceOrderID:w.value?.ID,OrderID:w.value?.OrderID,ServiceID:w.value?.ServiceID,XMLHttpRequest:"yes"})}function J(){t.value?.ServiceID==5e4?P.push(`/ExtraIPOrderPay/${I.params.id}`):t.value?.ServiceID==51e3?P.push(`/ISPswOrderPay/${I.params.id}`):t.value?.ServiceID==52e3?P.push(`/DNSmanagerOrderPay/${I.params.id}`):P.push(`/ServiceOrderPay/${I.params.id}`)}function z(){T.prolongOrder({IsAutoProlong:x.value?0:1,OrderID:t.value?.ID})}function H(){f.emit("open-modal",{component:"ISPswSchemeChange",data:{ISPswID:t.value?.ID,ServerGroup:j.value?.ServersGroupID,Code:t.value?.Code}})}function K(){Q()}function Q(){f.emit("open-modal",{component:"DNSOrderSchemeChange",data:{DNSID:t.value?.ID,ServerGroup:V.value?.ServersGroupID,Code:t.value?.Code}})}return De(async()=>{t.value?.ServiceID==52e3&&(await o.fetchAdditionalServiceScheme(t.value?.Code),await o.fetchDNSmanagerOrders()),t.value?.ServiceID==51e3&&(await o.fetchAdditionalServiceScheme(t.value?.Code),await o.fetchISPswOrders()),t.value?.ServiceID==5e4&&(await o.fetchAdditionalServiceScheme(t.value?.Code),await o.fetchExtraIPOrders()),I.name==="ISPswOrdersIdSchemeChange"&&H(),M.value=!1}),(r,e)=>{const g=ce,Y=Oe("RouterLink"),Z=me,ee=ve,p=le,D=de,te=ue,se=ie,re=ne,oe=ae;return l(),c(O,null,[a(g),s("div",$e,[t.value?(l(),c(O,{key:0},[s("div",null,[s("h1",Ne,n(k.value?.Name),1),s("div",Ae,[B.value?(l(),c(O,{key:0},[e[11]||(e[11]=m("Относится к заказу ",-1)),a(Y,{to:_e(we)(B.value.Code,t.value.DependOrderID),class:"tw-text-sky-500"},{default:S(()=>[m("#"+n(t.value.DependOrderID),1)]),_:1},8,["to"]),e[12]||(e[12]=m(" /",-1))],64)):v("",!0),m(" "+n(k.value.Name)+" #"+n(t.value.ID),1)])]),a(Z),s("div",Le,[k.value&&t.value?(l(),c("div",Me,[s("div",Be,[s("div",Ge,n(k.value.Name),1),a(ee,{status:t.value.StatusID,"status-table":"Orders",onClick:e[0]||(e[0]=u=>F(t.value.ServiceOrderID,t.value?.Code)),class:"tw-cursor-pointer"},null,8,["status"])]),y.value?(l(),c("div",Ee,[e[13]||(e[13]=s("div",{class:"tw-font-bold"},"IP адрес",-1)),s("div",Re,[s("div",null,n(y.value.Login),1),a(p,{value:y.value.Login},null,8,["value"])])])):v("",!0),s("div",He,[a(D,{onClick:e[1]||(e[1]=u=>J()),class:"tw-w-30 sm:tw-w-40"},{default:S(()=>[m(n(t.value.StatusID==="ClaimForRegister"||t.value.StatusID==="Waiting"?"Оплатить":"Продлить"),1)]),_:1}),s("label",Te,[Pe(s("input",{type:"checkbox","onUpdate:modelValue":e[2]||(e[2]=u=>x.value=u),onInput:e[3]||(e[3]=u=>z())},null,544),[[xe,x.value]]),e[14]||(e[14]=s("span",{class:"btn-switch__text tw-text-xs sm:tw-text-sm"},"Автопродление",-1)),e[15]||(e[15]=s("span",{class:"btn-switch__toggle"},null,-1))])]),s("div",Ve,[t.value.ServiceID==52e3?(l(),_(D,{key:0,onClick:e[4]||(e[4]=u=>K()),class:"tw-w-36 sm:tw-w-40"},{default:S(()=>e[16]||(e[16]=[m("Изменить тариф",-1)])),_:1,__:[16]})):v("",!0),t.value.ServiceID==51e3?(l(),_(D,{key:1,onClick:e[5]||(e[5]=u=>H()),class:"tw-w-36 sm:tw-w-40"},{default:S(()=>e[17]||(e[17]=[m("Изменить тариф",-1)])),_:1,__:[17]})):v("",!0),a(se,{onClick:e[6]||(e[6]=u=>U())},{default:S(()=>[a(te),e[18]||(e[18]=m(" Передать на другой аккаунт ",-1))]),_:1,__:[18]})])])):v("",!0),t.value&&(t.value.ServiceID==52e3||t.value.ServiceID==51e3)?(l(),c("div",je,[s("div",Fe,[e[21]||(e[21]=s("div",{class:"tw-text-2xl"},"Панель управления",-1)),t.value.ServiceID==52e3?(l(),_(D,{key:0,onClick:e[7]||(e[7]=u=>W()),type:"small"},{default:S(()=>e[19]||(e[19]=[m("Вход",-1)])),_:1,__:[19]})):v("",!0),t.value.ServiceID==51e3?(l(),_(D,{key:1,onClick:e[8]||(e[8]=u=>X()),type:"small"},{default:S(()=>e[20]||(e[20]=[m("Вход",-1)])),_:1,__:[20]})):v("",!0)]),t.value.ServiceID==52e3?(l(),c(O,{key:0},[e[23]||(e[23]=s("div",null,"Адрес",-1)),s("div",qe,[s("div",Ue,n(`https://${E.value?.Address}/manager`),1),a(p,{value:`https://${E.value?.Address}/manager`},null,8,["value"])]),e[24]||(e[24]=s("div",null,"Логин",-1)),s("div",We,[s("div",null,n(i.value?.Login),1),a(p,{value:i.value?.Login},null,8,["value"])]),e[25]||(e[25]=s("div",null,"Пароль",-1)),s("div",Xe,[L.value?(l(),c("span",Je,n(i.value?.Password),1)):(l(),c("button",{key:1,class:"btn btn--border btn--md tw-h-8 tw-gap-1",onClick:e[9]||(e[9]=u=>L.value=!0)},[a(re),e[22]||(e[22]=m(" Показать ",-1))])),s("button",{class:"btn btn--border btn--md tw-h-8",onClick:e[10]||(e[10]=u=>q())},"Сменить пароль"),a(p,{value:i.value?.Password},null,8,["value"])])],64)):v("",!0),t.value.ServiceID==51e3?(l(),c(O,{key:1},[e[26]||(e[26]=s("div",null,"Адрес",-1)),s("div",ze,[s("div",Ke,n(w.value?.ControlPanel),1),a(p,{value:w.value?.ControlPanel},null,8,["value"])]),e[27]||(e[27]=s("div",null,"FTP, POP3, SMTP, IMAP",-1)),s("div",Qe,[s("div",null,n(R.value?.Address),1),a(p,{value:R.value?.Address},null,8,["value"])]),e[28]||(e[28]=s("div",null,"IP адрес",-1)),s("div",Ye,[s("div",null,n(w.value?.IP),1),a(p,{value:w.value?.IP},null,8,["value"])])],64)):v("",!0)])):v("",!0)])],64)):M.value?v("",!0):(l(),_(oe,{key:1,label:"Заказ не найден"}))])],64)}}};export{gt as default};
