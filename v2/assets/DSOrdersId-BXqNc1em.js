import{_ as tt}from"./EmptyStateBlock-D6U_EDq6.js";import{_ as et,a as st,b as ot}from"./LastValueCard.vue_vue_type_script_setup_true_lang-5RmBvgAv.js";import{_ as nt,a as rt}from"./CopyToClipboard.vue_vue_type_script_setup_true_lang-FiYxdMnt.js";import{_ as at}from"./ButtonDefault-CghIUDY0.js";import{_ as lt}from"./StatusBadge-B65ys1I-.js";import{_ as it}from"./ServicesContractBalanceBlock-C7WdqITd.js";import{_ as dt}from"./ClausesKeeper-DVJgfLR3.js";import{v as ut,r as _t}from"./bootstrap-vue-next-3DpAa4tb.js";import{_ as mt}from"./IconDots-BE2XsWZ6.js";import{_ as ct,f as vt}from"./BlockBalanceAgreement-2iQbaweR.js";import{O as pt,u as wt,r as c,x as It,f as b,H as Dt,g as bt,c as u,b as a,a as e,C as ft,h as O,F as v,t as r,n as St,v as _,w as m,E as gt,i as f,I as Ot,K as yt,e as p,o as i}from"./index-CipWZKo_.js";import{f as N}from"./time-DenPiOX5.js";import{_ as Pt}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./IconSettings-6AAphU28.js";import"./services-Dmz4Qt8q.js";import"./IconCopy-DWHHygte.js";import"./IconProfile-CLsn7h6L.js";import"./IconCard-jY7IitfY.js";import"./contracts-CILh9uSu.js";import"./IconClose-ChC2G6HM.js";const kt={class:"tw-px-4 md:tw-px-8"},ht={class:"section-title"},xt={class:"hosting-item__controls"},Ct={class:"btn btn--dots"},Mt={class:"section-label"},$t={class:"tw-flex tw-items-center tw-gap-8 tw-border-b tw-border-gray-200 tw-mt-4 tw-whitespace-nowrap tw-mb-6"},Rt={class:"tw-grid tw-grid-cols-1 lg:tw-grid-cols-2 tw-gap-4"},Bt={class:"tw-border tw-rounded tw-border-gray-200 tw-p-4"},Nt={class:"list-item__row tw-gap-2"},Lt={class:"list-item__title"},Vt={class:"list-item__status"},jt={class:"list-item__row"},At={class:"list-item__ul"},Et={class:"list-item__row list-item__row--column"},Tt={class:"list-item__text"},Ut={class:"list-item__text"},Gt={class:"list-item__text"},Ft={class:"list-item__row"},Ht={class:"btn btn--border btn--switch"},zt={class:"tw-border tw-rounded tw-border-gray-200 tw-p-4"},Kt={class:"list-item__row list-item__table"},Wt={class:"list-item__label"},qt={class:"list-item__text"},Jt={class:"tw-grid tw-grid-cols-3 tw-gap-6 tw-border tw-border-gray-200 tw-rounded tw-p-4"},Qt={class:"tw-col-span-2 tw-flex tw-items-center tw-gap-1"},Xt={class:"tw-col-span-2 tw-flex tw-items-center tw-gap-1"},Yt={class:"tw-break-all"},Zt={class:"tw-col-span-2 tw-flex tw-flex-wrap tw-items-center tw-gap-2"},te={key:0,class:"password-hidden"},ee={class:"tw-border tw-rounded tw-border-gray-200 tw-p-4"},se={class:"list-item__row list-item__row--table"},oe={class:"list-item__item"},ne={class:"list-item__row list-item__row--table"},re={class:"list-item__item"},ae={class:"list-item__row list-item__row--table password-line"},le={class:"list-item__item"},ie={key:0,class:"password-hidden"},de={key:0,class:"tw-border tw-rounded tw-border-gray-200 tw-p-4"},ue={class:"list-item__item"},_e={class:"list-item__item"},me={key:1,class:"tw-border tw-rounded tw-border-gray-200 tw-p-4"},ce={class:"list-item__item"},ve={class:"list-item__item"},pe={__name:"DSOrdersId",setup(we){const y=bt(),d=pt(),P=wt(),k=c(!1),h=c(!0),w=It("emitter");w.on("updateDSIDPage",async()=>{await d.fetchDSOrders(),await d.fetchDSOrderIPMI(s.value?.OrderID),await d.fetchDSOrderIPMISensors(s.value?.OrderID)});const x=c(!1),C=c(!1),D=c(!0),s=c(null);b(()=>s.value?.Names||[]);const S=b(()=>d.DSSchemes?.[s.value?.SchemeID]),L=b(()=>{const o=s.value.Graphs?.Graphs;return o?Object.values(o):null}),V=b(()=>{const o=s.value.Graphs?.Last;return o?Object.values(o):null});function j(o){w.emit("open-modal",{component:"StatusHistory",data:{modeID:"DSOrders",rowID:o}})}function A(o,t){const l=t[o];if(l==null)return"-";switch(o){case"ram":return`${l} ГБ`;case"chrate":return`${l} Мбит/с`;default:return l}}function E(o){if(!o)return N(new Date);const t=new Date,l=new Date(t.getTime()+o*24*60*60*1e3);return N(l)}function T(o){let t=S.value;t===void 0&&(t=o);let l=[];return t?.Name&&l.push(t?.Name),t?.CPU&&l.push(t?.CPU),t?.ram&&l.push("RAM "+t?.ram+" GB"),t?.disks&&l.push(t?.disks),l}function M(o){function t(l){k.value=l}w.emit("open-modal",{component:"ReloadDS",data:{DSOrderID:o,isReloading:k.value,onReloadStatusChange:t,ServerName:s?.value?.Scheme,SystemPower:d.DSOrderIPMI?.IPMI["System Power"],OrderID:s?.value?.OrderID}})}function U(){w.emit("open-modal",{component:"OrdersTransfer",data:{ServiceOrderID:s.value?.ID,ServiceID:s.value?.ServiceID}})}function G(){P.prolongOrder({IsAutoProlong:D.value?0:1,OrderID:s.value?.OrderID})}function F(){w.emit("open-modal",{component:"OrderRestore",data:{OrderID:s.value?.OrderID,CostDay:S.value?.CostDay,DaysRemainded:s.value?.DaysRemainded,emitEvent:"updateDSIDPage"}})}return Dt(async()=>{if(await d.fetchDSSchemes(),s.value=await d.fetchDSOrder(y.params.id),s.value){await d.fetchDSOrderIPMI(s.value.OrderID);const o=await P.fetchUserOrder(y.params.id);o&&(D.value=o.IsAutoProlong)}h.value=!1}),(o,t)=>{const l=ct,H=mt,$=_t,z=ut,R=gt("RouterLink"),K=dt,W=it,q=et,J=lt,Q=st,X=at,g=nt,B=rt,Y=ot,Z=tt;return i(),u(v,null,[a(l),e("div",kt,[s.value?(i(),u(v,{key:0},[e("div",null,[e("h1",ht,r(s.value?.IPaddr),1),e("div",xt,[e("button",{class:St(["btn btn--md btn--border btn--rotate btn--rotate_green",{"btn--system-off":_(d).DSOrderIPMI?.IPMI["System Power"]!=="on"}]),onClick:t[0]||(t[0]=n=>M(s.value?.ID))},r(_(d).DSOrderIPMI?.IPMI["System Power"]==="on"?"Включен":"Выключен"),3),a(z,{class:"dropdown-dots",right:""},{"button-content":m(()=>[e("span",Ct,[a(H)])]),default:m(()=>[a($,{onClick:t[1]||(t[1]=n=>M(s.value?.ID))},{default:m(()=>t[10]||(t[10]=[p("Перезагрузить",-1)])),_:1,__:[10]})]),_:1})]),e("div",Mt,"Выделенный сервер # "+r(s.value?.OrderID),1),e("div",$t,[a(R,{class:"tw-py-2 tw-cursor-pointer -tw-mb-[1px]","active-class":"tw-text-sky-400 tw-border-b-2 tw-border-sky-400",to:`/DSOrders/${s.value?.OrderID}`},{default:m(()=>t[11]||(t[11]=[p(" Сервер ",-1)])),_:1,__:[11]},8,["to"]),a(R,{class:"tw-py-2 tw-cursor-pointer -tw-mb-[1px]","active-class":"tw-text-sky-400 tw-border-b-2 tw-border-sky-400",to:`/Services/${s.value?.OrderID}`},{default:m(()=>t[12]||(t[12]=[p(" Услуги ",-1)])),_:1,__:[12]},8,["to"])])]),a(K),e("div",Rt,[a(W,{"contract-id":s.value?.ContractID,onTransfer:t[2]||(t[2]=n=>U())},null,8,["contract-id"]),a(q,{data:V.value,date:s.value.Graphs?.UpdateDate},null,8,["data","date"]),e("div",Bt,[e("div",Nt,[e("div",Lt,r(s.value?.Scheme),1),e("div",Vt,[a(J,{status:s.value?.StatusID,DaysRemainded:s.value?.DaysRemainded,"status-table":"DNSmanagerOrders",onClick:t[3]||(t[3]=n=>j(s.value?.ID))},null,8,["status","DaysRemainded"])]),a(Q,null,{default:m(()=>[a($,{onClick:t[4]||(t[4]=n=>F())},{default:m(()=>t[13]||(t[13]=[p("Просмотреть учет заказа",-1)])),_:1,__:[13]})]),_:1})]),e("div",jt,[e("ul",At,[(i(!0),u(v,null,f(T(s.value),n=>(i(),u("li",{key:n},r(n),1))),128))])]),e("div",Et,[e("div",Tt,r(_(vt)(S.value?.CostMonth))+" в месяц",1),e("div",Ut,"Дней осталось "+r(s.value?.DaysRemainded||"0"),1),e("div",Gt,"Дата окончания "+r(E(s.value?.DaysRemainded)),1)]),e("div",Ft,[a(X,{label:"Продлить",onClick:t[5]||(t[5]=n=>o.$router.push(`/DSOrderPay/${s.value?.OrderID}`))}),e("label",Ht,[Ot(e("input",{type:"checkbox","onUpdate:modelValue":t[6]||(t[6]=n=>D.value=n),onInput:t[7]||(t[7]=n=>G())},null,544),[[yt,D.value]]),t[14]||(t[14]=e("span",{class:"btn-switch__text"},"Автопродление",-1)),t[15]||(t[15]=e("span",{class:"btn-switch__toggle"},null,-1))])])]),e("div",zt,[t[16]||(t[16]=e("div",{class:"list-item__row"},[e("div",{class:"list-item__title"},"Конфигурация")],-1)),e("div",Kt,[(i(!0),u(v,null,f(s.value.Names,(n,I)=>(i(),u("div",{class:"list-item__table-col",key:I},[e("div",Wt,r(n),1),e("div",qt,r(A(I,s.value)),1)]))),128))])]),e("div",Jt,[t[18]||(t[18]=e("div",{class:"tw-col-span-3 tw-flex tw-items-center tw-justify-between tw-gap-2"},[e("div",{class:"tw-text-2xl"},"Доступы")],-1)),t[19]||(t[19]=e("div",null,"IP адрес сервера",-1)),e("div",Qt,[e("div",null,r(s.value?.IPaddr),1),a(g,{value:s.value?.IPaddr},null,8,["value"])]),t[20]||(t[20]=e("div",null,"Пользователь",-1)),e("div",Xt,[e("div",Yt,r(s.value?.DSuser),1),a(g,{value:s.value?.DSuser},null,8,["value"])]),t[21]||(t[21]=e("div",null,"Пароль",-1)),e("div",Zt,[x.value?(i(),u("span",te,r(s.value?.DSpass),1)):(i(),u("button",{key:1,class:"btn btn--border btn--md tw-h-8 tw-gap-1",onClick:t[8]||(t[8]=n=>x.value=!0)},[a(B,{class:"button-icon"}),t[17]||(t[17]=p(" Показать ",-1))])),a(g,{value:s.value?.DSpass},null,8,["value"])])]),e("div",ee,[t[26]||(t[26]=e("div",{class:"list-item__row"},[e("div",{class:"list-item__title"},"Доступы IPMI")],-1)),e("div",se,[t[22]||(t[22]=e("div",{class:"list-item__item"},"IP адрес сервера",-1)),e("div",oe,r(s.value?.ILOaddr),1)]),e("div",ne,[t[23]||(t[23]=e("div",{class:"list-item__item"},"Пользователь",-1)),e("div",re,r(s.value?.ILOuser),1)]),e("div",ae,[t[25]||(t[25]=e("div",{class:"list-item__item"},"Пароль",-1)),e("div",le,[C.value?(i(),u("span",ie,r(s.value?.ILOpass),1)):(i(),u("button",{key:1,class:"btn btn--border btn--md password-line",onClick:t[9]||(t[9]=n=>C.value=!0)},[a(B,{class:"button-icon"}),t[24]||(t[24]=p(" Показать ",-1))]))])])]),_(d).DSOrderIPMI?.IPMI&&_(d).DSOrderIPMI?.IPMI.length>0?(i(),u("div",de,[t[27]||(t[27]=e("div",{class:"list-item__row"},[e("div",{class:"list-item__title"},"Общая информация из IPMI")],-1)),(i(!0),u(v,null,f(_(d).DSOrderIPMI?.IPMI,n=>(i(),u("div",{class:"list-item__row list-item__row--table",key:n?.name},[e("div",ue,r(n?.name),1),e("div",_e,r(n?.value),1)]))),128))])):O("",!0),_(d).DSOrderIPMI?.["IPMI.Sensors"]&&_(d).DSOrderIPMI["IPMI.Sensors"].length>0?(i(),u("div",me,[t[28]||(t[28]=e("div",{class:"list-item__row"},[e("div",{class:"list-item__title"},"Данные сенсоров")],-1)),(i(!0),u(v,null,f(_(d).DSOrderIPMI["IPMI.Sensors"],(n,I)=>(i(),u("div",{class:"list-item__row list-item__row--table",key:I},[e("div",ce,r(I),1),e("div",ve,r(n),1)]))),128))])):O("",!0),a(Y,{data:L.value},null,8,["data"])]),t[29]||(t[29]=e("div",{class:"text tw-my-6"},[e("h3",null,"Что входит в стоимость"),e("p",null,"Для подключения дополнительных услуг"),e("ul",null,[e("li",null,"Размещение в РФ, Москва"),e("li",null,"Предустановленная ОС FreeBSD / CentOS / Debian / Ubuntu / Windows"),e("li",null,"IP адрес, с возможностью расширения"),e("li",null,"Бесплатная панель управления ISPManager Lite"),e("li",null,"Круглосуточная поддержка")])],-1))],64)):h.value?O("",!0):(i(),ft(Z,{key:1,label:"Заказ не найден"}))])],64)}}},je=Pt(pe,[["__scopeId","data-v-a7614052"]]);export{je as default};
