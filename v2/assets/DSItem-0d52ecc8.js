import{k as T,o as w,c as O,a as c,$ as A,a9 as E,b as o,w as m,d as f,t as I,F,y as P,n as q,l as G,_ as J,e as K,U as Q,r as W,j as X}from"./index-5b1b768e.js";import{_ as Y}from"./HelperComponent-4ad142cf.js";import{S as z}from"./StatusBadge-5f69c55b.js";import{I as Z}from"./IconRotate-a0cd5991.js";import"./dedicatedServer-4192ad8b.js";import{f as U}from"./useTimeFunction-8602dd60.js";import"./resetServer-d5ad51a7.js";import{f as $,z as tt,k as et,d as at}from"./bootstrap-vue-next.es-7a3ca2aa.js";import{_ as ot}from"./IconDots-65dfb174.js";import{_ as nt}from"./IconCard-1e8faa13.js";import{_ as st}from"./OrderIDBadge-cdc4e419.js";const rt={class:"hosting-item"},it={class:"hosting-item__row"},dt={class:"hosting-item__row"},ct={class:"hosting-item__person"},lt={key:0,class:"hosting-item__row"},mt={class:"hosting-item__list"},_t=["innerHTML"],ut={class:"hosting-status__info"},Dt={class:"hosting-status__date"},ft={class:"hosting-item__controls"},It={class:"btn btn--dots"};function St(d,a,t,n,S,x){var g,_,u,D,h,B,H,M,N,V,L,j;const b=$,y=st,v=T("router-link"),k=z,C=nt,R=T("Helper"),p=ot,e=tt,s=et,l=at;return w(),O("div",rt,[c("div",it,[A(o(b,{id:"checkbox-"+((g=t.itemData)==null?void 0:g.OrderID),modelValue:n.localSelectedRows[(_=t.itemData)==null?void 0:_.OrderID],"onUpdate:modelValue":a[0]||(a[0]=r=>{var i;return n.localSelectedRows[(i=t.itemData)==null?void 0:i.OrderID]=r}),name:"checkbox-"+((u=t.itemData)==null?void 0:u.OrderID),onChange:n.updateSelectedRows},null,8,["id","modelValue","name","onChange"]),[[E,t.isSeveral]]),o(y,{orderID:(D=t.itemData)==null?void 0:D.OrderID,onClick:a[1]||(a[1]=r=>{var i;return n.toItem((i=t.itemData)==null?void 0:i.OrderID)})},null,8,["orderID"]),o(v,{class:"hosting-item__name",to:`/DSOrders/${t.itemData.OrderID}`},{default:m(()=>[f(I(t.itemData.IP),1)]),_:1},8,["to"])]),c("div",dt,[c("div",ct,I((h=t.itemData)==null?void 0:h.Customer),1)]),t.params.length?(w(),O("div",lt,[c("ul",mt,[(w(!0),O(F,null,P(t.params,r=>(w(),O("li",{innerHTML:r},null,8,_t))),256))]),c("div",ut,[c("div",{class:q(["hosting-item__date",{danger:Number((B=t.itemData)==null?void 0:B.DaysRemainded)<14}])},I(n.calculateExpirationDate((H=t.itemData)==null?void 0:H.DaysRemainded))+" • "+I(((M=t.itemData)==null?void 0:M.DaysRemainded)||0)+" дн.",3),o(k,{class:"status-badge",status:(N=t.itemData)==null?void 0:N.StatusID,"status-table":"DSOrders",onClick:a[2]||(a[2]=r=>{var i;return n.openHistoryStatuses((i=t.itemData)==null?void 0:i.ID)})},null,8,["status"]),c("div",Dt,I(n.calculateDaysSinceStatusUpdate((V=t.itemData)==null?void 0:V.StatusDate)),1)])])):G("",!0),c("div",ft,[c("div",{class:"btn btn--md btn--bold",onClick:a[3]||(a[3]=r=>{var i;return d.$router.push(`/DSOrderPay/${(i=t.itemData)==null?void 0:i.OrderID}`)})},[o(C),f("Оплатить")]),o(R,{"user-notice":(L=t.itemData)==null?void 0:L.UserNotice,id:(j=t.itemData)==null?void 0:j.OrderID,position:t.isLast?"bottom":"top",emit:"updateDSOrdersList"},null,8,["user-notice","id","position"]),o(l,{class:"dropdown-dots",right:""},{"button-content":m(()=>[c("div",It,[o(p)])]),default:m(()=>[o(e,null,{default:m(()=>{var r;return[o(v,{to:`DSOrders/${(r=t.itemData)==null?void 0:r.OrderID}`},{default:m(()=>[f("Дополнительная информация")]),_:1},8,["to"])]}),_:1}),o(e,{onClick:a[4]||(a[4]=r=>n.transferAccount())},{default:m(()=>[f("Передать на другой аккаунт")]),_:1}),o(s),o(e,{class:"color-red",onClick:a[5]||(a[5]=r=>n.deleteItem())},{default:m(()=>[f("Удалить")]),_:1})]),_:1})])])}const vt={components:{StatusBadge:z,IconRotate:Z,Helper:Y},props:{params:{type:Array,default:()=>[]},itemData:{type:Object,default:()=>{}},isLast:{type:Boolean,default:!1},isSeveral:{type:Boolean,default:!1},selectedRows:{type:Object,required:!0}},emits:["delete","transfer","manage"],setup(d,{emit:a}){const t=K(),n=Q("emitter"),S=W({...d.selectedRows}),x=()=>{a("update-selected-rows",S.value)};X(()=>d.selectedRows,e=>{S.value={...e}},{deep:!0});function b(e){if(!e)return U(new Date);const s=new Date,l=new Date(s.getTime()+e*24*60*60*1e3);return U(l)}function y(e){t.push(`/DSOrders/${e}`)}function v(){var e;a("delete",(e=d.itemData)==null?void 0:e.ID)}function k(){var e,s;a("transfer",{ServiceOrderID:(e=d.itemData)==null?void 0:e.ID,ServiceID:(s=d.itemData)==null?void 0:s.ServiceID})}function C(e){n.emit("open-modal",{component:"StatusHistory",data:{modeID:"DSOrders",rowID:e}})}function R(){var e,s,l;a("manage",{ServiceOrderID:(e=d.itemData)==null?void 0:e.ID,ServiceID:(s=d.itemData)==null?void 0:s.ServiceID,OrderID:(l=d.itemData)==null?void 0:l.OrderID})}function p(e){if(!e)return"";const s=new Date(parseInt(e)*1e3),g=new Date-s,_=Math.floor(g/1e3),u=Math.floor(_/60),D=Math.floor(u/60),h=Math.floor(D/24);return _<60?`${_} сек. от статуса`:u<60?`${u} мин. от статуса`:D<24?`${D} ч. от статуса`:`${h} дн. от статуса`}return{deleteItem:v,orderManage:R,transferAccount:k,calculateExpirationDate:b,openHistoryStatuses:C,toItem:y,calculateDaysSinceStatusUpdate:p,localSelectedRows:S,updateSelectedRows:x}}},Bt=J(vt,[["render",St],["__scopeId","data-v-6d6eeb0f"]]);export{Bt as D};
