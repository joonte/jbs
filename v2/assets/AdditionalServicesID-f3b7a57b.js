import{o as c,c as _,b as w,a as r,t as m,y as F,k as d,Z as ee,$ as te,d as se,F as re,p as oe,l as ie,_ as ne,a7 as ae,e as ce,g as v,r as Q,S as de,f as le,h as _e}from"./index-145d9cde.js";import{u as me}from"./postings-e3294b77.js";import{u as ve}from"./services-42f7a1d0.js";import{u as ue}from"./resetServer-000da2ec.js";import{u as Se}from"./globalActions-de64efb8.js";import{S as Y}from"./StatusBadge-cd3873b5.js";import{s as ge}from"./servicesStatuses-6293b6ac.js";import{B as $}from"./BlockBalanceAgreement-650ad03e.js";import{_ as Ie,a as De}from"./ServicesContractBalanceBlock-3c9d7891.js";import{_ as he}from"./ClausesKeeper-d3875457.js";import{_ as Oe}from"./ButtonDefault-6a3a5e1e.js";import"./contracts-009c925b.js";import"./bootstrap-vue-next.es-759b1c9f.js";import"./IconArrow-f2b12a71.js";import"./IconProfile-5cd93df7.js";import"./IconCard-647fe573.js";import"./IconClose-f461656c.js";const p=h=>(oe("data-v-5ebc6993"),h=h(),ie(),h),pe={class:"section"},fe={class:"container"},we={class:"section-header"},be={class:"section-title"},Pe={class:"section-label"},ke={class:"list"},ye={class:"list-col list-col--md"},Ne={class:"list-item"},Ce={class:"list-item__row"},Ae={class:"list-item__title"},Me={class:"list-item__status"},Ge={class:"list-item__row"},Le={class:"list-item__ul"},Be={key:0},xe={class:"list-item__row"},Te={class:"btn btn--border btn--switch"},Ve=p(()=>r("span",{class:"btn-switch__text"},"Автопродление",-1)),Re=p(()=>r("span",{class:"btn-switch__toggle"},null,-1)),je={key:0,class:"list-col list-col--md"},Fe={class:"list-item"},He={class:"list-item__row"},qe=p(()=>r("div",{class:"list-item__title"},"Панель управления",-1)),Ee={class:"list-item__row list-item__row--table"},Ue=p(()=>r("div",{class:"list-item__item"},"Адрес",-1)),Xe={key:0,class:"list-item__item"},We={key:1,class:"list-item__item"},Ze={key:0,class:"list-item__row list-item__row--table"},ze=p(()=>r("div",{class:"list-item__item"},"Логин",-1)),Je={class:"list-item__item"},Ke={key:1,class:"list-item__row list-item__row--table"},Qe=p(()=>r("div",{class:"list-item__item"},"Пароль",-1)),Ye={class:"list-item__item hide-button"},$e={key:0,class:"password-hidden"},et={class:"list-item__row list-item__row--table"},tt=p(()=>r("div",{class:"list-item__item"},"FTP, POP3, SMTP, IMAP",-1)),st={key:0,class:"list-item__item"},rt={key:1,class:"list-item__item"};function ot(h,n,o,t,H,E){var a,C,D,A,S,g,f,k,y,M,G,L,B,x,T,V,R,j,e,s,i,N,U,X,W,Z,z,J,K;const q=$,O=Oe,b=he,u=Ie,l=Y,P=De;return c(),_(re,null,[w(q),r("div",pe,[r("div",fe,[r("div",we,[r("h1",be,m((a=t.getService)==null?void 0:a.Name),1),r("div",Pe,"# "+m((C=t.getOrder)==null?void 0:C.ID),1),((D=t.getOrder)==null?void 0:D.ServiceID)==="52000"?(c(),F(O,{key:0,class:"section-scheme",label:"Изменить тариф",onClick:n[0]||(n[0]=I=>t.changeScheme())})):d("",!0),((A=t.getOrder)==null?void 0:A.ServiceID)==="51000"?(c(),F(O,{key:1,class:"section-scheme",label:"Изменить тариф",onClick:n[1]||(n[1]=I=>t.changeISPScheme())})):d("",!0)]),w(b),r("div",ke,[w(u,{"contract-id":(S=t.getOrder)==null?void 0:S.ContractID,onTransfer:n[2]||(n[2]=I=>t.transferItem())},null,8,["contract-id"]),r("div",ye,[r("div",Ne,[r("div",Ce,[r("div",Ae,m((g=t.getService)==null?void 0:g.Name),1),r("div",Me,[w(l,{status:(f=t.getOrder)==null?void 0:f.StatusID,"status-table":"Orders"},null,8,["status"])])]),r("div",Ge,[r("ul",Le,[(k=t.getOrder)!=null&&k.DependOrderID&&((y=t.getOrder)==null?void 0:y.DependOrderID)!=="0"?(c(),_("li",Be,"Относится к заказу "+m((M=t.getOrder)==null?void 0:M.DependOrderID)+"/"+m((G=t.getDependOrderService)==null?void 0:G.Name),1)):d("",!0)])]),r("div",xe,[w(O,{label:((L=t.getOrder)==null?void 0:L.StatusID)==="ClaimForRegister"||((B=t.getOrder)==null?void 0:B.StatusID)==="Waiting"?"Оплатить":"Продлить",onClick:n[3]||(n[3]=I=>t.navigateToProlong())},null,8,["label"]),r("label",Te,[ee(r("input",{type:"checkbox","onUpdate:modelValue":n[4]||(n[4]=I=>t.isAutoProlong=I),onInput:n[5]||(n[5]=I=>t.setProlongValue())},null,544),[[te,t.isAutoProlong]]),Ve,Re])])])]),((x=t.getOrder)==null?void 0:x.ServiceID)==="52000"||((T=t.getOrder)==null?void 0:T.ServiceID)==="51000"?(c(),_("div",je,[r("div",Fe,[r("div",He,[qe,((V=t.getOrder)==null?void 0:V.ServiceID)==="52000"?(c(),F(O,{key:0,class:"ml-auto",onClick:n[6]||(n[6]=I=>t.orderManageDNS()),label:"Вход"})):d("",!0),((R=t.getOrder)==null?void 0:R.ServiceID)==="51000"?(c(),F(O,{key:1,class:"ml-auto",onClick:n[7]||(n[7]=I=>t.orderManageISP()),label:"Вход"})):d("",!0)]),r("div",Ee,[Ue,((j=t.getOrder)==null?void 0:j.ServiceID)==="52000"?(c(),_("div",Xe,m(`https://${(e=t.getServerGroupDNS)==null?void 0:e.Address}/manager`),1)):d("",!0),((s=t.getOrder)==null?void 0:s.ServiceID)==="51000"?(c(),_("div",We,m(`https://${(i=t.getServerGroupISP)==null?void 0:i.Address}/manager`),1)):d("",!0)]),((N=t.getOrder)==null?void 0:N.ServiceID)==="52000"?(c(),_("div",Ze,[ze,r("div",Je,m((U=t.getDNSmanagerOrder)==null?void 0:U.Login),1)])):d("",!0),((X=t.getOrder)==null?void 0:X.ServiceID)==="52000"?(c(),_("div",Ke,[Qe,r("div",Ye,[t.passwordShow?(c(),_("div",$e,m((W=t.getDNSmanagerOrder)==null?void 0:W.Password),1)):(c(),_("button",{key:1,class:"btn btn--border btn--md hide-button",onClick:n[8]||(n[8]=I=>t.passwordShow=!0)},[w(P),se("Показать")]))])])):d("",!0),r("div",et,[tt,((Z=t.getOrder)==null?void 0:Z.ServiceID)==="52000"?(c(),_("div",st,m((z=t.getServerGroupDNS)==null?void 0:z.Address),1)):d("",!0),((J=t.getOrder)==null?void 0:J.ServiceID)==="51000"?(c(),_("div",rt,m((K=t.getServerGroupISP)==null?void 0:K.Address),1)):d("",!0)])])])):d("",!0)])])])],64)}const it={components:{StatusBadge:Y,BlockBalanceAgreement:$},async setup(){const h=ae(),n=ce(),o=ve(),t=ue(),H=Se(),E=v(()=>{var e,s,i;return(i=(e=t==null?void 0:t.serverGroupsList)==null?void 0:e.Servers)==null?void 0:i[(s=g.value)==null?void 0:s.ServerID]}),q=v(()=>{var e,s,i;return(i=(e=t==null?void 0:t.serverGroupsList)==null?void 0:e.Servers)==null?void 0:i[(s=S.value)==null?void 0:s.ServerID]}),O=Q(!1),b=de("emitter"),u=me(),l=le(),P=Q(!1),a=v(()=>Object.keys(l==null?void 0:l.userOrders).map(e=>l==null?void 0:l.userOrders[e]).find(e=>e.ID===h.params.id)),C=v(()=>{var e,s;return u==null?void 0:u.servicesList[(s=l.userOrders[(e=a.value)==null?void 0:e.DependOrderID])==null?void 0:s.ServiceID]}),D=v(()=>{var e;return u==null?void 0:u.servicesList[(e=a.value)==null?void 0:e.ServiceID]}),A=v(()=>o==null?void 0:o.ISPswOrdersList),S=v(()=>Object.keys(o==null?void 0:o.ISPswOrdersList).map(e=>o==null?void 0:o.ISPswOrdersList[e]).find(e=>{var s;return e.OrderID===((s=a.value)==null?void 0:s.ID)})),g=v(()=>Object.keys(o==null?void 0:o.DNSmanagerOrdersList).map(e=>o==null?void 0:o.DNSmanagerOrdersList[e]).find(e=>{var s;return e.OrderID===((s=a.value)==null?void 0:s.ID)})),f=v(()=>o==null?void 0:o.additionalServicesScheme),k=v(()=>{const e=g.value;return e&&f.value.DNSmanager[e.SchemeID]||null}),y=v(()=>{const e=S.value;return e&&f.value.ISPsw[e.SchemeID]||null});function M(){var e,s;b.emit("open-modal",{component:"OrdersTransfer",data:{ServiceOrderID:(e=a.value)==null?void 0:e.ID,ServiceID:(s=a.value)==null?void 0:s.ServiceID}})}function G(){var e,s,i;H.OrderManageHosting({ServiceOrderID:(e=g.value)==null?void 0:e.ID,OrderID:(s=g.value)==null?void 0:s.OrderID,ServiceID:(i=g.value)==null?void 0:i.ServiceID,XMLHttpRequest:"yes"})}function L(){var e,s,i;H.OrderManageHosting({ServiceOrderID:(e=S.value)==null?void 0:e.ID,OrderID:(s=S.value)==null?void 0:s.OrderID,ServiceID:(i=S.value)==null?void 0:i.ServiceID,XMLHttpRequest:"yes"})}function B(){n.push(`/ServiceOrderPay/${h.params.id}`)}function x(){var e;l.prolongOrder({IsAutoProlong:P.value?0:1,OrderID:(e=a.value)==null?void 0:e.ID})}function T(){V()}function V(){var e,s,i;b.emit("open-modal",{component:"ISPswSchemeChange",data:{ISPswID:(e=a.value)==null?void 0:e.ID,ServerGroup:(s=y.value)==null?void 0:s.ServersGroupID,Code:(i=D.value)==null?void 0:i.Code}})}function R(){j()}function j(){var e,s,i;b.emit("open-modal",{component:"DNSOrderSchemeChange",data:{DNSID:(e=a.value)==null?void 0:e.ID,ServerGroup:(s=k.value)==null?void 0:s.ServersGroupID,Code:(i=D.value)==null?void 0:i.Code}})}return _e(async()=>{var e,s,i,N;((e=a.value)==null?void 0:e.ServiceID)==="52000"&&(await o.fetchAdditionalServiceScheme((s=D.value)==null?void 0:s.Code),await o.fetchDNSmanagerOrders()),((i=a.value)==null?void 0:i.ServiceID)==="51000"&&(await o.fetchAdditionalServiceScheme((N=D.value)==null?void 0:N.Code),await o.fetchISPswOrders())}),await l.fetchUserOrders().then(()=>{var e;P.value=(e=a.value)==null?void 0:e.IsAutoProlong}),await u.fetchServices(),await t.fetchServerGroups(),{getService:D,getOrder:a,getDependOrderService:C,isAutoProlong:P,servicesStatuses:ge,transferItem:M,navigateToProlong:B,setProlongValue:x,getDNSmanagerOrder:g,getISPOrder:S,getAdditionalServiceScheme:f,getDNSmanagerOrderScheme:k,getISPOrderScheme:y,changeScheme:R,ISPswOrders:A,changeISPScheme:T,getServerGroupDNS:E,getServerGroupISP:q,passwordShow:O,orderManageDNS:G,orderManageISP:L}}},wt=ne(it,[["render",ot],["__scopeId","data-v-5ebc6993"]]);export{wt as default};
