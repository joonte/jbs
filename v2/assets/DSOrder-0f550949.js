import{j as rt,o as _,c as d,b as m,a as t,t as l,n as at,w as S,d as O,F as P,x as B,Z as lt,$ as _t,k as tt,p as dt,l as ct,_ as mt,a7 as vt,f as Dt,r as N,S as ut,g,h as It}from"./index-83b4b7ba.js";import"./resetServer-94c466e3.js";import{u as ht}from"./dedicatedServer-5ad75190.js";import{f as st}from"./useTimeFunction-8602dd60.js";import{_ as St}from"./IconCard-2cc17a6b.js";import{I as gt}from"./IconProfile-34c25888.js";import{I as ft}from"./IconSettings-bac5439e.js";import{_ as wt,a as et}from"./ServicesContractBalanceBlock-627f7a8d.js";import{S as ot}from"./StatusBadge-0d170ac0.js";import{I as bt}from"./IconRotate-e7e6c8d6.js";import{h as pt}from"./hostStatuses-94d00f20.js";import{s as it}from"./SettingsEngineItem-a9081d79.js";import{B as nt}from"./BlockBalanceAgreement-c5fad736.js";import{E as Ot}from"./EmptyStateBlock-68a1c33e.js";import{_ as Pt}from"./ButtonDefault-dc248ec6.js";import{_ as yt}from"./ClausesKeeper-55c14b7f.js";import{z as kt,d as Mt}from"./bootstrap-vue-next.es-8f3ae81a.js";import{_ as Ct}from"./IconDots-a66f045d.js";import"./contracts-623ec7a8.js";import"./IconArrow-80c72216.js";import"./IconClose-86aafc4e.js";const v=u=>(dt("data-v-62b89295"),u=u(),ct(),u),Rt={key:0,class:"ds-order-page"},xt={class:"section"},Bt={class:"container"},Nt={class:"section-header"},At={class:"section-title"},Et={class:"hosting-item__controls"},Lt={class:"btn btn--dots"},Tt={class:"section-label"},Vt={class:"section-nav"},Ut={class:"list"},jt={class:"list-col list-col--md"},zt={class:"list-item"},Ft={class:"list-item__row"},Ht={class:"list-item__title"},Gt={class:"list-item__status"},Wt={class:"list-item__row"},Zt={class:"list-item__ul"},qt={class:"list-item__row list-item__row--column"},Jt={class:"list-item__text"},Kt={class:"list-item__text"},Qt={class:"list-item__text"},Xt={class:"list-item__row"},Yt={class:"btn btn--border btn--switch"},$t=v(()=>t("span",{class:"btn-switch__text"},"Автопродление",-1)),ts=v(()=>t("span",{class:"btn-switch__toggle"},null,-1)),ss={class:"list-col list-col--xl"},es={class:"list-item"},os=v(()=>t("div",{class:"list-item__row"},[t("div",{class:"list-item__title"},"Конфигурация")],-1)),is={class:"list-item__row list-item__table"},ns={class:"list-item__label"},rs={class:"list-item__text"},as={class:"list-col list-col--md"},ls={class:"list-item"},_s=v(()=>t("div",{class:"list-item__row"},[t("div",{class:"list-item__title"},"Доступы")],-1)),ds={class:"list-item__row list-item__row--table"},cs=v(()=>t("div",{class:"list-item__item"},"IP адрес сервера",-1)),ms={class:"list-item__item"},vs={class:"list-item__row list-item__row--table"},Ds=v(()=>t("div",{class:"list-item__item"},"Пользователь",-1)),us={class:"list-item__item"},Is={class:"list-item__row list-item__row--table password-line"},hs=v(()=>t("div",{class:"list-item__item"},"Пароль",-1)),Ss={class:"list-item__item"},gs={key:0,class:"password-hidden"},fs={class:"list-col list-col--md"},ws={class:"list-item"},bs=v(()=>t("div",{class:"list-item__row"},[t("div",{class:"list-item__title"},"Доступы IPMI")],-1)),ps={class:"list-item__row list-item__row--table"},Os=v(()=>t("div",{class:"list-item__item"},"IP адрес сервера",-1)),Ps={class:"list-item__item"},ys={class:"list-item__row list-item__row--table"},ks=v(()=>t("div",{class:"list-item__item"},"Пользователь",-1)),Ms={class:"list-item__item"},Cs={class:"list-item__row list-item__row--table password-line"},Rs=v(()=>t("div",{class:"list-item__item"},"Пароль",-1)),xs={class:"list-item__item"},Bs={key:0,class:"password-hidden"},Ns={key:0,class:"list-col list-col--md"},As={class:"list-item"},Es=v(()=>t("div",{class:"list-item__row"},[t("div",{class:"list-item__title"},"Общая информация из IPMI")],-1)),Ls={class:"list-item__row list-item__row--table"},Ts={class:"list-item__item"},Vs={class:"list-item__item"},Us={key:1,class:"list-col list-col--md"},js={class:"list-item"},zs=v(()=>t("div",{class:"list-item__row"},[t("div",{class:"list-item__title"},"Данные сенсоров")],-1)),Fs={class:"list-item__row list-item__row--table"},Hs={class:"list-item__item"},Gs={class:"list-item__item"},Ws=v(()=>t("div",{class:"section"},[t("div",{class:"container"},[t("div",{class:"text"},[t("h3",null,"Что входит в стоимость"),t("p",null,"Для подключения дополнительных услуг"),t("ul",null,[t("li",null,"Размещение в РФ, Москва"),t("li",null,"Предустановленная ОС FreeBSD / CentOS / Debian / Ubuntu / Windows"),t("li",null,"IP адрес, с возможностью расширения"),t("li",null,"Бесплатная панель управления ISPManager Lite"),t("li",null,"Круглосуточная поддержка")])])])],-1)),Zs={key:1,class:"section"},qs={class:"container"};function Js(u,i,I,s,h,z){var k,M,C,R,e,o,r,b,p,x,F,H,G,W,Z,q,J,K,Q,X,Y,$;const A=nt,f=Ct,a=kt,E=Mt,w=rt("router-link"),D=yt,L=wt,T=ot,V=it,U=Pt,y=et,j=Ot;return _(),d(P,null,[m(A),(k=s.getDSServerData)!=null&&k.ID?(_(),d("div",Rt,[t("div",xt,[t("div",Bt,[t("div",Nt,[t("h1",At,l((M=s.getDSServerData)==null?void 0:M.IPaddr),1),t("div",Et,[t("div",{class:at(["btn btn--md btn--border btn--rotate btn--rotate_green",{"btn--system-off":((C=s.getDSOrderIPMI)==null?void 0:C.IPMI["System Power"])!=="on"}]),onClick:i[0]||(i[0]=n=>{var c;return s.serverReset((c=s.getDSServerData)==null?void 0:c.ID)})},l(((R=s.getDSOrderIPMI)==null?void 0:R.IPMI["System Power"])==="on"?"Включен":"Выключен"),3),m(E,{class:"dropdown-dots",right:""},{"button-content":S(()=>[t("div",Lt,[m(f)])]),default:S(()=>[m(a,{onClick:i[1]||(i[1]=n=>{var c;return s.serverReset((c=s.getDSServerData)==null?void 0:c.ID)})},{default:S(()=>[O("Перезагрузить")]),_:1})]),_:1})]),t("div",Tt,"Выделенный сервер # "+l((e=s.getDSServerData)==null?void 0:e.OrderID),1),t("div",Vt,[m(w,{class:"section-nav__item",to:`/DSOrders/${(o=s.getDSServerData)==null?void 0:o.OrderID}`},{default:S(()=>[O("Сервер")]),_:1},8,["to"])])]),m(D),t("div",Ut,[m(L,{"contract-id":(r=s.getDSServerData)==null?void 0:r.ContractID,onTransfer:i[2]||(i[2]=n=>s.transferItem())},null,8,["contract-id"]),t("div",jt,[t("div",zt,[t("div",Ft,[t("div",Ht,l((b=s.getDSServerData)==null?void 0:b.Scheme),1),t("div",Gt,[m(T,{status:(p=s.getDSServerData)==null?void 0:p.StatusID,DaysRemainded:(x=s.getDSServerData)==null?void 0:x.DaysRemainded,"status-table":"DNSmanagerOrders",onClick:i[3]||(i[3]=n=>{var c;return s.openHistoryStatuses((c=s.getDSServerData)==null?void 0:c.ID)})},null,8,["status","DaysRemainded"])]),m(V,null,{default:S(()=>[m(a,{onClick:i[4]||(i[4]=n=>s.openOrderRestore())},{default:S(()=>[O("Просмотреть учет заказа")]),_:1})]),_:1})]),t("div",Wt,[t("ul",Zt,[(_(!0),d(P,null,B(s.getDSItemParam(s.getDSServerData),n=>(_(),d("li",null,l(n),1))),256))])]),t("div",qt,[t("div",Jt,l(((F=s.getDSScheme)==null?void 0:F.CostMonth)||"0")+" ₽ в месяц",1),t("div",Kt,"Дней осталось "+l(((H=s.getDSServerData)==null?void 0:H.DaysRemainded)||"0"),1),t("div",Qt,"Дата окончания "+l(s.calculateExpirationDate((G=s.getDSServerData)==null?void 0:G.DaysRemainded)),1)]),t("div",Xt,[m(U,{label:"Продлить",onClick:i[5]||(i[5]=n=>{var c;return u.$router.push(`/DSOrderPay/${(c=s.getDSServerData)==null?void 0:c.OrderID}`)})}),t("label",Yt,[lt(t("input",{type:"checkbox","onUpdate:modelValue":i[6]||(i[6]=n=>s.isAutoProlong=n),onInput:i[7]||(i[7]=n=>s.setProlongValue())},null,544),[[_t,s.isAutoProlong]]),$t,ts])])])]),t("div",ss,[t("div",es,[os,t("div",is,[(_(!0),d(P,null,B(s.getDSServerData.Names,(n,c)=>(_(),d("div",{class:"list-item__table-col",key:c},[t("div",ns,l(n),1),t("div",rs,l(s.formatData(c,s.getDSServerData)),1)]))),128))])])]),t("div",as,[t("div",ls,[_s,t("div",ds,[cs,t("div",ms,l((W=s.getDSServerData)==null?void 0:W.IPaddr),1)]),t("div",vs,[Ds,t("div",us,l((Z=s.getDSServerData)==null?void 0:Z.DSuser),1)]),t("div",Is,[hs,t("div",Ss,[s.passwordShowOne?(_(),d("div",gs,l((q=s.getDSServerData)==null?void 0:q.DSpass),1)):(_(),d("button",{key:1,class:"btn btn--border btn--md password-line",onClick:i[8]||(i[8]=n=>s.passwordShowOne=!0)},[m(y,{class:"button-icon"}),O("Показать")]))])])])]),t("div",fs,[t("div",ws,[bs,t("div",ps,[Os,t("div",Ps,l((J=s.getDSServerData)==null?void 0:J.ILOaddr),1)]),t("div",ys,[ks,t("div",Ms,l((K=s.getDSServerData)==null?void 0:K.ILOuser),1)]),t("div",Cs,[Rs,t("div",xs,[s.passwordShowTwo?(_(),d("div",Bs,l((Q=s.getDSServerData)==null?void 0:Q.ILOpass),1)):(_(),d("button",{key:1,class:"btn btn--border btn--md password-line",onClick:i[9]||(i[9]=n=>s.passwordShowTwo=!0)},[m(y,{class:"button-icon"}),O("Показать")]))])])])]),s.getDSOrderIPMI&&((X=s.getDSOrderIPMI)==null?void 0:X.IPMI.length)>0?(_(),d("div",Ns,[t("div",As,[Es,(_(!0),d(P,null,B((Y=s.getDSOrderIPMI)==null?void 0:Y.IPMI,n=>(_(),d("div",Ls,[t("div",Ts,l(n==null?void 0:n.name),1),t("div",Vs,l(n==null?void 0:n.value),1)]))),256))])])):tt("",!0),($=s.getDSOrderIPMI)!=null&&$["IPMI.Sensors"]&&s.getDSOrderIPMI["IPMI.Sensors"].length>0?(_(),d("div",Us,[t("div",js,[zs,(_(!0),d(P,null,B(s.getDSOrderIPMI["IPMI.Sensors"],(n,c)=>(_(),d("div",Fs,[t("div",Hs,l(c),1),t("div",Gs,l(n),1)]))),256))])])):tt("",!0)])])]),Ws])):(_(),d("div",Zs,[t("div",qs,[m(j,{label:"Заказ не найден"})])]))],64)}const Ks={components:{IconCard:St,IconProfile:gt,IconSettings:ft,IconEye:et,StatusBadge:ot,IconRotate:bt,settingsEngineItem:it,BlockBalanceAgreement:nt},async setup(){const u=vt(),i=ht(),I=Dt(),s=N(!1),h=ut("emitter");h.on("updateDSIDPage",()=>{i.fetchDSOrders().then(()=>{var e;i.fetchDSOrderIPMI((e=a.value)==null?void 0:e.OrderID)}).then(()=>{var e;i.fetchDSOrderIPMISensors((e=a.value)==null?void 0:e.OrderID)})});const z=N(!1),A=N(!1),f=N(!0),a=g(()=>Object.keys(i==null?void 0:i.DSList).map(e=>i==null?void 0:i.DSList[e]).find(e=>e.OrderID===u.params.id)),E=g(()=>{var e;return((e=a.value)==null?void 0:e.Names)||[]}),w=g(()=>{var e,o;return(o=i==null?void 0:i.DSSchemes)==null?void 0:o[(e=a.value)==null?void 0:e.SchemeID]}),D=g(()=>i==null?void 0:i.DSOrderIPMI),L=g(()=>{var e,o;return(o=I==null?void 0:I.userOrders)==null?void 0:o[(e=a.value)==null?void 0:e.OrderID]}),T=g(()=>i==null?void 0:i.DSOrderIPMISensors);It(()=>{var e;console.log("getDSOrderIPMI - ",D),console.log("getDSOrderIPMI value - ",(e=D==null?void 0:D.value)==null?void 0:e.IPMI["System Power"])});function V(e){h.emit("open-modal",{component:"StatusHistory",data:{modeID:"DSOrders",rowID:e}})}function U(e,o){const r=o[e];if(r==null)return"-";switch(e){case"ram":return`${r} ГБ`;case"chrate":return`${r} Мбит/с`;default:return r}}function y(e){if(!e)return st(new Date);const o=new Date,r=new Date(o.getTime()+e*24*60*60*1e3);return st(r)}function j(e){let o=w.value;o===void 0&&(o=e);let r=[];return o!=null&&o.Name&&r.push(o==null?void 0:o.Name),o!=null&&o.CPU&&r.push(o==null?void 0:o.CPU),o!=null&&o.ram&&r.push("RAM "+(o==null?void 0:o.ram)+" GB"),o!=null&&o.disks&&r.push(o==null?void 0:o.disks),r}function k(e){var r,b,p;function o(x){s.value=x}h.emit("open-modal",{component:"ReloadDS",data:{DSOrderID:e,isReloading:s.value,onReloadStatusChange:o,ServerName:(r=a==null?void 0:a.value)==null?void 0:r.Scheme,SystemPower:(b=D==null?void 0:D.value)==null?void 0:b.IPMI["System Power"],OrderID:(p=a==null?void 0:a.value)==null?void 0:p.OrderID}})}function M(){var e,o;h.emit("open-modal",{component:"OrdersTransfer",data:{ServiceOrderID:(e=a.value)==null?void 0:e.ID,ServiceID:(o=a.value)==null?void 0:o.ServiceID}})}function C(){var e;I.prolongOrder({IsAutoProlong:f.value?0:1,OrderID:(e=a.value)==null?void 0:e.OrderID})}function R(){var e,o,r;h.emit("open-modal",{component:"OrderRestore",data:{OrderID:(e=a.value)==null?void 0:e.OrderID,CostDay:(o=w.value)==null?void 0:o.CostDay,DaysRemainded:(r=a.value)==null?void 0:r.DaysRemainded,emitEvent:"updateDSIDPage"}})}return await i.fetchDSSchemes(),i.fetchDSOrders().then(()=>{var e;i.fetchDSOrderIPMI((e=a.value)==null?void 0:e.OrderID)}),await I.fetchUserOrders().then(()=>{var e;f.value=(e=L.value)==null?void 0:e.IsAutoProlong}),{getDSOrderIPMI:D,getDSServerData:a,getDSScheme:w,getDSOrderIPMISensors:T,isAutoProlong:f,passwordShowOne:z,passwordShowTwo:A,openOrderRestore:R,transferItem:M,setProlongValue:C,serverReset:k,isReloading:s,getDSItemParam:j,hostStatuses:pt,calculateExpirationDate:y,formatData:U,serverDataNames:E,openHistoryStatuses:V}}},he=mt(Ks,[["render",Js],["__scopeId","data-v-62b89295"]]);export{he as default};
