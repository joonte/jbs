import{_ as it}from"./EmptyStateBlock-BaR9js3E.js";import{_ as ut}from"./ParamsAccordionBlock-ClQAyXq0.js";import{_ as dt,a as mt,b as ct}from"./SettingsEngineItem-fipf4X9N.js";import{_ as vt,a as wt}from"./CopyToClipboard.vue_vue_type_script_setup_true_lang-91wn8_BT.js";import{_ as pt}from"./WhiteButton-B0VC5rKo.js";import{I as _t}from"./IconProfile-BO-wrWBn.js";import{_ as ft}from"./BlueButton.vue_vue_type_script_setup_true_lang-CnzqAS80.js";import{r as gt}from"./bootstrap-vue-next-DwS3lKQb.js";import{_ as bt}from"./StatusBadge-CjHHKSUG.js";import{_ as Dt}from"./ClausesKeeper-CTja-fCz.js";import{_ as xt}from"./MessageInfo-CcgbMPO0.js";import{_ as ht}from"./UserNote-8i0DdDDd.js";import{_ as It,f as St}from"./BlockBalanceAgreement-qtspRQ_B.js";import{u as yt,x as Ot,r as x,f as _,H as kt,g as Nt,c as d,b as o,a as s,C as A,h as m,F as L,t as n,w as c,n as Ct,v as f,E as Ht,I as $t,K as Pt,e as r,d as Mt,o as l}from"./index-CmCGXBst.js";import{u as Bt}from"./testTransforms-CtLjUrql.js";import{f as R}from"./time-DenPiOX5.js";import{u as At}from"./hosting-CzUiTaaD.js";import{u as Lt}from"./server-CRQmsQ4v.js";import{u as Rt}from"./global-5eUCDNCu.js";import"./contracts-P7YPBhEI.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./services-C54cnl9l.js";import"./IconSettings-C_oAltUA.js";import"./IconCopy-JqCg6kwh.js";import"./IconClose-B_k4TzXM.js";import"./ButtonDefault-BIBStZbJ.js";const Tt={class:"tw-px-4 md:tw-px-8"},Gt={class:"tw-text-xl sm:tw-text-4xl"},Vt=["href"],Et={class:"tw-flex tw-items-center tw-gap-2 tw-mt-2"},jt={class:"tw-text-gray-500 tw-text-sm"},Ut={class:"tw-flex tw-items-center tw-gap-8 tw-border-b tw-border-gray-200 tw-mt-4 tw-whitespace-nowrap tw-mb-6"},Wt={class:"tw-grid tw-grid-cols-1 xl:tw-grid-cols-2 tw-gap-4"},qt={class:"tw-border tw-rounded tw-border-gray-200 tw-p-4"},Ft={class:"tw-flex tw-justify-between tw-items-center tw-gap-4"},zt={class:"tw-flex tw-items-center tw-gap-2"},Kt={class:"tw-text-2xl"},Xt={class:"tw-flex tw-flex-wrap tw-gap-x-4 tw-gap-y-2 tw-text-gray-500 tw-text-sm tw-mt-4"},Jt={key:0},Qt={key:1},Yt={key:2},Zt={class:"tw-space-y-4 tw-mt-4"},te={class:"tw-flex tw-gap-4 tw-mt-4"},ee={class:"btn btn--border btn--switch tw-ml-0 tw-h-10 sm:tw-h-12"},se={class:"tw-flex tw-flex-wrap tw-gap-4 tw-mt-4"},oe={class:"tw-border tw-border-gray-200 tw-rounded tw-p-4"},ae={class:"tw-grid tw-gap-4 tw-grid-cols-3"},ne={class:"tw-col-span-3 tw-flex tw-items-center tw-justify-between tw-gap-2"},re={class:"tw-col-span-2 tw-flex tw-items-center tw-gap-1"},le={class:"tw-break-all"},ie={class:"tw-col-span-2 tw-flex tw-items-center tw-gap-1"},ue={class:"tw-col-span-2 tw-flex tw-flex-wrap tw-items-center tw-gap-2"},de={key:0,class:"tw-flex tw-items-center tw-gap-1"},me={class:"tw-col-span-2 tw-flex tw-items-center tw-gap-1"},ce={class:"tw-col-span-2 tw-space-y-2"},ve={key:0,class:"tw-flex tw-items-center tw-gap-1"},we={key:1,class:"tw-flex tw-items-center tw-gap-1"},pe={key:2,class:"tw-flex tw-items-center tw-gap-1"},_e={key:3,class:"tw-flex tw-items-center tw-gap-1"},We={__name:"HostingOrdersId",setup(fe){const p=Nt(),y=Mt(),g=At(),O=Lt(),k=yt(),T=Rt(),{formDescriptionLine:h}=Bt(),w=Ot("emitter");w.on("updateHostingOrdersId",()=>{P()});const N=x(!1),b=x(!1),e=x(null),C=x(!0),i=_(()=>g.hostingSchemes?.[e.value?.SchemeID]),D=_(()=>O?.serverGroupsList?.Servers?.[e.value?.ServerID]),G=_(()=>{const a=e.value.Graphs?.Graphs;return a?Object.values(a):null}),V=_(()=>{const a=e.value.Graphs?.Last;return a?Object.values(a):null}),E=_(()=>{if(!e.value?.Domain)return"";const a=e.value.Domain;return a.startsWith("http://")||a.startsWith("https://")?a:`https://${a}`});function j(a){if(!a)return R(new Date);const t=new Date,I=new Date(t.getTime()+a*24*60*60*1e3);return R(I)}function U(a){w.emit("open-modal",{component:"StatusHistory",data:{modeID:"HostingOrders",rowID:a}})}function W(){e.value?.ID&&e.value?.ServiceID&&w.emit("open-modal",{component:"OrdersTransfer",data:{ServiceOrderID:e.value?.ID,ServiceID:e.value?.ServiceID}})}function q(){k.prolongOrder({IsAutoProlong:b.value?0:1,OrderID:e.value?.OrderID})}function F(){y.push(`/HostingOrders/${e.value?.OrderID}/SchemeChange`),H()}function z(){y.push(`/HostingOrderPay/${e.value?.OrderID}`)}function K(){T.OrderManageHosting({ServiceOrderID:e.value?.ID,OrderID:e.value?.OrderID,ServiceID:e.value?.ServiceID,XMLHttpRequest:"yes"})}function H(){w.emit("open-modal",{component:"HostingOrderSchemeChange",data:{hostingID:e.value?.ID,hostingSchemeID:i.value?.ID,ServerGroup:i.value?.ServersGroupID,emitEvent:"updateHostingOrdersId"}})}function $(){w.emit("open-modal",{component:"OrderPasswordChange",data:{OrderID:e.value?.ID,ServiceID:e.value?.ServiceID,emitEvent:"updateHostingOrdersId"}})}function X(){w.emit("open-modal",{component:"OrderRestore",data:{OrderID:e.value?.OrderID,CostDay:i.value?.CostDay,DaysRemainded:e.value?.DaysRemainded,emitEvent:"updateHostingOrdersId"}})}kt(async()=>{await g.fetchHostingSchemes(),await O.fetchServerGroups(),e.value=await g.fetchHostingOrder(p.params.id);const a=await k.fetchUserOrder(p.params.id);a&&(b.value=a.IsAutoProlong),p.path.endsWith("/SchemeChange")&&H(),C.value=!1});async function P(){e.value=await g.fetchHostingOrder(p.params.id)}return(a,t)=>{const I=It,J=ht,Q=xt,M=Ht("RouterLink"),Y=Dt,Z=bt,B=gt,tt=dt,S=ft,et=_t,st=pt,v=vt,ot=wt,at=mt,nt=ct,rt=ut,lt=it;return l(),d(L,null,[o(I),s("div",Tt,[e.value?(l(),d(L,{key:0},[s("div",null,[s("h1",Gt,[s("a",{href:E.value,target:"_blank"},n(e.value.Domain),9,Vt)]),s("div",Et,[s("div",jt,"Хостинг # "+n(e.value.OrderID),1),o(J,{text:e.value.UserNotice,"order-id":e.value.OrderID,emit:"updateHostingOrdersId",position:"right"},null,8,["text","order-id"])]),e.value.Message?(l(),A(Q,{key:0,innerHTML:e.value.Message,class:"tw-mt-4"},null,8,["innerHTML"])):m("",!0),s("div",Ut,[o(M,{class:Ct(["tw-py-2 tw-cursor-pointer -tw-mb-[1px]",{"tw-text-sky-400 tw-border-b-2 tw-border-sky-400":f(p).path.endsWith("/SchemeChange")}]),"active-class":"tw-text-sky-400 tw-border-b-2 tw-border-sky-400",to:`/HostingOrders/${e.value.OrderID}`},{default:c(()=>t[12]||(t[12]=[r(" Хостинг ",-1)])),_:1,__:[12]},8,["class","to"]),o(M,{class:"tw-py-2 tw-cursor-pointer -tw-mb-[1px]","active-class":"tw-text-sky-400 tw-border-b-2 tw-border-sky-400",to:`/HostingServices/${e.value.OrderID}`},{default:c(()=>t[13]||(t[13]=[r(" Услуги ",-1)])),_:1,__:[13]},8,["to"])])]),o(Y,{partition:"Header:/HostingOrders"}),s("div",Wt,[s("div",qt,[s("div",Ft,[s("div",zt,[s("div",Kt,n(i.value?.Name),1),o(Z,{status:e.value.StatusID,"status-table":"HostingOrders",onClick:t[0]||(t[0]=u=>U(e.value.ID)),class:"tw-cursor-pointer"},null,8,["status"])]),o(tt,null,{default:c(()=>[o(B,{onClick:t[1]||(t[1]=u=>X())},{default:c(()=>t[14]||(t[14]=[r("Просмотреть учет заказа",-1)])),_:1,__:[14]}),o(B,{onClick:t[2]||(t[2]=u=>$())},{default:c(()=>t[15]||(t[15]=[r("Сменить пароль",-1)])),_:1,__:[15]})]),_:1})]),s("div",Xt,[i.value?.SchemeParams?.limit_webdomains?.Value?(l(),d("div",Jt,n(f(h)(i.value?.SchemeParams?.limit_webdomains)),1)):m("",!0),i.value?.SchemeParams?.limit_quota?.Value?(l(),d("div",Qt,n(f(h)(i.value?.SchemeParams?.limit_quota)),1)):m("",!0),i.value?.SchemeParams?.limit_emails?.Value?(l(),d("div",Yt,n(f(h)(i.value?.SchemeParams?.limit_emails)),1)):m("",!0)]),s("div",Zt,[s("div",null,n(f(St)(i.value?.CostMonth))+" в месяц",1),s("div",null,"Дней осталось "+n(e.value.DaysRemainded||0),1),s("div",null,"Дата окончания "+n(j(e.value.DaysRemainded)),1)]),s("div",te,[o(S,{onClick:t[3]||(t[3]=u=>z()),class:"tw-w-30 sm:tw-w-40"},{default:c(()=>[r(n(e.value.StatusID==="Waiting"?"Оплатить":"Продлить"),1)]),_:1}),s("label",ee,[$t(s("input",{type:"checkbox","onUpdate:modelValue":t[4]||(t[4]=u=>b.value=u),onInput:t[5]||(t[5]=u=>q())},null,544),[[Pt,b.value]]),t[16]||(t[16]=s("span",{class:"btn-switch__text tw-text-xs sm:tw-text-sm"},"Автопродление",-1)),t[17]||(t[17]=s("span",{class:"btn-switch__toggle"},null,-1))])]),s("div",se,[o(S,{onClick:t[6]||(t[6]=u=>F()),class:"tw-w-36 sm:tw-w-40"},{default:c(()=>t[18]||(t[18]=[r("Изменить тариф",-1)])),_:1,__:[18]}),o(st,{onClick:t[7]||(t[7]=u=>W())},{default:c(()=>[o(et),t[19]||(t[19]=s("div",null,"Передать на другой аккаунт",-1))]),_:1,__:[19]})])]),s("div",oe,[s("div",ae,[s("div",ne,[t[21]||(t[21]=s("div",{class:"tw-text-2xl"},"Панель управления",-1)),o(S,{onClick:t[8]||(t[8]=u=>K()),type:"small"},{default:c(()=>t[20]||(t[20]=[r("Вход",-1)])),_:1,__:[20]})]),t[23]||(t[23]=s("div",{class:"tw-flex tw-items-center tw-font-bold"},"Адрес",-1)),s("div",re,[s("div",le,n(`https://${D.value?.Address}/manager`),1),o(v,{value:`https://${D.value?.Address}/manager`},null,8,["value"])]),t[24]||(t[24]=s("div",{class:"tw-flex tw-items-center tw-font-bold"},"Логин",-1)),s("div",ie,[r(n(e.value.Login)+" ",1),o(v,{value:e.value.Login},null,8,["value"])]),t[25]||(t[25]=s("div",{class:"tw-flex tw-items-center tw-font-bold"},"Пароль",-1)),s("div",ue,[N.value?(l(),d("div",de,n(e.value.Password),1)):(l(),d("button",{key:1,class:"btn btn--border btn--md tw-h-8 tw-gap-1",onClick:t[9]||(t[9]=u=>N.value=!0)},[o(ot,{class:"tw-size-5"}),t[22]||(t[22]=r(" Показать ",-1))])),s("button",{class:"btn btn--border btn--md tw-h-8",onClick:t[10]||(t[10]=u=>$())},"Сменить пароль"),o(v,{value:e.value.Password},null,8,["value"])]),t[26]||(t[26]=s("div",{class:"tw-flex tw-items-center tw-font-bold"},"FTP, POP3, SMTP, IMAP",-1)),s("div",me,[r(n(D.value?.Address)+" ",1),o(v,{value:D.value?.Address},null,8,["value"])]),t[27]||(t[27]=s("div",{class:"tw-flex tw-font-bold"},"Именные сервера",-1)),s("div",ce,[e.value.Ns1Name?(l(),d("div",ve,[r(n(e.value.Ns1Name),1),o(v,{value:e.value.Ns1Name},null,8,["value"])])):m("",!0),e.value.Ns2Name?(l(),d("div",we,[r(n(e.value.Ns2Name),1),o(v,{value:e.value.Ns2Name},null,8,["value"])])):m("",!0),e.value.Ns3Name?(l(),d("div",pe,[r(n(e.value.Ns3Name),1),o(v,{value:e.value.Ns3Name},null,8,["value"])])):m("",!0),e.value.Ns4Name?(l(),d("div",_e,[r(n(e.value.Ns4Name),1),o(v,{value:e.value.Ns4Name},null,8,["value"])])):m("",!0)])])]),o(at,{data:V.value,order:e.value,date:e.value.Graphs?.UpdateDate,type:"Hosting",onUpdated:t[11]||(t[11]=u=>P())},null,8,["data","order","date"]),o(nt,{data:G.value},null,8,["data"])]),o(rt,{"params-list":i.value?.SchemeParams,label:"Общая информация","main-param":"InternalName"},null,8,["params-list"])],64)):C.value?m("",!0):(l(),A(lt,{key:1,label:"Заказ не найден"}))])],64)}}};export{We as default};
