import{u as U,_ as X}from"./contracts-CILh9uSu.js";import{_ as q}from"./ButtonDefault-CghIUDY0.js";import{m as j,a7 as J,a8 as K,Y as Q,ae as Z,r as F,ar as tt,f as C,af as m,v as D,ag as H,H as et,I as nt,h as W,o as b,c as k,a as f,b as L,t as _,j as ot,n as st,F as lt,i as rt,d as at}from"./index-CipWZKo_.js";import{_ as it}from"./_plugin-vue_export-helper-DlAUqK2U.js";function V(t){return J()?(K(t),!0):!1}const Y=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const ct=Object.prototype.toString,ut=t=>ct.call(t)==="[object Object]",g=()=>{},N=ft();function ft(){var t,e;return Y&&((t=window?.navigator)==null?void 0:t.userAgent)&&(/iP(?:ad|hone|od)/.test(window.navigator.userAgent)||((e=window?.navigator)==null?void 0:e.maxTouchPoints)>2&&/iPad|Macintosh/.test(window?.navigator.userAgent))}function dt(...t){if(t.length!==1)return Q(...t);const e=t[0];return typeof e=="function"?Z(tt(()=>({get:e,set:g}))):F(e)}function A(t){return Array.isArray(t)?t:[t]}function wt(t,e,n){return j(t,e,{...n,immediate:!0})}const z=Y?window:void 0;function x(t){var e;const n=m(t);return(e=n?.$el)!=null?e:n}function S(...t){const e=[],n=()=>{e.forEach(l=>l()),e.length=0},s=(l,a,o,u)=>(l.addEventListener(a,o,u),()=>l.removeEventListener(a,o,u)),c=C(()=>{const l=A(m(t[0])).filter(a=>a!=null);return l.every(a=>typeof a!="string")?l:void 0}),d=wt(()=>{var l,a;return[(a=(l=c.value)==null?void 0:l.map(o=>x(o)))!=null?a:[z].filter(o=>o!=null),A(m(c.value?t[1]:t[0])),A(D(c.value?t[2]:t[1])),m(c.value?t[3]:t[2])]},([l,a,o,u])=>{if(n(),!l?.length||!a?.length||!o?.length)return;const y=ut(u)?{...u}:u;e.push(...l.flatMap(w=>a.flatMap(h=>o.map(O=>s(w,h,O,y)))))},{flush:"post"}),v=()=>{d(),n()};return V(n),v}let T=!1;function $(t,e,n={}){const{window:s=z,ignore:c=[],capture:d=!0,detectIframe:v=!1,controls:l=!1}=n;if(!s)return l?{stop:g,cancel:g,trigger:g}:g;if(N&&!T){T=!0;const r={passive:!0};Array.from(s.document.body.children).forEach(i=>i.addEventListener("click",g,r)),s.document.documentElement.addEventListener("click",g,r)}let a=!0;const o=r=>m(c).some(i=>{if(typeof i=="string")return Array.from(s.document.querySelectorAll(i)).some(p=>p===r.target||r.composedPath().includes(p));{const p=x(i);return p&&(r.target===p||r.composedPath().includes(p))}});function u(r){const i=m(r);return i&&i.$.subTree.shapeFlag===16}function y(r,i){const p=m(r),E=p.$.subTree&&p.$.subTree.children;return E==null||!Array.isArray(E)?!1:E.some(R=>R.el===i.target||i.composedPath().includes(R.el))}const w=r=>{const i=x(t);if(r.target!=null&&!(!(i instanceof Element)&&u(t)&&y(t,r))&&!(!i||i===r.target||r.composedPath().includes(i))){if("detail"in r&&r.detail===0&&(a=!o(r)),!a){a=!0;return}e(r)}};let h=!1;const O=[S(s,"click",r=>{h||(h=!0,setTimeout(()=>{h=!1},0),w(r))},{passive:!0,capture:d}),S(s,"pointerdown",r=>{const i=x(t);a=!o(r)&&!!(i&&!r.composedPath().includes(i))},{passive:!0}),v&&S(s,"blur",r=>{setTimeout(()=>{var i;const p=x(t);((i=s.document.activeElement)==null?void 0:i.tagName)==="IFRAME"&&!p?.contains(s.document.activeElement)&&e(r)},0)},{passive:!0})].filter(Boolean),P=()=>O.forEach(r=>r());return l?{stop:P,cancel:()=>{a=!1},trigger:r=>{a=!0,w(r),a=!1}}:P}const I=new WeakMap,pt={mounted(t,e){const n=!e.modifiers.bubble;let s;if(typeof e.value=="function")s=$(t,e.value,{capture:n});else{const[c,d]=e.value;s=$(t,c,Object.assign({capture:n},d))}I.set(t,s)},unmounted(t){const e=I.get(t);e&&typeof e=="function"?e():e?.stop(),I.delete(t)}};function M(t){return typeof Window<"u"&&t instanceof Window?t.document.documentElement:typeof Document<"u"&&t instanceof Document?t.documentElement:t}function G(t){const e=window.getComputedStyle(t);if(e.overflowX==="scroll"||e.overflowY==="scroll"||e.overflowX==="auto"&&t.clientWidth<t.scrollWidth||e.overflowY==="auto"&&t.clientHeight<t.scrollHeight)return!0;{const n=t.parentNode;return!n||n.tagName==="BODY"?!1:G(n)}}function mt(t){const e=t||window.event,n=e.target;return G(n)?!1:e.touches.length>1?!0:(e.preventDefault&&e.preventDefault(),!1)}const B=new WeakMap;function vt(t,e=!1){const n=H(e);let s=null,c="";j(dt(t),l=>{const a=M(m(l));if(a){const o=a;if(B.get(o)||B.set(o,o.style.overflow),o.style.overflow!=="hidden"&&(c=o.style.overflow),o.style.overflow==="hidden")return n.value=!0;if(n.value)return o.style.overflow="hidden"}},{immediate:!0});const d=()=>{const l=M(m(t));!l||n.value||(N&&(s=S(l,"touchmove",a=>{mt(a)},{passive:!1})),l.style.overflow="hidden",n.value=!0)},v=()=>{const l=M(m(t));!l||!n.value||(N&&s?.(),l.style.overflow=c,B.delete(l),n.value=!1)};return V(v),C({get(){return n.value},set(l){l?d():v()}})}function gt(){let t=!1;const e=H(!1);return(n,s)=>{if(e.value=s.value,t)return;t=!0;const c=vt(n,s.value);j(e,d=>c.value=d)}}gt();function Ht(t){const e=t.Names||[],n=[];for(const[s,c]of Object.entries(e))n.push({label:c,text:t[s]||"-"});return n}function Vt(t=null){const e=String(t)?.length;let n="";for(let s=0;s<5-e;s++)n="0"+n;return String(n)+String(t)}function ht(t){t||(t=0),typeof t=="string"&&(t=t.replace(",","."));const e=Number(t);return isNaN(e)?"0.00 ₽":e.toLocaleString("ru-RU",{style:"currency",currency:"RUB"}).replace(",",".")}const _t={key:0,class:"tw-relative tw-border-b tw-border-gray-100 tw-mb-4 tw-py-1 tw-px-2 md:tw-px-6"},yt={class:"tw-flex tw-flex-wrap tw-gap-1 md:tw-gap-4 tw-w-full tw-items-center tw-justify-between tw-px-2"},xt={class:"tw-flex tw-gap-4 md:tw-items-center tw-justify-between tw-flex-1"},bt={class:"tw-flex-1 tw-flex tw-flex-col md:tw-flex-row md:tw-items-center tw-gap-1 md:tw-gap-4"},kt={class:"tw-text-gray-400 tw-text-left"},St={class:"tw-flex-1 tw-text-sky-400 tw-line-clamp-1 tw-text-left"},Ct={class:"tw-flex tw-gap-4"},Ot={class:"tw-flex-1 tw-flex tw-flex-col md:tw-flex-row md:tw-items-center tw-gap-1 md:tw-gap-4"},Et={class:"tw-text-gray-800 tw-text-left"},Lt={class:"balance__pay-btn"},At={key:0,class:"tw-absolute tw-top-[50px] md:tw-top-[58px] tw-left-1 tw-right-1 tw-z-10 tw-pl-1 md:tw-pl-6 tw-pr-8 md:tw-pr-[60px] tw-bg-white tw-border tw-border-gray-100 tw-rounded tw-shadow-md"},It={class:"tw-flex-1 tw-flex tw-flex-col md:tw-flex-row md:tw-items-center tw-gap-1 md:tw-gap-4"},Mt={class:"tw-text-gray-400 tw-text-left"},Bt={class:"tw-flex-1 tw-text-sky-400 tw-line-clamp-1 tw-text-left"},Dt={class:"tw-flex tw-gap-4"},Nt={class:"tw-flex-1 tw-flex tw-flex-col md:tw-flex-row md:tw-items-center tw-gap-1 md:tw-gap-4"},jt={class:"tw-text-gray-800 tw-text-left"},Pt={class:"balance__pay-btn"},Rt={__name:"BlockBalanceAgreement",setup(t){const e=U(),n=at(),s=F(!1),c=C(()=>Object.keys(e?.contractsList||[]).map(o=>{const u=e?.contractsList[o];return(u.Orders>0||u.Balance>0)&&u.IsHidden===!1?{value:u.ID,name:u.Customer,balance:u.Balance}:null}).filter(o=>o!==null)),d=C(()=>c.value?.[0]||null);et(async()=>{await e.fetchContracts()});function v(a){n.push(`/Balance/${a}`)}function l(){s.value=!1}return(a,o)=>{const u=q,y=X;return d.value?nt((b(),k("div",_t,[f("div",yt,[f("div",xt,[f("div",bt,[f("div",kt,_(String(d.value.value).padStart(5,"0")),1),f("div",St,_(d.value.name),1)]),f("div",Ct,[f("div",Ot,[o[2]||(o[2]=f("div",{class:"tw-text-gray-400 tw-text-left"},"Баланс",-1)),f("div",Et,_(D(ht)(d.value.balance)),1)]),f("div",Lt,[L(u,{class:"btn-pay tw-m-0",label:"Пополнить",onClick:o[0]||(o[0]=ot(w=>v(d.value.value),["stop"]))})])])]),L(y,{onClick:o[1]||(o[1]=w=>s.value=!s.value),class:st(["tw-cursor-pointer tw-duration-300",{"tw-rotate-180":s.value}])},null,8,["class"])]),s.value?(b(),k("div",At,[(b(!0),k(lt,null,rt(c.value,w=>(b(),k("div",{key:w.value,class:"tw-flex md:tw-items-center tw-justify-between tw-gap-1 md:tw-gap-4 tw-w-full tw-p-2"},[f("div",It,[f("div",Mt,_(String(w.value).padStart(5,"0")),1),f("div",Bt,_(w.name),1)]),f("div",Dt,[f("div",Nt,[o[3]||(o[3]=f("div",{class:"tw-text-gray-400 tw-text-left"},"Баланс",-1)),f("div",jt,_(w.balance)+" ₽",1)]),f("div",Pt,[L(u,{class:"btn-pay tw-m-0",label:"Пополнить",onClick:h=>v(w.value)},null,8,["onClick"])])])]))),128))])):W("",!0)])),[[D(pt),l]]):W("",!0)}}},Yt=it(Rt,[["__scopeId","data-v-ba29cd01"]]);export{Yt as _,ht as f,Ht as g,Vt as t};
