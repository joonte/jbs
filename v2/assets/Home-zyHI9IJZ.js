import{L as E}from"./bootstrap-vue-next-CDL_Y1-V.js";import{_ as F}from"./IconCard-CoE2j-B8.js";import{_ as j}from"./StatusBadge-CiYQLfxg.js";import{_ as G}from"./ButtonDefault-CgQ13ecW.js";import{I as M,a as U,b as W,c as q}from"./IconServer-BdiGLtOO.js";import{_ as z}from"./ClausesKeeper-Cjjq7JUL.js";import{_ as J}from"./BlockBalanceAgreement-BNU6bIWW.js";import{u as K,E as v,f,c as Q,b as n,a as s,w as i,G as X,x as b,d as Y,F as Z,y as h,o as tt,e as d,t as m}from"./index-DakgQwZZ.js";import{u as st}from"./postings-CaUZn88T.js";import{u as et}from"./contracts-C-xJvA56.js";import{_ as ot}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./IconClose-Camrw-uN.js";const nt=[{key:"ID",label:"Заказ",variant:"td-gray td-order"},{key:"ContractID",label:"Договор",variant:"td-blue"},{key:"ServiceID",label:"Услуга",variant:"td-gray td-order"},{key:"Reason",label:"Осталось дн.",variant:"td-gray td-order"},{key:"StatusID",label:"Статус",sortable:!0,variant:"td-gray td-order"},{key:"controls",label:"",variant:"td-controls"}],it={class:"section"},rt={class:"container"},lt={class:"section-header"},at={class:"list-grid-three-col"},dt={class:"list-col"},ct={class:"list-item"},_t={class:"list-col"},mt={class:"list-item"},ut={class:"list-item__row icon-row"},pt={class:"list-col"},vt={class:"list-item"},ft={class:"list-item__row icon-row"},bt={class:"d-block"},St={class:"d-block"},Dt={class:"d-block"},wt={class:"btn__group"},gt=["onClick"],kt={__name:"Home",async setup(It){let c,_;const u=K(),S=st(),D=et(),k=h("emitter");[c,_]=v(()=>u.fetchUserOrders()),await c,_(),[c,_]=v(()=>S.fetchServices()),await c,_(),[c,_]=v(()=>D.fetchContracts()),await c,_();const l=Y(),I=f(()=>Object.keys(u?.userOrders).map(e=>u?.userOrders[e])?.reverse().filter(e=>e?.StatusID==="Deleted"||e?.StatusID==="Suspended"||e?.StatusID==="OnService"||e?.DaysRemainded>0&&e?.DaysRemainded<14)),y=f(()=>D?.contractsList),p=f(()=>S?.servicesList);function C(){l.go(0)}function O(e,t){if(!t.target.closest("button, a, .clickable-element")){let r=p.value[e.ServiceID]?.Code;r==="Default"||r==="ExtraIP"||r==="ISPsw"||r==="DNSmanager"?l.push(`/AdditionalServices/${e.ID}`):l.push(`/${r}Orders/${e.ID}`)}}function $(e,t){let r="";t==="Default"?r="Orders":r=t+"Orders",k.emit("open-modal",{component:"StatusHistory",data:{modeID:r,rowID:e}})}function x(e){let t=p.value[e.ServiceID]?.Code;t==="Default"?l.push(`/ServiceOrderPay/${e.ID}`):l.push(`/${t}OrderPay/${e.ID}`)}return(e,t)=>{const r=J,P=z,H=M,a=X("router-link"),N=U,R=W,V=q,w=G,B=j,T=F,A=E;return tt(),Q(Z,null,[n(r),s("section",it,[s("div",rt,[s("div",lt,[s("h1",{class:"section-title",onClick:t[0]||(t[0]=o=>C())},"Домашняя страница")]),n(P,{partition:"Header:/Home"}),s("div",at,[s("div",dt,[s("div",ct,[t[8]||(t[8]=s("div",{class:"list-item__row"},[s("div",{class:"list-item__title"},"Услуги")],-1)),n(a,{class:"list-item__row icon-row",to:"/HostingOrders"},{default:i(()=>[n(H),t[4]||(t[4]=d(" Заказать хостинг ",-1))]),_:1,__:[4]}),n(a,{class:"list-item__row icon-row",to:"/DomainOrders"},{default:i(()=>[n(N),t[5]||(t[5]=d(" Заказать домен ",-1))]),_:1,__:[5]}),n(a,{class:"list-item__row icon-row",to:"/DSOrders"},{default:i(()=>[n(R),t[6]||(t[6]=d(" Заказать выделенный сервер ",-1))]),_:1,__:[6]}),n(a,{class:"list-item__row icon-row",to:"/VPSOrders"},{default:i(()=>[n(V),t[7]||(t[7]=d(" Заказать VPS/VDS сервер ",-1))]),_:1,__:[7]})])]),s("div",_t,[s("div",mt,[s("div",null,[t[10]||(t[10]=s("div",{class:"list-item__row"},[s("div",{class:"list-item__title"},"Мой офис")],-1)),n(a,{class:"list-item__row icon-row",to:"/Contracts"},{default:i(()=>t[9]||(t[9]=[d(" Мои договора ",-1)])),_:1,__:[9]})]),s("div",ut,[n(w,{label:"Создать договор",onClick:t[1]||(t[1]=o=>b(l).push("/ContractMake"))})])])]),s("div",pt,[s("div",vt,[s("div",null,[t[13]||(t[13]=s("div",{class:"list-item__row"},[s("div",{class:"list-item__title"},"Поддержка")],-1)),n(a,{class:"list-item__row icon-row",to:"/Tickets"},{default:i(()=>t[11]||(t[11]=[d(" Тикеты ",-1)])),_:1,__:[11]}),n(a,{class:"list-item__row icon-row",to:"/Contacts"},{default:i(()=>t[12]||(t[12]=[d(" Контакты ",-1)])),_:1,__:[12]})]),s("div",ft,[n(w,{label:"Создать тикет",onClick:t[2]||(t[2]=o=>b(l).push("/NewTicket"))})])])])]),t[20]||(t[20]=s("div",{class:"section-header"},[s("h2",{class:"sub-section-title"},"Требует внимания")],-1)),n(A,{class:"basic-table",items:I.value,fields:b(nt),"show-empty":!0,"per-page":5,page:1,"empty-text":"Пока не требуется никаких действий","empty-filtered-text":"Пока не требуется никаких действий",onRowClicked:t[3]||(t[3]=(o,g,L)=>O(o,L))},{"cell(ID)":i(o=>[t[14]||(t[14]=s("span",{class:"td-mobile"},"Заказ",-1)),s("span",bt,m(o.value),1)]),"cell(ContractID)":i(o=>[t[15]||(t[15]=s("span",{class:"td-mobile"},"Договор",-1)),s("span",null,m(y.value[o.value]?.Customer),1)]),"cell(ServiceID)":i(o=>[t[16]||(t[16]=s("span",{class:"td-mobile"},"Услуга",-1)),s("span",St,m(p.value[o.value]?.Name),1)]),"cell(Reason)":i(o=>[t[17]||(t[17]=s("span",{class:"td-mobile"},"Осталось дн.",-1)),s("span",Dt,m(o.item?.DaysRemainded||0),1)]),"cell(StatusID)":i(o=>[t[18]||(t[18]=s("span",{class:"td-mobile"},"Статус",-1)),n(B,{class:"clickable-element",status:o.value,"status-table":"Orders",onClick:g=>$(o.item?.ServiceOrderID,o.item?.Code)},null,8,["status","onClick"])]),"cell(controls)":i(o=>[s("div",wt,[s("button",{class:"btn btn-default btn--border",onClick:g=>x(o.item)},[n(T),t[19]||(t[19]=s("p",null,"ОПЛАТИТЬ",-1))],8,gt)])]),_:1},8,["items","fields"])])])],64)}}},At=ot(kt,[["__scopeId","data-v-2e55aaf1"]]);export{At as default};
