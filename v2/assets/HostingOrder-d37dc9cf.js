import{k as ft,o as O,c as H,b as r,a as t,t as a,w as h,d as p,Z as A,ab as V,$ as St,F as It,p as Ot,m as Ht,_ as bt,f as wt,e as Pt,g as kt,U as yt,r as dt,h as D}from"./index-aeb1df1e.js";import{_ as Ct}from"./IconCard-47752060.js";import{I as xt}from"./IconProfile-efaeb789.js";import{I as Bt}from"./IconSettings-09f9f59f.js";import{_ as gt,a as vt}from"./ServicesContractBalanceBlock-a08c9c9b.js";import{S as ut}from"./StatusBadge-ca078fa4.js";import{h as Nt}from"./hostStatuses-94d00f20.js";import{u as At}from"./testTransforms-eec373ee.js";import{f as mt}from"./useTimeFunction-8602dd60.js";import{u as Et}from"./hosting-5f2b5ff4.js";import{u as Mt}from"./resetServer-1c71747e.js";import{u as Tt}from"./globalActions-3944bebb.js";import{_ as ht}from"./ClausesKeeper-90c650cc.js";import{s as pt}from"./SettingsEngineItem-2c0bce28.js";import{B as Dt}from"./BlockBalanceAgreement-906c1168.js";import{E as Lt}from"./EmptyStateBlock-b0a120e4.js";import{_ as Rt}from"./paramsAccordionBlock-c7f77ac0.js";import{_ as Vt}from"./ButtonDefault-11c4541b.js";import{z as Gt}from"./bootstrap-vue-next.es-c6bcf011.js";import"./IconArrow-a6c91ada.js";import"./IconClose-c7c36336.js";/* empty css                                                                             */const m=g=>(Ot("data-v-e1770ffe"),g=g(),Ht(),g),Ut={key:0,class:"my-hosting-order"},qt={class:"section"},Ft={class:"container"},Wt={class:"section-header"},jt={class:"section-title"},zt=["href"],Kt={class:"section-label"},Xt={class:"section-nav"},Zt={class:"list"},Jt={class:"list-col list-col--md"},Qt={class:"list-item"},Yt={class:"list-item__row"},$t={class:"list-item__title"},te={class:"list-item__status"},ee={class:"list-item__row"},se={class:"list-item__ul"},oe={class:"list-item__row list-item__row--column"},ie={class:"list-item__text"},ne={class:"list-item__text"},ae={class:"list-item__text"},re={class:"list-item__row"},le={class:"btn btn--border btn--switch"},ce=m(()=>t("span",{class:"btn-switch__text"},"Автопродление",-1)),_e=m(()=>t("span",{class:"btn-switch__toggle"},null,-1)),de={class:"list-col list-col--md"},me={class:"list-item"},ge={class:"list-item__row"},ve=m(()=>t("div",{class:"list-item__title"},"Панель управления",-1)),ue={class:"list-item__row list-item__row--table"},he=m(()=>t("div",{class:"list-item__item"},"Адрес",-1)),pe={class:"list-item__item"},De={class:"list-item__row list-item__row--table"},fe=m(()=>t("div",{class:"list-item__item"},"Логин",-1)),Se={class:"list-item__item"},Ie={class:"list-item__row list-item__row--table"},Oe=m(()=>t("div",{class:"list-item__item"},"Пароль",-1)),He={class:"list-item__item hide-button"},be={key:0,class:"password-hidden"},we={class:"list-item__row list-item__row--table"},Pe=m(()=>t("div",{class:"list-item__item"},"FTP, POP3, SMTP, IMAP",-1)),ke={class:"list-item__item"},ye={class:"list-col list-col--md"},Ce={class:"list-item"},xe=m(()=>t("div",{class:"list-item__row"},[t("div",{class:"list-item__title"},"Именные сервера")],-1)),Be={class:"list-item__row list-item__row--table"},Ne={class:"list-item__item"},Ae={class:"list-item__item"},Ee={class:"list-item__item"},Me={class:"list-item__item"},Te={key:1,class:"section"},Le={class:"container"};function Re(g,i,l,s,v,G){var w,P,k,y,C,x,u,B,N,e,o,c,U,q,F,W,j,z,K,X,Z,J,Q,Y,$,tt,et,st,ot,it,nt,at,rt,lt,ct;const E=Dt,d=ft("router-link"),M=ht,f=gt,n=ut,S=Gt,I=pt,b=Vt,T=vt,L=Rt,R=Lt;return O(),H(It,null,[r(E),(w=s.getHostingOrderData)!=null&&w.ID?(O(),H("div",Ut,[t("div",qt,[t("div",Ft,[t("div",Wt,[t("h1",jt,[t("a",{href:s.fullDomainUrl,target:"_blank"},a((P=s.getHostingOrderData)==null?void 0:P.Domain),9,zt)]),t("div",Kt,"Хостинг # "+a((k=s.getHostingOrderData)==null?void 0:k.OrderID),1),t("div",Xt,[r(d,{class:"section-nav__item",to:`/HostingOrders/${(y=s.getHostingOrderData)==null?void 0:y.OrderID}`},{default:h(()=>[p("Хостинг")]),_:1},8,["to"]),r(d,{class:"section-nav__item",to:`/HostingServices/${(C=s.getHostingOrderData)==null?void 0:C.OrderID}`},{default:h(()=>[p("Услуги")]),_:1},8,["to"])])]),r(M,{partition:"Header:/HostingOrders"}),t("div",Zt,[r(f,{"contract-id":(x=s.getHostingOrderData)==null?void 0:x.ContractID,onTransfer:i[0]||(i[0]=_=>s.transferItem())},null,8,["contract-id"]),t("div",Jt,[t("div",Qt,[t("div",Yt,[t("div",$t,a((u=s.getHostingScheme)==null?void 0:u.Name),1),t("div",te,[r(n,{status:(B=s.getHostingOrderData)==null?void 0:B.StatusID,"status-table":"HostingOrders",onClick:i[1]||(i[1]=_=>{var _t;return s.openHistoryStatuses((_t=s.getHostingOrderData)==null?void 0:_t.ID)})},null,8,["status"])]),r(I,null,{default:h(()=>[r(S,{onClick:i[2]||(i[2]=_=>s.changeScheme())},{default:h(()=>[p("Изменить тариф")]),_:1}),r(S,{onClick:i[3]||(i[3]=_=>s.openOrderRestore())},{default:h(()=>[p("Просмотреть учет заказа")]),_:1}),r(S,{onClick:i[4]||(i[4]=_=>s.openPasswordChange())},{default:h(()=>[p("Сменить пароль")]),_:1})]),_:1})]),t("div",ee,[t("ul",se,[A(t("li",null,a(s.formDescriptionLine((e=(N=s.getHostingScheme)==null?void 0:N.SchemeParams)==null?void 0:e.limit_webdomains)),513),[[V,(U=(c=(o=s.getHostingScheme)==null?void 0:o.SchemeParams)==null?void 0:c.limit_webdomains)==null?void 0:U.Value]]),A(t("li",null,a(s.formDescriptionLine((F=(q=s.getHostingScheme)==null?void 0:q.SchemeParams)==null?void 0:F.limit_quota)),513),[[V,(z=(j=(W=s.getHostingScheme)==null?void 0:W.SchemeParams)==null?void 0:j.limit_quota)==null?void 0:z.Value]]),A(t("li",null,a(s.formDescriptionLine((X=(K=s.getHostingScheme)==null?void 0:K.SchemeParams)==null?void 0:X.limit_emails)),513),[[V,(Q=(J=(Z=s.getHostingScheme)==null?void 0:Z.SchemeParams)==null?void 0:J.limit_emails)==null?void 0:Q.Value]])])]),t("div",oe,[t("div",ie,a((Y=s.getHostingScheme)==null?void 0:Y.CostMonth)+" ₽ в месяц",1),t("div",ne,"Дней осталось "+a((($=s.getHostingOrderData)==null?void 0:$.DaysRemainded)||0),1),t("div",ae,"Дата окончания "+a(s.calculateExpirationDate((tt=s.getHostingOrderData)==null?void 0:tt.DaysRemainded)),1)]),t("div",re,[t("div",{class:"btn btn-default btn--blue",onClick:i[5]||(i[5]=_=>s.navigateToProlong())},a(((et=s.getHostingOrderData)==null?void 0:et.StatusID)==="Waiting"?"Оплатить":"Продлить"),1),t("label",le,[A(t("input",{type:"checkbox","onUpdate:modelValue":i[6]||(i[6]=_=>s.isAutoProlong=_),onInput:i[7]||(i[7]=_=>s.setProlongValue())},null,544),[[St,s.isAutoProlong]]),ce,_e])])])]),t("div",de,[t("div",me,[t("div",ge,[ve,r(b,{class:"ml-auto",onClick:i[8]||(i[8]=_=>s.orderManage()),label:"Вход"})]),t("div",ue,[he,t("div",pe,a(`https://${(st=s.getServerGroup)==null?void 0:st.Address}/manager`),1)]),t("div",De,[fe,t("div",Se,a((ot=s.getHostingOrderData)==null?void 0:ot.Login),1)]),t("div",Ie,[Oe,t("div",He,[s.passwordShow?(O(),H("div",be,a(s.getHostingOrderData.Password),1)):(O(),H("button",{key:1,class:"btn btn--border btn--md hide-button",onClick:i[9]||(i[9]=_=>s.passwordShow=!0)},[r(T),p("Показать")])),t("button",{class:"btn btn--border btn--md hide-button",onClick:i[10]||(i[10]=_=>s.openPasswordChange())},"Сменить пароль")])]),t("div",we,[Pe,t("div",ke,a((it=s.getServerGroup)==null?void 0:it.Address),1)])])]),t("div",ye,[t("div",Ce,[xe,t("div",Be,[t("div",Ne,a((nt=s.getHostingOrderData)==null?void 0:nt.Ns1Name),1),t("div",Ae,a((at=s.getHostingOrderData)==null?void 0:at.Ns2Name),1),t("div",Ee,a((rt=s.getHostingOrderData)==null?void 0:rt.Ns3Name),1),t("div",Me,a((lt=s.getHostingOrderData)==null?void 0:lt.Ns4Name),1)])])])])])]),r(L,{"params-list":(ct=s.getHostingScheme)==null?void 0:ct.SchemeParams,label:"Общая информация","main-param":"InternalName"},null,8,["params-list"])])):(O(),H("div",Te,[t("div",Le,[r(R,{label:"Заказ не найден"})])]))],64)}const Ve={components:{IconCard:Ct,IconProfile:xt,IconSettings:Bt,IconEye:vt,StatusBadge:ut,ClausesKeeper:ht,settingsEngineItem:pt,ServicesContractBalanceBlock:gt,BlockBalanceAgreement:Dt},async setup(){const g=wt(),i=Pt(),l=Et(),s=Mt(),v=kt(),G=Tt(),{formDescriptionLine:E}=At(),d=yt("emitter");d.on("updateHostingIDPage",()=>{l.fetchHostingOrders()});const M=dt(!1),f=dt(!1),n=D(()=>Object.keys(l==null?void 0:l.hostingList).map(e=>l==null?void 0:l.hostingList[e]).find(e=>e.OrderID===g.params.id)),S=D(()=>l==null?void 0:l.hostingSchemes),I=D(()=>{var e,o;return(o=S.value)==null?void 0:o[(e=n.value)==null?void 0:e.SchemeID]}),b=D(()=>{var e,o;return(o=v==null?void 0:v.userOrders)==null?void 0:o[(e=n.value)==null?void 0:e.OrderID]}),T=D(()=>{var e,o,c;return(c=(e=s==null?void 0:s.serverGroupsList)==null?void 0:e.Servers)==null?void 0:c[(o=n.value)==null?void 0:o.ServerID]}),L=D(()=>{var o;if(!((o=n.value)!=null&&o.Domain))return"";const e=n.value.Domain;return e.startsWith("http://")||e.startsWith("https://")?e:`https://${e}`});function R(e){if(!e)return mt(new Date);const o=new Date,c=new Date(o.getTime()+e*24*60*60*1e3);return mt(c)}function w(e){d.emit("open-modal",{component:"StatusHistory",data:{modeID:"HostingOrders",rowID:e}})}function P(){var e,o;d.emit("open-modal",{component:"OrdersTransfer",data:{ServiceOrderID:(e=n.value)==null?void 0:e.ID,ServiceID:(o=n.value)==null?void 0:o.ServiceID}})}function k(){var e;v.prolongOrder({IsAutoProlong:f.value?0:1,OrderID:(e=n.value)==null?void 0:e.OrderID})}function y(){var e;i.push(`/HostingOrders/${(e=n.value)==null?void 0:e.OrderID}/SchemeChange`),u()}function C(){var e;i.push(`/HostingOrderPay/${(e=n.value)==null?void 0:e.OrderID}`)}function x(){var e,o,c;G.OrderManageHosting({ServiceOrderID:(e=n.value)==null?void 0:e.ID,OrderID:(o=n.value)==null?void 0:o.OrderID,ServiceID:(c=n.value)==null?void 0:c.ServiceID,XMLHttpRequest:"yes"})}function u(){var e,o;d.emit("open-modal",{component:"HostingOrderSchemeChange",data:{hostingID:(e=n.value)==null?void 0:e.ID,ServerGroup:(o=I.value)==null?void 0:o.ServersGroupID,emitEvent:"updateHostingIDPage"}})}function B(){var e,o;d.emit("open-modal",{component:"OrderPasswordChange",data:{OrderID:(e=n.value)==null?void 0:e.ID,ServiceID:(o=n.value)==null?void 0:o.ServiceID,emitEvent:"updateHostingIDPage"}})}function N(){var e,o,c;d.emit("open-modal",{component:"OrderRestore",data:{OrderID:(e=n.value)==null?void 0:e.OrderID,CostDay:(o=I.value)==null?void 0:o.CostDay,DaysRemainded:(c=n.value)==null?void 0:c.DaysRemainded,emitEvent:"updateHostingIDPage"}})}return await l.fetchHostingOrders(),await l.fetchHostingSchemes(),await s.fetchServerGroups().then(()=>{g.name==="default.MyHostingOrderSchemeChange"&&u()}),await v.fetchUserOrders().then(()=>{var e;f.value=(e=b.value)==null?void 0:e.IsAutoProlong}),{getHostingOrderData:n,getHostingScheme:I,getUserOrder:b,getServerGroup:T,isAutoProlong:f,passwordShow:M,openOrderRestore:N,openPackageChangeModal:u,orderManage:x,navigateToProlong:C,setProlongValue:k,openPasswordChange:B,hostStatuses:Nt,transferItem:P,formDescriptionLine:E,calculateExpirationDate:R,changeScheme:y,fullDomainUrl:L,openHistoryStatuses:w}}},ls=bt(Ve,[["render",Re],["__scopeId","data-v-e1770ffe"]]);export{ls as default};
