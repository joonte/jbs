import{k as at,o as _,c as d,b as m,a as t,t as l,n as lt,w as u,d as f,F as P,y as B,Z as _t,$ as dt,l as st,p as ct,m as mt,_ as vt,f as Dt,g as ut,r as N,U as It,h as w}from"./index-aeb1df1e.js";import"./resetServer-1c71747e.js";import{u as St}from"./dedicatedServer-1b91e01e.js";import{f as et}from"./useTimeFunction-8602dd60.js";import{_ as ht}from"./IconCard-47752060.js";import{I as gt}from"./IconProfile-efaeb789.js";import{I as ft}from"./IconSettings-09f9f59f.js";import{_ as wt,a as ot}from"./ServicesContractBalanceBlock-a08c9c9b.js";import{S as it}from"./StatusBadge-ca078fa4.js";import{I as bt}from"./IconRotate-7f250028.js";import{h as pt}from"./hostStatuses-94d00f20.js";import{s as nt}from"./SettingsEngineItem-2c0bce28.js";import{B as rt}from"./BlockBalanceAgreement-906c1168.js";import{E as Ot}from"./EmptyStateBlock-b0a120e4.js";import{_ as Pt}from"./ButtonDefault-11c4541b.js";import{_ as yt}from"./ClausesKeeper-90c650cc.js";import{z as kt,d as Mt}from"./bootstrap-vue-next.es-c6bcf011.js";import{_ as Ct}from"./IconDots-76437be9.js";import"./IconArrow-a6c91ada.js";import"./IconClose-c7c36336.js";const v=D=>(ct("data-v-94376626"),D=D(),mt(),D),Rt={key:0,class:"ds-order-page"},xt={class:"section"},Bt={class:"container"},Nt={class:"section-header"},At={class:"section-title"},Et={class:"hosting-item__controls"},Lt={class:"btn btn--dots"},Tt={class:"section-label"},Ut={class:"section-nav"},Vt={class:"list"},zt={class:"list-col list-col--md"},Ft={class:"list-item"},Ht={class:"list-item__row"},jt={class:"list-item__title"},Gt={class:"list-item__status"},Wt={class:"list-item__row"},Zt={class:"list-item__ul"},qt={class:"list-item__row list-item__row--column"},Jt={class:"list-item__text"},Kt={class:"list-item__text"},Qt={class:"list-item__text"},Xt={class:"list-item__row"},Yt={class:"btn btn--border btn--switch"},$t=v(()=>t("span",{class:"btn-switch__text"},"Автопродление",-1)),ts=v(()=>t("span",{class:"btn-switch__toggle"},null,-1)),ss={class:"list-col list-col--xl"},es={class:"list-item"},os=v(()=>t("div",{class:"list-item__row"},[t("div",{class:"list-item__title"},"Конфигурация")],-1)),is={class:"list-item__row list-item__table"},ns={class:"list-item__label"},rs={class:"list-item__text"},as={class:"list-col list-col--md"},ls={class:"list-item"},_s=v(()=>t("div",{class:"list-item__row"},[t("div",{class:"list-item__title"},"Доступы")],-1)),ds={class:"list-item__row list-item__row--table"},cs=v(()=>t("div",{class:"list-item__item"},"IP адрес сервера",-1)),ms={class:"list-item__item"},vs={class:"list-item__row list-item__row--table"},Ds=v(()=>t("div",{class:"list-item__item"},"Пользователь",-1)),us={class:"list-item__item"},Is={class:"list-item__row list-item__row--table password-line"},Ss=v(()=>t("div",{class:"list-item__item"},"Пароль",-1)),hs={class:"list-item__item"},gs={key:0,class:"password-hidden"},fs={class:"list-col list-col--md"},ws={class:"list-item"},bs=v(()=>t("div",{class:"list-item__row"},[t("div",{class:"list-item__title"},"Доступы IPMI")],-1)),ps={class:"list-item__row list-item__row--table"},Os=v(()=>t("div",{class:"list-item__item"},"IP адрес сервера",-1)),Ps={class:"list-item__item"},ys={class:"list-item__row list-item__row--table"},ks=v(()=>t("div",{class:"list-item__item"},"Пользователь",-1)),Ms={class:"list-item__item"},Cs={class:"list-item__row list-item__row--table password-line"},Rs=v(()=>t("div",{class:"list-item__item"},"Пароль",-1)),xs={class:"list-item__item"},Bs={key:0,class:"password-hidden"},Ns={key:0,class:"list-col list-col--md"},As={class:"list-item"},Es=v(()=>t("div",{class:"list-item__row"},[t("div",{class:"list-item__title"},"Общая информация из IPMI")],-1)),Ls={class:"list-item__row list-item__row--table"},Ts={class:"list-item__item"},Us={class:"list-item__item"},Vs={key:1,class:"list-col list-col--md"},zs={class:"list-item"},Fs=v(()=>t("div",{class:"list-item__row"},[t("div",{class:"list-item__title"},"Данные сенсоров")],-1)),Hs={class:"list-item__row list-item__row--table"},js={class:"list-item__item"},Gs={class:"list-item__item"},Ws=v(()=>t("div",{class:"section"},[t("div",{class:"container"},[t("div",{class:"text"},[t("h3",null,"Что входит в стоимость"),t("p",null,"Для подключения дополнительных услуг"),t("ul",null,[t("li",null,"Размещение в РФ, Москва"),t("li",null,"Предустановленная ОС FreeBSD / CentOS / Debian / Ubuntu / Windows"),t("li",null,"IP адрес, с возможностью расширения"),t("li",null,"Бесплатная панель управления ISPManager Lite"),t("li",null,"Круглосуточная поддержка")])])])],-1)),Zs={key:1,class:"section"},qs={class:"container"};function Js(D,i,I,s,S,F){var k,M,C,R,e,o,r,p,O,x,H,j,G,W,Z,q,J,K,Q,X,Y,$,tt;const A=rt,b=Ct,a=kt,E=Mt,h=at("router-link"),g=yt,L=wt,T=it,U=nt,V=Pt,y=ot,z=Ot;return _(),d(P,null,[m(A),(k=s.getDSServerData)!=null&&k.ID?(_(),d("div",Rt,[t("div",xt,[t("div",Bt,[t("div",Nt,[t("h1",At,l((M=s.getDSServerData)==null?void 0:M.IPaddr),1),t("div",Et,[t("div",{class:lt(["btn btn--md btn--border btn--rotate btn--rotate_green",{"btn--system-off":((C=s.getDSOrderIPMI)==null?void 0:C.IPMI["System Power"])!=="on"}]),onClick:i[0]||(i[0]=n=>{var c;return s.serverReset((c=s.getDSServerData)==null?void 0:c.ID)})},l(((R=s.getDSOrderIPMI)==null?void 0:R.IPMI["System Power"])==="on"?"Включен":"Выключен"),3),m(E,{class:"dropdown-dots",right:""},{"button-content":u(()=>[t("div",Lt,[m(b)])]),default:u(()=>[m(a,{onClick:i[1]||(i[1]=n=>{var c;return s.serverReset((c=s.getDSServerData)==null?void 0:c.ID)})},{default:u(()=>[f("Перезагрузить")]),_:1})]),_:1})]),t("div",Tt,"Выделенный сервер # "+l((e=s.getDSServerData)==null?void 0:e.OrderID),1),t("div",Ut,[m(h,{class:"section-nav__item",to:`/DSOrders/${(o=s.getDSServerData)==null?void 0:o.OrderID}`},{default:u(()=>[f("Сервер")]),_:1},8,["to"]),m(h,{class:"section-nav__item",to:`/Services/${(r=s.getDSServerData)==null?void 0:r.OrderID}`},{default:u(()=>[f("Услуги")]),_:1},8,["to"])])]),m(g),t("div",Vt,[m(L,{"contract-id":(p=s.getDSServerData)==null?void 0:p.ContractID,onTransfer:i[2]||(i[2]=n=>s.transferItem())},null,8,["contract-id"]),t("div",zt,[t("div",Ft,[t("div",Ht,[t("div",jt,l((O=s.getDSServerData)==null?void 0:O.Scheme),1),t("div",Gt,[m(T,{status:(x=s.getDSServerData)==null?void 0:x.StatusID,DaysRemainded:(H=s.getDSServerData)==null?void 0:H.DaysRemainded,"status-table":"DNSmanagerOrders",onClick:i[3]||(i[3]=n=>{var c;return s.openHistoryStatuses((c=s.getDSServerData)==null?void 0:c.ID)})},null,8,["status","DaysRemainded"])]),m(U,null,{default:u(()=>[m(a,{onClick:i[4]||(i[4]=n=>s.openOrderRestore())},{default:u(()=>[f("Просмотреть учет заказа")]),_:1})]),_:1})]),t("div",Wt,[t("ul",Zt,[(_(!0),d(P,null,B(s.getDSItemParam(s.getDSServerData),n=>(_(),d("li",null,l(n),1))),256))])]),t("div",qt,[t("div",Jt,l(((j=s.getDSScheme)==null?void 0:j.CostMonth)||"0")+" ₽ в месяц",1),t("div",Kt,"Дней осталось "+l(((G=s.getDSServerData)==null?void 0:G.DaysRemainded)||"0"),1),t("div",Qt,"Дата окончания "+l(s.calculateExpirationDate((W=s.getDSServerData)==null?void 0:W.DaysRemainded)),1)]),t("div",Xt,[m(V,{label:"Продлить",onClick:i[5]||(i[5]=n=>{var c;return D.$router.push(`/DSOrderPay/${(c=s.getDSServerData)==null?void 0:c.OrderID}`)})}),t("label",Yt,[_t(t("input",{type:"checkbox","onUpdate:modelValue":i[6]||(i[6]=n=>s.isAutoProlong=n),onInput:i[7]||(i[7]=n=>s.setProlongValue())},null,544),[[dt,s.isAutoProlong]]),$t,ts])])])]),t("div",ss,[t("div",es,[os,t("div",is,[(_(!0),d(P,null,B(s.getDSServerData.Names,(n,c)=>(_(),d("div",{class:"list-item__table-col",key:c},[t("div",ns,l(n),1),t("div",rs,l(s.formatData(c,s.getDSServerData)),1)]))),128))])])]),t("div",as,[t("div",ls,[_s,t("div",ds,[cs,t("div",ms,l((Z=s.getDSServerData)==null?void 0:Z.IPaddr),1)]),t("div",vs,[Ds,t("div",us,l((q=s.getDSServerData)==null?void 0:q.DSuser),1)]),t("div",Is,[Ss,t("div",hs,[s.passwordShowOne?(_(),d("div",gs,l((J=s.getDSServerData)==null?void 0:J.DSpass),1)):(_(),d("button",{key:1,class:"btn btn--border btn--md password-line",onClick:i[8]||(i[8]=n=>s.passwordShowOne=!0)},[m(y,{class:"button-icon"}),f("Показать")]))])])])]),t("div",fs,[t("div",ws,[bs,t("div",ps,[Os,t("div",Ps,l((K=s.getDSServerData)==null?void 0:K.ILOaddr),1)]),t("div",ys,[ks,t("div",Ms,l((Q=s.getDSServerData)==null?void 0:Q.ILOuser),1)]),t("div",Cs,[Rs,t("div",xs,[s.passwordShowTwo?(_(),d("div",Bs,l((X=s.getDSServerData)==null?void 0:X.ILOpass),1)):(_(),d("button",{key:1,class:"btn btn--border btn--md password-line",onClick:i[9]||(i[9]=n=>s.passwordShowTwo=!0)},[m(y,{class:"button-icon"}),f("Показать")]))])])])]),s.getDSOrderIPMI&&((Y=s.getDSOrderIPMI)==null?void 0:Y.IPMI.length)>0?(_(),d("div",Ns,[t("div",As,[Es,(_(!0),d(P,null,B(($=s.getDSOrderIPMI)==null?void 0:$.IPMI,n=>(_(),d("div",Ls,[t("div",Ts,l(n==null?void 0:n.name),1),t("div",Us,l(n==null?void 0:n.value),1)]))),256))])])):st("",!0),(tt=s.getDSOrderIPMI)!=null&&tt["IPMI.Sensors"]&&s.getDSOrderIPMI["IPMI.Sensors"].length>0?(_(),d("div",Vs,[t("div",zs,[Fs,(_(!0),d(P,null,B(s.getDSOrderIPMI["IPMI.Sensors"],(n,c)=>(_(),d("div",Hs,[t("div",js,l(c),1),t("div",Gs,l(n),1)]))),256))])])):st("",!0)])])]),Ws])):(_(),d("div",Zs,[t("div",qs,[m(z,{label:"Заказ не найден"})])]))],64)}const Ks={components:{IconCard:ht,IconProfile:gt,IconSettings:ft,IconEye:ot,StatusBadge:it,IconRotate:bt,settingsEngineItem:nt,BlockBalanceAgreement:rt},async setup(){const D=Dt(),i=St(),I=ut(),s=N(!1),S=It("emitter");S.on("updateDSIDPage",()=>{i.fetchDSOrders().then(()=>{var e;i.fetchDSOrderIPMI((e=a.value)==null?void 0:e.OrderID)}).then(()=>{var e;i.fetchDSOrderIPMISensors((e=a.value)==null?void 0:e.OrderID)})});const F=N(!1),A=N(!1),b=N(!0),a=w(()=>Object.keys(i==null?void 0:i.DSList).map(e=>i==null?void 0:i.DSList[e]).find(e=>e.OrderID===D.params.id)),E=w(()=>{var e;return((e=a.value)==null?void 0:e.Names)||[]}),h=w(()=>{var e,o;return(o=i==null?void 0:i.DSSchemes)==null?void 0:o[(e=a.value)==null?void 0:e.SchemeID]}),g=w(()=>i==null?void 0:i.DSOrderIPMI),L=w(()=>{var e,o;return(o=I==null?void 0:I.userOrders)==null?void 0:o[(e=a.value)==null?void 0:e.OrderID]}),T=w(()=>i==null?void 0:i.DSOrderIPMISensors);function U(e){S.emit("open-modal",{component:"StatusHistory",data:{modeID:"DSOrders",rowID:e}})}function V(e,o){const r=o[e];if(r==null)return"-";switch(e){case"ram":return`${r} ГБ`;case"chrate":return`${r} Мбит/с`;default:return r}}function y(e){if(!e)return et(new Date);const o=new Date,r=new Date(o.getTime()+e*24*60*60*1e3);return et(r)}function z(e){let o=h.value;o===void 0&&(o=e);let r=[];return o!=null&&o.Name&&r.push(o==null?void 0:o.Name),o!=null&&o.CPU&&r.push(o==null?void 0:o.CPU),o!=null&&o.ram&&r.push("RAM "+(o==null?void 0:o.ram)+" GB"),o!=null&&o.disks&&r.push(o==null?void 0:o.disks),r}function k(e){var r,p,O;function o(x){s.value=x}S.emit("open-modal",{component:"ReloadDS",data:{DSOrderID:e,isReloading:s.value,onReloadStatusChange:o,ServerName:(r=a==null?void 0:a.value)==null?void 0:r.Scheme,SystemPower:(p=g==null?void 0:g.value)==null?void 0:p.IPMI["System Power"],OrderID:(O=a==null?void 0:a.value)==null?void 0:O.OrderID}})}function M(){var e,o;S.emit("open-modal",{component:"OrdersTransfer",data:{ServiceOrderID:(e=a.value)==null?void 0:e.ID,ServiceID:(o=a.value)==null?void 0:o.ServiceID}})}function C(){var e;I.prolongOrder({IsAutoProlong:b.value?0:1,OrderID:(e=a.value)==null?void 0:e.OrderID})}function R(){var e,o,r;S.emit("open-modal",{component:"OrderRestore",data:{OrderID:(e=a.value)==null?void 0:e.OrderID,CostDay:(o=h.value)==null?void 0:o.CostDay,DaysRemainded:(r=a.value)==null?void 0:r.DaysRemainded,emitEvent:"updateDSIDPage"}})}return await i.fetchDSSchemes(),i.fetchDSOrders().then(()=>{var e;i.fetchDSOrderIPMI((e=a.value)==null?void 0:e.OrderID)}),await I.fetchUserOrders().then(()=>{var e;b.value=(e=L.value)==null?void 0:e.IsAutoProlong}),{getDSOrderIPMI:g,getDSServerData:a,getDSScheme:h,getDSOrderIPMISensors:T,isAutoProlong:b,passwordShowOne:F,passwordShowTwo:A,openOrderRestore:R,transferItem:M,setProlongValue:C,serverReset:k,isReloading:s,getDSItemParam:z,hostStatuses:pt,calculateExpirationDate:y,formatData:V,serverDataNames:E,openHistoryStatuses:U}}},Ie=vt(Ks,[["render",Js],["__scopeId","data-v-94376626"]]);export{Ie as default};
