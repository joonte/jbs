import{_ as q}from"./EmptyStateBlock-DA3-0YDi.js";import{L as G}from"./bootstrap-vue-next-W16P-SAV.js";import{_ as T}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{o as r,c as C,a as t,u as J,r as u,E as Q,f as x,b as i,v as c,az as W,C as m,h as _,t as a,w as l,d as X}from"./index-Codq73aV.js";import{_ as Y}from"./FormInputSearch-B47bjFcn.js";import{_ as I}from"./ButtonDefault-CMw2aBy6.js";import{_ as ee}from"./IconCopy-CvpXMuV2.js";import{_ as te}from"./MessageInfo-C0v9QTnb.js";import{_ as se}from"./ClausesKeeper-iUM0yapS.js";import{_ as oe}from"./TabsComponent.vue_vue_type_script_setup_true_lang-DJWDlqyJ.js";import{_ as re}from"./BlockBalanceAgreement-v_bWuiVT.js";import{u as ne}from"./index-BO2gwtUe.js";import{f as U,s as B}from"./time-DenPiOX5.js";import"./IconPlus-Bm8D3Wgq.js";import"./IconClose-Dia1noy8.js";import"./common-DyknwSqv.js";const ae={},le={width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function ie(E,p){return r(),C("svg",le,p[0]||(p[0]=[t("path",{d:"M14.2929 12H3.5C3.22386 12 3 11.7761 3 11.5C3 11.2239 3.22386 11 3.5 11H14.2929L11.1464 7.85355C10.9512 7.65829 10.9512 7.34171 11.1464 7.14645C11.3417 6.95118 11.6583 6.95118 11.8536 7.14645L15.8536 11.1464C16.0488 11.3417 16.0488 11.6583 15.8536 11.8536L11.8536 15.8536C11.6583 16.0488 11.3417 16.0488 11.1464 15.8536C10.9512 15.6583 10.9512 15.3417 11.1464 15.1464L14.2929 12ZM10.5 4C10.2239 4 10 3.77614 10 3.5C10 3.22386 10.2239 3 10.5 3H18.5C19.8807 3 21 4.11929 21 5.5V18.5C21 19.8807 19.8807 21 18.5 21H10.5C10.2239 21 10 20.7761 10 20.5C10 20.2239 10.2239 20 10.5 20H18.5C19.3284 20 20 19.3284 20 18.5V5.5C20 4.67157 19.3284 4 18.5 4H10.5Z"},null,-1)]))}const ce=T(ae,[["render",ie]]),pe={class:"tw-w-full"},me={class:"container"},ue={key:2,class:"tw-mt-4"},_e={class:"profile_referral-wrapper"},de={class:"profile_referral-col"},fe={class:"profile_referral-item"},ve={class:"profile_referral-value"},be={class:"profile_referral-col"},Ce={class:"profile_referral-item"},ye={class:"list-form"},we={class:"d-block"},De='Обратите внимание, что для начисления используется договор с профилем "Партнёрская программа". Если он у вас отсутствует, создайте его в разделе <a href="/v2/Contracts">"Мой офис → Договора"</a>',ge={__name:"DependUsers",async setup(E){let p,y;const N=[{key:"ID",label:"UserID",variant:"td-blue",sortable:!0},{key:"Name",label:"Имя",variant:"td-blue",sortable:!0},{key:"RegisterDate",label:"Дата регистрации",variant:"td-gray",sortable:!0},{key:"EnterDate",label:"Дата входа",variant:"td-gray",sortable:!0},{key:"aInvoices",label:"Всего",variant:"td-gray",sortable:!0},{key:"pInvoices",label:"Предыдущий месяц",variant:"td-gray",sortable:!0},{key:"cInvoices",label:"Текущий месяц",variant:"td-gray",sortable:!0},{key:"controls",label:"Войти",variant:"td-controls"}],n=J(),w=ne(),D=u("RegisterDate"),g=u(!0),S=u("desc"),d=X(),f=u("");[p,y]=Q(()=>Promise.all([n.fetchUserData(),n.fetchDependUsers(),w.fetchContracts()])),await p,y();const k=x(()=>Object.keys(n?.dependUsers).map(o=>n?.dependUsers?.[o])),v=x(()=>Object.values(w.contractsList??[]).some(o=>o.TypeID==="NaturalPartner"));function L(){d.push("/Contracts")}function R(){navigator.clipboard.writeText(`https://www.host-food.ru/p/${n.userInfo.ID}/`)}function $(){d.push("/profile/DependUsersCreate")}async function A(o){const e=await n.userSwitch({UserID:o.ID}),{result:b}=e;b==="SUCCESS"&&d.push("/Contracts")}function H(o){return o.filter(e=>e?.Name.includes(f.value))}return(o,e)=>{const b=re,V=oe,h=se,M=te,O=I,P=ee,F=I,j=Y,z=ce,Z=G,K=q;return r(),C("div",pe,[i(b),t("div",me,[i(V,{tabs:c(W)},null,8,["tabs"]),e[16]||(e[16]=t("h1",{class:"tw-text-xl sm:tw-text-4xl tw-mb-6"},"Реферальная программа",-1)),i(h,{partition:"Header:/DependUsers",class:"user-referral__clauses"}),v.value?_("",!0):(r(),m(M,{key:0,class:"tw-mt-4 tw-space-y-4",innerHTML:De})),v.value?_("",!0):(r(),m(O,{key:1,label:"Стать участником",class:"tw-mt-4 tw-mb-8",onClick:e[0]||(e[0]=s=>L())})),v.value?(r(),C("div",ue,[e[15]||(e[15]=t("h2",{class:"tw-text-xl sm:tw-text-4xl"},"Добавить реферала",-1)),t("div",_e,[t("div",de,[t("div",fe,[e[5]||(e[5]=t("div",{class:"profile_referral-item__name"},"С помощью реферальной ссылки",-1)),e[6]||(e[6]=t("div",{class:"profile_referral-item__text"}," Для каждого вашего реферала доступна информация о дате регистрации, времени последнего входа, потраченных средствах. Однако просмотр дополнительной информации и управление пользователем при этом способе приглашения недоступны. ",-1)),t("div",ve,[t("span",{ref:"message",class:"profile-info__item-referral"}," https://www.host-food.ru/p/"+a(c(n).userInfo.ID)+"/ ",513),t("button",{class:"btn profile-info__item-referral_copy",onClick:R},[i(P,{class:"tw-size-5"})])])])]),t("div",be,[t("div",Ce,[e[7]||(e[7]=t("div",{class:"profile_referral-item__name"},"Создать аккаунт реферала",-1)),e[8]||(e[8]=t("div",{class:"profile_referral-item__text"}," У вас будет доступ к управлению сайтами своих клиентов, так как при таком способе приглашения пользователя партнёр получает совместный с ним контроль над его аккаунтом ",-1)),i(F,{label:"Создать реферала",onClick:e[1]||(e[1]=s=>$())})])])]),t("div",ye,[i(j,{modelValue:f.value,"onUpdate:modelValue":e[2]||(e[2]=s=>f.value=s)},null,8,["modelValue"])]),k.value?(r(),m(Z,{key:0,"sort-by":D.value,"onUpdate:sortBy":e[3]||(e[3]=s=>D.value=s),"sort-desc":g.value,"onUpdate:sortDesc":e[4]||(e[4]=s=>g.value=s),class:"basic-table",fields:N,items:H(k.value),"show-empty":!0,"sort-direction":S.value,"empty-text":"У Вас нет зарегистрированных пользователей.","empty-filtered-text":"Пользователи не найдены."},{"cell(RegisterDate)":l(s=>[e[9]||(e[9]=t("span",{class:"td-mobile"},"Дата создания",-1)),t("span",we,a(c(U)(c(B)(s.value))),1)]),"cell(Name)":l(s=>[e[10]||(e[10]=t("span",{class:"td-mobile"},"Реферал",-1)),t("span",null,a(s.value),1)]),"cell(aInvoices)":l(s=>[e[11]||(e[11]=t("span",{class:"td-mobile"},"Всего",-1)),t("span",null,a(s.value)+" руб",1)]),"cell(pInvoices)":l(s=>[e[12]||(e[12]=t("span",{class:"td-mobile"},"Предыдущий месяц",-1)),t("span",null,a(s.value)+" руб",1)]),"cell(cInvoices)":l(s=>[e[13]||(e[13]=t("span",{class:"td-mobile"},"Текущий месяц",-1)),t("span",null,a(s.value)+" руб",1)]),"cell(EnterDate)":l(s=>[e[14]||(e[14]=t("span",{class:"td-mobile"},"Дата входа",-1)),t("span",null,a(c(U)(c(B)(s.value))),1)]),"cell(controls)":l(s=>[s.item?.IsManaged?(r(),m(z,{key:0,class:"icon-enter",onClick:ke=>A(s.item)},null,8,["onClick"])):_("",!0)]),_:1},8,["sort-by","sort-desc","items","sort-direction"])):(r(),m(K,{key:1,label:"Вы пока не добавили рефералов"}))])):_("",!0)])])}}},Oe=T(ge,[["__scopeId","data-v-7099f128"]]);export{Oe as default};
