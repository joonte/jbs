import{_ as V,r as m,h as ne,j as le,o as c,y,w as Y,m as we,c as _,a as e,b as r,k as M,t as k,F as R,x as se,d as X,p as Ie,l as be,f as Ve,u as De,S as Se,g as b,i as Me}from"./index-5f8fd0e9.js";import{s as ae}from"./multiselect-482845f2.js";import{_ as ie}from"./BasicInput-4035fd95.js";import{I as ce}from"./IconUpload-b5cb0113.js";import{u as ke}from"./files-100f2518.js";import{u as ye}from"./globalActions-2cf5b597.js";import{_ as re}from"./ClausesKeeper-8218189c.js";import{B as _e}from"./BlockAuthEnter-0cf64b3f.js";import{B as de}from"./BlockBalanceAgreement-cf03db60.js";import{f as xe}from"./bootstrap-vue-next.es-a97602fc.js";import{I as Ee}from"./IconSettings-c1c25174.js";import{_ as Ue}from"./HelperComponent-9b33bb3d.js";import{_ as Be}from"./IconArrow-c9744352.js";import{_ as Ae}from"./IconCopy-37e9c810.js";import{_ as Te}from"./ButtonDefault-458eab69.js";import{_ as Ne}from"./user-placeholder-54fd4a87.js";import"./component-62d13c49.js";import"./IconClose-2e1ba86d.js";import"./contracts-00b6c53b.js";const Ze={components:{VueSelect:ae},props:{modelValue:{type:String,required:!0},placeholder:{type:String,default:"Select"},options:{type:Array,required:!0,default:()=>[]},taggable:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(a,{emit:l}){const p=m(a.modelValue);return ne(p,()=>{l("update:modelValue",p.value)}),ne(a,()=>{p.value=a.modelValue}),{newValue:p}}};function Fe(a,l,p,t,J,W){const I=le("vue-select");return c(),y(I,{modelValue:t.newValue,"onUpdate:modelValue":l[0]||(l[0]=g=>t.newValue=g),"clear-on-select":!1,options:p.options,placeholder:p.placeholder,searchable:!0,taggable:p.taggable,label:"name","track-by":"value"},{default:Y(()=>[we(a.$slots,"default",{},void 0,!0)]),_:3},8,["modelValue","options","placeholder","taggable"])}const He=V(Ze,[["render",Fe],["__scopeId","data-v-f3c9e691"]]),Le={},Oe={width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Pe=e("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M19 6V18.5C19 19.8807 17.8807 21 16.5 21H7.5C6.11929 21 5 19.8807 5 18.5V6H4.5C4.22386 6 4 5.77614 4 5.5C4 5.22386 4.22386 5 4.5 5H9V4.5C9 3.67157 9.67157 3 10.5 3H13.5C14.3284 3 15 3.67157 15 4.5V5H19.5C19.7761 5 20 5.22386 20 5.5C20 5.77614 19.7761 6 19.5 6H19ZM6 6V18.5C6 19.3284 6.67157 20 7.5 20H16.5C17.3284 20 18 19.3284 18 18.5V6H6ZM14 4.5V5H10V4.5C10 4.22386 10.2239 4 10.5 4H13.5C13.7761 4 14 4.22386 14 4.5ZM14 9.5C14 9.22386 14.2239 9 14.5 9C14.7761 9 15 9.22386 15 9.5V16.5C15 16.7761 14.7761 17 14.5 17C14.2239 17 14 16.7761 14 16.5V9.5ZM9.5 9C9.22386 9 9 9.22386 9 9.5V16.5C9 16.7761 9.22386 17 9.5 17C9.77614 17 10 16.7761 10 16.5V9.5C10 9.22386 9.77614 9 9.5 9Z",fill:"#B92519"},null,-1),je=[Pe];function Ke(a,l){return c(),_("svg",Oe,je)}const fe=V(Le,[["render",Ke]]),Re={},Ye={fill:"none",height:"34",viewBox:"0 0 34 34",width:"34",xmlns:"http://www.w3.org/2000/svg"},Je=e("path",{"clip-rule":"evenodd",d:"M17.227 10.012c3.053.013 4.516.902 4.855 1.2 1.126.932 1.7 3.164 1.28 6.433-.365 2.855-2.345 3.301-3.06 3.463-.08.017-.144.032-.188.046-.189.06-1.938.479-4.137.34 0 0-1.639 1.912-2.15 2.409-.08.077-.174.108-.237.094-.087-.021-.111-.122-.111-.27l.014-2.61c-3.095-.832-3.023-3.881-2.982-5.612 0-.06.002-.118.004-.174.036-1.692.365-3.079 1.341-4.011 1.755-1.538 5.37-1.308 5.37-1.308Zm-.336 1.684c-.11 0-.2.085-.201.192 0 .107.088.194.198.194 1.088.008 1.987.354 2.71 1.036.718.677 1.091 1.609 1.1 2.82a.198.198 0 0 0 .202.192c.11 0 .2-.088.198-.194-.01-1.291-.41-2.33-1.22-3.094-.803-.757-1.803-1.138-2.987-1.146Zm.679 2.084a.198.198 0 0 0-.21.182.196.196 0 0 0 .189.203c.353.018.594.118.752.276.159.159.26.403.279.76a.197.197 0 0 0 .209.184.196.196 0 0 0 .19-.203c-.022-.416-.143-.762-.39-1.01-.25-.248-.599-.371-1.02-.392Zm-.38-1.021a.187.187 0 0 0-.19.183c0 .101.082.185.188.186.704.005 1.283.232 1.75.68.461.442.704 1.052.71 1.855 0 .101.085.184.19.183a.187.187 0 0 0 .188-.186c-.006-.878-.275-1.59-.823-2.116-.541-.519-1.217-.78-2.013-.785Zm.851 4.916c-.154.184-.441.16-.441.16-2.098-.517-2.659-2.571-2.659-2.571s-.025-.277.166-.427l.38-.291c.187-.14.307-.48.116-.812a8.585 8.585 0 0 0-.478-.724c-.167-.22-.556-.671-.557-.673-.188-.214-.463-.263-.754-.117h-.003a3.116 3.116 0 0 0-.78.612c-.179.21-.281.415-.307.617a.796.796 0 0 0 .036.352l.01.006c.09.31.317.829.81 1.692.281.5.606.975.97 1.422a7.7 7.7 0 0 0 .587.639l.007.007.015.015.067.064c.209.201.43.39.661.567.462.353.954.667 1.47.94.893.476 1.43.695 1.75.782l.007.01a.874.874 0 0 0 .364.035c.208-.024.42-.124.636-.298.002 0 .002-.001.003-.002l.003-.002a3.06 3.06 0 0 0 .627-.747v-.002l.001-.003c.151-.281.1-.548-.122-.73l-.05-.038c-.125-.1-.463-.37-.646-.5a8.926 8.926 0 0 0-.748-.462c-.344-.185-.694-.07-.84.113l-.3.366Z",fill:"#2992CD","fill-rule":"evenodd"},null,-1),We=[Je];function qe(a,l){return c(),_("svg",Ye,We)}const ze=V(Re,[["render",qe]]),$e={},Ge={width:"34",height:"34",viewBox:"0 0 34 34",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Qe=e("path",{d:"M22.25 21.0833V20.1232C22.25 19.6461 21.9596 19.2172 21.5166 19.04L20.33 18.5653C19.7667 18.34 19.1246 18.5841 18.8533 19.1268L18.75 19.3333C18.75 19.3333 17.2917 19.0417 16.125 17.875C14.9583 16.7083 14.6667 15.25 14.6667 15.25L14.8732 15.1467C15.4159 14.8754 15.66 14.2333 15.4346 13.67L14.96 12.4834C14.7828 12.0404 14.3539 11.75 13.8768 11.75H12.9167C12.2723 11.75 11.75 12.2723 11.75 12.9167C11.75 18.0713 15.9287 22.25 21.0833 22.25C21.7277 22.25 22.25 21.7277 22.25 21.0833Z",fill:"#2992CD"},null,-1),Xe=[Qe];function eo(a,l){return c(),_("svg",Ge,Xe)}const oo=V($e,[["render",eo]]),to={},no={fill:"none",height:"34",viewBox:"0 0 34 34",width:"34",xmlns:"http://www.w3.org/2000/svg"},so=e("path",{"clip-rule":"evenodd",d:"M17 10.438A6.57 6.57 0 0 0 10.437 17 6.57 6.57 0 0 0 17 23.563a6.526 6.526 0 0 0 3.697-1.142h.001l.15-.106-1.05-1.222-.122.076h-.001a4.93 4.93 0 0 1-2.675.786A4.961 4.961 0 0 1 12.045 17 4.961 4.961 0 0 1 17 12.045a4.961 4.961 0 0 1 4.84 6.019c-.075.3-.213.485-.361.592a.687.687 0 0 1-.88-.052c-.116-.112-.206-.288-.208-.558V17A3.395 3.395 0 0 0 17 13.609 3.395 3.395 0 0 0 13.609 17 3.395 3.395 0 0 0 17 20.391a3.36 3.36 0 0 0 2.277-.88 2.23 2.23 0 0 0 1.798.888c.5 0 .993-.167 1.39-.47a2.55 2.55 0 0 0 .882-1.294 4.698 4.698 0 0 0 .067-.247l.006-.024.001-.007.001-.003.001-.004.001-.005c.096-.42.139-.835.139-1.345A6.57 6.57 0 0 0 17 10.437Zm2.277 9.072c-.03-.038.027.042 0 0-.035.035.036-.032 0 0 .027.042-.029-.039 0 0 .037-.033-.035.036 0 0Zm2.563-1.448-.001.003v-.003ZM15.216 17c0-.984.8-1.784 1.784-1.784s1.784.8 1.784 1.784-.8 1.784-1.784 1.784-1.784-.8-1.784-1.784Z",fill:"#2992CD","fill-rule":"evenodd"},null,-1),lo=[so];function ao(a,l){return c(),_("svg",no,lo)}const io=V(to,[["render",ao]]),co={},ro={fill:"none",height:"34",viewBox:"0 0 34 34",width:"34",xmlns:"http://www.w3.org/2000/svg"},_o=e("path",{d:"M22.081 12.132s1.133-.442 1.038.631c-.03.442-.314 1.989-.534 3.661l-.756 4.956s-.063.726-.63.852c-.566.126-1.416-.442-1.573-.568-.126-.095-2.361-1.515-3.148-2.21-.22-.19-.473-.568.031-1.01l3.305-3.156c.378-.379.756-1.262-.818-.19l-4.407 2.999s-.504.316-1.448.032l-2.046-.632s-.756-.473.535-.946c3.148-1.484 7.02-2.999 10.45-4.42h.001Z",fill:"#2992CD"},null,-1),fo=[_o];function uo(a,l){return c(),_("svg",ro,fo)}const mo=V(co,[["render",uo]]),po={},ho={fill:"none",height:"34",viewBox:"0 0 34 34",width:"34",xmlns:"http://www.w3.org/2000/svg"},vo=e("path",{"clip-rule":"evenodd",d:"M23.68 13.47c.096-.319 0-.553-.465-.553h-1.53c-.39 0-.57.202-.668.426 0 0-.778 1.864-1.881 3.075-.357.351-.52.463-.714.463-.098 0-.244-.112-.244-.431v-2.98c0-.383-.108-.553-.432-.553h-2.408c-.243 0-.39.177-.39.346 0 .362.552.446.609 1.466v2.215c0 .486-.09.574-.284.574-.52 0-1.782-1.873-2.532-4.016-.145-.417-.292-.585-.684-.585h-1.532c-.438 0-.525.202-.525.426 0 .397.52 2.374 2.418 4.988 1.266 1.785 3.048 2.752 4.671 2.752.974 0 1.094-.214 1.094-.585V19.15c0-.43.092-.516.4-.516.228 0 .617.112 1.526.973 1.038 1.02 1.21 1.477 1.794 1.477h1.531c.438 0 .657-.214.531-.639-.139-.422-.635-1.035-1.292-1.763-.357-.414-.893-.86-1.055-1.084-.227-.286-.162-.414 0-.669 0 0 1.867-2.582 2.061-3.458Z",fill:"#2992CD","fill-rule":"evenodd"},null,-1),go=[vo];function Co(a,l){return c(),_("svg",ho,go)}const wo=V(po,[["render",Co]]),Io="/v2/assets/warning-polygon-2df7feaf.svg",C=a=>(Ie("data-v-f09fa78a"),a=a(),be(),a),bo={class:"section"},Vo={class:"container"},Do={class:"section-header"},So=C(()=>e("h1",{class:"section-title"},"Профиль",-1)),Mo={class:"btn__group"},ko={class:"profile"},yo={class:"profile-rows"},xo={class:"profile-col"},Eo={class:"profile-avatar img"},Uo=["src"],Bo={key:1,src:Ne,alt:""},Ao={key:0,class:"profile-avatar_upload"},To={key:0,class:"profile-col col-max-width"},No={class:"profile-info"},Zo={class:"profile-info__wrap-e"},Fo={class:"profile-info__item"},Ho=C(()=>e("div",{class:"profile-info__item-label"},"ФИО",-1)),Lo={class:"profile-info__item-value"},Oo={class:"profile-info__item"},Po=C(()=>e("div",{class:"profile-info__item-label"},"Почта",-1)),jo={class:"profile-info__item-value"},Ko={class:"profile-info__item"},Ro=C(()=>e("div",{class:"profile-info__item-label"},"Подпись",-1)),Yo={class:"profile-info__item-value"},Jo={class:"profile-info__item"},Wo=C(()=>e("div",{class:"profile-info__item-label"},"Реферальная ссылка",-1)),qo={class:"profile-info__item-value"},zo={key:0,class:"profile-info__item"},$o=C(()=>e("div",{class:"profile-info__item-label"},"Контактные данные",-1)),Go={class:"profile-info__item-contacts"},Qo={class:"profile-info__item-contacts-item"},Xo={class:"profile-info__item-info-column"},et={class:"profile-info__item-contacts-ico"},ot={class:"profile-info__item-contacts-val"},tt={class:"profile-info__item-info-column"},nt=C(()=>e("div",{class:"profile-info__item-warning"},[e("img",{src:Io,alt:""}),X("не подтвержден")],-1)),st={class:"profile-info__item-helper-column"},lt={class:"profile-info__note-wrapper"},at=C(()=>e("div",{class:"profile-info__note-label"},"Заметка",-1)),it={key:1,class:"profile-col"},ct={class:"profile-info"},rt={class:"profile-info__wrap-e"},_t={class:"profile-info__item"},dt={class:"profile-info__item"},ft={class:"profile-info__item"},ut=C(()=>e("div",{class:"profile-info__item"},[e("div",{class:"profile-info__item-title"},"Новый контакт")],-1)),mt={class:"profile-info__wrap contact-item"},pt={class:"profile-info__item"},ht={class:"profile-info__item wrap-item"},vt={class:"profile-info__item"},gt={class:"profile-info__wrap"},Ct=C(()=>e("div",{class:"profile-info__item"},[e("div",{class:"profile-info__item-title"},"Контактные данные")],-1)),wt={class:"profile-info__contact-label"},It={class:"profile-info__wrap edited-items"},bt={class:"profile-info__item profile-info__contact"},Vt={class:"profile-info__item"},Dt=["onClick"],St={class:"profile-info__item mark"},Mt={class:"profile-info__note-wrapper"},kt=C(()=>e("div",{class:"profile-info__note-label"},"Заметка",-1)),yt={class:"profile-info__item"},xt=["onClick"];function Et(a,l,p,t,J,W){var D,O,P,j,w;const I=de,g=Te,T=re,x=ce,N=Ae,q=wo,E=mo,h=io,z=oo,f=ze,F=Be,U=Ue,v=ie,B=le("Multiselect"),H=_e,L=Ee,$=fe,G=xe;return c(),_("div",bo,[r(I),e("div",Vo,[e("div",Do,[So,e("div",Mo,[t.isEditMode?(c(),_("button",{key:0,class:"btn btn--blue btn-default static-button delete",onClick:l[0]||(l[0]=(...n)=>t.cancelEdit&&t.cancelEdit(...n))},"Отменить")):M("",!0),r(g,{class:"static-button","is-loading":t.isLoading,label:t.isEditMode?"Сохранить изменения":"Редактировать профиль",onClick:l[1]||(l[1]=n=>t.switchEdit().then(()=>t.stopEdit()))},null,8,["is-loading","label"])])]),r(T),e("div",ko,[e("div",yo,[e("div",xo,[e("div",Eo,[t.getAvatarName?(c(),_("img",{key:0,src:t.formLink,alt:""},null,8,Uo)):(c(),_("img",Bo))]),t.isEditMode?(c(),_("label",Ao,[e("input",{type:"file",onInput:l[2]||(l[2]=(...n)=>t.inputFile&&t.inputFile(...n)),title:" "},null,32),r(x),e("span",null,k(((D=t.file)==null?void 0:D.name)||"Загрузить аватарку"),1)])):M("",!0)]),t.isEditMode?M("",!0):(c(),_("div",To,[e("div",No,[e("div",Zo,[e("div",Fo,[Ho,e("div",Lo,k((O=t.getUserInfo)==null?void 0:O.Name),1)]),e("div",Oo,[Po,e("div",jo,k((P=t.getUserInfo)==null?void 0:P.Email),1)]),e("div",Ko,[Ro,e("div",Yo,k((j=t.getUserInfo)==null?void 0:j.Sign),1)])]),e("div",Jo,[Wo,e("div",qo,[e("div",{class:"profile-info__item-referral",ref:"message"},k(`http://www.host-food.ru/p/${(w=t.getUserInfo)==null?void 0:w.ID}/`),513),e("button",{class:"btn profile-info__item-referral_copy",onClick:l[3]||(l[3]=(...n)=>t.copyText&&t.copyText(...n))},[r(N)])])]),t.getContacts&&t.getContacts.length>0?(c(),_("div",zo,[$o,e("div",Go,[(c(!0),_(R,null,se(t.getContacts,n=>(c(),_("div",Qo,[e("div",Xo,[e("div",et,[(n==null?void 0:n.MethodID)==="VKontakte"?(c(),y(q,{key:0})):(n==null?void 0:n.MethodID)==="Telegram"?(c(),y(E,{key:1})):(n==null?void 0:n.MethodID)==="Email"?(c(),y(h,{key:2})):(n==null?void 0:n.MethodID)==="SMS"?(c(),y(z,{key:3})):(c(),y(f,{key:4}))]),e("div",ot,k(n==null?void 0:n.Address),1)]),e("div",tt,[!((n==null?void 0:n.Confirmed)>0)||(n==null?void 0:n.MethodID)==="SMS"&&t.isOneYearPassed(n==null?void 0:n.Confirmed)?(c(),_(R,{key:0},[nt,r(g,{class:"profile-info__button",label:"ПОДТВЕРДИТЬ",onClick:S=>t.openConfirmationModal(n)},null,8,["onClick"])],64)):M("",!0),e("div",st,[n.UserNotice?(c(),y(U,{key:0,"user-notice":n.UserNotice,id:n.ID,noteTable:"Contacts",emit:"updateContacts"},{default:Y(()=>[e("div",lt,[at,r(F,{class:"profile-info__note-icon"})])]),_:2},1032,["user-notice","id"])):M("",!0)])])]))),256))])])):M("",!0)])])),t.isEditMode?(c(),_("div",it,[e("div",ct,[e("div",rt,[e("div",_t,[r(v,{label:"ФИО",name:"name",placeholder:"Крылов Евгений",vertical:"",modelValue:t.formData.Name,"onUpdate:modelValue":l[4]||(l[4]=n=>t.formData.Name=n)},null,8,["modelValue"])]),e("div",dt,[r(v,{label:"Почта",name:"email",placeholder:"hosting@nopreset.ru",vertical:"",disabled:"",modelValue:t.formData.Email,"onUpdate:modelValue":l[5]||(l[5]=n=>t.formData.Email=n)},null,8,["modelValue"])]),e("div",ft,[r(v,{label:"Подпись",name:"name",placeholder:"С уважением, Евгений Крылов",vertical:"",modelValue:t.formData.Sign,"onUpdate:modelValue":l[6]||(l[6]=n=>t.formData.Sign=n)},null,8,["modelValue"])])]),ut,e("div",mt,[e("div",pt,[r(B,{modelValue:t.select,"onUpdate:modelValue":l[7]||(l[7]=n=>t.select=n),options:t.activeContactOptions,disabled:t.activeContactOptions.length<=1,label:"name",placeholder:"Тип адреса"},null,8,["modelValue","options","disabled"])]),e("div",ht,[r(v,{name:"name",placeholder:t.getPlaceholderText(t.select),vertical:"",modelValue:t.newContactValue,"onUpdate:modelValue":l[8]||(l[8]=n=>t.newContactValue=n),title:t.getTitleText(t.select)},null,8,["placeholder","modelValue","title"])]),e("div",vt,[r(g,{class:"profile-info__add-button",label:"Добавить контакт",onClick:t.addContact},null,8,["onClick"])])]),e("div",gt,[r(H,{label:"Добавить контакт с помощью"})])]),Ct,(c(!0),_(R,null,se(t.getContacts,(n,S)=>(c(),_(R,{key:S},[e("div",wt,k(n==null?void 0:n.MethodID),1),e("div",It,[e("div",bt,[r(v,{name:a.name,disabled:"",modelValue:t.formContactsData[S].Address,"onUpdate:modelValue":Z=>t.formContactsData[S].Address=Z,vertical:""},null,8,["name","modelValue","onUpdate:modelValue"])]),e("div",Vt,[e("div",{class:"profile-info__item-settings",onClick:Z=>t.editContact(n)},[r(L),X("Настройки")],8,Dt)]),e("div",St,[r(U,{"user-notice":n.UserNotice,id:n.ID,noteTable:"Contacts",emit:"updateContacts"},{default:Y(()=>[e("div",Mt,[kt,r(F,{class:"profile-info__note-icon"})])]),_:2},1032,["user-notice","id"])]),e("div",yt,[e("a",{class:"profile-info__item-close",onClick:Z=>t.closeContact(S)},[r($)],8,xt)])])],64))),128)),r(G,{id:"checkbox-1",modelValue:t.IsClear,"onUpdate:modelValue":l[9]||(l[9]=n=>t.IsClear=n),name:"checkbox-1",value:!0,"unchecked-value":!1},{default:Y(()=>[X("Удалить аватарку")]),_:1},8,["modelValue"])])):M("",!0)])])])])}const Ut={components:{IconTrash:fe,IconUpload:ce,BasicInput:ie,ClausesKeeper:re,Multiselect:ae,SelectComponent:He,BlockBalanceAgreement:de,BlockAuthEnter:_e},async setup(){const a=Ve(),l=ke(),p=De(),t=ye(),J=m(null),W=m(""),I=Se("emitter");I.on("updateContacts",()=>{a.fetchUserData().then(()=>{w()})});const g=m(!1),T=m(null),x=m(!1),N=m(!1),q=new Date("2023-01-01").getTime();b(()=>a.authorizationTypes);const E=b(()=>{var o,s;return(s=(o=p.ConfigList)==null?void 0:o.Notifies)==null?void 0:s.Methods}),h=b(()=>{var o,s;return(s=(o=p.ConfigList)==null?void 0:o.Messages)==null?void 0:s.Prompts}),z=b(()=>{var o;return`/UserFoto?UserID=${(o=f.value)==null?void 0:o.ID}?${T.value}`}),f=b(()=>a.userInfo),F=b(()=>{var o,s,i,d,u;return(u=(d=(o=f.value)==null?void 0:o.Files)==null?void 0:d[(i=Object.keys((s=f.value)==null?void 0:s.Files))==null?void 0:i[0]])==null?void 0:u.Name}),U=b(()=>{var o;return Object.keys((o=f.value)==null?void 0:o.Contacts).map(s=>{var i,d,u,K,A;if(!((u=(d=(i=f.value)==null?void 0:i.Contacts)==null?void 0:d[s])!=null&&u.IsHidden))return(A=(K=f.value)==null?void 0:K.Contacts)==null?void 0:A[s]}).filter(Boolean)}),v=m(null),B=m({Name:"",Sign:""}),H=m(""),L=m(""),$=m([]),G=b(()=>Object.keys(E.value).filter(o=>E.value[o].IsActive==="1").map(o=>({name:E.value[o].Name,value:o}))),D=m({}),O=o=>{switch(o){case"Email":const s=h.value.Email,i=/<B>Например:<\/B>\s*([^<]+)/,d=s.match(i);return d&&d[1]?`${d[1]}`:s;case"SMS":const u=h.value.SMS,K=/<B>Например:<\/B>\s*([^<]+)/,A=u.match(K);return A&&A[1]?`${A[1]}`:u;case"Jabber":const te=h.value.Jabber,Ce=/<B>Например:<\/B>\s*([^<]+)/,Q=te.match(Ce);return Q&&Q[1]?`${Q[1]}`:te;default:return"Ссылка или id"}},P=o=>{switch(o){case"Email":return h.value.Email;case"SMS":return h.value.SMS;case"Jabber":return h.value.Jabber;case"Telegram":return h.value.Telegram;case"Viber":return h.value.Viber;case"VKontakte":return h.value.VKontakte;default:return"Ссылка или id"}};function j(o){const s=new Date(parseInt(o)*1e3),i=new Date,d=new Date(i.setFullYear(i.getFullYear()-1));return s<d}function w(){let o={};U.value.forEach((s,i)=>{o[i]={...s,oldValue:s.Address}}),D.value=o,n()}function n(){var o,s,i;B.value={Name:(o=f.value)==null?void 0:o.Name,Email:(s=f.value)==null?void 0:s.Email,Sign:(i=f.value)==null?void 0:i.Sign}}w();function S(){const o={MethodID:H.value,Address:L.value,TimeBegin:"00",TimeEnd:"00",IsActive:"yes",ContactID:"0"};a.userEditContact(o).then(s=>{s.response==="SUCCESS"&&(a.fetchUserData().then(()=>{w()}),oe())})}const Z=async o=>{var u;const s=(u=U.value[o])==null?void 0:u.ID,{result:i,error:d}=await t.deleteItem({TableID:"Contacts",RowsIDs:s});i==="SUCCESS"?(a.removeContact(s),a.fetchUserData().then(()=>{w()})):console.error("Error deleting contact on server:",d)};Me(()=>{a.OAuth()});function ue(o){window.open(o,"_self").focus()}async function me(){var o;if(N.value=!0,g.value){for(const s of Object.keys(D.value)){let i=(o=D.value)==null?void 0:o[s];i.Address!==i.oldValue&&await a.userEditContact({MethodID:i.MethodID,Address:i.Address,TimeBegin:"00",TimeEnd:"00",IsActive:"yes",IsImmediately:"yes",IsSendFiles:"yes",ContactID:i.ID}).then(({responseText:d,response:u})=>{u==="SUCCESS"&&t.deleteItem({TableID:"Contacts",RowsIDs:i.ID})})}v.value?await l.sendFile(v.value).then(s=>{a.UserPersonalDataChange({...B.value,IsClear:x.value?"yes":"","UserFoto[]":s.slice(s.lastIndexOf("^")+1,s.length)}).then(()=>{a.fetchUserData().then(()=>{ee(),T.value=new Date().getMilliseconds()})})}):await a.UserPersonalDataChange({...B.value,IsClear:x.value?"yes":""}).then(()=>{a.fetchUserData().then(()=>{v.value=null,w()})})}}function pe(){var o;navigator.clipboard.writeText(`http://www.host-food.ru/p/${(o=f.value)==null?void 0:o.ID}/`)}function he(o){a.confirmContact({Method:o.MethodID,Value:o.Address,ContactID:o.ID}).then(s=>{var i;((i=s==null?void 0:s.data)==null?void 0:i.Status)==="Ok"&&I.emit("open-modal",{component:"ConfirmContact",data:{Method:o.MethodID,Value:o.Address,ContactID:o.ID}})})}function ve(o){var s;v.value=(s=o.target.files)==null?void 0:s[0]}function ge(o){o!=null&&o.IsActive||o!=null&&o.confirmed?I.emit("open-modal",{component:"EditContact",data:o}):I.emit("open-error-modal",{component:"ExclusionWindow",data:{message:{String:'Уведомления для этого адреса отключены. Для включения уведомлений подтвердите адрес и поставьте галочку "Использовать для уведомлений"'}}})}function ee(){g.value=!1,v.value=null,x.value=!1,w()}function oe(){g.value=!g.value,N.value=!1}return{formLink:z,file:v,isLoading:N,getAvatarName:F,getUserInfo:f,getContacts:U,isEditMode:g,formData:B,formContactsData:D,randomSuf:T,IsClear:x,getConfigMethods:E,getConfigPrompts:h,getPlaceholderText:O,getTitleText:P,stopEdit:oe,switchEdit:me,copyText:pe,inputFile:ve,cancelEdit:ee,editContact:ge,openConfirmationModal:he,select:H,activeContactOptions:G,addContact:S,newContactValue:L,closeContact:Z,contactsData:$,selectedContact:J,selectedContactAddress:W,dateLimit:q,isOneYearPassed:j,authorizeWith:ue}}},Gt=V(Ut,[["render",Et],["__scopeId","data-v-f09fa78a"]]);export{Gt as default};
