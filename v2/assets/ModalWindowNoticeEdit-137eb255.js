import{o as N,c as y,a as c,t as U,$ as C,af as D,z as E,l as k,b as I,_ as g,U as x,r as v,i as b,P as V}from"./index-5b1b768e.js";import{u as h}from"./globalActions-8af915e4.js";import{_ as w}from"./ButtonDefault-e9d3cb95.js";const B={class:"modal__body"},L={class:"list-item__title"},S={class:"modal__input-row"},T={class:"list-form_col list-form_col--xl"},M={class:"search-field form-field"},O={class:"modal__buttons"};function K(e,i,a,n,u,r){var f,_,t,o,l;const s=w;return N(),y("div",B,[c("div",L,"Редактирование примечания, заказ # "+U((f=a.data)==null?void 0:f.OrderID),1),c("div",S,[c("div",T,[c("div",M,[C(c("textarea",{"onUpdate:modelValue":i[0]||(i[0]=d=>n.inputValue=d)},null,512),[[D,n.inputValue]])])])]),c("div",O,[((_=a.data)==null?void 0:_.UserNotice)!==null&&((t=a.data)==null?void 0:t.UserNotice)!==""?(N(),E(s,{key:0,class:"modal__button",label:"Удалить","is-loading":n.isLoading,onClick:i[1]||(i[1]=d=>n.deleteNotice())},null,8,["is-loading"])):k("",!0),I(s,{class:"modal__button",label:((o=a.data)==null?void 0:o.UserNotice)!==null&&((l=a.data)==null?void 0:l.UserNotice)!==""?"Изменить":"Добавить","is-loading":n.isLoading,onClick:i[2]||(i[2]=d=>n.editNotice())},null,8,["label","is-loading"])])])}const j={props:{data:{type:Object,default:()=>{}}},emits:["modalClose"],setup(e,{emit:i}){const a=h(),n=x("emitter"),u=v(null),r=v(!1);function s(){var t,o;a==null||a.NoticeEdit({TableID:(t=e.data)==null?void 0:t.noteTable,RowID:(o=e.data)==null?void 0:o.OrderID,UserNotice:u.value}).then(l=>{var d,m;l==="SUCCESS"&&(i("modalClose"),(d=e==null?void 0:e.data)!=null&&d.emit&&n.emit((m=e==null?void 0:e.data)==null?void 0:m.emit))})}function f(){var t,o;a==null||a.NoticeEdit({TableID:(t=e.data)==null?void 0:t.noteTable,RowID:(o=e.data)==null?void 0:o.OrderID,UserNotice:""}).then(l=>{var d,m;l==="SUCCESS"&&(i("modalClose"),(d=e==null?void 0:e.data)!=null&&d.emit&&n.emit((m=e==null?void 0:e.data)==null?void 0:m.emit))})}b(()=>{var t;u.value=(t=e==null?void 0:e.data)==null?void 0:t.UserNotice});const _=t=>{t.key==="Enter"&&(t.ctrlKey||t.metaKey)&&s()};return b(()=>{document.addEventListener("keyup",_)}),V(()=>{document.removeEventListener("keyup",_)}),{inputValue:u,isLoading:r,editNotice:s,deleteNotice:f}}},P=g(j,[["render",K],["__scopeId","data-v-14384b99"]]);export{P as default};
