import{o as a,c as i,b as m,a as t,t as f,k as j,F as W,p as K,l as U,_ as q,a7 as z,e as G,R as H,r as J,g as u}from"./index-4434f005.js";import{u as Q}from"./domain-05a1d406.js";import{u as X}from"./contracts-d017d511.js";import{s as Y}from"./multiselect-eb561fe9.js";import{B as M}from"./BlockBalanceAgreement-4e844242.js";import{E as Z}from"./EmptyStateBlock-927727c9.js";import{_ as $}from"./ButtonDefault-f91c301e.js";import{_ as oo}from"./ClausesKeeper-68df7f35.js";import"./bootstrap-vue-next.es-5d8af788.js";import"./IconArrow-6847c901.js";import"./IconClose-0cfbf563.js";const d=e=>(K("data-v-dd0752a0"),e=e(),U(),e),to={key:0,class:"domain-scheme"},eo={class:"section"},so={class:"container"},ao={class:"section-header"},io={key:0,class:"section-title"},no={key:1,class:"section-title"},lo={key:2,class:"section-title"},co={class:"section-label"},ro={class:"section"},_o={class:"container"},mo={class:"domain-prolong__data"},ho={key:0,class:"form-field"},go=d(()=>t("div",{class:"form-field__label"},"Стоимость заказа (в год)",-1)),Do=["value"],fo={class:"form-field"},uo=d(()=>t("div",{class:"form-field__label"},"Стоимость продления (в год)",-1)),vo=["value"],po=d(()=>t("label",{class:"form-field"},[t("div",{class:"form-field__label"},"Количество лет"),t("input",{type:"text",placeholder:"1",value:"1",disabled:""})],-1)),So={key:1,class:"form-field__msg"},Co={class:"form-field"},bo=d(()=>t("div",{class:"form-field__label"},"Всего к оплате",-1)),ko=["value"],yo={class:"section"},Fo={class:"container"},Io={class:"domain-prolong__data"},Bo={class:"total-block"},xo={class:"total-block__row total-block__row--big"},Ao=d(()=>t("div",{class:"total-block__col"},"Итого за 1 год",-1)),Oo={class:"total-block__col"},Po={key:1,class:"section"},wo={class:"container"};function Ro(e,l,v,o,r,p){var _,c,D,S,C,b,k,y,F,I,B,x,A,O,P,w,R,E,L,N,T,V;const n=M,h=oo,g=$,s=Z;return a(),i(W,null,[m(n),o.getDomain?(a(),i("div",to,[t("div",eo,[t("div",so,[t("div",ao,[o.getDomain.StatusID==="Waiting"?(a(),i("h1",io,"Оплата заказа доменного имени")):o.getDomain.StatusID==="ForTransfer"?(a(),i("h1",no,"Оплата переноса домена")):(a(),i("h1",lo,"Оплата продления доменного имени")),t("div",co,f((_=o.getDomain)!=null&&_.DomainName?`#${(c=o.getDomain)==null?void 0:c.DomainName}`:""),1)]),m(h)])]),t("div",ro,[t("div",_o,[t("div",mo,[o.getDomain.StatusID==="Waiting"||o.getDomain.StatusID==="ForTransfer"?(a(),i("label",ho,[go,t("input",{type:"text",placeholder:"0 руб",value:((D=o.getDomainSchemes)==null?void 0:D.CostOrder)+" руб",disabled:""},null,8,Do)])):j("",!0),t("label",fo,[uo,t("input",{type:"text",placeholder:"0 руб",value:((S=o.getDomainSchemes)==null?void 0:S.CostProlong)+" руб",disabled:""},null,8,vo)]),po,(C=o.getDomain)!=null&&C.AdditionalCost?(a(),i("div",So,[t("p",null,f((b=o.getDomain)==null?void 0:b.AdditionalCost.Message),1)])):j("",!0),t("label",Co,[bo,t("input",{type:"text",placeholder:"0 руб",value:o.getDomain.StatusID==="ClaimForRegister"?(k=o.getDomainSchemes)==null?void 0:k.CostOrder:(parseFloat((y=o.getDomainSchemes)==null?void 0:y.CostProlong)+((F=o.getDomain)!=null&&F.AdditionalCost?parseFloat((B=(I=o.getDomain)==null?void 0:I.AdditionalCost)==null?void 0:B.Summ):0)).toFixed(2)+" руб",disabled:""},null,8,ko)])])])]),t("div",yo,[t("div",Fo,[t("div",Io,[t("div",Bo,[t("div",xo,[Ao,t("div",Oo,f(o.getDomain.StatusID==="ClaimForRegister"?(parseFloat((x=o.getDomainSchemes)==null?void 0:x.CostOrder)+((A=o.getDomain)!=null&&A.AdditionalCost?parseFloat((P=(O=o.getDomain)==null?void 0:O.AdditionalCost)==null?void 0:P.Summ):0)).toFixed(2):(parseFloat((w=o.getDomainSchemes)==null?void 0:w.CostProlong)+((R=o.getDomain)!=null&&R.AdditionalCost?parseFloat((L=(E=o.getDomain)==null?void 0:E.AdditionalCost)==null?void 0:L.Summ):0)).toFixed(2)||"0.00")+" ₽",1)])]),m(g,{class:"btn--wide",label:+((N=o.getContract)==null?void 0:N.Balance)>(o.getDomain.StatusID==="ClaimForRegister"?+((T=o.getDomainSchemes)==null?void 0:T.CostOrder):+((V=o.getDomainSchemes)==null?void 0:V.CostProlong))?"Оплатить c баланса договора":"Добавить в корзину",onClick:l[0]||(l[0]=Lo=>o.orderPay()),"is-loading":o.isLoading},null,8,["label","is-loading"])])])])])):(a(),i("div",Po,[t("div",wo,[m(s,{label:"Заказ домена не найден"})])]))],64)}const Eo={components:{Multiselect:Y,BlockBalanceAgreement:M},async setup(){const e=Q(),l=X(),v=z(),o=G();H("emitter");const r=J(!1);function p(){var s;r.value=!0,e.DomainOrderPay({DomainOrderID:(s=n.value)==null?void 0:s.ID}).then(_=>{let{result:c,error:D}=_;c==="SUCCESS"?o.push("/DomainOrders"):c==="BASKET"&&o.push("/Basket"),r.value=!1})}const n=u(()=>Object.keys(e==null?void 0:e.domainsList).map(s=>e==null?void 0:e.domainsList[s]).find(s=>s.OrderID===v.params.id)),h=u(()=>{var s;return e==null?void 0:e.domainSchemes[(s=n.value)==null?void 0:s.SchemeID]}),g=u(()=>{var s;return l.contractsList[(s=n.value)==null?void 0:s.ContractID]});return await e.fetchDomains(),await e.fetchDomainSchemes(),await l.fetchContracts(),{getDomain:n,getDomainSchemes:h,getContract:g,isLoading:r,orderPay:p}}},Ho=q(Eo,[["render",Ro],["__scopeId","data-v-dd0752a0"]]);export{Ho as default};
