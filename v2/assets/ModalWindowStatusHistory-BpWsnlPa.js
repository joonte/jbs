import{L as h}from"./bootstrap-vue-next-W16P-SAV.js";import{_ as B}from"./StatusBadge-BmqDrHzy.js";import{_ as H}from"./LoadingIndicator-y8DeC9jv.js";import{r as d,f as i,o as D,c as f,a as s,t as l,C as P,b as w,w as o,e as u,v as M,F as T,am as V,W as E}from"./index-Codq73aV.js";import{_ as L}from"./_plugin-vue_export-helper-DlAUqK2U.js";const N=[{key:"StatusDate",label:"Дата изменения",headerTitle:"Дата изменения",variant:"td-gray td-order",sortable:!0},{key:"StatusID",label:"Статус",headerTitle:"Статус",variant:"td-blue",sortable:!0},{key:"Initiator",label:"Инициатор",headerTitle:"Инициатор",variant:"td-gray td-order"},{key:"Comment",label:"Комментарий",headerTitle:"Комментарий",variant:"td-gray td-order"}],F={class:"tw-text-sm tw-text-gray-500 tw-mt-1"},W={key:1,class:"tw-overflow-y-auto tw-pr-2 tw-mt-4"},U={class:"td-column-heavy"},j={class:"table-td-gray"},R={class:"td-column-heavy"},q={class:"table-td-gray"},A={class:"td-column-heavy"},Y={class:"table-td-gray"},z={__name:"ModalWindowStatusHistory",props:{data:{type:Object,default:()=>{}}},setup(r){const c=r,S=d("StatusDate"),b=d(!0),k=d("desc"),I=d(!0),p=i(()=>c.data.modeID),_=i(()=>c.data.rowID),g=i(()=>c.data.orderID),n=d({}),x=i(()=>n.value?Object.values(n.value).reverse().map(e=>({StatusDate:e.StatusDate,StatusID:e.StatusID,Initiator:e.Initiator,Comment:e.Comment})):[]);(async()=>{try{const e=g.value?`OrderID=${g.value}`:`ModeID=${p.value}&RowID=${_.value}`,t=await V.get(`${E}/API/v2/StatusesHistory?${e}`);t&&t.data?n.value=t.data:n.value={},I.value=!1}catch(e){console.error(e),n.value={}}})();function $(e){let t="";switch(e){case"HostingOrders":t="Хостинг";break;case"DomainOrders":t="Домен";break;case"DSOrders":t="Выделенный сервер";break;case"VPSOrders":t="VPS/VDS сервер";break;case"ExtraIPOrders":t="IP адрес";break;case"ISPswOrders":t="Лицензия ISPsystem";break;case"DNSmanagerOrders":t="Вторичный DNS";break;case"Contracts":t="Договор";break;case"Profiles":t="Профиль";break;case"Invoices":t="Счёт на оплату";break;case"Edesks":t="Тикет";break}return t}function O(e){const t=new Date(e*1e3),m=t.getDate().toString().padStart(2,"0"),v=(t.getMonth()+1).toString().padStart(2,"0"),y=t.getFullYear().toString(),a=t.getHours().toString().padStart(2,"0"),C=t.getMinutes().toString().padStart(2,"0");return`${m}.${v}.${y} ${a}:${C}`}return(e,t)=>{const m=H,v=B,y=h;return D(),f(T,null,[t[9]||(t[9]=s("div",{class:"tw-text-xl sm:tw-text-2xl"},"История изменений",-1)),s("div",F,l($(r.data.modeID))+", #"+l(r.data.orderID?r.data.orderID:r.data.rowID),1),I.value?(D(),P(m,{key:0,class:"tw-mt-16"})):(D(),f("div",W,[w(y,{class:"basic-table",items:x.value,fields:M(N),"show-empty":!0,filterable:[],"sort-desc":b.value,"onUpdate:sortDesc":t[0]||(t[0]=a=>b.value=a),"sort-by":S.value,"onUpdate:sortBy":t[1]||(t[1]=a=>S.value=a),"sort-direction":k.value,"empty-text":"У вас пока нет истории статусов.","empty-filtered-text":"Статус не найден."},{"head(StatusDate)":o(()=>t[2]||(t[2]=[u(" Дата изменения ",-1)])),"head(StatusID)":o(()=>t[3]||(t[3]=[u(" Статус ",-1)])),"head(Initiator)":o(()=>t[4]||(t[4]=[u(" Инициатор ",-1)])),"head(Comment)":o(()=>t[5]||(t[5]=[u(" Комментарий ",-1)])),"cell(StatusDate)":o(a=>[t[6]||(t[6]=s("span",{class:"td-mobile"},"Дата изменения",-1)),s("div",U,[s("div",j,l(O(a.item?.StatusDate)),1)])]),"cell(StatusID)":o(a=>[w(v,{status:a.item?.StatusID,"status-table":p.value},null,8,["status","status-table"])]),"cell(Initiator)":o(a=>[t[7]||(t[7]=s("span",{class:"td-mobile"},"Инициатор",-1)),s("div",R,[s("div",q,l(a.item?.Initiator),1)])]),"cell(Comment)":o(a=>[t[8]||(t[8]=s("span",{class:"td-mobile"},"Комментарий",-1)),s("div",A,[s("div",Y,l(a.item?.Comment),1)])]),_:1},8,["items","fields","sort-desc","sort-by","sort-direction"])]))],64)}}},tt=L(z,[["__scopeId","data-v-86802339"]]);export{tt as default};
