import{_ as A}from"./LoadingIndicator-DXjOL6Pz.js";import{_ as C}from"./EmptyStateBlock-Ad1AmtSS.js";import{_ as L,a as $}from"./BlockDependentServices-CX2fnrCR.js";import{_ as R}from"./BlockAdditionalServices-C2o0wt_v.js";import{_ as j}from"./ClausesKeeper-gPyacQ05.js";import{_ as E}from"./BlockBalanceAgreement-DSLTUOoQ.js";import{u as F,r as _,f as m,g as G,D as P,c as x,b as s,C as v,a as S,h as T,t as U,w as O,E as K,F as q,d as z,x as J,o as i,e as k}from"./index-C9dBN6m4.js";import{u as M}from"./hosting-C49ZUiO9.js";import{u as Q}from"./services-moLhYNFg.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ButtonDefault-B1FApUky.js";import"./BlueButton.vue_vue_type_script_setup_true_lang-q3k2Q2g8.js";import"./StatusBadge-DZmmWv0G.js";import"./bootstrap-vue-next-BglOzul_.js";import"./ServiceListOrderSelection-DnnRkveR.js";import"./TotalAmount.vue_vue_type_script_setup_true_lang-BJFSjxtt.js";import"./BasicInput-VlbY6GiE.js";import"./component-D8Pmx5O0.js";import"./BlockSelectContract-Dn4S5pYG.js";import"./contracts-BEc0DZS2.js";import"./multiselect-B6DlyfA6.js";import"./IconClose-CgjzG0Yf.js";import"./index-D0iqQ1zq.js";const W={key:0,class:"tw-px-4 md:tw-px-8 tw-mb-6"},X={class:"tw-text-gray-500 tw-text-sm tw-mt-2"},Y={class:"tw-flex tw-items-center tw-gap-8 tw-border-b tw-border-gray-200 tw-mt-4 tw-whitespace-nowrap tw-mb-6"},be={__name:"HostingServices",async setup(Z){let w,f;const y=G();z();const o=M(),g=Q(),c=F();J("emitter");const l=_([]),D=_(!0);_(!1);const e=m(()=>Object.values(o.hostingList).find(n=>n.OrderID===Number(y.params.id))),h=m(()=>!e.value?.SchemeID||!o?.hostingSchemes?null:o.hostingSchemes[e.value.SchemeID]),I=m(()=>!e.value||!h.value?null:{ServiceID:e.value.ServiceID,ServersGroupID:h.value.ServersGroupID}),B=m(()=>{if(!e.value?.OrderID||!c?.userOrders)return[];const n=e.value.OrderID;return Object.keys(c.userOrders).map(r=>c.userOrders[r]).filter(r=>{const a=String(r?.DependOrderID)===String(n),p=r?.ServiceID,d=g.ServicesList[r.ServiceID];return a&&p&&d}).sort((r,a)=>Number(r?.ID)-Number(a?.ID))});return[w,f]=P(()=>Promise.all([o.fetchHostingOrders(),o.fetchHostingSchemes(),g.fetchServices(),c.fetchUserOrders()])),await w,f(),D.value=!1,(n,t)=>{const b=E,u=K("RouterLink"),r=j,a=L,p=R,d=$,H=C,N=A;return i(),x(q,null,[s(b),e.value?(i(),x("div",W,[t[3]||(t[3]=S("h1",{class:"tw-text-xl sm:tw-text-4xl"},"Дополнительные услуги",-1)),S("div",X,"Хостинг # "+U(e.value.OrderID),1),S("div",Y,[s(u,{class:"tw-py-2 tw-cursor-pointer -tw-mb-[1px]","active-class":"tw-text-sky-400 tw-border-b-2 tw-border-sky-400",to:`/HostingOrders/${e.value?.OrderID}`},{default:O(()=>t[1]||(t[1]=[k(" Хостинг ",-1)])),_:1,__:[1]},8,["to"]),s(u,{class:"tw-py-2 tw-cursor-pointer -tw-mb-[1px]","active-class":"tw-text-sky-400 tw-border-b-2 tw-border-sky-400",to:`/HostingOrders/${e.value?.OrderID}/Services`},{default:O(()=>t[2]||(t[2]=[k(" Услуги ",-1)])),_:1,__:[2]},8,["to"])]),s(r),s(a,{services:B.value},null,8,["services"]),I.value?(i(),v(p,{key:0,modelValue:l.value,"onUpdate:modelValue":t[0]||(t[0]=V=>l.value=V),"service-search-params":I.value,class:"tw-mt-6"},null,8,["modelValue","service-search-params"])):T("",!0),s(d,{services:l.value,"main-order":e.value},null,8,["services","main-order"])])):D.value?(i(),v(N,{key:2,class:"tw-mt-10"})):(i(),v(H,{key:1,label:"Заказ не найден"}))],64)}}};export{be as default};
