import{m as p,r as B,Y as M,v as N}from"./bootstrap-vue-next-9iQSFcL_.js";import{_ as V}from"./IconDots-DGe1DF8w.js";import{_ as H}from"./Helper-C1WzNFjD.js";import{_ as L}from"./IconCard-BQu6YZod.js";import{_ as j}from"./StatusBadge-DroW9lKR.js";import{_ as T}from"./OrderIDBadge-BR_cruJT.js";import{G as U,c as f,o as I,a as i,i as A,I as E,b as a,J as F,w as d,e as m,t as c,F as P,j as Y,n as q,d as z,x as G,r as J,m as K}from"./index-DxPA2ffO.js";import{f as x}from"./time-DenPiOX5.js";import{_ as Q}from"./_plugin-vue_export-helper-DlAUqK2U.js";const W={props:{params:{type:Array,default:()=>[]},itemData:{type:Object,default:()=>{}},isLast:{type:Boolean,default:!1},isSeveral:{type:Boolean,default:!1},selectedRows:{type:Object,required:!0}},emits:["delete","transfer","manage"],setup(o,{emit:t}){const e=z(),s=G("emitter"),_=J({...o.selectedRows}),C=()=>{t("update-selected-rows",_.value)};K(()=>o.selectedRows,n=>{_.value={...n}},{deep:!0});function S(n){if(!n)return x(new Date);const l=new Date,D=new Date(l.getTime()+n*24*60*60*1e3);return x(D)}function g(n){e.push(`/DSOrders/${n}`)}function u(){t("delete",o.itemData?.ID,o.itemData?.OrderID)}function v(){t("transfer",{ServiceOrderID:o.itemData?.ID,ServiceID:o.itemData?.ServiceID})}function w(n){s.emit("open-modal",{component:"StatusHistory",data:{modeID:"DSOrders",rowID:n}})}function O(){t("manage",{ServiceOrderID:o.itemData?.ID,ServiceID:o.itemData?.ServiceID,OrderID:o.itemData?.OrderID})}function b(n){if(!n)return"";const l=new Date(parseInt(n)*1e3),r=new Date-l,h=Math.floor(r/1e3),y=Math.floor(h/60),k=Math.floor(y/60),R=Math.floor(k/24);return h<60?`${h} сек. от статуса`:y<60?`${y} мин. от статуса`:k<24?`${k} ч. от статуса`:`${R} дн. от статуса`}return{deleteItem:u,orderManage:O,transferAccount:v,calculateExpirationDate:S,openHistoryStatuses:w,toItem:g,calculateDaysSinceStatusUpdate:b,localSelectedRows:_,updateSelectedRows:C}}},X={class:"hosting-item"},Z={class:"hosting-item__row"},$={class:"hosting-item__row"},tt={class:"hosting-item__person"},et={key:0,class:"hosting-item__row"},nt={class:"hosting-item__list"},at=["innerHTML"],ot={class:"hosting-status__info"},st={class:"hosting-status__date"},rt={class:"hosting-item__controls"},it={class:"btn btn--dots"};function dt(o,t,e,s,_,C){const S=p,g=T,u=U("router-link"),v=j,w=L,O=H,b=V,n=B,l=M,D=N;return I(),f("div",X,[i("div",Z,[E(a(S,{id:"checkbox-"+e.itemData?.OrderID,modelValue:s.localSelectedRows[e.itemData?.OrderID],"onUpdate:modelValue":t[0]||(t[0]=r=>s.localSelectedRows[e.itemData?.OrderID]=r),name:"checkbox-"+e.itemData?.OrderID,onChange:s.updateSelectedRows},null,8,["id","modelValue","name","onChange"]),[[F,e.isSeveral]]),a(g,{orderID:e.itemData?.OrderID,onClick:t[1]||(t[1]=r=>s.toItem(e.itemData?.OrderID))},null,8,["orderID"]),a(u,{class:"hosting-item__name",to:`/DSOrders/${e.itemData.OrderID}`},{default:d(()=>[m(c(e.itemData.IP),1)]),_:1},8,["to"])]),i("div",$,[i("div",tt,c(e.itemData?.Customer),1)]),e.params.length?(I(),f("div",et,[i("ul",nt,[(I(!0),f(P,null,Y(e.params,r=>(I(),f("li",{key:r,innerHTML:r},null,8,at))),128))]),i("div",ot,[i("span",{class:q(["hosting-item__date",{danger:Number(e.itemData?.DaysRemainded)<14}])},c(s.calculateExpirationDate(e.itemData?.DaysRemainded))+" • "+c(e.itemData?.DaysRemainded||0)+" дн. ",3),a(v,{class:"status-badge",status:e.itemData?.StatusID,"status-table":"DSOrders",onClick:t[2]||(t[2]=r=>s.openHistoryStatuses(e.itemData?.ID))},null,8,["status"]),i("div",st,c(s.calculateDaysSinceStatusUpdate(e.itemData?.StatusDate)),1)])])):A("",!0),i("div",rt,[i("button",{class:"btn btn--md btn--bold",onClick:t[3]||(t[3]=r=>o.$router.push(`/DSOrderPay/${e.itemData?.OrderID}`))},[a(w),t[6]||(t[6]=m(" Оплатить ",-1))]),a(O,{"user-notice":e.itemData?.UserNotice,id:e.itemData?.OrderID,position:e.isLast?"bottom":"top",emit:"updateDSOrdersList"},null,8,["user-notice","id","position"]),a(D,{class:"dropdown-dots",right:""},{"button-content":d(()=>[i("span",it,[a(b)])]),default:d(()=>[a(n,null,{default:d(()=>[a(u,{to:`DSOrders/${e.itemData?.OrderID}`},{default:d(()=>t[7]||(t[7]=[m("Дополнительная информация",-1)])),_:1,__:[7]},8,["to"])]),_:1}),a(n,{onClick:t[4]||(t[4]=r=>s.transferAccount())},{default:d(()=>t[8]||(t[8]=[m("Передать на другой аккаунт",-1)])),_:1,__:[8]}),a(l),a(n,{class:"color-red",onClick:t[5]||(t[5]=r=>s.deleteItem())},{default:d(()=>t[9]||(t[9]=[m("Удалить",-1)])),_:1,__:[9]})]),_:1})])])}const gt=Q(W,[["render",dt],["__scopeId","data-v-bee2b210"]]);export{gt as _};
