import{o as I,c as T,a as e,n as d,t as k,Z as l,an as m,b as C,p as O,l as R,_ as g,r as i,S as M,h as V,O as U}from"./index-5e313302.js";import{u as x}from"./resetServer-2f6a71c3.js";import{u as B}from"./dedicatedServer-a434bad7.js";import{_ as E}from"./ButtonDefault-7c216fc6.js";const t=n=>(O("data-v-7630577e"),n=n(),R(),n),j={class:"modal__body"},L=t(()=>e("div",{class:"list-item__title"},"Питание сервера",-1)),N={class:"list-item__status"},W=t(()=>e("div",{class:"list-item__status-text"},"Текущий статус",-1)),z=t(()=>e("div",{class:"list-item__subtitle"},"Выбор команды",-1)),K={class:"form"},Z=["disabled"],q=t(()=>e("span",{class:"form-input_border-content"},[e("span",{class:"form-input_border-mark"}),e("span",{class:"form-input_border-info"},[e("span",{class:"form-input_border-address"},"Включить")])],-1)),A=["disabled"],F=t(()=>e("span",{class:"form-input_border-content"},[e("span",{class:"form-input_border-mark"}),e("span",{class:"form-input_border-info"},[e("span",{class:"form-input_border-address"},"Выключить")])],-1)),G=["disabled"],H=t(()=>e("span",{class:"form-input_border-content"},[e("span",{class:"form-input_border-mark"}),e("span",{class:"form-input_border-info"},[e("span",{class:"form-input_border-address"},"Корректно выключить")])],-1)),J=["disabled"],Q=t(()=>e("span",{class:"form-input_border-content"},[e("span",{class:"form-input_border-mark"}),e("span",{class:"form-input_border-info"},[e("span",{class:"form-input_border-address"},"Выключить/включить")])],-1)),X=["disabled"],Y=t(()=>e("span",{class:"form-input_border-content"},[e("span",{class:"form-input_border-mark"}),e("span",{class:"form-input_border-info"},[e("span",{class:"form-input_border-address"},"Reset")])],-1)),$={class:"form-input_border"},ee=t(()=>e("span",{class:"form-input_border-content"},[e("span",{class:"form-input_border-mark"}),e("span",{class:"form-input_border-info"},[e("span",{class:"form-input_border-address"},"Перезагрузить IPMI")])],-1)),oe={class:"modal__buttons-wrap"};function se(n,s,p,o,u,_){const c=E;return I(),T("div",j,[L,e("div",N,[W,e("div",{class:d(["server-status",{"server-status-on":o.SystemPower==="on","server-status-off":o.SystemPower!=="on"}])},k(o.SystemPower==="on"?"Включен":"Выключен"),3)]),z,e("div",K,[e("label",{class:d(["form-input_border",{"disabled-label":o.SystemPower==="on"}])},[l(e("input",{type:"radio",name:"Command",value:"on","onUpdate:modelValue":s[0]||(s[0]=a=>o.commandType=a),disabled:o.SystemPower==="on"},null,8,Z),[[m,o.commandType]]),q],2),e("label",{class:d(["form-input_border",{"disabled-label":o.SystemPower!=="on"}])},[l(e("input",{type:"radio",name:"Command",value:"off","onUpdate:modelValue":s[1]||(s[1]=a=>o.commandType=a),disabled:o.SystemPower!=="on"},null,8,A),[[m,o.commandType]]),F],2),e("label",{class:d(["form-input_border",{"disabled-label":o.SystemPower!=="on"}])},[l(e("input",{type:"radio",name:"Command",value:"soft","onUpdate:modelValue":s[2]||(s[2]=a=>o.commandType=a),disabled:o.SystemPower!=="on"},null,8,G),[[m,o.commandType]]),H],2),e("label",{class:d(["form-input_border",{"disabled-label":o.SystemPower!=="on"}])},[l(e("input",{type:"radio",name:"Command",value:"cycle","onUpdate:modelValue":s[3]||(s[3]=a=>o.commandType=a),disabled:o.SystemPower!=="on"},null,8,J),[[m,o.commandType]]),Q],2),e("label",{class:d(["form-input_border",{"disabled-label":o.SystemPower!=="on"}])},[l(e("input",{type:"radio",name:"Command",value:"reset","onUpdate:modelValue":s[4]||(s[4]=a=>o.commandType=a),disabled:o.SystemPower!=="on"},null,8,X),[[m,o.commandType]]),Y],2),e("label",$,[l(e("input",{type:"radio",name:"Command",value:"mc","onUpdate:modelValue":s[5]||(s[5]=a=>o.commandType=a)},null,512),[[m,o.commandType]]),ee])]),e("div",oe,[C(c,{class:"modal__button yes",label:"Выполнить",onClick:s[6]||(s[6]=a=>o.acceptReload())})])])}const ae={props:{data:{type:Object,default:()=>{}}},emits:["modalClose"],setup(n,{emit:s}){var v,h,w,D;const p=x(),o=i(""),u=M("emitter"),_=B(),c=i(((v=n.data)==null?void 0:v.isReloading)||""),a=i(((h=n.data)==null?void 0:h.DSOrderID)||""),f=i(((w=n.data)==null?void 0:w.OrderID)||""),P=i((D=n.data)==null?void 0:D.SystemPower);function b(){c.value=!0,n.data.onReloadStatusChange(!0),p.ServerReset(a.value,o.value).then(()=>{u.emit("open-modal",{component:"Suspense"}),setTimeout(()=>{y(),c.value=!1,n.data.onReloadStatusChange(!1),_.fetchDSOrders().then(()=>{console.log("fetchDSOrders resolved ID - ",f.value),_.fetchDSOrderIPMI(f.value).then(r=>{console.log("fetchDSOrderIPMI result:",r)}).catch(r=>{console.error("fetchDSOrderIPMI error:",r)})}).catch(r=>{console.error("fetchDSOrders error:",r)})},1e4)})}function y(){s("modalClose")}const S=r=>{r.key==="Enter"&&b()};return V(()=>{document.addEventListener("keyup",S)}),U(()=>{document.removeEventListener("keyup",S)}),{acceptReload:b,closeModal:y,commandType:o,SystemPower:P}}},le=g(ae,[["render",se],["__scopeId","data-v-7630577e"]]);export{le as default};
