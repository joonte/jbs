import{_ as G}from"./EmptyStateBlock-BaR9js3E.js";import{_ as J}from"./WhiteButton-B0VC5rKo.js";import{I as X}from"./IconProfile-BO-wrWBn.js";import{_ as h}from"./ButtonDefault-BIBStZbJ.js";import{_ as Y}from"./StatusBadge-CjHHKSUG.js";import{_ as Z}from"./ClausesKeeper-CTja-fCz.js";import{_ as tt}from"./MessageInfo-CcgbMPO0.js";import{_ as et}from"./UserNote-8i0DdDDd.js";import{_ as st,c as ot}from"./BlockBalanceAgreement-qtspRQ_B.js";import{u as at,Q as it,r as m,x as nt,f as k,H as rt,g as lt,c,b as a,a as t,C as p,h as _,F as S,t as i,w as D,E as mt,I as _t,K as ut,d as dt,o as r,e as y}from"./index-CmCGXBst.js";import{u as ct}from"./contracts-P7YPBhEI.js";import{f,s as wt}from"./time-DenPiOX5.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./IconClose-B_k4TzXM.js";const vt={class:"tw-px-4 md:tw-px-8 tw-mb-6"},pt={class:"tw-text-xl sm:tw-text-4xl"},Dt=["href"],ft={class:"tw-flex tw-items-center tw-gap-2 tw-mt-2"},gt={class:"tw-text-gray-500 tw-text-sm"},bt={class:"tw-flex tw-items-center tw-gap-8 tw-border-b tw-border-gray-200 tw-mt-4 tw-whitespace-nowrap tw-mb-6"},It={class:"tw-grid tw-grid-cols-1 lg:tw-grid-cols-2 tw-gap-4"},xt={class:"tw-border tw-rounded tw-border-gray-200 tw-p-4"},ht={class:"list-item__row tw-gap-2"},kt={class:"list-item__title"},St={class:"list-item__status"},yt={class:"list-item__row"},Ot={class:"list-item__ul"},Nt={key:0},Ct={class:"list-item__row list-item__row--column"},$t={key:0,class:"list-item__text"},Pt={class:"list-item__text"},Bt={class:"list-item__text"},Rt={class:"tw-flex tw-flex-wrap tw-gap-4 tw-mt-4"},Tt={class:"btn btn--border btn--switch tw-ml-0 tw-h-10 sm:tw-h-12"},Ft={class:"tw-flex tw-flex-wrap tw-gap-4 tw-mt-4"},Mt={class:"tw-border tw-rounded tw-border-gray-200 tw-p-4"},Wt={class:"list-item__row list-item__row--nowrap"},Et={class:"list-item__row list-item__row--table"},Vt={class:"list-item__item"},At={class:"list-item__row list-item__row--table"},Ht={class:"list-item__item"},Ut={class:"tw-border tw-rounded tw-border-gray-200 tw-p-4"},Lt={class:"list-item__row list-item__row--table"},jt={class:"btn btn--switch"},Kt=["checked"],Qt={class:"list-item__row list-item__row--table"},qt={class:"list-item__item"},me={__name:"DomainOrdersId",setup(zt){const O=lt(),N=at(),w=it(),C=ct(),$=dt(),u=m(null);m(!1);const P=m({}),s=m(null),g=m(!0),l=nt("emitter");l.on("updateDomainOrdersId",()=>{b()});const d=k(()=>w.domainSchemes[s.value?.SchemeID]),B=k(()=>{const o=s.value?.Domain;return o?o.startsWith("http://")||o.startsWith("https://")?o:`https://${o}`:""});function R(){l.emit("open-modal",{component:"DomainsEdit",data:s.value})}function T(o){l.emit("open-modal",{component:"StatusHistory",data:{modeID:"DomainOrders",rowID:o}})}function F(o){if(!o)return f(new Date);const e=new Date,v=new Date(e.getTime()+o*24*60*60*1e3);return f(v)}function M(o){return o?f(wt(o)):""}function W(){try{const o={DomainOrderID:s.value.ID,Domain:s.value.Domain};l.emit("open-modal",{component:"DomainSelectOwner",data:o})}catch(o){console.error(o)}}function E(){l.emit("open-modal",{component:"OrdersTransfer",data:{ServiceOrderID:s.value?.ID,ServiceID:s.value?.ServiceID}})}function V(){N.prolongOrder({IsAutoProlong:u.value?0:1,OrderID:s.value?.OrderID})}function A(){ot(s.value.StatusID,l)&&$.push(`/DomainOrderPay/${s.value.OrderID}`)}rt(async()=>{P.value={Ns1Name:s.value?.Ns1Name,Ns2Name:s.value?.Ns2Name},await w.fetchDomainSchemes(),await C.fetchProfiles(),await b(),u.value=s.value.IsAutoProlong,g.value=!1});async function b(){s.value=await w.fetchDomainOrder(O.params.id)}return(o,e)=>{const v=st,H=et,U=tt,I=mt("RouterLink"),L=Z,x=h,j=Y,K=h,Q=X,q=J,z=G;return r(),c(S,null,[a(v),t("div",vt,[s.value?(r(),c(S,{key:0},[t("h1",pt,[t("a",{href:B.value,target:"_blank"},i(s.value.Domain),9,Dt)]),t("div",ft,[t("div",gt,"Домен #"+i(s.value?.OrderID),1),a(H,{text:s.value.UserNotice,"order-id":s.value.OrderID,emit:"updateDomainOrdersId",position:"right"},null,8,["text","order-id"])]),s.value.Message?(r(),p(U,{key:0,innerHTML:s.value.Message,class:"tw-mt-4"},null,8,["innerHTML"])):_("",!0),t("div",bt,[a(I,{class:"tw-py-2 tw-cursor-pointer -tw-mb-[1px]","active-class":"tw-text-sky-400 tw-border-b-2 tw-border-sky-400",to:`/DomainOrders/${s.value?.OrderID}`},{default:D(()=>e[7]||(e[7]=[y(" Домен ",-1)])),_:1,__:[7]},8,["to"]),a(I,{class:"tw-py-2 tw-cursor-pointer -tw-mb-[1px]","active-class":"tw-text-sky-400 tw-border-b-2 tw-border-sky-400",to:`/DomainServices/${s.value?.OrderID}`},{default:D(()=>e[8]||(e[8]=[y(" Услуги ",-1)])),_:1,__:[8]},8,["to"])]),a(L),s.value.StatusID==="Waiting"||s.value.StatusID==="ClaimForRegister"||s.value.StatusID==="ForContractRegister"||s.value.StatusID==="ForRegister"||s.value.StatusID==="ForTransfer"?(r(),p(x,{key:1,class:"tw-mb-4",label:"Определить владельца",onClick:e[0]||(e[0]=n=>W())})):_("",!0),t("div",It,[t("div",xt,[t("div",ht,[t("div",kt,i(s.value.Domain),1),t("div",St,[a(j,{status:s.value.StatusID,"status-table":"DomainOrders",onClick:e[1]||(e[1]=n=>T(s.value.ID)),class:"tw-cursor-pointer"},null,8,["status"])])]),t("div",yt,[t("ul",Ot,[d.value.PackageID?(r(),c("li",Nt,i(d.value.PackageID),1)):_("",!0)])]),t("div",Ct,[d.value.CostProlong?(r(),c("div",$t,i(d.value.CostProlong)+" ₽ продлить на 12 месяцев ",1)):_("",!0),t("div",Pt,"Дней осталось "+i(s.value.DaysRemainded||0),1),t("div",Bt,"Дата окончания "+i(F(s.value.DaysRemainded)),1)]),t("div",Rt,[a(K,{label:s.value.StatusID==="ClaimForRegister"||s.value.StatusID==="Waiting"?"Оплатить":"Продлить",onClick:e[2]||(e[2]=n=>A()),class:"tw-min-w-24"},null,8,["label"]),t("label",Tt,[_t(t("input",{type:"checkbox","onUpdate:modelValue":e[3]||(e[3]=n=>u.value=n),onInput:e[4]||(e[4]=n=>V())},null,544),[[ut,u.value]]),e[9]||(e[9]=t("span",{class:"btn-switch__text tw-text-xs sm:tw-text-sm"},"Автопродление",-1)),e[10]||(e[10]=t("span",{class:"btn-switch__toggle"},null,-1))])]),t("div",Ft,[a(q,{onClick:e[5]||(e[5]=n=>E())},{default:D(()=>[a(Q),e[11]||(e[11]=t("div",null,"Передать на другой аккаунт",-1))]),_:1,__:[11]})])]),t("div",Mt,[t("div",Wt,[e[12]||(e[12]=t("div",{class:"list-item__title"},"Именные сервера",-1)),a(x,{class:"ml-auto",label:"Редактировать",onClick:e[6]||(e[6]=n=>R())})]),t("div",Et,[e[13]||(e[13]=t("div",{class:"list-item__item"},"Первичный сервер",-1)),t("div",Vt,i(s.value.Ns1Name),1)]),t("div",At,[e[14]||(e[14]=t("div",{class:"list-item__item"},"Вторичный сервер",-1)),t("div",Ht,i(s.value.Ns2Name),1)])]),t("div",Ut,[e[18]||(e[18]=t("div",{class:"list-item__row"},[t("div",{class:"list-item__title"},"Контактные данные")],-1)),t("div",Lt,[e[16]||(e[16]=t("div",{class:"list-item__item"},"Скрыть данные в WhoIs",-1)),t("label",jt,[t("input",{type:"checkbox",checked:s.value.IsPrivateWhoIs,disabled:""},null,8,Kt),e[15]||(e[15]=t("span",{class:"btn-switch__toggle"},null,-1))])]),t("div",Qt,[e[17]||(e[17]=t("div",{class:"list-item__item"},"Последнее обновление адрес",-1)),t("div",qt,i(M(s.value.StatusDate)),1)])])])],64)):g.value?_("",!0):(r(),p(z,{key:1,label:"Заказ не найден"}))])],64)}}};export{me as default};
