import{u as X,_ as q}from"./contracts-DD2O0C6m.js";import{_ as U}from"./ButtonDefault-tVMF5ozh.js";import{m as P,a4 as J,a5 as K,U as Q,ac as Z,r as N,ap as tt,f as S,ad as m,v as F,ae as V,h as et,I as nt,i as T,o as b,c as k,a as u,b as A,t as g,C as ot,n as st,F as lt,j as rt,d as at}from"./index-DxPA2ffO.js";import{_ as it}from"./_plugin-vue_export-helper-DlAUqK2U.js";function H(t){return J()?(K(t),!0):!1}const Y=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const ct=Object.prototype.toString,ut=t=>ct.call(t)==="[object Object]",_=()=>{},D=dt();function dt(){var t,e;return Y&&((t=window?.navigator)==null?void 0:t.userAgent)&&(/iP(?:ad|hone|od)/.test(window.navigator.userAgent)||((e=window?.navigator)==null?void 0:e.maxTouchPoints)>2&&/iPad|Macintosh/.test(window?.navigator.userAgent))}function ft(...t){if(t.length!==1)return Q(...t);const e=t[0];return typeof e=="function"?Z(tt(()=>({get:e,set:_}))):N(e)}function L(t){return Array.isArray(t)?t:[t]}function wt(t,e,o){return P(t,e,{...o,immediate:!0})}const z=Y?window:void 0;function x(t){var e;const o=m(t);return(e=o?.$el)!=null?e:o}function C(...t){const e=[],o=()=>{e.forEach(s=>s()),e.length=0},a=(s,r,n,c)=>(s.addEventListener(r,n,c),()=>s.removeEventListener(r,n,c)),d=S(()=>{const s=L(m(t[0])).filter(r=>r!=null);return s.every(r=>typeof r!="string")?s:void 0}),f=wt(()=>{var s,r;return[(r=(s=d.value)==null?void 0:s.map(n=>x(n)))!=null?r:[z].filter(n=>n!=null),L(m(d.value?t[1]:t[0])),L(F(d.value?t[2]:t[1])),m(d.value?t[3]:t[2])]},([s,r,n,c])=>{if(o(),!s?.length||!r?.length||!n?.length)return;const y=ut(c)?{...c}:c;e.push(...s.flatMap(w=>r.flatMap(h=>n.map(O=>a(w,h,O,y)))))},{flush:"post"}),v=()=>{f(),o()};return H(o),v}let $=!1;function R(t,e,o={}){const{window:a=z,ignore:d=[],capture:f=!0,detectIframe:v=!1,controls:s=!1}=o;if(!a)return s?{stop:_,cancel:_,trigger:_}:_;if(D&&!$){$=!0;const l={passive:!0};Array.from(a.document.body.children).forEach(i=>i.addEventListener("click",_,l)),a.document.documentElement.addEventListener("click",_,l)}let r=!0;const n=l=>m(d).some(i=>{if(typeof i=="string")return Array.from(a.document.querySelectorAll(i)).some(p=>p===l.target||l.composedPath().includes(p));{const p=x(i);return p&&(l.target===p||l.composedPath().includes(p))}});function c(l){const i=m(l);return i&&i.$.subTree.shapeFlag===16}function y(l,i){const p=m(l),E=p.$.subTree&&p.$.subTree.children;return E==null||!Array.isArray(E)?!1:E.some(j=>j.el===i.target||i.composedPath().includes(j.el))}const w=l=>{const i=x(t);if(l.target!=null&&!(!(i instanceof Element)&&c(t)&&y(t,l))&&!(!i||i===l.target||l.composedPath().includes(i))){if("detail"in l&&l.detail===0&&(r=!n(l)),!r){r=!0;return}e(l)}};let h=!1;const O=[C(a,"click",l=>{h||(h=!0,setTimeout(()=>{h=!1},0),w(l))},{passive:!0,capture:f}),C(a,"pointerdown",l=>{const i=x(t);r=!n(l)&&!!(i&&!l.composedPath().includes(i))},{passive:!0}),v&&C(a,"blur",l=>{setTimeout(()=>{var i;const p=x(t);((i=a.document.activeElement)==null?void 0:i.tagName)==="IFRAME"&&!p?.contains(a.document.activeElement)&&e(l)},0)},{passive:!0})].filter(Boolean),W=()=>O.forEach(l=>l());return s?{stop:W,cancel:()=>{r=!1},trigger:l=>{r=!0,w(l),r=!1}}:W}const I=new WeakMap,pt={mounted(t,e){const o=!e.modifiers.bubble;let a;if(typeof e.value=="function")a=R(t,e.value,{capture:o});else{const[d,f]=e.value;a=R(t,d,Object.assign({capture:o},f))}I.set(t,a)},unmounted(t){const e=I.get(t);e&&typeof e=="function"?e():e?.stop(),I.delete(t)}};function M(t){return typeof Window<"u"&&t instanceof Window?t.document.documentElement:typeof Document<"u"&&t instanceof Document?t.documentElement:t}function G(t){const e=window.getComputedStyle(t);if(e.overflowX==="scroll"||e.overflowY==="scroll"||e.overflowX==="auto"&&t.clientWidth<t.scrollWidth||e.overflowY==="auto"&&t.clientHeight<t.scrollHeight)return!0;{const o=t.parentNode;return!o||o.tagName==="BODY"?!1:G(o)}}function mt(t){const e=t||window.event,o=e.target;return G(o)?!1:e.touches.length>1?!0:(e.preventDefault&&e.preventDefault(),!1)}const B=new WeakMap;function vt(t,e=!1){const o=V(e);let a=null,d="";P(ft(t),s=>{const r=M(m(s));if(r){const n=r;if(B.get(n)||B.set(n,n.style.overflow),n.style.overflow!=="hidden"&&(d=n.style.overflow),n.style.overflow==="hidden")return o.value=!0;if(o.value)return n.style.overflow="hidden"}},{immediate:!0});const f=()=>{const s=M(m(t));!s||o.value||(D&&(a=C(s,"touchmove",r=>{mt(r)},{passive:!1})),s.style.overflow="hidden",o.value=!0)},v=()=>{const s=M(m(t));!s||!o.value||(D&&a?.(),s.style.overflow=d,B.delete(s),o.value=!1)};return H(v),S({get(){return o.value},set(s){s?f():v()}})}function _t(){let t=!1;const e=V(!1);return(o,a)=>{if(e.value=a.value,t)return;t=!0;const d=vt(o,a.value);P(e,f=>d.value=f)}}_t();const ht={key:0,class:"tw-relative tw-border-b tw-border-gray-100 tw-mb-4 tw-py-1 tw-px-2 md:tw-px-6"},gt={class:"tw-flex tw-flex-wrap tw-gap-1 md:tw-gap-4 tw-w-full tw-items-center tw-justify-between tw-px-2"},yt={class:"tw-flex tw-gap-4 md:tw-items-center tw-justify-between tw-flex-1"},xt={class:"tw-flex-1 tw-flex tw-flex-col md:tw-flex-row md:tw-items-center tw-gap-1 md:tw-gap-4"},bt={class:"tw-text-gray-400 tw-text-left"},kt={class:"tw-flex-1 tw-text-sky-400 tw-line-clamp-1 tw-text-left"},Ct={class:"tw-flex tw-gap-4"},St={class:"tw-flex-1 tw-flex tw-flex-col md:tw-flex-row md:tw-items-center tw-gap-1 md:tw-gap-4"},Ot={class:"tw-text-gray-800 tw-text-left"},Et={class:"balance__pay-btn"},At={key:0,class:"tw-absolute tw-top-[50px] md:tw-top-[58px] tw-left-1 tw-right-1 tw-z-10 tw-pl-1 md:tw-pl-6 tw-pr-8 md:tw-pr-[60px] tw-bg-white tw-border tw-border-gray-100 tw-rounded tw-shadow-md"},Lt={class:"tw-flex-1 tw-flex tw-flex-col md:tw-flex-row md:tw-items-center tw-gap-1 md:tw-gap-4"},It={class:"tw-text-gray-400 tw-text-left"},Mt={class:"tw-flex-1 tw-text-sky-400 tw-line-clamp-1 tw-text-left"},Bt={class:"tw-flex tw-gap-4"},Dt={class:"tw-flex-1 tw-flex tw-flex-col md:tw-flex-row md:tw-items-center tw-gap-1 md:tw-gap-4"},Pt={class:"tw-text-gray-800 tw-text-left"},Wt={class:"balance__pay-btn"},jt={__name:"BlockBalanceAgreement",setup(t){const e=X(),o=at(),a=N(!1),d=S(()=>Object.keys(e?.contractsList||[]).map(n=>{const c=e?.contractsList[n];return(c.Orders>0||c.Balance>0)&&c.IsHidden===!1?{value:c.ID,name:c.Customer,balance:c.Balance}:null}).filter(n=>n!==null)),f=S(()=>d.value?.[0]||null);et(async()=>{await e.fetchContracts()});function v(r){o.push(`/Balance/${r}`)}function s(){a.value=!1}return(r,n)=>{const c=U,y=q;return f.value?nt((b(),k("div",ht,[u("div",gt,[u("div",yt,[u("div",xt,[u("div",bt,g(f.value.value.padStart(5,"0")),1),u("div",kt,g(f.value.name),1)]),u("div",Ct,[u("div",St,[n[2]||(n[2]=u("div",{class:"tw-text-gray-400 tw-text-left"},"Баланс",-1)),u("div",Ot,g(f.value.balance)+" ₽",1)]),u("div",Et,[A(c,{class:"btn-pay tw-m-0",label:"Пополнить",onClick:n[0]||(n[0]=ot(w=>v(f.value.value),["stop"]))})])])]),A(y,{onClick:n[1]||(n[1]=w=>a.value=!a.value),class:st(["tw-cursor-pointer tw-duration-300",{"tw-rotate-180":a.value}])},null,8,["class"])]),a.value?(b(),k("div",At,[(b(!0),k(lt,null,rt(d.value,w=>(b(),k("div",{key:w.value,class:"tw-flex md:tw-items-center tw-justify-between tw-gap-1 md:tw-gap-4 tw-w-full tw-p-2"},[u("div",Lt,[u("div",It,g(w.value.padStart(5,"0")),1),u("div",Mt,g(w.name),1)]),u("div",Bt,[u("div",Dt,[n[3]||(n[3]=u("div",{class:"tw-text-gray-400 tw-text-left"},"Баланс",-1)),u("div",Pt,g(w.balance)+" ₽",1)]),u("div",Wt,[A(c,{class:"btn-pay tw-m-0",label:"Пополнить",onClick:h=>v(w.value)},null,8,["onClick"])])])]))),128))])):T("",!0)])),[[F(pt),s]]):T("",!0)}}},Ft=it(jt,[["__scopeId","data-v-875df8c7"]]);export{Ft as _};
