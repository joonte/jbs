import{k as V,o as u,c as d,b as _,a as s,w as g,d as M,t as D,F as I,y as N,z as A,p as F,m as j,_ as z,u as O,f as R,h}from"./index-c781268b.js";import{u as q}from"./contracts-7e377877.js";import{u as G}from"./documents-b1a84c6f.js";import{f as H,a as J}from"./useTimeFunction-8602dd60.js";import{_ as x}from"./ButtonDefault-dafa6215.js";import{E}from"./EmptyStateBlock-8165a481.js";import{I as T}from"./IconDownload-b6c9efd3.js";import{B as L}from"./BlockBalanceAgreement-1d554184.js";import"./bootstrap-vue-next.es-c86262f3.js";import"./IconArrow-8731a209.js";const K=c=>(F("data-v-573a315d"),c=c(),j(),c),P={class:"section"},Q={class:"container"},U={class:"section-header"},W={class:"breadcrumb"},X=K(()=>s("h1",{class:"section-title"},"Документы",-1)),Y={key:0,class:"grid-section"},Z={class:"list-item"},$={class:"list-item__row"},oo={class:"list-item__row secondary-text"},to={class:"list-item"},no={class:"list-item__row"},eo={class:"list-item__row secondary-text"};function co(c,e,f,t,w,b){const v=L,m=V("router-link"),C=T,p=x,k=E;return u(),d(I,null,[_(v),s("div",P,[s("div",Q,[s("div",U,[s("div",W,[_(m,{class:"section-label",to:"/Contracts"},{default:g(()=>[M("Договор /")]),_:1}),_(m,{class:"section-label",to:`/ContractScheme/${c.$route.params.id}`},{default:g(()=>{var o;return[M(D((o=t.getContract)==null?void 0:o.Customer),1)]}),_:1},8,["to"])]),X]),t.filterDocuments(t.getMotionDocuments)&&t.filterDocuments(t.getMotionDocuments).length>0||t.filterDocuments(t.getContractDocuments)&&t.filterDocuments(t.getContractDocuments).length>0?(u(),d("div",Y,[(u(!0),d(I,null,N(t.filterDocuments(t.getMotionDocuments),o=>(u(),d("div",Z,[s("div",$,D(t.getMotionDocumentName(o==null?void 0:o.TypeID)),1),s("div",oo,D(t.getDocumentDate(o==null?void 0:o.CreateDate)),1),_(p,{class:"download-button",label:"Скачать",onClick:y=>t.downloadMotionDocument(o==null?void 0:o.ID)},{icon:g(()=>[_(C,{class:"download-icon"})]),_:2},1032,["onClick"])]))),256)),(u(!0),d(I,null,N(t.filterDocuments(t.getContractDocuments),o=>(u(),d("div",to,[s("div",no,D(t.getContractDocumentName(o==null?void 0:o.TypeID)),1),s("div",eo,D(t.getDocumentDate(o==null?void 0:o.CreateDate)),1),_(p,{class:"download-button",label:"Скачать",onClick:y=>t.downloadContractDocument(o==null?void 0:o.ID)},{icon:g(()=>[_(C,{class:"download-icon"})]),_:2},1032,["onClick"])]))),256))])):(u(),A(k,{key:1,label:"У вас пока что нету документов"}))])])],64)}const so={components:{IconDownload:T,ButtonDefault:x,EmptyStateBlock:E,BlockBalanceAgreement:L},async setup(){const c=q(),e=G(),f=O(),t=R(),w=h(()=>{var n;return(n=c==null?void 0:c.contractsList)==null?void 0:n[t.params.id]}),b=h(()=>e==null?void 0:e.motionDocumentsList),v=h(()=>e==null?void 0:e.contractDocumentsList),m=h(()=>f==null?void 0:f.ConfigList);function C(n){var a,r,l,i;return(i=(l=(r=(a=m.value)==null?void 0:a.MotionDocuments)==null?void 0:r.Types)==null?void 0:l[n])==null?void 0:i.Name}function p(n){var a,r,l,i,B;return(B=(i=(l=(r=(a=m.value)==null?void 0:a.Contracts)==null?void 0:r.Enclosures)==null?void 0:l.Types)==null?void 0:i[n])==null?void 0:B.Name}function k(n){return n?"от "+H(J(n)):""}function o(n){let a=[];return n&&Object.keys(n).forEach(r=>{var l,i;((l=n[r])==null?void 0:l.ContractID)===((i=w.value)==null?void 0:i.ID)&&a.push(n[r])}),a}function y(n){e.motionDocumentDownload({MotionDocumentID:n})}function S(n){e.contractEnclosureDownload({ContractEnclosureID:n})}return await c.fetchContracts(),await e.fetchMotionDocuments(),await e.fetchContractDocuments(),{getContract:w,getMotionDocuments:b,getContractDocuments:v,filterDocuments:o,getMotionDocumentName:C,getContractDocumentName:p,downloadMotionDocument:y,downloadContractDocument:S,getDocumentDate:k}}},po=z(so,[["render",co],["__scopeId","data-v-573a315d"]]);export{po as default};
