import{_ as lt}from"./EmptyStateBlock-D6U_EDq6.js";import{_ as it}from"./ParamsAccordionBlock-CgeOPqzt.js";import{_ as ut,a as dt,b as mt}from"./LastValueCard.vue_vue_type_script_setup_true_lang-5RmBvgAv.js";import{_ as vt,a as ct}from"./BlueButton.vue_vue_type_script_setup_true_lang-CJ9SxAW2.js";import{I as pt}from"./IconProfile-CLsn7h6L.js";import{r as wt}from"./bootstrap-vue-next-3DpAa4tb.js";import{_ as _t}from"./StatusBadge-B65ys1I-.js";import{_ as ft,a as gt}from"./CopyToClipboard.vue_vue_type_script_setup_true_lang-FiYxdMnt.js";import{_ as bt}from"./ClausesKeeper-DVJgfLR3.js";import{_ as Dt}from"./MessageInfo-AK7GfiHd.js";import{_ as It,f as St}from"./BlockBalanceAgreement-2iQbaweR.js";import{u as ht,x as xt,r as D,f as _,H as yt,g as Ot,c as d,b as o,a as s,C as M,h as m,F as B,t as n,w as c,E as kt,e as r,v as I,I as Nt,K as Pt,d as Ht,o as l}from"./index-CipWZKo_.js";import{u as Ct}from"./testTransforms-CtLjUrql.js";import{f as A}from"./time-DenPiOX5.js";import{u as $t}from"./hosting-Fz3P7c2t.js";import{u as Mt}from"./server-DA2BhLHe.js";import{u as Bt}from"./global-Fil99La8.js";import"./contracts-CILh9uSu.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./IconSettings-6AAphU28.js";import"./services-Dmz4Qt8q.js";import"./IconCopy-DWHHygte.js";import"./IconClose-ChC2G6HM.js";import"./ButtonDefault-CghIUDY0.js";const At={class:"tw-px-4 md:tw-px-8"},Lt={class:"section-title"},Rt=["href"],Tt={class:"tw-text-gray-500 tw-text-sm tw-mt-2"},Gt={class:"tw-flex tw-items-center tw-gap-8 tw-border-b tw-border-gray-200 tw-mt-4 tw-whitespace-nowrap tw-mb-6"},Vt={class:"tw-grid tw-grid-cols-1 lg:tw-grid-cols-2 tw-gap-4"},Et={class:"tw-border tw-border-gray-200 tw-rounded tw-p-4"},jt={class:"tw-grid tw-gap-4 tw-grid-cols-3"},Ut={class:"tw-col-span-3 tw-flex tw-items-center tw-justify-between tw-gap-2"},Wt={class:"tw-col-span-2 tw-flex tw-items-center tw-gap-1"},qt={class:"tw-break-all"},Ft={class:"tw-col-span-2 tw-flex tw-items-center tw-gap-1"},zt={class:"tw-col-span-2 tw-flex tw-flex-wrap tw-items-center tw-gap-2"},Kt={key:0,class:"tw-flex tw-items-center tw-gap-1"},Xt={class:"tw-col-span-2 tw-flex tw-items-center tw-gap-1"},Jt={class:"tw-col-span-2 tw-space-y-2"},Qt={key:0,class:"tw-flex tw-items-center tw-gap-1"},Yt={key:1,class:"tw-flex tw-items-center tw-gap-1"},Zt={key:2,class:"tw-flex tw-items-center tw-gap-1"},te={key:3,class:"tw-flex tw-items-center tw-gap-1"},ee={class:"tw-border tw-rounded tw-border-gray-200 tw-p-4"},se={class:"tw-flex tw-justify-between tw-items-center tw-gap-4"},oe={class:"tw-flex tw-items-center tw-gap-2"},ae={class:"tw-text-2xl"},ne={class:"tw-flex tw-flex-wrap tw-gap-x-4 tw-gap-y-2 tw-text-gray-500 tw-text-sm tw-mt-4"},re={key:0},le={key:1},ie={key:2},ue={class:"tw-space-y-4 tw-mt-4"},de={class:"list-item__row tw-gap-4 tw-mt-4"},me={class:"btn btn--border btn--switch tw-ml-0 tw-h-10 sm:tw-h-12"},ve={class:"tw-mt-4"},Te={__name:"HostingOrdersId",setup(ce){const f=Ot(),y=Ht(),w=$t(),O=Mt(),k=ht(),L=Bt(),{formDescriptionLine:S}=Ct(),p=xt("emitter");p.on("updateHostingIDPage",()=>{w.fetchHostingOrders()});const N=D(!1),g=D(!1),e=D(null),P=D(!0),u=_(()=>w.hostingSchemes?.[e.value?.SchemeID]),b=_(()=>O?.serverGroupsList?.Servers?.[e.value?.ServerID]),R=_(()=>{const a=e.value.Graphs?.Graphs;return a?Object.values(a):null}),T=_(()=>{const a=e.value.Graphs?.Last;return a?Object.values(a):null}),G=_(()=>{if(!e.value?.Domain)return"";const a=e.value.Domain;return a.startsWith("http://")||a.startsWith("https://")?a:`https://${a}`});function V(a){if(!a)return A(new Date);const t=new Date,h=new Date(t.getTime()+a*24*60*60*1e3);return A(h)}function E(a){p.emit("open-modal",{component:"StatusHistory",data:{modeID:"HostingOrders",rowID:a}})}function j(){e.value?.ID&&e.value?.ServiceID&&p.emit("open-modal",{component:"OrdersTransfer",data:{ServiceOrderID:e.value?.ID,ServiceID:e.value?.ServiceID}})}function U(){k.prolongOrder({IsAutoProlong:g.value?0:1,OrderID:e.value?.OrderID})}function W(){y.push(`/HostingOrders/${e.value?.OrderID}/SchemeChange`),H()}function q(){y.push(`/HostingOrderPay/${e.value?.OrderID}`)}function F(){L.OrderManageHosting({ServiceOrderID:e.value?.ID,OrderID:e.value?.OrderID,ServiceID:e.value?.ServiceID,XMLHttpRequest:"yes"})}function H(){p.emit("open-modal",{component:"HostingOrderSchemeChange",data:{hostingID:e.value?.ID,ServerGroup:u.value?.ServersGroupID,emitEvent:"updateHostingIDPage"}})}function C(){p.emit("open-modal",{component:"OrderPasswordChange",data:{OrderID:e.value?.ID,ServiceID:e.value?.ServiceID,emitEvent:"updateHostingIDPage"}})}function z(){p.emit("open-modal",{component:"OrderRestore",data:{OrderID:e.value?.OrderID,CostDay:u.value?.CostDay,DaysRemainded:e.value?.DaysRemainded,emitEvent:"updateHostingIDPage"}})}yt(async()=>{await w.fetchHostingSchemes(),await O.fetchServerGroups(),f.name==="HostingOrdersIdSchemeChange"&&H(),e.value=await w.fetchHostingOrder(f.params.id);const a=await k.fetchUserOrder(f.params.id);a&&(g.value=a.IsAutoProlong),P.value=!1});async function K(){e.value=await w.fetchHostingOrder(f.params.id)}return(a,t)=>{const h=It,X=Dt,$=kt("RouterLink"),J=bt,Q=vt,v=ft,Y=gt,Z=ut,tt=_t,x=wt,et=dt,st=pt,ot=ct,at=mt,nt=it,rt=lt;return l(),d(B,null,[o(h),s("div",At,[e.value?(l(),d(B,{key:0},[s("div",null,[s("h1",Lt,[s("a",{href:G.value,target:"_blank"},n(e.value.Domain),9,Rt)]),s("div",Tt,"Хостинг # "+n(e.value.OrderID),1),e.value.Message?(l(),M(X,{key:0,innerHTML:e.value.Message,class:"tw-mt-4"},null,8,["innerHTML"])):m("",!0),s("div",Gt,[o($,{class:"tw-py-2 tw-cursor-pointer -tw-mb-[1px]","active-class":"tw-text-sky-400 tw-border-b-2 tw-border-sky-400",to:`/HostingOrders/${e.value.OrderID}`},{default:c(()=>t[12]||(t[12]=[r(" Хостинг ",-1)])),_:1,__:[12]},8,["to"]),o($,{class:"tw-py-2 tw-cursor-pointer -tw-mb-[1px]","active-class":"tw-text-sky-400 tw-border-b-2 tw-border-sky-400",to:`/HostingServices/${e.value.OrderID}`},{default:c(()=>t[13]||(t[13]=[r(" Услуги ",-1)])),_:1,__:[13]},8,["to"])])]),o(J,{partition:"Header:/HostingOrders"}),s("div",Vt,[s("div",Et,[s("div",jt,[s("div",Ut,[t[15]||(t[15]=s("div",{class:"tw-text-2xl"},"Панель управления",-1)),o(Q,{onClick:t[0]||(t[0]=i=>F()),type:"small"},{default:c(()=>t[14]||(t[14]=[r("Вход",-1)])),_:1,__:[14]})]),t[17]||(t[17]=s("div",{class:"tw-flex tw-items-center tw-font-bold"},"Адрес",-1)),s("div",Wt,[s("div",qt,n(`https://${b.value?.Address}/manager`),1),o(v,{value:`https://${b.value?.Address}/manager`},null,8,["value"])]),t[18]||(t[18]=s("div",{class:"tw-flex tw-items-center tw-font-bold"},"Логин",-1)),s("div",Ft,[r(n(e.value.Login)+" ",1),o(v,{value:e.value.Login},null,8,["value"])]),t[19]||(t[19]=s("div",{class:"tw-flex tw-items-center tw-font-bold"},"Пароль",-1)),s("div",zt,[N.value?(l(),d("div",Kt,n(e.value.Password),1)):(l(),d("button",{key:1,class:"btn btn--border btn--md tw-h-8 tw-gap-1",onClick:t[1]||(t[1]=i=>N.value=!0)},[o(Y,{class:"tw-size-5"}),t[16]||(t[16]=r(" Показать ",-1))])),s("button",{class:"btn btn--border btn--md tw-h-8",onClick:t[2]||(t[2]=i=>C())},"Сменить пароль"),o(v,{value:e.value.Password},null,8,["value"])]),t[20]||(t[20]=s("div",{class:"tw-flex tw-items-center tw-font-bold"},"FTP, POP3, SMTP, IMAP",-1)),s("div",Xt,[r(n(b.value?.Address)+" ",1),o(v,{value:b.value?.Address},null,8,["value"])]),t[21]||(t[21]=s("div",{class:"tw-flex tw-font-bold"},"Именные сервера",-1)),s("div",Jt,[e.value.Ns1Name?(l(),d("div",Qt,[r(n(e.value.Ns1Name),1),o(v,{value:e.value.Ns1Name},null,8,["value"])])):m("",!0),e.value.Ns2Name?(l(),d("div",Yt,[r(n(e.value.Ns2Name),1),o(v,{value:e.value.Ns2Name},null,8,["value"])])):m("",!0),e.value.Ns3Name?(l(),d("div",Zt,[r(n(e.value.Ns3Name),1),o(v,{value:e.value.Ns3Name},null,8,["value"])])):m("",!0),e.value.Ns4Name?(l(),d("div",te,[r(n(e.value.Ns4Name),1),o(v,{value:e.value.Ns4Name},null,8,["value"])])):m("",!0)])])]),o(Z,{data:T.value,order:e.value,date:e.value.Graphs?.UpdateDate,type:"Hosting",onUpdated:t[3]||(t[3]=i=>K())},null,8,["data","order","date"]),s("div",ee,[s("div",se,[s("div",oe,[s("div",ae,n(u.value?.Name),1),o(tt,{status:e.value.StatusID,"status-table":"HostingOrders",onClick:t[4]||(t[4]=i=>E(e.value.ID))},null,8,["status"])]),o(et,null,{default:c(()=>[o(x,{onClick:t[5]||(t[5]=i=>W())},{default:c(()=>t[22]||(t[22]=[r("Изменить тариф",-1)])),_:1,__:[22]}),o(x,{onClick:t[6]||(t[6]=i=>z())},{default:c(()=>t[23]||(t[23]=[r("Просмотреть учет заказа",-1)])),_:1,__:[23]}),o(x,{onClick:t[7]||(t[7]=i=>C())},{default:c(()=>t[24]||(t[24]=[r("Сменить пароль",-1)])),_:1,__:[24]})]),_:1})]),s("div",ne,[u.value?.SchemeParams?.limit_webdomains?.Value?(l(),d("div",re,n(I(S)(u.value?.SchemeParams?.limit_webdomains)),1)):m("",!0),u.value?.SchemeParams?.limit_quota?.Value?(l(),d("div",le,n(I(S)(u.value?.SchemeParams?.limit_quota)),1)):m("",!0),u.value?.SchemeParams?.limit_emails?.Value?(l(),d("div",ie,n(I(S)(u.value?.SchemeParams?.limit_emails)),1)):m("",!0)]),s("div",ue,[s("div",null,n(I(St)(u.value?.CostMonth))+" в месяц",1),s("div",null,"Дней осталось "+n(e.value.DaysRemainded||0),1),s("div",null,"Дата окончания "+n(V(e.value.DaysRemainded)),1)]),s("div",de,[s("button",{class:"btn btn-default btn--blue",onClick:t[8]||(t[8]=i=>q())},n(e.value.StatusID==="Waiting"?"Оплатить":"Продлить"),1),s("label",me,[Nt(s("input",{type:"checkbox","onUpdate:modelValue":t[9]||(t[9]=i=>g.value=i),onInput:t[10]||(t[10]=i=>U())},null,544),[[Pt,g.value]]),t[25]||(t[25]=s("span",{class:"btn-switch__text"},"Автопродление",-1)),t[26]||(t[26]=s("span",{class:"btn-switch__toggle"},null,-1))])]),s("div",ve,[o(ot,{onClick:t[11]||(t[11]=i=>j())},{default:c(()=>[o(st),t[27]||(t[27]=s("div",null,"Передать на другой аккаунт",-1))]),_:1,__:[27]})])]),o(at,{data:R.value},null,8,["data"])]),o(nt,{"params-list":u.value?.SchemeParams,label:"Общая информация","main-param":"InternalName"},null,8,["params-list"])],64)):P.value?m("",!0):(l(),M(rt,{key:1,label:"Заказ не найден"}))])],64)}}};export{Te as default};
