import{L as E}from"./bootstrap-vue-next-W16P-SAV.js";import{_ as F}from"./IconCard-C_8uFbeS.js";import{_ as M}from"./StatusBadge-BmqDrHzy.js";import{_ as U}from"./ButtonDefault-CMw2aBy6.js";import{I as G,a as W,b as q,c as z}from"./IconServer-CSmkLUQN.js";import{_ as J}from"./ClausesKeeper-iUM0yapS.js";import{_ as K}from"./BlockBalanceAgreement-v_bWuiVT.js";import{u as Q,D as X,E as v,f as w,o as Y,c as Z,b as o,a as e,w as n,v as D,F as h,G as tt,d as et,x as st,e as a,j as k,t as m}from"./index-Codq73aV.js";import{u as ot}from"./index-BO2gwtUe.js";import{g as rt}from"./common-DyknwSqv.js";import{_ as nt}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./IconClose-Dia1noy8.js";const it={class:"tw-px-4 md:tw-px-8"},lt={class:"tw-grid tw-grid-cols-1 md:tw-grid-cols-2 xl:tw-grid-cols-3 tw-gap-4"},at={class:"tw-p-4 tw-border tw-border-gray-200 tw-rounded-lg"},dt={class:"tw-p-4 tw-border tw-border-gray-200 tw-rounded-lg"},ct={class:"list-item__row icon-row tw-mt-2"},_t={class:"tw-p-4 tw-border tw-border-gray-200 tw-rounded-lg"},mt={class:"list-item__row icon-row tw-mt-2"},ut={class:"d-block"},pt={class:"d-block"},vt={class:"d-block"},wt={class:"btn__group"},bt=["onClick"],ft={__name:"Home",async setup(gt){let d,c;const I=[{key:"ID",label:"Заказ",variant:"td-gray td-order"},{key:"ContractID",label:"Договор",variant:"td-blue"},{key:"ServiceID",label:"Услуга",variant:"td-gray td-order"},{key:"Reason",label:"Осталось дн.",variant:"td-gray td-order"},{key:"StatusID",label:"Статус",sortable:!0,variant:"td-gray td-order"},{key:"controls",label:"",variant:"td-controls"}],u=Q(),b=X(),f=ot(),y=st("emitter");[d,c]=v(()=>u.fetchUserOrders()),await d,c(),[d,c]=v(()=>b.fetchServices()),await d,c(),[d,c]=v(()=>f.fetchContracts()),await d,c();const _=et(),C=w(()=>Object.keys(u?.userOrders).map(r=>u?.userOrders[r])?.reverse().filter(r=>r?.StatusID==="Deleted"||r?.StatusID==="Suspended"||r?.StatusID==="OnService"||r?.DaysRemainded>0&&r?.DaysRemainded<14)),x=w(()=>f?.contractsList),p=w(()=>b?.servicesList);function O(){_.go(0)}function $(r,t){let i=p.value[r.ServiceID]?.Code;_.push(rt(i,r.ID))}function P(r,t){let i="";t==="Default"?i="Orders":i=t+"Orders",y.emit("open-modal",{component:"StatusHistory",data:{modeID:i,rowID:r}})}function R(r){let t=p.value[r.ServiceID]?.Code;t==="Default"?_.push(`/ServiceOrderPay/${r.ID}`):_.push(`/${t}OrderPay/${r.ID}`)}return(r,t)=>{const i=K,H=J,V=G,l=tt("router-link"),B=W,L=q,N=z,g=U,T=M,j=F,A=E;return Y(),Z(h,null,[o(i),e("div",it,[e("h1",{class:"w-text-xl sm:tw-text-4xl tw-cursor-pointer tw-mb-4",onClick:t[0]||(t[0]=s=>O())}," Домашняя страница "),o(H,{partition:"Header:/Home"}),e("div",lt,[e("div",at,[t[8]||(t[8]=e("div",{class:"tw-text-xl"},"Услуги",-1)),o(l,{class:"list-item__row icon-row tw-mt-4",to:"/HostingOrders"},{default:n(()=>[o(V),t[4]||(t[4]=a(" Заказать хостинг ",-1))]),_:1,__:[4]}),o(l,{class:"list-item__row icon-row",to:"/DomainOrders"},{default:n(()=>[o(B),t[5]||(t[5]=a(" Заказать домен ",-1))]),_:1,__:[5]}),o(l,{class:"list-item__row icon-row",to:"/DSOrders"},{default:n(()=>[o(L),t[6]||(t[6]=a(" Заказать выделенный сервер ",-1))]),_:1,__:[6]}),o(l,{class:"list-item__row icon-row",to:"/VPSOrders"},{default:n(()=>[o(N),t[7]||(t[7]=a(" Заказать VPS/VDS сервер ",-1))]),_:1,__:[7]})]),e("div",dt,[e("div",null,[t[10]||(t[10]=e("div",{class:"list-item__row"},[e("div",{class:"list-item__title"},"Мой офис")],-1)),o(l,{class:"list-item__row icon-row",to:"/Contracts"},{default:n(()=>t[9]||(t[9]=[a(" Мои договора ",-1)])),_:1,__:[9]})]),e("div",ct,[o(g,{label:"Создать договор",onClick:t[1]||(t[1]=s=>D(_).push("/ContractMake"))})])]),e("div",_t,[e("div",null,[t[13]||(t[13]=e("div",{class:"list-item__row"},[e("div",{class:"list-item__title"},"Поддержка")],-1)),o(l,{class:"list-item__row icon-row",to:"/Tickets"},{default:n(()=>t[11]||(t[11]=[a(" Тикеты ",-1)])),_:1,__:[11]}),o(l,{class:"list-item__row icon-row",to:"/Contacts"},{default:n(()=>t[12]||(t[12]=[a(" Контакты ",-1)])),_:1,__:[12]})]),e("div",mt,[o(g,{label:"Создать тикет",onClick:t[2]||(t[2]=s=>D(_).push("/NewTicket"))})])])]),t[19]||(t[19]=e("div",{class:"section-header"},[e("h2",{class:"sub-section-title"},"Требует внимания")],-1)),o(A,{class:"basic-table",items:C.value,fields:I,"show-empty":!0,"per-page":5,page:1,"empty-text":"Пока не требуется никаких действий","empty-filtered-text":"Пока не требуется никаких действий",onRowClicked:t[3]||(t[3]=(s,S,St)=>$(s))},{"cell(ID)":n(s=>[t[14]||(t[14]=e("span",{class:"td-mobile"},"Заказ",-1)),e("span",ut,m(s.value),1)]),"cell(ContractID)":n(s=>[t[15]||(t[15]=e("span",{class:"td-mobile"},"Договор",-1)),e("span",null,m(x.value[s.value]?.Customer),1)]),"cell(ServiceID)":n(s=>[t[16]||(t[16]=e("span",{class:"td-mobile"},"Услуга",-1)),e("span",pt,m(p.value[s.value]?.Name),1)]),"cell(Reason)":n(s=>[t[17]||(t[17]=e("span",{class:"td-mobile"},"Осталось дн.",-1)),e("span",vt,m(s.item?.DaysRemainded||0),1)]),"cell(StatusID)":n(s=>[o(T,{class:"clickable-element tw-cursor-pointer",status:s.value,"status-table":"Orders",onClick:k(S=>P(s.item?.ServiceOrderID,s.item?.Code),["stop"])},null,8,["status","onClick"])]),"cell(controls)":n(s=>[e("div",wt,[e("button",{class:"btn btn-default btn--border",onClick:k(S=>R(s.item),["stop"])},[o(j),t[18]||(t[18]=e("div",null,"ОПЛАТИТЬ",-1))],8,bt)])]),_:1},8,["items"])])],64)}}},Bt=nt(ft,[["__scopeId","data-v-ca552e5c"]]);export{Bt as default};
