import{_ as tt}from"./ButtonDefault-a8aacc82.js";import{_ as st}from"./BlockOrderPayBalance-a68e17cc.js";import{_ as et}from"./BlockSelectContract-c1497cc9.js";import{_ as lt}from"./ClausesKeeper-9aa8ead7.js";import{_ as ot,a6 as at,e as ct,R as it,r as S,g,af as O,o as u,c as v,a as s,t as a,b as x,F as C,v as H,k as nt,Y as J,ad as Q,p as _t,l as rt}from"./index-ed1f28f8.js";import{u as dt}from"./dedicatedServer-6a47cd5c.js";import{u as ut}from"./contracts-cedf6a91.js";import"./bootstrap-vue-next.es-79226723.js";import"./IconHelp-730981ad.js";import"./globalActions-55d313ae.js";import"./BasicInput-13cf2877.js";import"./component2-08856ab6.js";import"./component-cdbc2d35.js";import"./multiselect-198a8c51.js";import"./IconClose-a1e58263.js";const h=m=>(_t("data-v-97fa86b2"),m=m(),rt(),m),vt={class:"dedicated-server-order"},bt={class:"section"},pt={class:"container"},ht={class:"section-header"},mt={class:"section-title"},ft=h(()=>s("div",{class:"section-label"},"Выделенный сервер",-1)),Dt={class:"section"},kt={class:"container"},xt={class:"list"},yt={class:"list-col list-col--xl"},It={class:"list-item"},wt=h(()=>s("div",{class:"list-item__row"},[s("div",{class:"list-item__title"},"Конфигурация")],-1)),St={class:"list-item__row list-item__table"},gt={class:"list-item__table-col"},Ot={class:"list-item__label"},Ct={class:"list-item__text"},Bt=h(()=>s("div",{class:"section"},[s("div",{class:"container"},[s("div",{class:"section-subtitle"},"Что входит в стоимость"),s("div",{class:"text"},[s("p",null,"Для подключения дополнительных услуг"),s("ul",null,[s("li",null,"Размещение в РФ, Москва"),s("li",null,"IP адрес, с возможностью расширения"),s("li",null,"Бесплатная панель управления ISPManager Lite"),s("li",null,"Круглосуточная поддержка")])])])],-1)),Et={class:"section"},Pt={class:"container"},Vt={class:"total-block"},$t={class:"total-block__row divider-bottom"},Ft=h(()=>s("div",{class:"total-block__col"},"Цена тарифа",-1)),Nt={class:"total-block__col"},Lt={class:"total-block__row no-divider"},Rt={class:"total-block__col"},Ut={class:"total-block__col"},At={class:"total-block__row total-block__row--big economy-line"},Tt=h(()=>s("div",{class:"total-block__col red"},"Выгода",-1)),jt={class:"total-block__col flex-col"},Kt={class:"red"},Mt={class:"total-block__row total-block__row--big"},Yt={class:"total-block__col"},qt={class:"total-block__col"},zt={__name:"DSSchemesOrder",async setup(m){let n,_;const B=ut(),c=dt(),E=at(),P=ct();it("emitter");const o=S(null),f=S(!1),i=S(null),b=g(()=>B.contractsList),r=g(()=>c==null?void 0:c.DSSchemes),y=g(()=>{var t;return(t=r==null?void 0:r.value)==null?void 0:t[E.params.id]});function W(t){o.value=t}function V(){var l,p;let t=0;return(p=(l=o.value)==null?void 0:l.discounts)==null||p.Bonuses.map(d=>{t+=+d.Economy}),t}function D(t){return Number(t).toFixed(2)||0}function X(){var l;const t=(l=r==null?void 0:r.value)==null?void 0:l[E.params.id];return[{label:"Процессор",text:(t==null?void 0:t.CPU)||"-"},{label:"Объём оперативной памяти",text:(t==null?void 0:t.ram)||"-"},{label:"Характеристики жёстких дисков",text:(t==null?void 0:t.disks)||"-"},{label:"Предустановленная ОС",text:(t==null?void 0:t.OS)||"-"},{label:"RAID",text:(t==null?void 0:t.raid)||"-"},{label:"Месячный трафик",text:t!=null&&t.trafflimit?`${t==null?void 0:t.trafflimit} ГБ`:"-"},{label:"Скорость канала",text:t!=null&&t.chrate?`${t==null?void 0:t.chrate} Мбит/с`:"-"}]}function Z(){f.value=!0,c.DSOrder({ContractID:i.value,DSSchemeID:y.value.ID}).then(({result:t,info:l,error:p})=>{var d;t==="SUCCESS"?c.DSOrderPay({DSOrderID:l==null?void 0:l.DSOrderID,DaysPay:(d=o.value)==null?void 0:d.actualDays,IsChange:!0}).then(I=>{let{result:k,error:w}=I;k==="SUCCESS"?P.push("/DSOrders"):k==="BASKET"&&P.push("/Basket"),f.value=!1}):f.value=!1})}return[n,_]=O(()=>c.fetchDSOrders()),await n,_(),[n,_]=O(()=>c.fetchDSSchemes()),await n,_(),[n,_]=O(()=>B.fetchContracts().then(()=>{var t;b.value&&(i.value=(t=Object.keys(b==null?void 0:b.value))==null?void 0:t[0])})),await n,_(),(t,l)=>{var w,$,F,N,L,R,U,A,T,j,K,M,Y,q,z,G;const p=lt,d=et,I=st,k=tt;return u(),v("div",vt,[s("div",bt,[s("div",pt,[s("div",ht,[s("h1",mt,a((w=y.value)==null?void 0:w.Name),1),ft]),x(p)])]),s("div",Dt,[s("div",kt,[s("div",xt,[s("div",yt,[s("div",It,[wt,s("div",St,[(u(!0),v(C,null,H(X(),e=>(u(),v("div",gt,[s("div",Ot,a(e.label),1),s("div",Ct,a(e.text),1)]))),256))])])])])])]),Bt,x(d,{title:"Оформление услуги",modelValue:i.value,"onUpdate:modelValue":l[0]||(l[0]=e=>i.value=e)},null,8,["modelValue"]),x(I,{contractID:i.value,scheme:y.value,serviceID:"40000",isOrderID:!1,onSelect:W},null,8,["contractID","scheme"]),s("div",Et,[s("div",Pt,[s("div",Vt,[((N=(F=($=o.value)==null?void 0:$.discounts)==null?void 0:F.Bonuses)==null?void 0:N.length)>0?(u(),v(C,{key:0},[s("div",$t,[Ft,s("div",Nt,a(D((L=o.value)==null?void 0:L.price))+" ₽",1)]),(u(!0),v(C,null,H((U=(R=o.value)==null?void 0:R.discounts)==null?void 0:U.Bonuses,e=>(u(),v("div",Lt,[s("div",Rt,"Скидка "+a(e==null?void 0:e.Discount)+"% на "+a(e==null?void 0:e.Days)+" дней",1),s("div",Ut,"-"+a(D(e==null?void 0:e.Economy))+" ₽",1)]))),256))],64)):nt("",!0),J(s("div",At,[Tt,s("div",jt,[s("span",null,[s("s",null,a(D((A=o.value)==null?void 0:A.price))+" ₽",1)]),s("span",Kt,"-"+a(V())+" ₽",1)])],512),[[Q,((K=(j=(T=o.value)==null?void 0:T.discounts)==null?void 0:j.Bonuses)==null?void 0:K.length)>0]]),J(s("div",Mt,[s("div",Yt,"Итого за "+a((M=o.value)==null?void 0:M.label),1),s("div",qt,a(D(((Y=o.value)==null?void 0:Y.price)-V()))+" ₽",1)],512),[[Q,(q=o.value)==null?void 0:q.price]])]),x(k,{class:"btn--wide",label:((z=b.value[i.value])==null?void 0:z.Balance)>((G=o.value)==null?void 0:G.price)?"Оплатить c баланса договора":"Добавить в корзину",disabled:o.value===null||i.value===null,"is-loading":f.value,onClick:l[1]||(l[1]=e=>Z())},null,8,["label","disabled","is-loading"])])])])}}},ns=ot(zt,[["__scopeId","data-v-97fa86b2"]]);export{ns as default};
