import{_ as g}from"./ButtonDefault-11c4541b.js";import{_ as B}from"./BasicInput-67b26a5e.js";import{_ as I,r as d,e as S,U as y,h as w,i as F,P as M,o as U,c as x,b as i,p as D,m as E,a as f}from"./index-aeb1df1e.js";import{u as L}from"./IconArrow-a6c91ada.js";import{_ as v}from"./BlockSelectContract-9de95b8e.js";import"./component-60ac2998.js";import"./multiselect-3fbc9d28.js";const b=l=>(D("data-v-3d2c60a9"),l=l(),E(),l),$={class:"modal__body"},N=b(()=>f("div",{class:"list-item__title"},"Перевод средств между счетами",-1)),W=b(()=>f("div",{class:"modal__input-row"},null,-1)),j={__name:"ModalWindowFundsTransfer",props:["data"],emits:["modalClose","buttonClicked"],setup(l,{emit:C}){const n=L(),a=d(null),s=d(null),u=d(null),r=d(!1);S(),y("emitter");const V=w(()=>n==null?void 0:n.contractsList);function k(t){const e=Object.values(V.value).find(m=>m.ID===t);e&&(u.value=e.Balance)}function _(){C("modalClose")}function c(){r.value=!0;const t={FromContractID:a.value,ToContractID:s.value,Summ:u.value};n.FundsTransfer(t).then(e=>{e.status==="success"&&_(),r.value=!1})}const p=t=>{t.key==="Enter"&&c()};return F(()=>{document.addEventListener("keyup",p),n.fetchContracts(),console.log(1)}),M(()=>{document.removeEventListener("keyup",p)}),(t,e)=>{const m=B,T=g;return U(),x("div",$,[N,W,i(v,{title:"Откуда",modelValue:a.value,"onUpdate:modelValue":[e[0]||(e[0]=o=>a.value=o),k],isBalance:!0,onButtonClicked:e[1]||(e[1]=o=>_())},null,8,["modelValue"]),i(v,{title:"Куда",isTransfer:!0,modelValue:s.value,"onUpdate:modelValue":e[2]||(e[2]=o=>s.value=o),onButtonClicked:e[3]||(e[3]=o=>_())},null,8,["modelValue"]),i(m,{label:"Сумма",name:"Summ",placeholder:"199.99",modelValue:u.value,"onUpdate:modelValue":e[4]||(e[4]=o=>u.value=o)},null,8,["modelValue"]),i(T,{class:"modal__button",label:"Сохранить",disabled:a.value===null||s.value===null,"is-loading":r.value,onClick:e[5]||(e[5]=o=>c())},null,8,["disabled","is-loading"])])}}},G=I(j,[["__scopeId","data-v-3d2c60a9"]]);export{G as default};
