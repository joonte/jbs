import{j as vt,o as p,c as D,a as t,t as a,b as l,w as f,d as I,Y as y,ad as E,k as ut,Z as ht,p as pt,l as Dt,_ as ft,a6 as It,e as St,f as Ot,R as wt,r as lt,g as S}from"./index-1c309346.js";import{_ as Ht}from"./IconCard-ee273855.js";import{I as bt}from"./IconProfile-2b218342.js";import{I as Pt}from"./IconSettings-f951b6bf.js";import{I as ct}from"./IconEye-8da636ee.js";import{S as _t}from"./StatusBadge-a49537d5.js";import{h as kt}from"./hostStatuses-94d00f20.js";import{u as Ct}from"./testTransforms-eec373ee.js";import{u as yt}from"./hosting-fd5f9472.js";import{u as Nt}from"./resetServer-44295bca.js";import{u as xt}from"./globalActions-8efdfe11.js";import{_ as dt}from"./ClausesKeeper-b9906182.js";import{_ as mt}from"./ServicesContractBalanceBlock-bb65f032.js";import{s as gt}from"./SettingsEngineItem-b0b238e3.js";import{E as At}from"./EmptyStateBlock-5a6a4cd4.js";import{_ as Vt}from"./paramsAccordionBlock-10c330d0.js";import{_ as Bt}from"./ButtonDefault-cd183bf8.js";import{z as Et}from"./bootstrap-vue-next.es-b799f76d.js";import"./IconClose-7cf50ca7.js";import"./contracts-7b919c67.js";import"./IconArrow-6927efe5.js";const d=g=>(pt("data-v-ca440e1e"),g=g(),Dt(),g),Mt={key:0,class:"my-hosting-order"},Rt={class:"section"},Tt={class:"container"},Lt={class:"section-header"},Gt={class:"section-title"},jt={class:"section-label"},Ut={class:"section-nav"},qt={class:"list"},zt={class:"list-col list-col--md"},Wt={class:"list-item"},Ft={class:"list-item__row"},Kt={class:"list-item__title"},Yt={class:"list-item__status"},Zt={class:"list-item__row"},Jt={class:"list-item__ul"},Qt={class:"list-item__row list-item__row--column"},Xt={class:"list-item__text"},$t={key:0,class:"list-item__text"},te={class:"list-item__row"},ee={class:"btn btn--border btn--switch"},se=d(()=>t("span",{class:"btn-switch__text"},"Автопродление",-1)),oe=d(()=>t("span",{class:"btn-switch__toggle"},null,-1)),ie={class:"list-col list-col--md"},ne={class:"list-item"},ae={class:"list-item__row"},re=d(()=>t("div",{class:"list-item__title"},"Панель управления",-1)),le={class:"list-item__row list-item__row--table"},ce=d(()=>t("div",{class:"list-item__item"},"Адрес",-1)),_e={class:"list-item__item"},de={class:"list-item__row list-item__row--table"},me=d(()=>t("div",{class:"list-item__item"},"Логин",-1)),ge={class:"list-item__item"},ve={class:"list-item__row list-item__row--table"},ue=d(()=>t("div",{class:"list-item__item"},"Пароль",-1)),he={class:"list-item__item hide-button"},pe={key:0,class:"password-hidden"},De={class:"list-item__row list-item__row--table"},fe=d(()=>t("div",{class:"list-item__item"},"FTP, POP3, SMTP, IMAP",-1)),Ie={class:"list-item__item"},Se={class:"list-col list-col--md"},Oe={class:"list-item"},we=d(()=>t("div",{class:"list-item__row"},[t("div",{class:"list-item__title"},"Именные сервера")],-1)),He={class:"list-item__row list-item__row--table"},be={class:"list-item__item"},Pe={class:"list-item__item"},ke={class:"list-item__item"},Ce={class:"list-item__item"},ye={key:1,class:"section"},Ne={class:"container"};function xe(g,i,r,e,v,M){var w,H,b,P,k,C,s,o,c,R,T,L,G,j,U,q,z,W,F,K,Y,Z,J,Q,X,$,tt,et,st,ot,it,nt,at,rt;const N=vt("router-link"),m=dt,x=mt,u=_t,n=Et,A=gt,h=Bt,O=ct,V=Vt,B=At;return(w=e.getHostingOrderData)!=null&&w.ID?(p(),D("div",Mt,[t("div",Rt,[t("div",Tt,[t("div",Lt,[t("h1",Gt,a((H=e.getHostingOrderData)==null?void 0:H.Domain),1),t("div",jt,"Хостинг # "+a((b=e.getHostingOrderData)==null?void 0:b.OrderID),1),t("div",Ut,[l(N,{class:"section-nav__item",to:`/HostingOrders/${(P=e.getHostingOrderData)==null?void 0:P.OrderID}`},{default:f(()=>[I("Хостинг")]),_:1},8,["to"])])]),l(m,{partition:"Header:/HostingOrders"}),t("div",qt,[l(x,{"contract-id":(k=e.getHostingOrderData)==null?void 0:k.ContractID,onTransfer:i[0]||(i[0]=_=>e.transferItem())},null,8,["contract-id"]),t("div",zt,[t("div",Wt,[t("div",Ft,[t("div",Kt,a((C=e.getHostingScheme)==null?void 0:C.Name),1),t("div",Yt,[l(u,{status:(s=e.getHostingOrderData)==null?void 0:s.StatusID,"status-table":"HostingOrders"},null,8,["status"])]),l(A,null,{default:f(()=>[l(n,{onClick:i[1]||(i[1]=_=>e.openPackageChangeModal())},{default:f(()=>[I("Изменить тариф")]),_:1}),l(n,{onClick:i[2]||(i[2]=_=>e.openOrderRestore())},{default:f(()=>[I("Просмотреть учет заказа")]),_:1}),l(n,{onClick:i[3]||(i[3]=_=>e.openPasswordChange())},{default:f(()=>[I("Сменить пароль от аккаунта")]),_:1})]),_:1})]),t("div",Zt,[t("ul",Jt,[y(t("li",null,a(e.formDescriptionLine((c=(o=e.getHostingScheme)==null?void 0:o.SchemeParams)==null?void 0:c.limit_webdomains)),513),[[E,(L=(T=(R=e.getHostingScheme)==null?void 0:R.SchemeParams)==null?void 0:T.limit_webdomains)==null?void 0:L.Value]]),y(t("li",null,a(e.formDescriptionLine((j=(G=e.getHostingScheme)==null?void 0:G.SchemeParams)==null?void 0:j.limit_quota)),513),[[E,(z=(q=(U=e.getHostingScheme)==null?void 0:U.SchemeParams)==null?void 0:q.limit_quota)==null?void 0:z.Value]]),y(t("li",null,a(e.formDescriptionLine((F=(W=e.getHostingScheme)==null?void 0:W.SchemeParams)==null?void 0:F.limit_emails)),513),[[E,(Z=(Y=(K=e.getHostingScheme)==null?void 0:K.SchemeParams)==null?void 0:Y.limit_emails)==null?void 0:Z.Value]])])]),t("div",Qt,[t("div",Xt,a((J=e.getHostingScheme)==null?void 0:J.CostMonth)+" ₽ в месяц",1),((Q=e.getHostingOrderData)==null?void 0:Q.StatusID)!=="Waiting"?(p(),D("div",$t,"Дней осталось "+a(((X=e.getHostingOrderData)==null?void 0:X.DaysRemainded)||0),1)):ut("",!0)]),t("div",te,[t("div",{class:"btn btn-default btn--blue",onClick:i[4]||(i[4]=_=>e.navigateToProlong())},a((($=e.getHostingOrderData)==null?void 0:$.StatusID)==="Waiting"?"Оплатить":"Продлить"),1),t("label",ee,[y(t("input",{type:"checkbox","onUpdate:modelValue":i[5]||(i[5]=_=>e.isAutoProlong=_),onInput:i[6]||(i[6]=_=>e.setProlongValue())},null,544),[[ht,e.isAutoProlong]]),se,oe])])])]),t("div",ie,[t("div",ne,[t("div",ae,[re,l(h,{class:"ml-auto",onClick:i[7]||(i[7]=_=>e.orderManage()),label:"Вход"})]),t("div",le,[ce,t("div",_e,a(`https://${(tt=e.getServerGroup)==null?void 0:tt.Address}/manager`),1)]),t("div",de,[me,t("div",ge,a((et=e.getHostingOrderData)==null?void 0:et.Login),1)]),t("div",ve,[ue,t("div",he,[e.passwordShow?(p(),D("div",pe,a(e.getHostingOrderData.Password),1)):(p(),D("button",{key:1,class:"btn btn--border btn--md hide-button",onClick:i[8]||(i[8]=_=>e.passwordShow=!0)},[l(O),I("Показать")]))])]),t("div",De,[fe,t("div",Ie,a((st=e.getServerGroup)==null?void 0:st.Address),1)])])]),t("div",Se,[t("div",Oe,[we,t("div",He,[t("div",be,a((ot=e.getHostingOrderData)==null?void 0:ot.Ns1Name),1),t("div",Pe,a((it=e.getHostingOrderData)==null?void 0:it.Ns2Name),1),t("div",ke,a((nt=e.getHostingOrderData)==null?void 0:nt.Ns3Name),1),t("div",Ce,a((at=e.getHostingOrderData)==null?void 0:at.Ns4Name),1)])])])])])]),l(V,{"params-list":(rt=e.getHostingScheme)==null?void 0:rt.SchemeParams,label:"Общая информация","main-param":"InternalName"},null,8,["params-list"])])):(p(),D("div",ye,[t("div",Ne,[l(B,{label:"Заказ не найден"})])]))}const Ae={components:{IconCard:Ht,IconProfile:bt,IconSettings:Pt,IconEye:ct,StatusBadge:_t,ClausesKeeper:dt,settingsEngineItem:gt,ServicesContractBalanceBlock:mt},async setup(){const g=It(),i=St(),r=yt(),e=Nt(),v=Ot(),M=xt(),{formDescriptionLine:N}=Ct(),m=wt("emitter");m.on("updateHostingIDPage",()=>{r.fetchHostingOrders()});const x=lt(!1),u=lt(!1),n=S(()=>Object.keys(r==null?void 0:r.hostingList).map(s=>r==null?void 0:r.hostingList[s]).find(s=>s.OrderID===g.params.id)),A=S(()=>r==null?void 0:r.hostingSchemes),h=S(()=>{var s,o;return(o=A.value)==null?void 0:o[(s=n.value)==null?void 0:s.SchemeID]}),O=S(()=>{var s,o;return(o=v==null?void 0:v.userOrders)==null?void 0:o[(s=n.value)==null?void 0:s.OrderID]}),V=S(()=>{var s,o,c;return(c=(s=e==null?void 0:e.serverGroupsList)==null?void 0:s.Servers)==null?void 0:c[(o=n.value)==null?void 0:o.ServerID]});function B(){var s,o;m.emit("open-modal",{component:"OrdersTransfer",data:{ServiceOrderID:(s=n.value)==null?void 0:s.ID,ServiceID:(o=n.value)==null?void 0:o.ServiceID}})}function w(){var s;v.prolongOrder({IsAutoProlong:u.value?0:1,OrderID:(s=n.value)==null?void 0:s.OrderID})}function H(){var s;i.push(`/HostingOrderPay/${(s=n.value)==null?void 0:s.OrderID}`)}function b(){var s,o,c;M.OrderManage({ServiceOrderID:(s=n.value)==null?void 0:s.ID,OrderID:(o=n.value)==null?void 0:o.OrderID,ServiceID:(c=n.value)==null?void 0:c.ServiceID})}function P(){var s,o;m.emit("open-modal",{component:"HostingOrderSchemeChange",data:{hostingID:(s=n.value)==null?void 0:s.ID,ServerGroup:(o=h.value)==null?void 0:o.ServersGroupID,emitEvent:"updateHostingIDPage"}})}function k(){var s,o;m.emit("open-modal",{component:"OrderPasswordChange",data:{OrderID:(s=n.value)==null?void 0:s.ID,ServiceID:(o=n.value)==null?void 0:o.ServiceID,emitEvent:"updateHostingIDPage"}})}function C(){var s,o,c;m.emit("open-modal",{component:"OrderRestore",data:{OrderID:(s=n.value)==null?void 0:s.OrderID,CostDay:(o=h.value)==null?void 0:o.CostDay,DaysRemainded:(c=n.value)==null?void 0:c.DaysRemainded,emitEvent:"updateHostingIDPage"}})}return await r.fetchHostingOrders(),await r.fetchHostingSchemes(),await e.fetchServerGroups(),await v.fetchUserOrders().then(()=>{var s;u.value=(s=O.value)==null?void 0:s.IsAutoProlong}),{getHostingOrderData:n,getHostingScheme:h,getUserOrder:O,getServerGroup:V,isAutoProlong:u,passwordShow:x,openOrderRestore:C,openPackageChangeModal:P,orderManage:b,navigateToProlong:H,setProlongValue:w,openPasswordChange:k,hostStatuses:kt,transferItem:B,formDescriptionLine:N}}},ts=ft(Ae,[["render",xe],["__scopeId","data-v-ca440e1e"]]);export{ts as default};
