import{_ as tt}from"./ButtonDefault-ceb0a858.js";import{_ as st}from"./BlockOrderPayBalance-69cf72c0.js";import{_ as et}from"./BlockSelectContract-cca1c41a.js";import{_ as lt}from"./ClausesKeeper-9fc4bc59.js";import{_ as ot,a7 as at,e as ct,R as it,r as S,g as B,ag as O,o as u,c as v,b as m,a as s,t as a,F as y,v as H,k as nt,Y as J,ae as Q,p as _t,l as rt}from"./index-1d7f6848.js";import{u as dt}from"./dedicatedServer-363de121.js";import{u as ut}from"./contracts-97246549.js";import{B as vt}from"./BlockBalanceAgreement-fc8b62a5.js";import"./bootstrap-vue-next.es-ee787e70.js";import"./IconHelp-2a46d2cf.js";import"./globalActions-890e9872.js";import"./BasicInput-a0e3c5c1.js";import"./component-0c0161e7.js";import"./multiselect-3f954972.js";import"./IconClose-b09002f7.js";import"./IconArrow-6ea40b14.js";const h=f=>(_t("data-v-718738d5"),f=f(),rt(),f),pt={class:"dedicated-server-order"},bt={class:"section"},mt={class:"container"},ht={class:"section-header"},ft={class:"section-title"},Dt=h(()=>s("div",{class:"section-label"},"Выделенный сервер",-1)),kt={class:"section"},xt={class:"container"},yt={class:"list"},It={class:"list-col list-col--xl"},gt={class:"list-item"},wt=h(()=>s("div",{class:"list-item__row"},[s("div",{class:"list-item__title"},"Конфигурация")],-1)),St={class:"list-item__row list-item__table"},Bt={class:"list-item__table-col"},Ot={class:"list-item__label"},Ct={class:"list-item__text"},Et=h(()=>s("div",{class:"section"},[s("div",{class:"container"},[s("div",{class:"section-subtitle"},"Что входит в стоимость"),s("div",{class:"text"},[s("p",null,"Для подключения дополнительных услуг"),s("ul",null,[s("li",null,"Размещение в РФ, Москва"),s("li",null,"IP адрес, с возможностью расширения"),s("li",null,"Бесплатная панель управления ISPManager Lite"),s("li",null,"Круглосуточная поддержка")])])])],-1)),Pt={class:"section"},Vt={class:"container"},$t={class:"total-block"},Ft={class:"total-block__row divider-bottom"},Nt=h(()=>s("div",{class:"total-block__col"},"Цена тарифа",-1)),At={class:"total-block__col"},Lt={class:"total-block__row no-divider"},Rt={class:"total-block__col"},Ut={class:"total-block__col"},Tt={class:"total-block__row total-block__row--big economy-line"},jt=h(()=>s("div",{class:"total-block__col red"},"Выгода",-1)),Kt={class:"total-block__col flex-col"},Mt={class:"red"},Yt={class:"total-block__row total-block__row--big"},qt={class:"total-block__col"},zt={class:"total-block__col"},Gt={__name:"DSSchemesOrder",async setup(f){let n,_;const C=ut(),c=dt(),E=at(),P=ct();it("emitter");const o=S(null),D=S(!1),i=S(null),p=B(()=>C.contractsList),r=B(()=>c==null?void 0:c.DSSchemes),I=B(()=>{var t;return(t=r==null?void 0:r.value)==null?void 0:t[E.params.id]});function W(t){o.value=t}function V(){var l,b;let t=0;return(b=(l=o.value)==null?void 0:l.discounts)==null||b.Bonuses.map(d=>{t+=+d.Economy}),t}function k(t){return Number(t).toFixed(2)||0}function X(){var l;const t=(l=r==null?void 0:r.value)==null?void 0:l[E.params.id];return[{label:"Процессор",text:(t==null?void 0:t.CPU)||"-"},{label:"Объём оперативной памяти",text:(t==null?void 0:t.ram)||"-"},{label:"Характеристики жёстких дисков",text:(t==null?void 0:t.disks)||"-"},{label:"Предустановленная ОС",text:(t==null?void 0:t.OS)||"-"},{label:"RAID",text:(t==null?void 0:t.raid)||"-"},{label:"Месячный трафик",text:t!=null&&t.trafflimit?`${t==null?void 0:t.trafflimit} ГБ`:"-"},{label:"Скорость канала",text:t!=null&&t.chrate?`${t==null?void 0:t.chrate} Мбит/с`:"-"}]}function Z(){D.value=!0,c.DSOrder({ContractID:i.value,DSSchemeID:I.value.ID}).then(({result:t,info:l,error:b})=>{var d;t==="SUCCESS"?c.DSOrderPay({DSOrderID:l==null?void 0:l.DSOrderID,DaysPay:(d=o.value)==null?void 0:d.actualDays,IsChange:!0}).then(g=>{let{result:x,error:w}=g;x==="SUCCESS"?P.push("/DSOrders"):x==="BASKET"&&P.push("/Basket"),D.value=!1}):D.value=!1})}return[n,_]=O(()=>c.fetchDSOrders()),await n,_(),[n,_]=O(()=>c.fetchDSSchemes()),await n,_(),[n,_]=O(()=>C.fetchContracts().then(()=>{var t;p.value&&(i.value=(t=Object.keys(p==null?void 0:p.value))==null?void 0:t[0])})),await n,_(),(t,l)=>{var w,$,F,N,A,L,R,U,T,j,K,M,Y,q,z,G;const b=lt,d=et,g=st,x=tt;return u(),v(y,null,[m(vt),s("div",pt,[s("div",bt,[s("div",mt,[s("div",ht,[s("h1",ft,a((w=I.value)==null?void 0:w.Name),1),Dt]),m(b)])]),s("div",kt,[s("div",xt,[s("div",yt,[s("div",It,[s("div",gt,[wt,s("div",St,[(u(!0),v(y,null,H(X(),e=>(u(),v("div",Bt,[s("div",Ot,a(e.label),1),s("div",Ct,a(e.text),1)]))),256))])])])])])]),Et,m(d,{title:"Оформление услуги",modelValue:i.value,"onUpdate:modelValue":l[0]||(l[0]=e=>i.value=e)},null,8,["modelValue"]),m(g,{contractID:i.value,scheme:I.value,serviceID:"40000",isOrderID:!1,onSelect:W},null,8,["contractID","scheme"]),s("div",Pt,[s("div",Vt,[s("div",$t,[((N=(F=($=o.value)==null?void 0:$.discounts)==null?void 0:F.Bonuses)==null?void 0:N.length)>0?(u(),v(y,{key:0},[s("div",Ft,[Nt,s("div",At,a(k((A=o.value)==null?void 0:A.price))+" ₽",1)]),(u(!0),v(y,null,H((R=(L=o.value)==null?void 0:L.discounts)==null?void 0:R.Bonuses,e=>(u(),v("div",Lt,[s("div",Rt,"Скидка "+a(e==null?void 0:e.Discount)+"% на "+a(e==null?void 0:e.Days)+" дней",1),s("div",Ut,"-"+a(k(e==null?void 0:e.Economy))+" ₽",1)]))),256))],64)):nt("",!0),J(s("div",Tt,[jt,s("div",Kt,[s("span",null,[s("s",null,a(k((U=o.value)==null?void 0:U.price))+" ₽",1)]),s("span",Mt,"-"+a(V())+" ₽",1)])],512),[[Q,((K=(j=(T=o.value)==null?void 0:T.discounts)==null?void 0:j.Bonuses)==null?void 0:K.length)>0]]),J(s("div",Yt,[s("div",qt,"Итого за "+a((M=o.value)==null?void 0:M.label),1),s("div",zt,a(k(((Y=o.value)==null?void 0:Y.price)-V()))+" ₽",1)],512),[[Q,(q=o.value)==null?void 0:q.price]])]),m(x,{class:"btn--wide",label:((z=p.value[i.value])==null?void 0:z.Balance)>((G=o.value)==null?void 0:G.price)?"Оплатить c баланса договора":"Добавить в корзину",disabled:o.value===null||i.value===null,"is-loading":D.value,onClick:l[1]||(l[1]=e=>Z())},null,8,["label","disabled","is-loading"])])])])],64)}}},rs=ot(Gt,[["__scopeId","data-v-718738d5"]]);export{rs as default};
