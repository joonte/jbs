import{o as w,c as b,b as u,a as e,t as D,Z as d,ag as _,p as S,m as I,_ as U,g as k,f as x,e as y,U as B,r as v,h,i as N}from"./index-aeb1df1e.js";import{u as P}from"./IconArrow-a6c91ada.js";import{s as C}from"./multiselect-3fbc9d28.js";import{B as g}from"./BlockBalanceAgreement-906c1168.js";import{_ as E}from"./ButtonDefault-11c4541b.js";import{_ as R}from"./ClausesKeeper-90c650cc.js";import"./bootstrap-vue-next.es-c6bcf011.js";import"./IconClose-c7c36336.js";const l=a=>(S("data-v-e7b69fa5"),a=a(),I(),a),V={class:"create-referral"},L={class:"section"},M={class:"container"},A={class:"section-header"},j=l(()=>e("h1",{class:"section-title"},"Создать реферала",-1)),H={class:"section-label"},O={class:"section"},T={class:"container"},Z={class:"create-referral__data"},q={class:"form-field"},z=l(()=>e("div",{class:"form-field__label"},"ФИО",-1)),F={class:"form-field"},G=l(()=>e("div",{class:"form-field__label"},"Email",-1)),J={class:"form-field"},K=l(()=>e("div",{class:"form-field__label"},"Пароль",-1)),Q={class:"form-field"},W=l(()=>e("div",{class:"form-field__label"},"Подтвердить пароль",-1)),X={class:"section"},Y={class:"container"},$={class:"create-referral__data"};function ee(a,s,p,o,i,n){var c;const r=g,m=R,f=E;return w(),b("div",V,[u(r),e("div",L,[e("div",M,[e("div",A,[j,e("div",H,D((c=o.getUserInfo)==null?void 0:c.Name),1)]),u(m)])]),e("div",O,[e("div",T,[e("div",Z,[e("label",q,[z,d(e("input",{type:"text",placeholder:"","onUpdate:modelValue":s[0]||(s[0]=t=>o.formData.Name=t)},null,512),[[_,o.formData.Name]])]),e("label",F,[G,d(e("input",{type:"text","onUpdate:modelValue":s[1]||(s[1]=t=>o.formData.Email=t)},null,512),[[_,o.formData.Email]])]),e("label",J,[K,d(e("input",{type:"password","onUpdate:modelValue":s[2]||(s[2]=t=>o.formData.Password=t)},null,512),[[_,o.formData.Password]])]),e("label",Q,[W,d(e("input",{type:"password","onUpdate:modelValue":s[3]||(s[3]=t=>o.formData._Password=t)},null,512),[[_,o.formData._Password]])])])])]),e("div",X,[e("div",Y,[e("div",$,[u(f,{class:"btn--wide",label:"Зарегистрировать","is-loading":o.isLoading,onClick:s[4]||(s[4]=t=>o.createReferral())},null,8,["is-loading"])])])])])}const se={components:{Multiselect:C,BlockBalanceAgreement:g},async setup(){const a=k(),s=P(),p=x(),o=y();B("emitter");const i=v(!1),n=v({Email:"",Name:"",Password:"",_Password:""}),r=h(()=>a.userInfo),m=h(()=>s.contractsList[p.params.id]);function f(){n.value.Email.length>0&&n.value.Password.length>0&&n.value.Name.length>0&&n.value._Password.length>0&&(i.value=!0,a.registerNewUser({...n.value}).then(c=>{const{response:t,error:oe}=c;t==="success"&&o.push({path:"/Home"}),i.value=!1}))}return N(()=>{console.log("depend2"),r.value&&r.value.ID&&(document.cookie=`OwnerID=${r.value.ID}; path=/; SameSite=Lax; Secure`,document.cookie="IsManaged=yes; path=/; SameSite=Lax; Secure",console.log(document.cookie))}),await a.fetchUserData(),await s.fetchContracts(),{formData:n,getUserInfo:r,getContract:m,isLoading:i,createReferral:f}}},_e=U(se,[["render",ee],["__scopeId","data-v-e7b69fa5"]]);export{_e as default};
