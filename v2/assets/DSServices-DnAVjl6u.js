import{_ as N}from"./LoadingIndicator-y8DeC9jv.js";import{_ as V}from"./EmptyStateBlock-DA3-0YDi.js";import{_ as $,a as L}from"./BlockDependentServices-DPC_LtYM.js";import{_ as j}from"./BlockAdditionalServices-Dc0oR6v8.js";import{_ as E}from"./ClausesKeeper-iUM0yapS.js";import{_ as G}from"./BlockBalanceAgreement-v_bWuiVT.js";import{P,u as R,r as f,f as u,E as U,o as c,c as O,b as s,a as d,t as F,w as b,C as I,F as T,x as K,G as q,i as z,e as x}from"./index-Codq73aV.js";import{u as H}from"./services-DyPBvbVy.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ButtonDefault-CMw2aBy6.js";import"./common-DyknwSqv.js";import"./BlueButton.vue_vue_type_script_setup_true_lang-BKdLNEec.js";import"./StatusBadge-BmqDrHzy.js";import"./bootstrap-vue-next-W16P-SAV.js";import"./InputServiceSelect-Dvi-CxI4.js";import"./InputSelect.vue_vue_type_script_setup_true_lang-D7E9_BoS.js";import"./IconChevronDown-DOsbTpSQ.js";import"./index-BO2gwtUe.js";import"./BasicInput-DeQAeyXe.js";import"./component-DqcwA9JN.js";import"./IconClose-Dia1noy8.js";const J={key:0,class:"tw-px-4 md:tw-px-8 tw-mb-6"},M={class:"tw-text-gray-500 tw-text-sm tw-mt-2"},Q={class:"tw-flex tw-items-center tw-gap-8 tw-border-b tw-border-gray-200 tw-mt-4 tw-whitespace-nowrap tw-mb-6"},fe={__name:"DSServices",async setup(W){let p,_;const k=z(),a=P(),v=H(),o=R();K("emitter").on("updateDSIDPage",()=>{o.fetchUserOrders()});const i=f([]),S=f(!0),e=u(()=>Object.values(a.dsOrders).find(n=>n.OrderID===Number(k.params.id))),w=u(()=>a.DSSchemes[e.value.SchemeID]),y=u(()=>{if(!e.value?.OrderID||!o?.userOrders)return[];const n=e.value.OrderID;return Object.keys(o.userOrders).map(r=>o.userOrders[r]).filter(r=>r.DependOrderID==n&&r.ServiceID&&v.ServicesList[r.ServiceID]).sort((r,l)=>Number(r?.ID)-Number(l?.ID))});return[p,_]=U(()=>Promise.all([a.fetchDSOrders(),a.fetchDSSchemes(),v.fetchServices(),o.fetchUserOrders()])),await p,_(),S.value=!1,(n,t)=>{const D=G,m=q("RouterLink"),r=E,l=$,g=j,h=L,B=V,A=N;return c(),O(T,null,[s(D,{"contract-id":e.value?.ContractID},null,8,["contract-id"]),e.value&&w.value?(c(),O("div",J,[t[3]||(t[3]=d("h1",{class:"tw-text-xl sm:tw-text-4xl"},"Дополнительные услуги",-1)),d("div",M,"Выделенный сервер # "+F(e.value.OrderID),1),d("div",Q,[s(m,{class:"tw-py-2 tw-cursor-pointer -tw-mb-[1px]","active-class":"tw-text-sky-400 tw-border-b-2 tw-border-sky-400",to:`/DSOrders/${e.value.OrderID}`},{default:b(()=>t[1]||(t[1]=[x(" Сервер ",-1)])),_:1,__:[1]},8,["to"]),s(m,{class:"tw-py-2 tw-cursor-pointer -tw-mb-[1px]","active-class":"tw-text-sky-400 tw-border-b-2 tw-border-sky-400",to:`/DSOrders/${e.value.OrderID}/Services`},{default:b(()=>t[2]||(t[2]=[x(" Услуги ",-1)])),_:1,__:[2]},8,["to"])]),s(r),s(l,{services:y.value},null,8,["services"]),s(g,{modelValue:i.value,"onUpdate:modelValue":t[0]||(t[0]=C=>i.value=C),"service-search-params":{ServiceID:e.value.ServiceID,ServersGroupID:w.value.ServersGroupID},class:"tw-mt-6"},null,8,["modelValue","service-search-params"]),s(h,{services:i.value,"main-order":e.value},null,8,["services","main-order"])])):S.value?(c(),I(A,{key:2,class:"tw-mt-10"})):(c(),I(B,{key:1,label:"Заказ не найден"}))],64)}}};export{fe as default};
