import{j as T,o as w,c as O,a as c,Z as A,a9 as E,b as o,w as m,d as f,t as I,F,x as P,n as q,k as Z,_ as G,e as J,S as K,r as Q,h as W}from"./index-5f8fd0e9.js";import{_ as X}from"./HelperComponent-9b33bb3d.js";import{S as z}from"./StatusBadge-fdff4dcc.js";import{I as Y}from"./IconRotate-00011174.js";import"./dedicatedServer-6a2fed0f.js";import{f as U}from"./useTimeFunction-8602dd60.js";import"./resetServer-0c21ceb4.js";import{f as $,z as tt,k as et,d as at}from"./bootstrap-vue-next.es-a97602fc.js";import{_ as ot}from"./IconDots-01479051.js";import{_ as nt}from"./IconCard-3d2eebd0.js";import{_ as st}from"./OrderIDBadge-d3e09683.js";const rt={class:"hosting-item"},it={class:"hosting-item__row"},dt={class:"hosting-item__row"},ct={class:"hosting-item__person"},lt={key:0,class:"hosting-item__row"},mt={class:"hosting-item__list"},_t=["innerHTML"],ut={class:"hosting-status__info"},Dt={class:"hosting-status__date"},ft={class:"hosting-item__controls"},It={class:"btn btn--dots"};function St(d,a,t,n,S,p){var g,_,u,D,h,B,H,M,N,V,L,j;const b=$,y=st,v=T("router-link"),k=T("Helper"),C=z,x=nt,R=ot,e=tt,s=et,l=at;return w(),O("div",rt,[c("div",it,[A(o(b,{id:"checkbox-"+((g=t.itemData)==null?void 0:g.OrderID),modelValue:n.localSelectedRows[(_=t.itemData)==null?void 0:_.OrderID],"onUpdate:modelValue":a[0]||(a[0]=r=>{var i;return n.localSelectedRows[(i=t.itemData)==null?void 0:i.OrderID]=r}),name:"checkbox-"+((u=t.itemData)==null?void 0:u.OrderID),onChange:n.updateSelectedRows},null,8,["id","modelValue","name","onChange"]),[[E,t.isSeveral]]),o(y,{orderID:(D=t.itemData)==null?void 0:D.OrderID,onClick:a[1]||(a[1]=r=>{var i;return n.toItem((i=t.itemData)==null?void 0:i.OrderID)})},null,8,["orderID"]),o(v,{class:"hosting-item__name",to:`/DSOrders/${t.itemData.OrderID}`},{default:m(()=>[f(I(t.itemData.IP),1)]),_:1},8,["to"])]),c("div",dt,[c("div",ct,I((h=t.itemData)==null?void 0:h.Customer),1),o(k,{"user-notice":(B=t.itemData)==null?void 0:B.UserNotice,id:(H=t.itemData)==null?void 0:H.OrderID,position:t.isLast?"bottom":"top",emit:"updateDSOrdersList"},null,8,["user-notice","id","position"])]),t.params.length?(w(),O("div",lt,[c("ul",mt,[(w(!0),O(F,null,P(t.params,r=>(w(),O("li",{innerHTML:r},null,8,_t))),256))]),c("div",ut,[c("div",{class:q(["hosting-item__date",{danger:Number((M=t.itemData)==null?void 0:M.DaysRemainded)<14}])},I(n.calculateExpirationDate((N=t.itemData)==null?void 0:N.DaysRemainded))+" • "+I(((V=t.itemData)==null?void 0:V.DaysRemainded)||0)+" дн.",3),o(C,{class:"status-badge",status:(L=t.itemData)==null?void 0:L.StatusID,"status-table":"DSOrders",onClick:a[2]||(a[2]=r=>{var i;return n.openHistoryStatuses((i=t.itemData)==null?void 0:i.ID)})},null,8,["status"]),c("div",Dt,I(n.calculateDaysSinceStatusUpdate((j=t.itemData)==null?void 0:j.StatusDate)),1)])])):Z("",!0),c("div",ft,[c("div",{class:"btn btn--md btn--bold",onClick:a[3]||(a[3]=r=>{var i;return d.$router.push(`/DSOrderPay/${(i=t.itemData)==null?void 0:i.OrderID}`)})},[o(x),f("Оплатить")]),o(l,{class:"dropdown-dots",right:""},{"button-content":m(()=>[c("div",It,[o(R)])]),default:m(()=>[o(e,null,{default:m(()=>{var r;return[o(v,{to:`DSOrders/${(r=t.itemData)==null?void 0:r.OrderID}`},{default:m(()=>[f("Дополнительная информация")]),_:1},8,["to"])]}),_:1}),o(e,{onClick:a[4]||(a[4]=r=>n.transferAccount())},{default:m(()=>[f("Передать на другой аккаунт")]),_:1}),o(s),o(e,{class:"color-red",onClick:a[5]||(a[5]=r=>n.deleteItem())},{default:m(()=>[f("Удалить")]),_:1})]),_:1})])])}const vt={components:{StatusBadge:z,IconRotate:Y,Helper:X},props:{params:{type:Array,default:()=>[]},itemData:{type:Object,default:()=>{}},isLast:{type:Boolean,default:!1},isSeveral:{type:Boolean,default:!1},selectedRows:{type:Object,required:!0}},emits:["delete","transfer","manage"],setup(d,{emit:a}){const t=J(),n=K("emitter"),S=Q({...d.selectedRows}),p=()=>{a("update-selected-rows",S.value)};W(()=>d.selectedRows,e=>{S.value={...e}},{deep:!0});function b(e){if(!e)return U(new Date);const s=new Date,l=new Date(s.getTime()+e*24*60*60*1e3);return U(l)}function y(e){t.push(`/DSOrders/${e}`)}function v(){var e;a("delete",(e=d.itemData)==null?void 0:e.ID)}function k(){var e,s;a("transfer",{ServiceOrderID:(e=d.itemData)==null?void 0:e.ID,ServiceID:(s=d.itemData)==null?void 0:s.ServiceID})}function C(e){n.emit("open-modal",{component:"StatusHistory",data:{modeID:"DSOrders",rowID:e}})}function x(){var e,s,l;a("manage",{ServiceOrderID:(e=d.itemData)==null?void 0:e.ID,ServiceID:(s=d.itemData)==null?void 0:s.ServiceID,OrderID:(l=d.itemData)==null?void 0:l.OrderID})}function R(e){if(!e)return"";const s=new Date(parseInt(e)*1e3),g=new Date-s,_=Math.floor(g/1e3),u=Math.floor(_/60),D=Math.floor(u/60),h=Math.floor(D/24);return _<60?`${_} сек. от статуса`:u<60?`${u} мин. от статуса`:D<24?`${D} ч. от статуса`:`${h} дн. от статуса`}return{deleteItem:v,orderManage:x,transferAccount:k,calculateExpirationDate:b,openHistoryStatuses:C,toItem:y,calculateDaysSinceStatusUpdate:R,localSelectedRows:S,updateSelectedRows:p}}},Bt=G(vt,[["render",St],["__scopeId","data-v-6b621171"]]);export{Bt as D};
