import{_ as x}from"./ButtonDefault-6f60da99.js";import{f as C}from"./bootstrap-vue-next.es-44eeb912.js";import{_ as A,f as D,u as $,r as h,g as F,h as w,o as u,c as v,F as B,v as U,t as b,k as M,a,b as m,w as I,d as y,x as E,L as g}from"./index-01c72474.js";import{F as P}from"./FormTabs-01ecef52.js";import{f as O,a as j}from"./useTimeFunction-8602dd60.js";import{s as S}from"./multiselect-b3bc32a2.js";const L={class:"edit-settings__types"},W={key:0,class:"edit-settings__label"},Y={class:"edit-settings__checkbox"},G={__name:"BlockNotificationsModal",props:["id","method"],setup(k){const _=k,i=D(),T=$(),d=h({}),f=F(()=>{var t,e;return(e=(t=T.ConfigList)==null?void 0:t.Notifies)==null?void 0:e.Types});function p(t){var e;d.value[t]=!((e=d.value)!=null&&e[t])}return i.ContactData(_==null?void 0:_.id).then(t=>{Object.keys(t).forEach(e=>{typeof t[e]=="object"&&Object.keys(t[e]).forEach(c=>{d.value[c]=t[e][c]})})}),w(d.value,()=>{const t=new FormData;Object.keys(d.value).forEach(e=>{d.value[e]&&t.append(`${_.method}[]`,e)}),t.append("MethodID",_.method),t.append("ContactID",_.id),i.userEditContactSettings(t)}),(t,e)=>{const c=C;return u(),v("div",L,[(u(!0),v(B,null,U(f.value,(n,r)=>{var l;return u(),v("div",{class:"edit-settings__group",key:r},[n!=null&&n.Title?(u(),v("div",W,b(n==null?void 0:n.Title),1)):M("",!0),a("div",Y,[m(c,{id:r,name:r,checked:(l=d.value)==null?void 0:l[r],onInput:()=>p(r)},{default:I(()=>[y(b(n==null?void 0:n.Name),1)]),_:2},1032,["id","name","checked","onInput"])])])}),128))])}}},H=A(G,[["__scopeId","data-v-63297c68"]]);const q={class:"modal__body"},z=a("div",{class:"list-item__title"},"Настройки",-1),J={class:"list-item__subtitle"},K={class:"edit-settings"},Q={class:"edit-settings__item"},R={class:"edit-settings__item"},X={class:"edit-settings__item"},Z={class:"edit-settings__item"},ee=a("div",{class:"edit-time"},null,-1),te=a("div",{class:"edit-time__title"},"Время рассылки",-1),se={class:"edit-time__wrapper"},ae={class:"edit-time__select-wrapper"},oe=a("div",{class:"edit-time__select-label"},"Начало",-1),ie={class:"edit-time__select-wrapper"},le=a("div",{class:"edit-time__select-label"},"Конец",-1),ne={class:"edit-time__last-change"},ve={__name:"ModalWindowEditContact",props:["data"],emits:["modalClose"],setup(k,{emit:_}){const i=k,T=D(),d=[{name:"Общие",value:"common"},{name:"Типы уведомлений",value:"notions"}],f=h([]),p=h(!1),t=h("common"),e=h({});e.value={...i.data,TimeBegin:c(i.data.TimeBegin),TimeEnd:c(i.data.TimeEnd)};function c(l){return l>=10?l:"0"+String(l)}function n(){for(let l=0;l<=23;l++){const s=c(l);f.value.push({label:`${s}:00`,name:`${s}:00`,value:String(s)})}}function r(){p.value=!0,T.userEditContact({Address:e.value.Address,MethodID:e.value.MethodID,ContactID:e.value.ID,TimeBegin:e.value.TimeBegin,TimeEnd:e.value.TimeEnd,IsActive:e.value.IsActive?"yes":void 0,IsImmediately:e.value.IsImmediately?"yes":void 0,IsPrimary:e.value.IsPrimary?"yes":void 0,IsSendFiles:e.value.IsSendFiles?"yes":void 0}).then(l=>{p.value=!1,T.fetchUserData(),_("modalClose")})}return n(),(l,s)=>{const V=C,N=x;return u(),v("div",q,[z,a("div",J,b(i.data.MethodID)+" "+b(i.data.Address),1),m(P,{class:"edit-settings__tabs",tabs:d,modelValue:t.value,"onUpdate:modelValue":s[0]||(s[0]=o=>t.value=o)},null,8,["modelValue"]),t.value==="common"?(u(),v(B,{key:0},[a("div",K,[a("div",Q,[m(V,{class:"edit-settings__checkbox",id:"use-for-notifications",name:"use-for-notifications",modelValue:e.value.IsActive,"onUpdate:modelValue":s[1]||(s[1]=o=>e.value.IsActive=o)},{default:I(()=>[y("Использовать для уведомлений")]),_:1},8,["modelValue"])]),a("div",R,[m(V,{class:"edit-settings__checkbox",id:"notify-immediately",name:"notify-immediately",modelValue:e.value.IsImmediately,"onUpdate:modelValue":s[2]||(s[2]=o=>e.value.IsImmediately=o)},{default:I(()=>[y("Уведомлять немедленно")]),_:1},8,["modelValue"])]),a("div",X,[m(V,{class:"edit-settings__checkbox",id:"send-files",name:"send-files",modelValue:e.value.IsSendFiles,"onUpdate:modelValue":s[3]||(s[3]=o=>e.value.IsSendFiles=o)},{default:I(()=>[y("Присылать файлы/картинки")]),_:1},8,["modelValue"])]),a("div",Z,[i.data.MethodID==="Email"?(u(),E(V,{key:0,class:"edit-settings__checkbox",id:"use-for-login",name:"use-for-login",modelValue:e.value.IsPrimary,"onUpdate:modelValue":s[4]||(s[4]=o=>e.value.IsPrimary=o)},{default:I(()=>[y("Использовать как логин")]),_:1},8,["modelValue"])):M("",!0)])]),ee,te,a("div",se,[a("div",ae,[oe,m(g(S),{placeholder:"00:00",options:f.value,modelValue:e.value.TimeBegin,"onUpdate:modelValue":s[5]||(s[5]=o=>e.value.TimeBegin=o),label:"name"},null,8,["options","modelValue"])]),a("div",ie,[le,m(g(S),{modelValue:e.value.TimeEnd,"onUpdate:modelValue":s[6]||(s[6]=o=>e.value.TimeEnd=o),options:f.value,label:"name",placeholder:"00:00"},null,8,["modelValue","options"])])]),a("div",ne,"Адрес подтвержден "+b(g(O)(g(j)(i.data.Confirmed))),1),m(N,{onClick:s[7]||(s[7]=o=>r()),label:"Сохранить изменения","is-loading":p.value},null,8,["is-loading"])],64)):(u(),E(H,{key:1,id:i.data.ID,method:i.data.MethodID},null,8,["id","method"]))])}}};export{ve as default};
