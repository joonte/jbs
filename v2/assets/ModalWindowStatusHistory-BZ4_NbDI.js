import{L as O}from"./bootstrap-vue-next-BglOzul_.js";import{_ as $}from"./StatusBadge-DZmmWv0G.js";import{_ as B}from"./LoadingIndicator-DXjOL6Pz.js";import{r as n,f as v,c as g,o as S,a as s,C as H,t as d,b as f,w as o,e as l,v as P,F as M,al as T,W as V}from"./index-C9dBN6m4.js";import{_ as E}from"./_plugin-vue_export-helper-DlAUqK2U.js";const L=[{key:"StatusDate",label:"Дата изменения",headerTitle:"Дата изменения",variant:"td-gray td-order",sortable:!0},{key:"StatusID",label:"Статус",headerTitle:"Статус",variant:"td-blue",sortable:!0},{key:"Initiator",label:"Инициатор",headerTitle:"Инициатор",variant:"td-gray td-order"},{key:"Comment",label:"Комментарий",headerTitle:"Комментарий",variant:"td-gray td-order"}],N={class:"tw-text-xl sm:tw-text-2xl"},F={key:1,class:"tw-overflow-y-auto tw-pr-2 tw-mt-4"},W={class:"td-column-heavy"},U={class:"table-td-gray"},j={class:"td-column-heavy"},R={class:"table-td-gray"},A={class:"td-column-heavy"},Y={class:"table-td-gray"},q={__name:"ModalWindowStatusHistory",props:{data:{type:Object,default:()=>{}}},setup(i){const b=i,y=n("StatusDate"),p=n(!0),_=n("desc"),D=n(!0),I=v(()=>b.data.modeID),k=v(()=>b.data.rowID),r=n({}),w=v(()=>r.value?Object.values(r.value).reverse().map(e=>({StatusDate:e.StatusDate,StatusID:e.StatusID,Initiator:e.Initiator,Comment:e.Comment})):[]);(async()=>{try{const e=await T.get(`${V}/API/v2/StatusesHistory?ModeID=${I.value}&RowID=${k.value}`);e&&e.data?r.value=e.data:r.value={},D.value=!1}catch(e){console.error(e),r.value={}}})();function x(e){let t="";switch(e){case"HostingOrders":t="Хостинг";break;case"DomainOrders":t="Домен";break;case"DSOrders":t="Выделенный сервер";break;case"VPSOrders":t="VPS/VDS Сервер";break;case"ExtraIPOrders":t="IP адрес";break;case"ISPswOrders":t="Лицензия ISPsystem";break;case"DNSmanagerOrders":t="Вторичный DNS";break;case"Contracts":t="Договор";break;case"Profiles":t="Профиль";break;case"Invoices":t="Счёт на оплату";break;case"Edesks":t="Тикет";break}return t}function h(e){const t=new Date(e*1e3),u=t.getDate().toString().padStart(2,"0"),c=(t.getMonth()+1).toString().padStart(2,"0"),m=t.getFullYear().toString(),a=t.getHours().toString().padStart(2,"0"),C=t.getMinutes().toString().padStart(2,"0");return`${u}.${c}.${m} ${a}:${C}`}return(e,t)=>{const u=B,c=$,m=O;return S(),g(M,null,[s("div",N,"История изменений: "+d(x(i.data?.modeID))+", #"+d(i.data?.rowID),1),D.value?(S(),H(u,{key:0,class:"tw-mt-16"})):(S(),g("div",F,[f(m,{class:"basic-table",items:w.value,fields:P(L),"show-empty":!0,filterable:[],"sort-desc":p.value,"onUpdate:sortDesc":t[0]||(t[0]=a=>p.value=a),"sort-by":y.value,"onUpdate:sortBy":t[1]||(t[1]=a=>y.value=a),"sort-direction":_.value,"empty-text":"У вас пока нет истории статусов.","empty-filtered-text":"Статус не найден."},{"head(StatusDate)":o(()=>t[2]||(t[2]=[l(" Дата изменения ",-1)])),"head(StatusID)":o(()=>t[3]||(t[3]=[l(" Статус ",-1)])),"head(Initiator)":o(()=>t[4]||(t[4]=[l(" Инициатор ",-1)])),"head(Comment)":o(()=>t[5]||(t[5]=[l(" Комментарий ",-1)])),"cell(StatusDate)":o(a=>[t[6]||(t[6]=s("span",{class:"td-mobile"},"Дата изменения",-1)),s("div",W,[s("div",U,d(h(a.item?.StatusDate)),1)])]),"cell(StatusID)":o(a=>[f(c,{status:a.item?.StatusID,"status-table":I.value},null,8,["status","status-table"])]),"cell(Initiator)":o(a=>[t[7]||(t[7]=s("span",{class:"td-mobile"},"Инициатор",-1)),s("div",j,[s("div",R,d(a.item?.Initiator),1)])]),"cell(Comment)":o(a=>[t[8]||(t[8]=s("span",{class:"td-mobile"},"Комментарий",-1)),s("div",A,[s("div",Y,d(a.item?.Comment),1)])]),_:1},8,["items","fields","sort-desc","sort-by","sort-direction"])]))],64)}}},Z=E(q,[["__scopeId","data-v-acdb3745"]]);export{Z as default};
