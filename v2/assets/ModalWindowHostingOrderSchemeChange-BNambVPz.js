import{_ as x}from"./BlueButton.vue_vue_type_script_setup_true_lang-q3k2Q2g8.js";import{_ as C}from"./InputSelect.vue_vue_type_script_setup_true_lang-C1yKCY-m.js";import{_ as y}from"./MessageInfo-BrNRfWl8.js";import{u as D}from"./hosting-C49ZUiO9.js";import{r as c,x as b,f as E,H as M,s as N,c as V,o as k,a as o,b as r,e as u,t as f,w as B}from"./index-C9dBN6m4.js";import"./HeaderComponent-D5YlqMfr.js";import"./IconClose-CgjzG0Yf.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./IconCross-BBzyXWWD.js";import"./IconServer-CMs3dp5i.js";import"./IconSettings-BGdLLHON.js";import"./IconProfile-DDO3OQU0.js";import"./ButtonDefault-B1FApUky.js";import"./bootstrap-vue-next-BglOzul_.js";import"./contracts-BEc0DZS2.js";import"./user-placeholder-CyUFSnNp.js";import"./notes-BPwDvcrv.js";import"./postings-CmcOMU5N.js";import"./basket-VfBMGfpS.js";import"./index-D0iqQ1zq.js";const H={class:"md:tw-max-w-[500px]"},O={class:"tw-mt-4"},j={class:"tw-font-bold"},L={class:"tw-flex tw-items-center tw-gap-4 tw-mt-4"},U={class:"tw-flex tw-justify-end tw-mt-4"},$="<p>Обращаем ваше внимание, что ваш виртуальный сервер использует тип виртуализации KVM. В связи с этим, изменение тарифного плана возможно только в большую сторону, уменьшить размер диска - невозможно.</p><hr><p>Также, будут удалены все снимки виртуальной машины</p>",at={__name:"ModalWindowHostingOrderSchemeChange",props:{data:{type:Object,default:()=>{}}},emits:["modalClose"],setup(n,{emit:v}){const s=n,h=v,m=D(),a=c(!1),i=c(null),g=b("emitter"),w=E(()=>Object.values(m.hostingSchemes).filter(e=>e.ID!==s.data.hostingScheme.ID&&e.IsSchemeChangeable&&e.ServersGroupID==s.data.serverGroupId).sort((e,t)=>e.SortID-t.SortID).map(e=>({name:e.Name+" / "+e.CostMonth+" ₽ в месяц",value:e.ID})));async function l(){a.value=!0;const{result:e,error:t}=await m.HostingOrderSchemeChange({NewSchemeID:i.value,HostingOrderID:s.data?.hostingId});e==="SUCCESS"&&(s.data?.emitEvent&&g.emit(s.data?.emitEvent),h("modalClose")),a.value=!1}const d=e=>{e.key==="Enter"&&l()};return M(()=>{document.addEventListener("keyup",d)}),N(()=>{document.removeEventListener("keyup",d)}),(e,t)=>{const S=y,_=C,I=x;return k(),V("div",H,[t[5]||(t[5]=o("div",{class:"tw-text-2xl"},"Смена тарифного плана",-1)),o("div",O,[t[2]||(t[2]=u(" Текущий тарифный план: ",-1)),o("span",j,f(n.data.hostingScheme.Name)+"/"+f(n.data.hostingScheme.CostMonth),1)]),r(S,{innerHTML:$,class:"tw-mt-4 tw-space-y-4"}),o("div",L,[t[3]||(t[3]=o("div",{class:"tw-basis-1/3"},"Новый тарифный план",-1)),r(_,{class:"tw-basis-2/3",modelValue:i.value,"onUpdate:modelValue":t[0]||(t[0]=p=>i.value=p),options:w.value,"param-to-match":"value",placeholder:"Выберите тарифный план"},null,8,["modelValue","options"])]),o("div",U,[r(I,{onClick:t[1]||(t[1]=p=>l()),"is-loading":a.value},{default:B(()=>t[4]||(t[4]=[u("Сменить",-1)])),_:1,__:[4]},8,["is-loading"])])])}}};export{at as default};
