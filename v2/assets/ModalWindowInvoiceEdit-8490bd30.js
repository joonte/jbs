import{o as a,c as l,F as y,v as x,n as N,a as v,t as B,k as L,b as T,p as V,l as F,_ as O,u as W,r as p,R as z,g as M}from"./index-01c72474.js";import{_ as j}from"./ButtonDefault-6f60da99.js";import{u as R}from"./invoices-01a3ad9a.js";const U=n=>(V("data-v-8bbb0637"),n=n(),F(),n),q={class:"list-part"},G=U(()=>v("div",{class:"list-item__title"},"Платежные системы",-1)),H={key:0,class:"list-row grid-net"},J=["onClick"],K=["src"],Q={class:"list-item__image-title"},X={class:"modal__error"};function Y(n,i,S,t,d,f){const m=j;return a(),l("div",q,[G,t.filterActiveSystems?(a(),l("div",H,[(a(!0),l(y,null,x(t.filterActiveSystems,s=>(a(),l(y,null,[(a(!0),l(y,null,x(s,e=>{var u;return a(),l(y,null,[e!=null&&e.IsActive?(a(),l("div",{key:0,class:N(["list-item",{"list-item_active":((u=t.paymentSystem)==null?void 0:u.id)===(e==null?void 0:e.ID)}]),onClick:g=>t.paymentSystem={id:e==null?void 0:e.ID,type:e==null?void 0:e.Source}},[v("img",{class:"list-item__image",src:e==null?void 0:e.Image},null,8,K),v("div",Q,B(e==null?void 0:e.Description),1)],10,J)):L("",!0)],64)}),256))],64))),256))])):L("",!0),v("div",X,B(t.errorMessage),1),T(m,{label:"Выбрать","is-loading":t.isLoading,onClick:i[0]||(i[0]=s=>t.switchPaymentSystem())},null,8,["is-loading"])])}const Z={components:{ButtonDefault:j},props:{data:{type:Object,default:()=>{}}},emits:["modalClose"],setup(n,{emit:i}){const S=W(),t=R(),d=p(!1),f=p(null),m=z("emitter"),s=M(()=>S.ConfigList),e=p(null),u=M(()=>{var r,c;return(r=s.value)!=null&&r.PaymentSystems?Object.keys((c=s.value)==null?void 0:c.PaymentSystems).map(o=>{var _,I,b,C,h,k,D,P,w,A,E;return String((b=(I=(_=s.value)==null?void 0:_.PaymentSystems)==null?void 0:I[o])==null?void 0:b.IsActive)==="1"&&((P=(k=(h=(C=s.value)==null?void 0:C.PaymentSystems)==null?void 0:h[o])==null?void 0:k.ContractsTypes)==null?void 0:P[(D=n.data)==null?void 0:D.TypeID])==="1"?(E=(A=(w=s.value)==null?void 0:w.PaymentSystems)==null?void 0:A[o])==null?void 0:E.Collations:null}).filter(o=>o!==null):null});function g(){var r,c,o;e.value!==null&&(d.value=!0,t.InvoiceEdit({InvoiceID:(r=n.data)==null?void 0:r.ItemID,PaymentSystemID:(c=e.value)==null?void 0:c.type,Summ:(o=n.data)==null?void 0:o.Summ}).then(_=>{_==="SUCCESS"&&(i("modalClose"),m.emit("updateInvoicesTable")),d.value=!1}))}return{getConfig:s,errorMessage:f,filterActiveSystems:u,switchPaymentSystem:g,isLoading:d,paymentSystem:e}}},se=O(Z,[["render",Y],["__scopeId","data-v-8bbb0637"]]);export{se as default};
