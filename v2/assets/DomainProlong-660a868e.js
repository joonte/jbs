import{o as a,c as i,a as t,t as D,b as f,k as V,p as j,l as M,_ as W,a6 as K,e as U,R as q,r as z,g as v}from"./index-ed1f28f8.js";import{u as G}from"./domain-0e22d159.js";import{u as H}from"./contracts-cedf6a91.js";import{s as J}from"./multiselect-198a8c51.js";import{E as Q}from"./EmptyStateBlock-dbc11827.js";import{_ as X}from"./ButtonDefault-a8aacc82.js";import{_ as Y}from"./ClausesKeeper-9aa8ead7.js";import"./IconClose-a1e58263.js";const d=e=>(j("data-v-ef5d2e06"),e=e(),M(),e),Z={key:0,class:"domain-scheme"},$={class:"section"},oo={class:"container"},to={class:"section-header"},eo={key:0,class:"section-title"},so={key:1,class:"section-title"},ao={key:2,class:"section-title"},io={class:"section-label"},no={class:"section"},lo={class:"container"},co={class:"domain-prolong__data"},ro={key:0,class:"form-field"},_o=d(()=>t("div",{class:"form-field__label"},"Стоимость заказа (в год)",-1)),mo=["value"],ho={class:"form-field"},go=d(()=>t("div",{class:"form-field__label"},"Стоимость продления (в год)",-1)),Do=["value"],fo=d(()=>t("label",{class:"form-field"},[t("div",{class:"form-field__label"},"Количество лет"),t("input",{type:"text",placeholder:"1",value:"1",disabled:""})],-1)),vo={key:1,class:"form-field__msg"},uo={class:"form-field"},po=d(()=>t("div",{class:"form-field__label"},"Всего к оплате",-1)),So=["value"],Co={class:"section"},bo={class:"container"},ko={class:"domain-prolong__data"},yo={class:"total-block"},Io={class:"total-block__row total-block__row--big"},Fo=d(()=>t("div",{class:"total-block__col"},"Итого за 1 год",-1)),xo={class:"total-block__col"},Ao={key:1,class:"section"},Oo={class:"container"};function Po(e,l,u,o,r,p){var s,_,c,g,S,C,b,k,y,I,F,x,A,O,P,w,B,R,E,L,N,T;const n=Y,m=X,h=Q;return o.getDomain?(a(),i("div",Z,[t("div",$,[t("div",oo,[t("div",to,[o.getDomain.StatusID==="Waiting"?(a(),i("h1",eo,"Оплата заказа доменного имени")):o.getDomain.StatusID==="ForTransfer"?(a(),i("h1",so,"Оплата переноса домена")):(a(),i("h1",ao,"Оплата продления доменного имени")),t("div",io,D((s=o.getDomain)!=null&&s.DomainName?`#${(_=o.getDomain)==null?void 0:_.DomainName}`:""),1)]),f(n)])]),t("div",no,[t("div",lo,[t("div",co,[o.getDomain.StatusID==="Waiting"||o.getDomain.StatusID==="ForTransfer"?(a(),i("label",ro,[_o,t("input",{type:"text",placeholder:"0 руб",value:((c=o.getDomainSchemes)==null?void 0:c.CostOrder)+" руб",disabled:""},null,8,mo)])):V("",!0),t("label",ho,[go,t("input",{type:"text",placeholder:"0 руб",value:((g=o.getDomainSchemes)==null?void 0:g.CostProlong)+" руб",disabled:""},null,8,Do)]),fo,(S=o.getDomain)!=null&&S.AdditionalCost?(a(),i("div",vo,[t("p",null,D((C=o.getDomain)==null?void 0:C.AdditionalCost.Message),1)])):V("",!0),t("label",uo,[po,t("input",{type:"text",placeholder:"0 руб",value:o.getDomain.StatusID==="ClaimForRegister"?(b=o.getDomainSchemes)==null?void 0:b.CostOrder:(parseFloat((k=o.getDomainSchemes)==null?void 0:k.CostProlong)+((y=o.getDomain)!=null&&y.AdditionalCost?parseFloat((F=(I=o.getDomain)==null?void 0:I.AdditionalCost)==null?void 0:F.Summ):0)).toFixed(2)+" руб",disabled:""},null,8,So)])])])]),t("div",Co,[t("div",bo,[t("div",ko,[t("div",yo,[t("div",Io,[Fo,t("div",xo,D(o.getDomain.StatusID==="ClaimForRegister"?(parseFloat((x=o.getDomainSchemes)==null?void 0:x.CostOrder)+((A=o.getDomain)!=null&&A.AdditionalCost?parseFloat((P=(O=o.getDomain)==null?void 0:O.AdditionalCost)==null?void 0:P.Summ):0)).toFixed(2):(parseFloat((w=o.getDomainSchemes)==null?void 0:w.CostProlong)+((B=o.getDomain)!=null&&B.AdditionalCost?parseFloat((E=(R=o.getDomain)==null?void 0:R.AdditionalCost)==null?void 0:E.Summ):0)).toFixed(2)||"0.00")+" ₽",1)])]),f(m,{class:"btn--wide",label:+((L=o.getContract)==null?void 0:L.Balance)>(o.getDomain.StatusID==="ClaimForRegister"?+((N=o.getDomainSchemes)==null?void 0:N.CostOrder):+((T=o.getDomainSchemes)==null?void 0:T.CostProlong))?"Оплатить c баланса договора":"Добавить в корзину",onClick:l[0]||(l[0]=Bo=>o.orderPay()),"is-loading":o.isLoading},null,8,["label","is-loading"])])])])])):(a(),i("div",Ao,[t("div",Oo,[f(h,{label:"Заказ домена не найден"})])]))}const wo={components:{Multiselect:J},async setup(){const e=G(),l=H(),u=K(),o=U();q("emitter");const r=z(!1);function p(){var s;r.value=!0,e.DomainOrderPay({DomainOrderID:(s=n.value)==null?void 0:s.ID}).then(_=>{let{result:c,error:g}=_;c==="SUCCESS"?o.push("/DomainOrders"):c==="BASKET"&&o.push("/Basket"),r.value=!1})}const n=v(()=>Object.keys(e==null?void 0:e.domainsList).map(s=>e==null?void 0:e.domainsList[s]).find(s=>s.OrderID===u.params.id)),m=v(()=>{var s;return e==null?void 0:e.domainSchemes[(s=n.value)==null?void 0:s.SchemeID]}),h=v(()=>{var s;return l.contractsList[(s=n.value)==null?void 0:s.ContractID]});return await e.fetchDomains(),await e.fetchDomainSchemes(),await l.fetchContracts(),{getDomain:n,getDomainSchemes:m,getContract:h,isLoading:r,orderPay:p}}},Wo=W(wo,[["render",Po],["__scopeId","data-v-ef5d2e06"]]);export{Wo as default};
