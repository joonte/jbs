import{k as A,o as O,c as C,a as r,Z,aa as G,b as d,w as m,d as u,t as v,F as J,y as K,n as U,l as Q,p as W,m as X,_ as Y,e as $,r as E,j as tt,U as et}from"./index-777dc609.js";import{u as at}from"./vps-1203388a.js";import{_ as nt}from"./HelperComponent-c699a84d.js";import{S as F}from"./StatusBadge-f0ac8f52.js";import{I as q}from"./IconRotate-f3c1aa76.js";import{f as z}from"./useTimeFunction-8602dd60.js";import{v as ot}from"./vpsStatuses-32ffaaf5.js";import{f as st,z as it,k as rt,d as dt}from"./bootstrap-vue-next.es-8d4e1458.js";import{_ as lt}from"./IconDots-d23bdaf1.js";import{_ as ct}from"./IconCard-ba144b8a.js";import{_ as mt}from"./OrderIDBadge-b6deb83c.js";const ut=n=>(W("data-v-8047d593"),n=n(),X(),n),_t={class:"hosting-item"},Dt={class:"hosting-item__row"},ft={class:"hosting-item__row"},It={class:"hosting-item__person"},St={class:"hosting-item__row"},gt={class:"hosting-item__list"},vt=["innerHTML"],bt={class:"hosting-status__info"},ht={class:"hosting-status__date"},wt={class:"hosting-item__controls"},Ot={class:"ico"},Ct=ut(()=>r("div",{class:"hosting-item__title"},"Перезагрузить виртуальный сервер",-1)),yt={class:"btn btn--dots"};function Vt(n,a,t,o,N,S){var s,c,h,D,f,I,w,B,H,L,M,T,j;const g=st,y=mt,b=A("router-link"),V=F,k=q,R=ct,P=A("Helper"),p=lt,_=it,x=rt,e=dt;return O(),C("div",_t,[r("div",Dt,[Z(d(g,{id:"checkbox-"+((s=t.itemData)==null?void 0:s.OrderID),modelValue:o.localSelectedRows[(c=t.itemData)==null?void 0:c.OrderID],"onUpdate:modelValue":a[0]||(a[0]=i=>{var l;return o.localSelectedRows[(l=t.itemData)==null?void 0:l.OrderID]=i}),name:"checkbox-"+((h=t.itemData)==null?void 0:h.OrderID),onChange:o.updateSelectedRows},null,8,["id","modelValue","name","onChange"]),[[G,t.isSeveral]]),d(y,{orderID:(D=t.itemData)==null?void 0:D.OrderID,onClick:a[1]||(a[1]=i=>{var l;return o.toItem((l=t.itemData)==null?void 0:l.OrderID)})},null,8,["orderID"]),d(b,{class:"hosting-item__name",to:`/VPSOrders/${t.itemData.OrderID}`},{default:m(()=>[u(v(t.itemData.IP||t.itemData.Domain),1)]),_:1},8,["to"])]),r("div",ft,[r("div",It,v(t.userName),1)]),r("div",St,[r("ul",gt,[(O(!0),C(J,null,K(t.params,i=>(O(),C("li",{innerHTML:i==null?void 0:i.text},null,8,vt))),256)),r("div",{class:"btn btn--md btn--bold btn-manage",onClick:a[2]||(a[2]=i=>o.orderManage())},"Управлять заказом")]),r("div",bt,[r("div",{class:U(["hosting-item__date",{danger:Number((f=t.itemData)==null?void 0:f.DaysRemainded)<14}])},v(o.calculateExpirationDate((I=t.itemData)==null?void 0:I.DaysRemainded))+" • "+v(((w=t.itemData)==null?void 0:w.DaysRemainded)||0)+" дн.",3),d(V,{class:"status-badge",status:(B=t.itemData)==null?void 0:B.StatusID,"status-table":"VPSOrders",onClick:a[3]||(a[3]=i=>{var l;return o.openHistoryStatuses((l=t.itemData)==null?void 0:l.ID)})},null,8,["status"]),r("div",ht,v(o.calculateDaysSinceStatusUpdate((H=t.itemData)==null?void 0:H.StatusDate)),1)])]),r("div",wt,[((L=t.itemData)==null?void 0:L.StatusID)==="Active"?(O(),C("div",{key:0,class:U(["btn btn--md btn--border btn--rotate btn--rotate_green button-large btn-reload",{"btn--rotate_gray":((M=t.itemData)==null?void 0:M.StatusID)!=="Active"||o.isReloading,"btn--rotate_loading":o.isReloading}]),onClick:a[4]||(a[4]=(...i)=>o.reloadItem&&o.reloadItem(...i))},[u("Включен"),r("button",null,[r("div",Ot,[d(k)])]),Ct],2)):Q("",!0),r("div",{class:"btn btn--md btn--bold",onClick:a[5]||(a[5]=i=>{var l;return n.$router.push(`/VPSOrders/${(l=t.itemData)==null?void 0:l.OrderID}/SchemeChange`)})},"Изменить тариф"),r("div",{class:"btn btn--md btn--bold",onClick:a[6]||(a[6]=i=>{var l;return n.$router.push(`/VPSOrderPay/${(l=t.itemData)==null?void 0:l.OrderID}`)})},[d(R),u("Оплатить")]),d(P,{"user-notice":(T=t.itemData)==null?void 0:T.UserNotice,id:(j=t.itemData)==null?void 0:j.OrderID,position:t.isLast?"bottom":"top",emit:"updateVPSList"},null,8,["user-notice","id","position"]),d(e,{class:"dropdown-dots",right:""},{"button-content":m(()=>[r("div",yt,[d(p)])]),default:m(()=>[d(_,{onClick:a[7]||(a[7]=i=>o.transferAccount())},{default:m(()=>[u("Передать на другой аккаунт")]),_:1}),d(_,{onClick:a[8]||(a[8]=i=>o.openPasswordChange())},{default:m(()=>[u("Сменить пароль")]),_:1}),d(_,null,{default:m(()=>{var i;return[d(b,{to:`/VPSOrders/${(i=t.itemData)==null?void 0:i.OrderID}/SchemeChange`},{default:m(()=>[u("Изменить тариф")]),_:1},8,["to"])]}),_:1}),d(x),d(_,{class:"color-red",onClick:a[9]||(a[9]=i=>o.deleteItem())},{default:m(()=>[u("Удалить")]),_:1})]),_:1})])])}const kt={components:{StatusBadge:F,IconRotate:q,Helper:nt},props:{params:{type:Array,default:()=>[]},itemData:{type:Object,default:()=>{}},isLast:{type:Boolean,default:!1},userName:{type:String,default:""},isSeveral:{type:Boolean,default:!1},selectedRows:{type:Object,required:!0}},emits:["manage","transfer","delete"],setup(n,{emit:a}){at();const t=$(),o=E({...n.selectedRows}),N=()=>{a("update-selected-rows",o.value)};tt(()=>n.selectedRows,e=>{o.value={...e}},{deep:!0});const S=et("emitter"),g=E(!1);function y(e){if(!e)return z(new Date);const s=new Date,c=new Date(s.getTime()+e*24*60*60*1e3);return z(c)}function b(){var e;a("delete",(e=n.itemData)==null?void 0:e.ID)}function V(e){t.push(`/VPSOrders/${e}`)}function k(){var e,s;S.emit("open-modal",{component:"OrdersTransfer",data:{ServiceOrderID:(e=n.itemData)==null?void 0:e.ID,ServiceID:(s=n.itemData)==null?void 0:s.ServiceID}})}function R(e){S.emit("open-modal",{component:"StatusHistory",data:{modeID:"VPSOrders",rowID:e}})}function P(){var e,s,c;S.emit("open-modal",{component:"OrderPasswordChange",data:{OrderID:(e=n.itemData)==null?void 0:e.ID,ServiceID:(s=n.itemData)==null?void 0:s.ServiceID,emitEvent:"updateVPSIDPage",Login:(c=n.itemData)==null?void 0:c.Login}})}function p(){var s;function e(c){g.value=c}S.emit("open-modal",{component:"ReloadVPS",data:{VPSOrderID:(s=n.itemData)==null?void 0:s.ID,isReloading:g.value,onReloadStatusChange:e}})}function _(){var e,s,c;a("manage",{ServiceOrderID:(e=n.itemData)==null?void 0:e.ID,ServiceID:(s=n.itemData)==null?void 0:s.ServiceID,OrderID:(c=n.itemData)==null?void 0:c.OrderID})}function x(e){if(!e)return"";const s=new Date(parseInt(e)*1e3),h=new Date-s,D=Math.floor(h/1e3),f=Math.floor(D/60),I=Math.floor(f/60),w=Math.floor(I/24);return D<60?`${D} сек. от статуса`:f<60?`${f} мин. от статуса`:I<24?`${I} ч. от статуса`:`${w} дн. от статуса`}return{vpsStatuses:ot,reloadItem:p,isReloading:g,orderManage:_,calculateExpirationDate:y,transferAccount:k,openHistoryStatuses:R,toItem:V,deleteItem:b,calculateDaysSinceStatusUpdate:x,openPasswordChange:P,localSelectedRows:o,updateSelectedRows:N}}},At=Y(kt,[["render",Vt],["__scopeId","data-v-8047d593"]]);export{At as V};
