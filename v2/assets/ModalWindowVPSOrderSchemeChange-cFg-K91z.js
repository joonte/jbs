import{_ as D}from"./BlueButton.vue_vue_type_script_setup_true_lang-BKdLNEec.js";import{_}from"./InputSelect.vue_vue_type_script_setup_true_lang-D7E9_BoS.js";import{H as V,r as v,x as C,f as x,I as y,s as E,o as N,c as b,a as s,t as r,b as S,w as k,e as B}from"./index-Codq73aV.js";import"./IconChevronDown-DOsbTpSQ.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-BO2gwtUe.js";const O={class:"md:tw-w-[600px]"},j={class:"tw-grid tw-grid-cols-3 tw-items-center tw-gap-4 tw-mt-4"},P={class:"tw-col-span-2 tw-font-bold"},M={class:"tw-grid tw-grid-cols-3 tw-items-center tw-gap-4 tw-mt-4"},U={class:"tw-col-span-2"},H={class:"tw-flex tw-justify-end tw-mt-4"},q={__name:"ModalWindowVPSOrderSchemeChange",props:{data:{type:Object,default:()=>{}}},emits:["modalClose"],setup(o,{emit:f}){const a=o,w=f,i=V(),n=v(!1),l=v(null),h=C("emitter"),g=x(()=>Object.values(i.vpsSchemes).filter(t=>t.ID!==a.data.vpsScheme.ID&&t.IsSchemeChangeable&&t.ServersGroupID==a.data.serverGroupId).sort((t,e)=>t.SortID-e.SortID).map(t=>({name:t.Name+m(t.SchemeParams)+" / "+t.CostMonth+" ₽ в месяц",value:t.ID})));function m(t){const e=Object.values(t).find(d=>d.InternalName==="HDD");return e?" / "+e.Value+" "+e.Unit:""}async function c(){n.value=!0;const{result:t}=await i.VPSOrderSchemeChange({NewSchemeID:l.value,VPSOrderID:a.data.vpsId});t==="SUCCESS"&&(a.data?.emitEvent&&h.emit(a.data?.emitEvent),w("modalClose")),n.value=!1}const u=t=>{t.key==="Enter"&&c()};return y(()=>{document.addEventListener("keyup",u)}),E(()=>{document.removeEventListener("keyup",u)}),(t,e)=>{const d=_,I=D;return N(),b("div",O,[e[5]||(e[5]=s("div",{class:"tw-text-2xl"},"Смена тарифного плана",-1)),s("div",j,[e[2]||(e[2]=s("div",null,"Текущий тарифный план",-1)),s("div",P,r(o.data.vpsScheme.Name)+r(m(o.data.vpsScheme.SchemeParams))+" / "+r(o.data.vpsScheme.CostMonth+" ₽ в месяц"),1)]),s("div",M,[e[3]||(e[3]=s("div",null,"Новый тарифный план",-1)),s("div",U,[S(d,{modelValue:l.value,"onUpdate:modelValue":e[0]||(e[0]=p=>l.value=p),options:g.value,"param-to-match":"value",placeholder:"Выберите тарифный план"},null,8,["modelValue","options"])])]),s("div",H,[S(I,{onClick:e[1]||(e[1]=p=>c()),"is-loading":n.value},{default:k(()=>e[4]||(e[4]=[B("Сменить",-1)])),_:1,__:[4]},8,["is-loading"])])])}}};export{q as default};
