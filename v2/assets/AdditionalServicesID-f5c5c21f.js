import{o as A,c as B,b as c,a as s,t as l,k as V,Y as C,Z as R,F as T,p as F,l as j,_ as L,a7 as U,e as E,R as M,f as W,r as Y,g as f}from"./index-041dff1e.js";import{u as Z}from"./postings-126c5400.js";import{S as y}from"./StatusBadge-72e39b02.js";import{s as q}from"./servicesStatuses-6293b6ac.js";import{B as x}from"./BlockBalanceAgreement-ab137d5a.js";import{_ as z}from"./ButtonDefault-80267555.js";import{_ as G}from"./ServicesContractBalanceBlock-317f61cc.js";import{_ as H}from"./ClausesKeeper-a9c75480.js";import"./contracts-fabeed86.js";import"./bootstrap-vue-next.es-dd4e7f7d.js";import"./IconArrow-ce6e1d64.js";import"./IconProfile-de337285.js";import"./IconCard-2ba2ac7a.js";import"./IconClose-4ba86278.js";const N=a=>(F("data-v-ffef33e3"),a=a(),j(),a),J={class:"section"},K={class:"container"},Q={class:"section-header"},X={class:"section-title"},$={class:"section-label"},ee={class:"list"},te={class:"list-col list-col--md"},se={class:"list-item"},oe={class:"list-item__row"},re={class:"list-item__title"},ne={class:"list-item__status"},ie={class:"list-item__row"},ae={class:"list-item__ul"},ce={key:0},le={class:"list-item__row"},de={class:"btn btn--border btn--switch"},_e=N(()=>s("span",{class:"btn-switch__text"},"Автопродление",-1)),me=N(()=>s("span",{class:"btn-switch__toggle"},null,-1));function ue(a,o,I,e,r,d){var _,t,i,D,O,h,S,b,k,P,w;const n=x,u=H,v=G,p=y,g=z;return A(),B(T,null,[c(n),s("div",J,[s("div",K,[s("div",Q,[s("h1",X,l((_=e.getService)==null?void 0:_.Name),1),s("div",$,"# "+l((t=e.getOrder)==null?void 0:t.ID),1)]),c(u),s("div",ee,[c(v,{"contract-id":(i=e.getOrder)==null?void 0:i.ContractID,onTransfer:o[0]||(o[0]=m=>e.transferItem())},null,8,["contract-id"]),s("div",te,[s("div",se,[s("div",oe,[s("div",re,l((D=e.getService)==null?void 0:D.Name),1),s("div",ne,[c(p,{status:(O=e.getOrder)==null?void 0:O.StatusID,"status-table":"Orders"},null,8,["status"])])]),s("div",ie,[s("ul",ae,[(h=e.getOrder)!=null&&h.DependOrderID&&((S=e.getOrder)==null?void 0:S.DependOrderID)!=="0"?(A(),B("li",ce,"Относится к заказу "+l((b=e.getOrder)==null?void 0:b.DependOrderID)+"/"+l((k=e.getDependOrderService)==null?void 0:k.Name),1)):V("",!0)])]),s("div",le,[c(g,{label:((P=e.getOrder)==null?void 0:P.StatusID)==="ClaimForRegister"||((w=e.getOrder)==null?void 0:w.StatusID)==="Waiting"?"Оплатить":"Продлить",onClick:o[1]||(o[1]=m=>e.navigateToProlong())},null,8,["label"]),s("label",de,[C(s("input",{type:"checkbox","onUpdate:modelValue":o[2]||(o[2]=m=>e.isAutoProlong=m),onInput:o[3]||(o[3]=m=>e.setProlongValue())},null,544),[[R,e.isAutoProlong]]),_e,me])])])])])])])],64)}const ve={components:{StatusBadge:y,BlockBalanceAgreement:x},async setup(){const a=U(),o=E(),I=M("emitter"),e=Z(),r=W(),d=Y(!1),n=f(()=>Object.keys(r==null?void 0:r.userOrders).map(t=>r==null?void 0:r.userOrders[t]).find(t=>t.ID===a.params.id)),u=f(()=>{var t,i;return e==null?void 0:e.servicesList[(i=r.userOrders[(t=n.value)==null?void 0:t.DependOrderID])==null?void 0:i.ServiceID]}),v=f(()=>{var t;return e==null?void 0:e.servicesList[(t=n.value)==null?void 0:t.ServiceID]});function p(){var t,i;I.emit("open-modal",{component:"OrdersTransfer",data:{ServiceOrderID:(t=n.value)==null?void 0:t.ID,ServiceID:(i=n.value)==null?void 0:i.ServiceID}})}function g(){o.push(`/ServiceOrderPay/${a.params.id}`)}function _(){var t;r.prolongOrder({IsAutoProlong:d.value?0:1,OrderID:(t=n.value)==null?void 0:t.ID})}return await r.fetchUserOrders().then(()=>{var t;d.value=(t=n.value)==null?void 0:t.IsAutoProlong}),await e.fetchServices(),{getService:v,getOrder:n,getDependOrderService:u,isAutoProlong:d,servicesStatuses:q,transferItem:p,navigateToProlong:g,setProlongValue:_}}},ye=L(ve,[["render",ue],["__scopeId","data-v-ffef33e3"]]);export{ye as default};
