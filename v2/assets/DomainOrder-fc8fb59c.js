import{j as J,o as u,c as v,b as r,a as t,t as l,w as K,d as Q,x as $,k as x,Y as tt,Z as et,F as ot,p as st,l as it,_ as nt,a7 as at,f as lt,e as ct,R as rt,r as P,g as B,i as _t}from"./index-e8e4a28d.js";import{u as mt}from"./domain-124d4d36.js";import{u as dt}from"./contracts-f70de43e.js";import{f as R,a as ut}from"./useTimeFunction-8602dd60.js";import{_ as Dt}from"./IconCard-49dbdefd.js";import{I as gt}from"./IconProfile-6cebb8f7.js";import{I as vt}from"./IconSettings-c5bc1528.js";import{I as ht}from"./IconEye-2bad324c.js";import{S as z}from"./StatusBadge-3b9ca694.js";import{B as G}from"./BlockBalanceAgreement-00019440.js";import{E as ft}from"./EmptyStateBlock-b36abca5.js";import{_ as bt}from"./ServicesContractBalanceBlock-06024488.js";import{_ as pt}from"./ButtonDefault-28022e42.js";import{_ as It}from"./ClausesKeeper-cfc0f758.js";import"./bootstrap-vue-next.es-6aab83a5.js";import"./IconArrow-0cda8946.js";import"./IconClose-c1bee414.js";const wt={Waiting:{id:1,label:"Ожидание оплаты",color:"#459FD1",background:"#ADC1F04C"},ClaimForRegister:{id:2,label:"Заявка на регистрацию",color:"#FFC107",background:"#FFC10733"},ForContractRegister:{id:3,label:"Для регистрации договора",color:"#FFC107",background:"#FFC10733"},OnContractRegister:{id:4,label:"На регистрации договора",color:"#FFC107",background:"#FFC10733"}},c=_=>(st("data-v-b5e9db97"),_=_(),it(),_),kt={key:0,class:"section"},St={class:"container"},Ct={class:"section-header"},Ot={class:"section-title"},Ft={class:"section-label"},Nt={class:"section-nav"},yt={class:"list"},xt={class:"list-col list-col--md"},Pt={class:"list-item"},Bt={class:"list-item__row"},Rt={class:"list-item__title"},Et={class:"list-item__status"},At={class:"list-item__row"},Tt={class:"list-item__ul"},Vt={key:0},Ut={class:"list-item__row list-item__row--column"},Wt={key:0,class:"list-item__text"},jt={class:"list-item__text"},Lt={class:"list-item__text"},Mt={class:"list-item__row"},qt={class:"btn btn--border btn--switch"},Ht=c(()=>t("span",{class:"btn-switch__text"},"Автопродление",-1)),Xt=c(()=>t("span",{class:"btn-switch__toggle"},null,-1)),Yt={class:"list-col list-col--md"},Zt={class:"list-item"},zt={class:"list-item__row list-item__row--nowrap"},Gt=c(()=>t("div",{class:"list-item__title"},"Именные сервера",-1)),Jt={class:"list-item__row list-item__row--table"},Kt=c(()=>t("div",{class:"list-item__item"},"Первичный сервер",-1)),Qt={class:"list-item__item"},$t={class:"list-item__row list-item__row--table"},te=c(()=>t("div",{class:"list-item__item"},"Вторичный сервер",-1)),ee={class:"list-item__item"},oe={class:"list-col list-col--md"},se={class:"list-item"},ie=c(()=>t("div",{class:"list-item__row"},[t("div",{class:"list-item__title"},"Контактные данные")],-1)),ne={class:"list-item__row list-item__row--table"},ae=c(()=>t("div",{class:"list-item__item"},"Скрыть данные в WhoIs",-1)),le={class:"btn btn--switch"},ce=["checked"],re=c(()=>t("span",{class:"btn-switch__toggle"},null,-1)),_e={class:"list-item__row list-item__row--table"},me=c(()=>t("div",{class:"list-item__item"},"Последнее обновление адрес",-1)),de={class:"list-item__item"},ue={key:1,class:"section"},De={class:"container"};function ge(_,s,a,o,E,h){var p,I,w,k,S,C,O,e,i,m,y,A,T,V,U,W,j,L,M,q,H,X,Y,Z;const D=G,f=J("router-link"),b=It,g=pt,F=bt,n=z,N=ft;return u(),v(ot,null,[r(D),(p=o.getDomain)!=null&&p.ID?(u(),v("div",kt,[t("div",St,[t("div",Ct,[t("h1",Ot,l((I=o.getDomain)==null?void 0:I.Domain),1),t("div",Ft,"Домен # "+l((w=o.getDomain)==null?void 0:w.OrderID),1),t("div",Nt,[r(f,{class:"section-nav__item",to:`/DomainOrders/${(k=o.getDomain)==null?void 0:k.OrderID}`},{default:K(()=>[Q("Домен")]),_:1},8,["to"])])]),r(b),((S=o.getDomain)==null?void 0:S.StatusID)==="Waiting"||((C=o.getDomain)==null?void 0:C.StatusID)==="ClaimForRegister"||((O=o.getDomain)==null?void 0:O.StatusID)==="ForContractRegister"||((e=o.getDomain)==null?void 0:e.StatusID)==="ForRegister"||((i=o.getDomain)==null?void 0:i.StatusID)==="ForTransfer"?(u(),$(g,{key:0,class:"btn-mn__bot",label:"Определить владельца",onClick:s[0]||(s[0]=d=>o.designateOwner())})):x("",!0),t("div",yt,[r(F,{"contract-id":(m=o.getDomain)==null?void 0:m.ContractID,onTransfer:s[1]||(s[1]=d=>o.transferItem())},null,8,["contract-id"]),t("div",xt,[t("div",Pt,[t("div",Bt,[t("div",Rt,l((y=o.getDomain)==null?void 0:y.Domain),1),t("div",Et,[r(n,{status:(A=o.getDomain)==null?void 0:A.StatusID,"status-table":"DomainOrders"},null,8,["status"])])]),t("div",At,[t("ul",Tt,[(T=o.getDomainScheme)!=null&&T.PackageID?(u(),v("li",Vt,l((V=o.getDomainScheme)==null?void 0:V.PackageID),1)):x("",!0)])]),t("div",Ut,[(U=o.getDomainScheme)!=null&&U.CostProlong?(u(),v("div",Wt,l((W=o.getDomainScheme)==null?void 0:W.CostProlong)+" ₽ продлить на 12 месяцев",1)):x("",!0),t("div",jt,"Дней осталось "+l(((j=o.getDomain)==null?void 0:j.DaysRemainded)||0),1),t("div",Lt,"Дата окончания "+l(o.calculateExpirationDate((L=o.getDomain)==null?void 0:L.DaysRemainded)),1)]),t("div",Mt,[r(g,{label:((M=o.getDomain)==null?void 0:M.StatusID)==="ClaimForRegister"||((q=o.getDomain)==null?void 0:q.StatusID)==="Waiting"?"Оплатить":"Продлить",onClick:s[2]||(s[2]=d=>o.navigateToProlong())},null,8,["label"]),t("label",qt,[tt(t("input",{type:"checkbox","onUpdate:modelValue":s[3]||(s[3]=d=>o.isAutoProlong=d),onInput:s[4]||(s[4]=d=>o.setProlongValue())},null,544),[[et,o.isAutoProlong]]),Ht,Xt])])])]),t("div",Yt,[t("div",Zt,[t("div",zt,[Gt,r(g,{class:"ml-auto",label:"Редактировать",onClick:s[5]||(s[5]=d=>o.toggleDomainsEdit())})]),t("div",Jt,[Kt,t("div",Qt,l((H=o.getDomain)==null?void 0:H.Ns1Name),1)]),t("div",$t,[te,t("div",ee,l((X=o.getDomain)==null?void 0:X.Ns2Name),1)])])]),t("div",oe,[t("div",se,[ie,t("div",ne,[ae,t("label",le,[t("input",{type:"checkbox",checked:(Y=o.getDomain)==null?void 0:Y.IsPrivateWhoIs,disabled:""},null,8,ce),re])]),t("div",_e,[me,t("div",de,l(o.lastUpdate((Z=o.getDomain)==null?void 0:Z.StatusDate)),1)])])])])])])):(u(),v("div",ue,[t("div",De,[r(N,{label:"Заказ не найден"})])]))],64)}const ve={components:{IconCard:Dt,IconProfile:gt,IconSettings:vt,IconEye:ht,StatusBadge:z,BlockBalanceAgreement:G},async setup(){const _=at(),s=lt(),a=mt(),o=dt(),E=ct(),h=rt("emitter"),D=P(null),f=P(!1),b=P({});function g(){h.emit("open-modal",{component:"DomainsEdit",data:n.value})}function F(){var e;a.DomainOrderNsChange({DomainOrderID:Number((e=n.value)==null?void 0:e.ID),XMLHttpRequest:"yes"}).then(i=>{let{result:m,error:y}=i;m==="SUCCESS"&&(f.value=!1,a.fetchDomains())})}const n=B(()=>Object.keys(a==null?void 0:a.domainsList).map(e=>a==null?void 0:a.domainsList[e]).find(e=>e.OrderID===_.params.id)),N=B(()=>{var e,i;return(i=a==null?void 0:a.domainSchemes)==null?void 0:i[(e=n.value)==null?void 0:e.SchemeID]}),p=B(()=>{var e,i;return(i=s==null?void 0:s.userOrders)==null?void 0:i[(e=n.value)==null?void 0:e.OrderID]});function I(e){if(!e)return R(new Date);const i=new Date,m=new Date(i.getTime()+e*24*60*60*1e3);return R(m)}function w(e){return e?R(ut(e)):""}function k(){console.log(n.value);try{const e={DomainOrderID:n==null?void 0:n.value.ID};h.emit("open-modal",{component:"DomainSelectOwner",data:e})}catch(e){console.error(e)}}function S(){var e,i;h.emit("open-modal",{component:"OrdersTransfer",data:{ServiceOrderID:(e=n.value)==null?void 0:e.ID,ServiceID:(i=n.value)==null?void 0:i.ServiceID}})}function C(){var e;s.prolongOrder({IsAutoProlong:D.value?0:1,OrderID:(e=n.value)==null?void 0:e.OrderID})}function O(){var e;E.push(`/DomainOrderPay/${(e=n.value)==null?void 0:e.OrderID}`)}return _t(()=>{var e,i;b.value={Ns1Name:(e=n.value)==null?void 0:e.Ns1Name,Ns2Name:(i=n.value)==null?void 0:i.Ns2Name}}),await a.fetchDomains(),await a.fetchDomainSchemes(),await o.fetchProfiles(),await s.fetchUserOrders().then(()=>{var e;D.value=(e=p.value)==null?void 0:e.IsAutoProlong}),{getDomain:n,getDomainScheme:N,isAutoProlong:D,setProlongValue:C,navigateToProlong:O,domainStatuses:wt,transferItem:S,lastUpdate:w,designateOwner:k,calculateExpirationDate:I,domainsEdit:f,domainNames:b,saveDomains:F,toggleDomainsEdit:g}}},Ee=nt(ve,[["render",ge],["__scopeId","data-v-b5e9db97"]]);export{Ee as default};
