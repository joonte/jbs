import{j as It,o as g,c as v,b as c,a as t,t as a,w as I,d as S,Y as x,ae as V,k as dt,Z as St,F as Ot,p as wt,l as Ht,_ as bt,a7 as Pt,e as kt,f as yt,R as Ct,r as mt,g as O}from"./index-4434f005.js";import{_ as xt}from"./IconCard-285cc6ac.js";import{I as Nt}from"./IconProfile-ecfd6b08.js";import{I as Bt}from"./IconSettings-bbe5c2c5.js";import{I as vt}from"./IconEye-0796e2b7.js";import{S as ut}from"./StatusBadge-129e5649.js";import{h as At}from"./hostStatuses-94d00f20.js";import{u as Et}from"./testTransforms-eec373ee.js";import{f as gt}from"./useTimeFunction-8602dd60.js";import{u as Tt}from"./hosting-841b6443.js";import{u as Vt}from"./resetServer-d0ed57a3.js";import{u as Mt}from"./globalActions-e617f474.js";import{_ as ht}from"./ClausesKeeper-68df7f35.js";import{_ as pt}from"./ServicesContractBalanceBlock-01c380b1.js";import{s as Dt}from"./SettingsEngineItem-674db71c.js";import{B as ft}from"./BlockBalanceAgreement-4e844242.js";import{E as Rt}from"./EmptyStateBlock-927727c9.js";import{_ as Lt}from"./paramsAccordionBlock-9daf2a19.js";import{_ as Gt}from"./ButtonDefault-f91c301e.js";import{z as jt}from"./bootstrap-vue-next.es-5d8af788.js";import"./IconClose-0cfbf563.js";import"./contracts-d017d511.js";import"./IconArrow-6847c901.js";const d=u=>(wt("data-v-9378e1df"),u=u(),Ht(),u),Ft={key:0,class:"my-hosting-order"},Ut={class:"section"},Wt={class:"container"},qt={class:"section-header"},zt={class:"section-title"},Kt={class:"section-label"},Yt={class:"section-nav"},Zt={class:"list"},Jt={class:"list-col list-col--md"},Qt={class:"list-item"},Xt={class:"list-item__row"},$t={class:"list-item__title"},te={class:"list-item__status"},ee={class:"list-item__row"},se={class:"list-item__ul"},oe={class:"list-item__row list-item__row--column"},ie={class:"list-item__text"},ne={key:0,class:"list-item__text"},ae={key:1,class:"list-item__text"},re={class:"list-item__row"},le={class:"btn btn--border btn--switch"},ce=d(()=>t("span",{class:"btn-switch__text"},"Автопродление",-1)),_e=d(()=>t("span",{class:"btn-switch__toggle"},null,-1)),de={class:"list-col list-col--md"},me={class:"list-item"},ge={class:"list-item__row"},ve=d(()=>t("div",{class:"list-item__title"},"Панель управления",-1)),ue={class:"list-item__row list-item__row--table"},he=d(()=>t("div",{class:"list-item__item"},"Адрес",-1)),pe={class:"list-item__item"},De={class:"list-item__row list-item__row--table"},fe=d(()=>t("div",{class:"list-item__item"},"Логин",-1)),Ie={class:"list-item__item"},Se={class:"list-item__row list-item__row--table"},Oe=d(()=>t("div",{class:"list-item__item"},"Пароль",-1)),we={class:"list-item__item hide-button"},He={key:0,class:"password-hidden"},be={class:"list-item__row list-item__row--table"},Pe=d(()=>t("div",{class:"list-item__item"},"FTP, POP3, SMTP, IMAP",-1)),ke={class:"list-item__item"},ye={class:"list-col list-col--md"},Ce={class:"list-item"},xe=d(()=>t("div",{class:"list-item__row"},[t("div",{class:"list-item__title"},"Именные сервера")],-1)),Ne={class:"list-item__row list-item__row--table"},Be={class:"list-item__item"},Ae={class:"list-item__item"},Ee={class:"list-item__item"},Te={class:"list-item__item"},Ve={key:1,class:"section"},Me={class:"container"};function Re(u,i,r,e,h,M){var H,b,P,k,y,C,s,o,l,R,L,G,j,F,U,W,q,z,K,Y,Z,J,Q,X,$,tt,et,st,ot,it,nt,at,rt,lt,ct,_t;const N=ft,m=It("router-link"),B=ht,p=pt,n=ut,D=jt,f=Dt,w=Gt,A=vt,E=Lt,T=Rt;return g(),v(Ot,null,[c(N),(H=e.getHostingOrderData)!=null&&H.ID?(g(),v("div",Ft,[t("div",Ut,[t("div",Wt,[t("div",qt,[t("h1",zt,a((b=e.getHostingOrderData)==null?void 0:b.Domain),1),t("div",Kt,"Хостинг # "+a((P=e.getHostingOrderData)==null?void 0:P.OrderID),1),t("div",Yt,[c(m,{class:"section-nav__item",to:`/HostingOrders/${(k=e.getHostingOrderData)==null?void 0:k.OrderID}`},{default:I(()=>[S("Хостинг")]),_:1},8,["to"])])]),c(B,{partition:"Header:/HostingOrders"}),t("div",Zt,[c(p,{"contract-id":(y=e.getHostingOrderData)==null?void 0:y.ContractID,onTransfer:i[0]||(i[0]=_=>e.transferItem())},null,8,["contract-id"]),t("div",Jt,[t("div",Qt,[t("div",Xt,[t("div",$t,a((C=e.getHostingScheme)==null?void 0:C.Name),1),t("div",te,[c(n,{status:(s=e.getHostingOrderData)==null?void 0:s.StatusID,"status-table":"HostingOrders"},null,8,["status"])]),c(f,null,{default:I(()=>[c(D,{onClick:i[1]||(i[1]=_=>e.openPackageChangeModal())},{default:I(()=>[S("Изменить тариф")]),_:1}),c(D,{onClick:i[2]||(i[2]=_=>e.openOrderRestore())},{default:I(()=>[S("Просмотреть учет заказа")]),_:1}),c(D,{onClick:i[3]||(i[3]=_=>e.openPasswordChange())},{default:I(()=>[S("Сменить пароль от аккаунта")]),_:1})]),_:1})]),t("div",ee,[t("ul",se,[x(t("li",null,a(e.formDescriptionLine((l=(o=e.getHostingScheme)==null?void 0:o.SchemeParams)==null?void 0:l.limit_webdomains)),513),[[V,(G=(L=(R=e.getHostingScheme)==null?void 0:R.SchemeParams)==null?void 0:L.limit_webdomains)==null?void 0:G.Value]]),x(t("li",null,a(e.formDescriptionLine((F=(j=e.getHostingScheme)==null?void 0:j.SchemeParams)==null?void 0:F.limit_quota)),513),[[V,(q=(W=(U=e.getHostingScheme)==null?void 0:U.SchemeParams)==null?void 0:W.limit_quota)==null?void 0:q.Value]]),x(t("li",null,a(e.formDescriptionLine((K=(z=e.getHostingScheme)==null?void 0:z.SchemeParams)==null?void 0:K.limit_emails)),513),[[V,(J=(Z=(Y=e.getHostingScheme)==null?void 0:Y.SchemeParams)==null?void 0:Z.limit_emails)==null?void 0:J.Value]])])]),t("div",oe,[t("div",ie,a((Q=e.getHostingScheme)==null?void 0:Q.CostMonth)+" ₽ в месяц",1),((X=e.getHostingOrderData)==null?void 0:X.StatusID)!=="Waiting"?(g(),v("div",ne,"Дней осталось "+a((($=e.getHostingOrderData)==null?void 0:$.DaysRemainded)||0),1)):dt("",!0),((tt=e.getHostingOrderData)==null?void 0:tt.StatusID)!=="Waiting"?(g(),v("div",ae,"Дата окончания "+a(e.calculateExpirationDate((et=e.getHostingOrderData)==null?void 0:et.DaysRemainded)),1)):dt("",!0)]),t("div",re,[t("div",{class:"btn btn-default btn--blue",onClick:i[4]||(i[4]=_=>e.navigateToProlong())},a(((st=e.getHostingOrderData)==null?void 0:st.StatusID)==="Waiting"?"Оплатить":"Продлить"),1),t("label",le,[x(t("input",{type:"checkbox","onUpdate:modelValue":i[5]||(i[5]=_=>e.isAutoProlong=_),onInput:i[6]||(i[6]=_=>e.setProlongValue())},null,544),[[St,e.isAutoProlong]]),ce,_e])])])]),t("div",de,[t("div",me,[t("div",ge,[ve,c(w,{class:"ml-auto",onClick:i[7]||(i[7]=_=>e.orderManage()),label:"Вход"})]),t("div",ue,[he,t("div",pe,a(`https://${(ot=e.getServerGroup)==null?void 0:ot.Address}/manager`),1)]),t("div",De,[fe,t("div",Ie,a((it=e.getHostingOrderData)==null?void 0:it.Login),1)]),t("div",Se,[Oe,t("div",we,[e.passwordShow?(g(),v("div",He,a(e.getHostingOrderData.Password),1)):(g(),v("button",{key:1,class:"btn btn--border btn--md hide-button",onClick:i[8]||(i[8]=_=>e.passwordShow=!0)},[c(A),S("Показать")]))])]),t("div",be,[Pe,t("div",ke,a((nt=e.getServerGroup)==null?void 0:nt.Address),1)])])]),t("div",ye,[t("div",Ce,[xe,t("div",Ne,[t("div",Be,a((at=e.getHostingOrderData)==null?void 0:at.Ns1Name),1),t("div",Ae,a((rt=e.getHostingOrderData)==null?void 0:rt.Ns2Name),1),t("div",Ee,a((lt=e.getHostingOrderData)==null?void 0:lt.Ns3Name),1),t("div",Te,a((ct=e.getHostingOrderData)==null?void 0:ct.Ns4Name),1)])])])])])]),c(E,{"params-list":(_t=e.getHostingScheme)==null?void 0:_t.SchemeParams,label:"Общая информация","main-param":"InternalName"},null,8,["params-list"])])):(g(),v("div",Ve,[t("div",Me,[c(T,{label:"Заказ не найден"})])]))],64)}const Le={components:{IconCard:xt,IconProfile:Nt,IconSettings:Bt,IconEye:vt,StatusBadge:ut,ClausesKeeper:ht,settingsEngineItem:Dt,ServicesContractBalanceBlock:pt,BlockBalanceAgreement:ft},async setup(){const u=Pt(),i=kt(),r=Tt(),e=Vt(),h=yt(),M=Mt(),{formDescriptionLine:N}=Et(),m=Ct("emitter");m.on("updateHostingIDPage",()=>{r.fetchHostingOrders()});const B=mt(!1),p=mt(!1),n=O(()=>Object.keys(r==null?void 0:r.hostingList).map(s=>r==null?void 0:r.hostingList[s]).find(s=>s.OrderID===u.params.id)),D=O(()=>r==null?void 0:r.hostingSchemes),f=O(()=>{var s,o;return(o=D.value)==null?void 0:o[(s=n.value)==null?void 0:s.SchemeID]}),w=O(()=>{var s,o;return(o=h==null?void 0:h.userOrders)==null?void 0:o[(s=n.value)==null?void 0:s.OrderID]}),A=O(()=>{var s,o,l;return(l=(s=e==null?void 0:e.serverGroupsList)==null?void 0:s.Servers)==null?void 0:l[(o=n.value)==null?void 0:o.ServerID]});function E(s){if(!s)return gt(new Date);const o=new Date,l=new Date(o.getTime()+s*24*60*60*1e3);return gt(l)}function T(){var s,o;m.emit("open-modal",{component:"OrdersTransfer",data:{ServiceOrderID:(s=n.value)==null?void 0:s.ID,ServiceID:(o=n.value)==null?void 0:o.ServiceID}})}function H(){var s;h.prolongOrder({IsAutoProlong:p.value?0:1,OrderID:(s=n.value)==null?void 0:s.OrderID})}function b(){var s;i.push(`/HostingOrderPay/${(s=n.value)==null?void 0:s.OrderID}`)}function P(){var s,o,l;M.OrderManage({ServiceOrderID:(s=n.value)==null?void 0:s.ID,OrderID:(o=n.value)==null?void 0:o.OrderID,ServiceID:(l=n.value)==null?void 0:l.ServiceID})}function k(){var s,o;m.emit("open-modal",{component:"HostingOrderSchemeChange",data:{hostingID:(s=n.value)==null?void 0:s.ID,ServerGroup:(o=f.value)==null?void 0:o.ServersGroupID,emitEvent:"updateHostingIDPage"}})}function y(){var s,o;m.emit("open-modal",{component:"OrderPasswordChange",data:{OrderID:(s=n.value)==null?void 0:s.ID,ServiceID:(o=n.value)==null?void 0:o.ServiceID,emitEvent:"updateHostingIDPage"}})}function C(){var s,o,l;m.emit("open-modal",{component:"OrderRestore",data:{OrderID:(s=n.value)==null?void 0:s.OrderID,CostDay:(o=f.value)==null?void 0:o.CostDay,DaysRemainded:(l=n.value)==null?void 0:l.DaysRemainded,emitEvent:"updateHostingIDPage"}})}return await r.fetchHostingOrders(),await r.fetchHostingSchemes(),await e.fetchServerGroups(),await h.fetchUserOrders().then(()=>{var s;p.value=(s=w.value)==null?void 0:s.IsAutoProlong}),{getHostingOrderData:n,getHostingScheme:f,getUserOrder:w,getServerGroup:A,isAutoProlong:p,passwordShow:B,openOrderRestore:C,openPackageChangeModal:k,orderManage:P,navigateToProlong:b,setProlongValue:H,openPasswordChange:y,hostStatuses:At,transferItem:T,formDescriptionLine:N,calculateExpirationDate:E}}},cs=bt(Le,[["render",Re],["__scopeId","data-v-9378e1df"]]);export{cs as default};
