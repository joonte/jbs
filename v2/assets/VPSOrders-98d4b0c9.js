import{j as L,o as u,c as D,a as r,b as l,w as S,d as w,t as x,F as R,v as K,n as Z,k as $,_ as q,r as N,x as M,p as tt,l as et,R as ot,g as O}from"./index-4434f005.js";import{I as at}from"./IconSearch-d168a9f9.js";import{u as G}from"./vps-a29a78bf.js";import{_ as st}from"./HelperComponent-e4e3ffbd.js";import{S as J}from"./StatusBadge-129e5649.js";import{I as Q}from"./IconRotate-e3e90678.js";import{v as nt}from"./vpsStatuses-32ffaaf5.js";import{z as rt,d as it}from"./bootstrap-vue-next.es-5d8af788.js";import{_ as lt}from"./IconDots-a0319d0c.js";import{_ as ct}from"./IconCard-285cc6ac.js";import{_ as dt}from"./OrderIDBadge-4cc1db15.js";import{S as _t}from"./Select2-bf6aa49e.js";import{s as mt}from"./multiselect-eb561fe9.js";import{_ as W}from"./ClausesKeeper-68df7f35.js";import{u as ut}from"./contracts-d017d511.js";import{B as X}from"./BlockBalanceAgreement-4e844242.js";import{u as ft}from"./globalActions-e617f474.js";import{E as pt}from"./EmptyStateBlock-927727c9.js";import{_ as vt}from"./FormInputSearch-29c276f6.js";import"./ButtonDefault-f91c301e.js";import"./IconArrow-6847c901.js";import"./IconClose-0cfbf563.js";import"./IconPlus-6c2cbbce.js";const gt={class:"hosting-item"},bt={class:"hosting-item__row"},Dt={class:"hosting-item__row"},It={class:"hosting-item__person"},ht={class:"hosting-item__row"},Vt={class:"hosting-item__list"},Pt=["innerHTML"],St={class:"hosting-item__controls"},yt={class:"ico"},Ct={class:"btn btn--dots"};function kt(o,n,s,e,g,B){var a,t,_,d,p,b,v;const i=dt,c=L("router-link"),f=J,I=L("Helper"),y=Q,C=ct,h=lt,V=rt,P=it;return u(),D("div",gt,[r("div",bt,[l(i,{orderID:(a=s.itemData)==null?void 0:a.OrderID},null,8,["orderID"]),l(c,{class:"hosting-item__name",to:`/VPSOrders/${s.itemData.OrderID}`},{default:S(()=>[w(x(s.itemData.IP||s.itemData.Domain),1)]),_:1},8,["to"]),l(f,{status:(t=s.itemData)==null?void 0:t.StatusID,DaysRemainded:(_=s.itemData)==null?void 0:_.DaysRemainded,"status-table":"VPSOrders"},null,8,["status","DaysRemainded"])]),r("div",Dt,[r("div",It,x(s.userName),1),l(I,{"user-notice":(d=s.itemData)==null?void 0:d.UserNotice,id:(p=s.itemData)==null?void 0:p.OrderID,position:s.isLast?"bottom":"top",emit:"updateVPSList"},null,8,["user-notice","id","position"])]),r("div",ht,[r("ul",Vt,[(u(!0),D(R,null,K(s.params,m=>(u(),D("li",{innerHTML:m==null?void 0:m.text},null,8,Pt))),256))])]),r("div",St,[((b=s.itemData)==null?void 0:b.StatusID)==="Active"?(u(),D("div",{key:0,class:Z(["btn btn--md btn--border btn--rotate btn--rotate_green button-large",{"btn--rotate_gray":((v=s.itemData)==null?void 0:v.StatusID)!=="Active"||e.isReloading,"btn--rotate_loading":e.isReloading}]),title:"Перезагрузить выделенный сервер",onClick:n[0]||(n[0]=(...m)=>e.reloadItem&&e.reloadItem(...m))},[w("Включен"),r("button",null,[r("div",yt,[l(y)])])],2)):$("",!0),r("div",{class:"btn btn--md btn--bold",onClick:n[1]||(n[1]=m=>{var k;return o.$router.push(`/VPSOrderPay/${(k=s.itemData)==null?void 0:k.OrderID}`)})},[l(C),w("Оплатить")]),l(P,{class:"dropdown-dots",right:""},{"button-content":S(()=>[r("div",Ct,[l(h)])]),default:S(()=>[l(V,{onClick:n[2]||(n[2]=m=>e.orderManage())},{default:S(()=>[w("Управлять заказом")]),_:1})]),_:1})])])}const Ot={components:{StatusBadge:J,IconRotate:Q,Helper:st},props:{params:{type:Array,default:()=>[]},itemData:{type:Object,default:()=>{}},isLast:{type:Boolean,default:!1},userName:{type:String,default:""}},emits:["manage"],setup(o,{emit:n}){const s=G(),e=N(!1);function g(i){var c;e.value=!0,s.VPSReboot({VPSOrderID:(c=o.itemData)==null?void 0:c.ID}).then(()=>{setTimeout(()=>{e.value=!1},1e3)})}function B(){var i,c,f;n("manage",{ServiceOrderID:(i=o.itemData)==null?void 0:i.ID,ServiceID:(c=o.itemData)==null?void 0:c.ServiceID,OrderID:(f=o.itemData)==null?void 0:f.OrderID})}return{vpsStatuses:nt,reloadItem:g,isReloading:e,orderManage:B}}},Y=q(Ot,[["render",kt],["__scopeId","data-v-52419a3b"]]),wt=o=>(tt("data-v-8751ab58"),o=o(),et(),o),Bt={class:"section"},Lt={class:"container"},xt={class:"section-header"},Mt=wt(()=>r("h1",{class:"section-title"},"VPS/VDS серверы",-1)),Rt={class:"list-form"},Nt={class:"list-form_col list-form_col--sm"},Ut={class:"list-form_select"},At={class:"multiselect-option"},jt={key:0};function Ht(o,n,s,e,g,B){var V,P,a;const i=X,c=L("router-link"),f=W,I=L("Multiselect"),y=vt,C=Y,h=pt;return u(),D(R,null,[l(i),r("div",Bt,[r("div",Lt,[r("div",xt,[Mt,l(c,{class:"btn btn--blue btn-default",to:"/VPSSchemes"},{default:S(()=>[w("Заказать")]),_:1})]),l(f),r("div",Rt,[r("div",Nt,[r("div",Ut,[l(I,{modelValue:e.select,"onUpdate:modelValue":n[0]||(n[0]=t=>e.select=t),options:e.getUsers,disabled:((V=e.getUsers)==null?void 0:V.length)<=1,label:"name"},{option:S(({option:t})=>[r("div",At,"# "+x(t.value.padStart(5,"0"))+" / "+x(t.name),1)]),_:1},8,["modelValue","options","disabled"])])]),l(y,{modelValue:e.search,"onUpdate:modelValue":n[1]||(n[1]=t=>e.search=t)},null,8,["modelValue"])]),e.getVpsOrders&&((P=e.getVpsOrders)==null?void 0:P.length)>0?(u(),D("div",jt,[e.filterProducts&&((a=e.filterProducts)==null?void 0:a.length)>0?(u(!0),D(R,{key:0},K(e.filterProducts,(t,_)=>{var d;return u(),M(C,{"item-data":t,"is-last":_===e.filterProducts.length-1,"user-name":(d=e.getContracts[t==null?void 0:t.ContractID])==null?void 0:d.Customer,params:e.formItemParamList(t),onManage:e.orderManage},null,8,["item-data","is-last","user-name","params","onManage"])}),256)):(u(),M(h,{key:1,class:"no-margin",label:"Заказы не найдены"}))])):(u(),M(h,{key:1,class:"no-margin",label:"У вас нет заказов на VPS/VDS серверы"}))])])],64)}const Et={components:{IconSearch:at,Select2:_t,ClausesKeeper:W,Multiselect:mt,VpsItem:Y,BlockBalanceAgreement:X},async setup(){const o=G(),n=ut(),s=ft(),e=N(null),g=N("*");ot("emitter").on("updateVPSList",()=>{o.fetchVPS()});const i=O(()=>{var a;return(a=Object.keys(o==null?void 0:o.vpsList).map(t=>o==null?void 0:o.vpsList[t]))==null?void 0:a.reverse()}),c=O(()=>o.vpsSchemes),f=O(()=>h(y(i.value))),I=O(()=>n==null?void 0:n.contractsList);function y(a){return g.value!=="*"?a.filter(t=>(t==null?void 0:t.ContractID)===g.value):a}function C(a){s.OrderManage(a)}function h(a){return e.value!==null?a.filter(t=>t==null?void 0:t.IP.toLowerCase().includes(e.value.toLowerCase())):a}const V=O(()=>{let a=[{value:"*",name:"Все договора"}];return i.value!==null?(Object.keys(i.value).forEach(t=>{var _,d,p;a.find(b=>{var v;return b.value===((v=i.value[t])==null?void 0:v.ContractID)})||a.push({value:(_=i.value[t])==null?void 0:_.ContractID,name:(p=I.value[(d=i.value[t])==null?void 0:d.ContractID])==null?void 0:p.Customer})}),a):{value:"*",name:"Все договора"}});function P(a){var _,d,p,b,v,m,k,U,A,j,H,E,T,z,F;const t=(_=c.value)==null?void 0:_[a.SchemeID];return[{text:`${t==null?void 0:t.Name}`},{text:`${(p=(d=t==null?void 0:t.SchemeParams)==null?void 0:d.hdd_mib)==null?void 0:p.InternalName} ${(v=(b=t==null?void 0:t.SchemeParams)==null?void 0:b.hdd_mib)==null?void 0:v.Value} ${(k=(m=t==null?void 0:t.SchemeParams)==null?void 0:m.hdd_mib)==null?void 0:k.Unit}`},{text:`RAM ${(A=(U=t==null?void 0:t.SchemeParams)==null?void 0:U.ram_mib)==null?void 0:A.Value} ${(H=(j=t==null?void 0:t.SchemeParams)==null?void 0:j.ram_mib)==null?void 0:H.Unit}`},{text:`Канал ${(T=(E=t==null?void 0:t.SchemeParams)==null?void 0:E.net_bandwidth_mbitps)==null?void 0:T.Value} ${(F=(z=t==null?void 0:t.SchemeParams)==null?void 0:z.net_bandwidth_mbitps)==null?void 0:F.Unit}`}]}return await o.fetchVPS(),await o.fetchVPSSchemes(),await n.fetchContracts(),{getVpsOrders:i,search:e,getContracts:I,select:g,orderManage:C,formItemParamList:P,getUsers:V,filterProducts:f}}},de=q(Et,[["render",Ht],["__scopeId","data-v-8751ab58"]]);export{de as default};
