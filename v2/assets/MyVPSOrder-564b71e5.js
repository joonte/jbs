import{j as yt,o as u,c as p,b as r,a as t,t as a,Y as Dt,ae as Ct,d as g,w as D,k as xt,Z as At,F as Bt,p as Rt,l as Et,_ as Mt,f as Nt,a7 as Ut,e as Tt,r as Vt,R as Lt,g as R}from"./index-e8e4a28d.js";import{u as jt}from"./contracts-f70de43e.js";import{u as Ft}from"./vps-011394b5.js";import{u as Gt}from"./globalActions-78d58809.js";import{_ as zt}from"./IconCard-49dbdefd.js";import{I as Wt}from"./IconProfile-6cebb8f7.js";import{I as Yt}from"./IconSettings-c5bc1528.js";import{I as wt}from"./IconEye-2bad324c.js";import{S as Ot}from"./StatusBadge-3b9ca694.js";import{f as ft}from"./useTimeFunction-8602dd60.js";import{v as Zt}from"./vpsStatuses-32ffaaf5.js";import{s as Pt}from"./SettingsEngineItem-a4a3ad87.js";import{B as kt}from"./BlockBalanceAgreement-00019440.js";import{E as qt}from"./EmptyStateBlock-b36abca5.js";import{_ as Ht}from"./ButtonDefault-28022e42.js";import{z as Jt}from"./bootstrap-vue-next.es-6aab83a5.js";import{_ as Kt}from"./ServicesContractBalanceBlock-06024488.js";import{_ as Qt}from"./ClausesKeeper-cfc0f758.js";import{I as Xt}from"./IconRotate-60f8a9ee.js";import"./IconArrow-0cda8946.js";import"./IconClose-c1bee414.js";const l=c=>(Rt("data-v-476cdb1b"),c=c(),Et(),c),$t={key:0,class:"my-vps-order"},te={class:"section"},ee={class:"container"},se={class:"section-header"},oe={class:"section-title"},ie={class:"btn btn--md btn--border btn--rotate btn--rotate_green button-large"},ne={class:"ico"},ae={class:"section-label"},re={class:"section-nav"},le={class:"list"},ce={class:"list-col list-col--md"},_e={class:"list-item"},de={class:"list-item__row"},me={class:"list-item__title"},ve={class:"list-item__status"},he={class:"list-item__row"},ue={class:"list-item__ul"},pe={key:0},ge={class:"list-item__row list-item__row--column"},Se={class:"list-item__text"},Ie={class:"list-item__text"},be={class:"list-item__text"},De={class:"list-item__row"},Ve={class:"btn btn--border btn--switch"},fe=l(()=>t("span",{class:"btn-switch__text"},"Автопродление",-1)),we=l(()=>t("span",{class:"btn-switch__toggle"},null,-1)),Oe={class:"list-col list-col--md"},Pe={class:"list-item"},ke={class:"list-item__row"},ye=l(()=>t("div",{class:"list-item__title"},"Панель управления",-1)),Ce={class:"list-item__row list-item__row--table"},xe=l(()=>t("div",{class:"list-item__item"},"Адрес",-1)),Ae={class:"list-item__item"},Be={class:"list-item__row list-item__row--table"},Re=l(()=>t("div",{class:"list-item__item"},"Логин",-1)),Ee={class:"list-item__item"},Me={class:"list-item__row list-item__row--table password-box"},Ne=l(()=>t("div",{class:"list-item__item"},"Пароль",-1)),Ue={class:"list-item__item"},Te={key:0,class:"password-hidden"},Le={class:"list-item__row list-item__row--table"},je=l(()=>t("div",{class:"list-item__item"},"IP адрес",-1)),Fe={class:"list-item__item"},Ge={class:"list-col list-col--md"},ze={class:"list-item"},We=l(()=>t("div",{class:"list-item__row"},[t("div",{class:"list-item__title"},"Именные сервера")],-1)),Ye={class:"list-item__row list-item__row--table"},Ze=l(()=>t("div",{class:"list-item__item"},"Первичный сервер",-1)),qe={class:"list-item__item"},He={class:"list-item__row list-item__row--table"},Je=l(()=>t("div",{class:"list-item__item"},"Вторичный сервер",-1)),Ke={class:"list-item__item"},Qe={class:"list-col list-col--md"},Xe={class:"list-item"},$e=l(()=>t("div",{class:"list-item__row"},[t("div",{class:"list-item__title"},"Паркованный домен")],-1)),ts={class:"list-item__row list-item__row--table"},es=l(()=>t("div",{class:"list-item__item"},"Паркованный домен",-1)),ss={class:"list-item__item"},os=l(()=>t("div",{class:"section"},[t("div",{class:"container"},[t("div",{class:"text"},[t("h3",null,"Что входит в стоимость"),t("p",null,"Для подключения дополнительных услуг"),t("ul",null,[t("li",null,"Размещение в РФ, Москва"),t("li",null,"Предустановленная ОС FreeBSD / CentOS / Debian / Ubuntu / Windows"),t("li",null,"IP адрес, с возможностью расширения"),t("li",null,"Бесплатная панель управления ISPManager Lite"),t("li",null,"Круглосуточная поддержка")])])])],-1)),is={key:1,class:"section"},ns={class:"container"};function as(c,i,v,e,P,k){var h,f,w,O,s,o,_,E,M,N,U,T,L,j,F,G,z,W,Y,Z,q,H,J,K,Q,X,$,tt,et,st,ot,it,nt,at,rt,lt,ct,_t,dt,mt,vt,ht,ut,pt,gt,St,It,bt;const S=kt,m=Ot,y=Xt,n=yt("router-link"),I=Qt,C=Kt,b=Jt,x=Pt,V=Ht,A=wt,B=qt;return u(),p(Bt,null,[r(S),(h=e.getVpsOrder)!=null&&h.ID?(u(),p("div",$t,[t("div",te,[t("div",ee,[t("div",se,[t("h1",oe,a((f=e.getVpsOrder)==null?void 0:f.Domain),1),r(m,{status:(w=e.getVpsOrder)==null?void 0:w.StatusID,"status-table":"VPSOrders"},null,8,["status"]),Dt(t("button",ie,[g("Включен"),t("div",ne,[r(y)])],512),[[Ct,((O=e.getVpsOrder)==null?void 0:O.StatusID)==="Active"]]),t("div",ae,"VPS/VDS сервер # "+a((s=e.getVpsOrder)==null?void 0:s.OrderID),1),t("div",re,[r(n,{class:"section-nav__item",to:"#"},{default:D(()=>[g("Сервер")]),_:1})])]),r(I),t("div",le,[r(C,{"contract-id":(o=e.getVpsOrder)==null?void 0:o.ContractID,onTransfer:i[0]||(i[0]=d=>e.transferItem())},null,8,["contract-id"]),t("div",ce,[t("div",_e,[t("div",de,[t("div",me,a((_=e.getVpsScheme)==null?void 0:_.Name),1),t("div",ve,[r(m,{status:(E=e.getVpsOrder)==null?void 0:E.StatusID,"status-table":"VPSOrders"},null,8,["status"])]),r(x,null,{default:D(()=>[r(b,{onClick:i[1]||(i[1]=d=>e.changeScheme())},{default:D(()=>[g("Изменить тариф")]),_:1}),r(b,{onClick:i[2]||(i[2]=d=>e.openOrderRestore())},{default:D(()=>[g("Просмотреть учет заказа")]),_:1}),r(b,{onClick:i[3]||(i[3]=d=>e.openPasswordChange())},{default:D(()=>[g("Сменить пароль от аккаунта")]),_:1})]),_:1})]),t("div",he,[t("ul",ue,[(U=(N=(M=e.getVpsScheme)==null?void 0:M.SchemeParams)==null?void 0:N.os)!=null&&U.value?(u(),p("li",pe,a((j=(L=(T=e.getVpsScheme)==null?void 0:T.SchemeParams)==null?void 0:L.os)==null?void 0:j.value),1)):xt("",!0),t("li",null,a(`${(z=(G=(F=e.getVpsScheme)==null?void 0:F.SchemeParams)==null?void 0:G.hdd_mib)==null?void 0:z.InternalName} ${(Z=(Y=(W=e.getVpsScheme)==null?void 0:W.SchemeParams)==null?void 0:Y.hdd_mib)==null?void 0:Z.Value} ${(J=(H=(q=e.getVpsScheme)==null?void 0:q.SchemeParams)==null?void 0:H.hdd_mib)==null?void 0:J.Unit}`),1),t("li",null,a(`RAM ${(X=(Q=(K=e.getVpsScheme)==null?void 0:K.SchemeParams)==null?void 0:Q.ram_mib)==null?void 0:X.Value} ${(et=(tt=($=e.getVpsScheme)==null?void 0:$.SchemeParams)==null?void 0:tt.ram_mib)==null?void 0:et.Unit}`),1),t("li",null,a(`Канал ${(it=(ot=(st=e.getVpsScheme)==null?void 0:st.SchemeParams)==null?void 0:ot.net_bandwidth_mbitps)==null?void 0:it.Value} ${(rt=(at=(nt=e.getVpsScheme)==null?void 0:nt.SchemeParams)==null?void 0:at.net_bandwidth_mbitps)==null?void 0:rt.Unit}`),1)])]),t("div",ge,[t("div",Se,a((lt=e.getVpsScheme)==null?void 0:lt.CostMonth)+" ₽ в месяц",1),t("div",Ie,"Дней осталось "+a((ct=e.getVpsOrder)==null?void 0:ct.DaysRemainded),1),t("div",be,"Дата окончания "+a(e.calculateExpirationDate((_t=e.getVpsOrder)==null?void 0:_t.DaysRemainded)),1)]),t("div",De,[r(V,{label:((dt=e.getVpsOrder)==null?void 0:dt.StatusID)==="Suspended"||((mt=e.getVpsOrder)==null?void 0:mt.StatusID)==="Waiting"?"Оплатить":"Продлить",onClick:i[4]||(i[4]=d=>e.navigateToProlong())},null,8,["label"]),t("label",Ve,[Dt(t("input",{type:"checkbox","onUpdate:modelValue":i[5]||(i[5]=d=>e.isAutoProlong=d),onInput:i[6]||(i[6]=d=>e.setProlongValue())},null,544),[[At,e.isAutoProlong]]),fe,we])])])]),t("div",Oe,[t("div",Pe,[t("div",ke,[ye,r(V,{class:"ml-auto",onClick:i[7]||(i[7]=d=>e.orderManage()),label:"Вход"})]),t("div",Ce,[xe,t("div",Ae,a(`https://${(vt=c.getServerGroup)==null?void 0:vt.Address}/manager`),1)]),t("div",Be,[Re,t("div",Ee,a((ht=e.getVpsOrder)==null?void 0:ht.Login),1)]),t("div",Me,[Ne,t("div",Ue,[e.passwordShow?(u(),p("div",Te,a((ut=e.getVpsOrder)==null?void 0:ut.Password),1)):(u(),p("button",{key:1,class:"btn btn--border btn--md password-box",onClick:i[8]||(i[8]=d=>e.passwordShow=!0)},[r(A),g("Показать")]))])]),t("div",Le,[je,t("div",Fe,a((pt=e.getVpsOrder)!=null&&pt.IP?(gt=e.getVpsOrder)==null?void 0:gt.IP:"-"),1)])])]),t("div",Ge,[t("div",ze,[We,t("div",Ye,[Ze,t("div",qe,a((St=e.getVpsOrder)==null?void 0:St.Ns1Name),1)]),t("div",He,[Je,t("div",Ke,a((It=e.getVpsOrder)==null?void 0:It.Ns2Name),1)])])]),t("div",Qe,[t("div",Xe,[$e,t("div",ts,[es,t("div",ss,a((bt=e.getVpsOrder)==null?void 0:bt.Domain),1)])])])])])]),os])):(u(),p("div",is,[t("div",ns,[r(B,{label:"Заказ не найден"})])]))],64)}const rs={components:{IconCard:zt,IconProfile:Wt,IconSettings:Yt,IconEye:wt,StatusBadge:Ot,settingsEngineItem:Pt,BlockBalanceAgreement:kt},async setup(){const c=Ft(),i=jt(),v=Nt(),e=Gt(),P=Ut(),k=Tt(),S=Vt(!1),m=Lt("emitter");m.on("updateVPSIDPage",()=>{c.fetchVPS()});const y=Vt(!1),n=R(()=>Object.keys(c.vpsList).map(s=>c.vpsList[s]).find(s=>s.OrderID===P.params.id)),I=R(()=>{var s,o;return(o=c.vpsSchemes)==null?void 0:o[(s=n.value)==null?void 0:s.SchemeID]}),C=R(()=>{var s,o;return(o=v==null?void 0:v.userOrders)==null?void 0:o[(s=n.value)==null?void 0:s.OrderID]});function b(s){if(!s)return ft(new Date);const o=new Date,_=new Date(o.getTime()+s*24*60*60*1e3);return ft(_)}function x(){var s,o;m.emit("open-modal",{component:"OrdersTransfer",data:{ServiceOrderID:(s=n.value)==null?void 0:s.ID,ServiceID:(o=n.value)==null?void 0:o.ServiceID}})}function V(){var s;k.push(`/VPSOrders/${(s=n.value)==null?void 0:s.OrderID}/SchemeChange`),h()}function A(){var s;k.push(`/VPSOrderPay/${(s=n.value)==null?void 0:s.OrderID}`)}function B(){var s;v.prolongOrder({IsAutoProlong:S.value?0:1,OrderID:(s=n.value)==null?void 0:s.OrderID})}function h(){var s,o;m.emit("open-modal",{component:"VPSOrderSchemeChange",data:{VpsID:(s=n.value)==null?void 0:s.ID,ServerGroup:(o=I.value)==null?void 0:o.ServersGroupID,emitEvent:"updateVPSIDPage"}})}function f(){var s,o;m.emit("open-modal",{component:"OrderPasswordChange",data:{OrderID:(s=n.value)==null?void 0:s.ID,ServiceID:(o=n.value)==null?void 0:o.ServiceID,emitEvent:"updateVPSIDPage"}})}function w(){var s,o,_;m.emit("open-modal",{component:"OrderRestore",data:{OrderID:(s=n.value)==null?void 0:s.OrderID,CostDay:(o=I.value)==null?void 0:o.CostDay,DaysRemainded:(_=n.value)==null?void 0:_.DaysRemainded,emitEvent:"updateVPSIDPage"}})}function O(){var s,o,_;e.OrderManage({ServiceOrderID:(s=n.value)==null?void 0:s.ID,OrderID:(o=n.value)==null?void 0:o.OrderID,ServiceID:(_=n.value)==null?void 0:_.ServiceID})}return await c.fetchVPS(),await c.fetchVPSSchemes(),await i.fetchContracts().then(()=>{P.name==="default.MyVPSOrderSchemeChange"&&h()}),await v.fetchUserOrders().then(()=>{var s;S.value=(s=C.value)==null?void 0:s.IsAutoProlong}),{getVpsOrder:n,passwordShow:y,getVpsScheme:I,isAutoProlong:S,setProlongValue:B,navigateToProlong:A,transferItem:x,vpsStatuses:Zt,openPackageChangeModal:h,openPasswordChange:f,openOrderRestore:w,orderManage:O,calculateExpirationDate:b,changeScheme:V}}},Cs=Mt(rs,[["render",as],["__scopeId","data-v-476cdb1b"]]);export{Cs as default};
