import{_ as E}from"./EmptyStateBlock-DgFyy_gi.js";import{_ as U}from"./ParamsAccordionBlock-CKTEYLPP.js";import{_ as j,a as q}from"./CopyToClipboard.vue_vue_type_script_setup_true_lang-BSBKPmEv.js";import{_ as F}from"./ButtonDefault-CgQ13ecW.js";import{_ as W}from"./SettingsEngineItem-OTQ5qXYy.js";import{r as z}from"./bootstrap-vue-next-CDL_Y1-V.js";import{_ as K}from"./StatusBadge-CiYQLfxg.js";import{_ as X}from"./ServicesContractBalanceBlock-p9zlFW-0.js";import{_ as J}from"./ClausesKeeper-Cjjq7JUL.js";import{_ as Q}from"./BlockBalanceAgreement-BNU6bIWW.js";import{c as d,b as n,a as o,t as r,w as u,G as Y,i as y,I as Z,K as $,e as m,F as tt,u as et,y as ot,r as C,f as v,g as st,d as nt,o as c}from"./index-DakgQwZZ.js";import{h as rt}from"./hostStatuses-wR2mZwFf.js";import{u as it}from"./testTransforms-CtLjUrql.js";import{f as N}from"./time-DenPiOX5.js";import{u as at}from"./hosting-DbjpRfIi.js";import{u as lt}from"./resetServer-DJv4Ps11.js";import{u as dt}from"./globalActions-BG7EYttN.js";import{_ as mt}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./contracts-C-xJvA56.js";import"./IconCopy-DZ-eqbI0.js";import"./IconSettings-CudvjEMd.js";import"./IconProfile-C5q7Wd6m.js";import"./IconCard-CoE2j-B8.js";import"./IconClose-Camrw-uN.js";const ct={async setup(){const S=st(),t=nt(),_=at(),e=lt(),w=et(),x=dt(),{formDescriptionLine:O}=it(),l=ot("emitter");l.on("updateHostingIDPage",()=>{_.fetchHostingOrders()});const H=C(!1),p=C(!1),s=v(()=>Object.keys(_?.hostingList).map(a=>_?.hostingList[a]).find(a=>a.OrderID===S.params.id)),D=v(()=>_?.hostingSchemes),f=v(()=>D.value?.[s.value?.SchemeID]),h=v(()=>w?.userOrders?.[s.value?.OrderID]),g=v(()=>e?.serverGroupsList?.Servers?.[s.value?.ServerID]),I=v(()=>{if(!s.value?.Domain)return"";const a=s.value.Domain;return a.startsWith("http://")||a.startsWith("https://")?a:`https://${a}`});function b(a){if(!a)return N(new Date);const R=new Date,B=new Date(R.getTime()+a*24*60*60*1e3);return N(B)}function P(a){l.emit("open-modal",{component:"StatusHistory",data:{modeID:"HostingOrders",rowID:a}})}function i(){l.emit("open-modal",{component:"OrdersTransfer",data:{ServiceOrderID:s.value?.ID,ServiceID:s.value?.ServiceID}})}function A(){w.prolongOrder({IsAutoProlong:p.value?0:1,OrderID:s.value?.OrderID})}function T(){t.push(`/HostingOrders/${s.value?.OrderID}/SchemeChange`),k()}function G(){t.push(`/HostingOrderPay/${s.value?.OrderID}`)}function L(){x.OrderManageHosting({ServiceOrderID:s.value?.ID,OrderID:s.value?.OrderID,ServiceID:s.value?.ServiceID,XMLHttpRequest:"yes"})}function k(){l.emit("open-modal",{component:"HostingOrderSchemeChange",data:{hostingID:s.value?.ID,ServerGroup:f.value?.ServersGroupID,emitEvent:"updateHostingIDPage"}})}function M(){l.emit("open-modal",{component:"OrderPasswordChange",data:{OrderID:s.value?.ID,ServiceID:s.value?.ServiceID,emitEvent:"updateHostingIDPage"}})}function V(){l.emit("open-modal",{component:"OrderRestore",data:{OrderID:s.value?.OrderID,CostDay:f.value?.CostDay,DaysRemainded:s.value?.DaysRemainded,emitEvent:"updateHostingIDPage"}})}return await _.fetchHostingOrders(),await _.fetchHostingSchemes(),await e.fetchServerGroups().then(()=>{S.name==="default.MyHostingOrderSchemeChange"&&k()}),await w.fetchUserOrders().then(()=>{p.value=h.value?.IsAutoProlong}),{getHostingOrderData:s,getHostingScheme:f,getUserOrder:h,getServerGroup:g,isAutoProlong:p,passwordShow:H,openOrderRestore:V,openPackageChangeModal:k,orderManage:L,navigateToProlong:G,setProlongValue:A,openPasswordChange:M,hostStatuses:rt,transferItem:i,formDescriptionLine:O,calculateExpirationDate:b,changeScheme:T,fullDomainUrl:I,openHistoryStatuses:P}}},_t={key:0,class:"my-hosting-order"},gt={class:"section"},ut={class:"container"},vt={class:"section-title"},pt=["href"],Dt={class:"section-label"},ft={class:"section-nav"},wt={class:"list"},ht={class:"list-col list-col--md"},St={class:"list-item"},Ot={class:"list-item__row"},Ht={class:"list-item__title"},It={class:"list-item__status"},bt={class:"list-item__row"},Pt={class:"list-item__ul"},kt={key:0},yt={key:1},xt={key:2},Ct={class:"list-item__row list-item__row--column"},Nt={class:"list-item__text"},At={class:"list-item__text"},Tt={class:"list-item__text"},Gt={class:"list-item__row"},Lt={class:"btn btn--border btn--switch"},Mt={class:"list-col list-col--md"},Vt={class:"tw-grid tw-grid-cols-3 tw-gap-6 md:tw-border md:tw-border-gray-200 md:tw-rounded-md md:tw-p-6"},Rt={class:"tw-col-span-3 tw-flex tw-items-center tw-justify-between tw-gap-2"},Bt={class:"tw-col-span-2 tw-flex tw-items-center tw-gap-1"},Et={class:"tw-break-all"},Ut={class:"tw-col-span-2 tw-flex tw-items-center tw-gap-1"},jt={class:"tw-col-span-2 tw-flex tw-flex-wrap tw-items-center tw-gap-2"},qt={key:0,class:"tw-flex tw-items-center tw-gap-1"},Ft={class:"tw-col-span-2 tw-flex tw-items-center tw-gap-1"},Wt={class:"list-col list-col--md"},zt={class:"list-item"},Kt={class:"list-item__row list-item__row--table"},Xt={class:"list-item__item"},Jt={class:"list-item__item"},Qt={class:"list-item__item"},Yt={class:"list-item__item"},Zt={key:1,class:"section"},$t={class:"container"};function te(S,t,_,e,w,x){const O=Q,l=Y("router-link"),H=J,p=X,s=K,D=z,f=W,h=F,g=j,I=q,b=U,P=E;return c(),d(tt,null,[n(O),e.getHostingOrderData?.ID?(c(),d("div",_t,[o("section",gt,[o("div",ut,[o("div",null,[o("h1",vt,[o("a",{href:e.fullDomainUrl,target:"_blank"},r(e.getHostingOrderData?.Domain),9,pt)]),o("div",Dt,"Хостинг # "+r(e.getHostingOrderData?.OrderID),1),o("nav",ft,[n(l,{class:"section-nav__item",to:`/HostingOrders/${e.getHostingOrderData?.OrderID}`},{default:u(()=>t[11]||(t[11]=[m(" Хостинг ",-1)])),_:1,__:[11]},8,["to"]),n(l,{class:"section-nav__item",to:`/HostingServices/${e.getHostingOrderData?.OrderID}`},{default:u(()=>t[12]||(t[12]=[m(" Услуги ",-1)])),_:1,__:[12]},8,["to"])])]),n(H,{partition:"Header:/HostingOrders"}),o("div",wt,[n(p,{"contract-id":e.getHostingOrderData?.ContractID,onTransfer:t[0]||(t[0]=i=>e.transferItem())},null,8,["contract-id"]),o("div",ht,[o("div",St,[o("div",Ot,[o("div",Ht,r(e.getHostingScheme?.Name),1),o("div",It,[n(s,{status:e.getHostingOrderData?.StatusID,"status-table":"HostingOrders",onClick:t[1]||(t[1]=i=>e.openHistoryStatuses(e.getHostingOrderData?.ID))},null,8,["status"])]),n(f,null,{default:u(()=>[n(D,{onClick:t[2]||(t[2]=i=>e.changeScheme())},{default:u(()=>t[13]||(t[13]=[m("Изменить тариф",-1)])),_:1,__:[13]}),n(D,{onClick:t[3]||(t[3]=i=>e.openOrderRestore())},{default:u(()=>t[14]||(t[14]=[m("Просмотреть учет заказа",-1)])),_:1,__:[14]}),n(D,{onClick:t[4]||(t[4]=i=>e.openPasswordChange())},{default:u(()=>t[15]||(t[15]=[m("Сменить пароль",-1)])),_:1,__:[15]})]),_:1})]),o("div",bt,[o("ul",Pt,[e.getHostingScheme?.SchemeParams?.limit_webdomains?.Value?(c(),d("li",kt,r(e.formDescriptionLine(e.getHostingScheme?.SchemeParams?.limit_webdomains)),1)):y("",!0),e.getHostingScheme?.SchemeParams?.limit_quota?.Value?(c(),d("li",yt,r(e.formDescriptionLine(e.getHostingScheme?.SchemeParams?.limit_quota)),1)):y("",!0),e.getHostingScheme?.SchemeParams?.limit_emails?.Value?(c(),d("li",xt,r(e.formDescriptionLine(e.getHostingScheme?.SchemeParams?.limit_emails)),1)):y("",!0)])]),o("div",Ct,[o("div",Nt,r(e.getHostingScheme?.CostMonth)+" ₽ в месяц",1),o("div",At,"Дней осталось "+r(e.getHostingOrderData?.DaysRemainded||0),1),o("div",Tt," Дата окончания "+r(e.calculateExpirationDate(e.getHostingOrderData?.DaysRemainded)),1)]),o("div",Gt,[o("button",{class:"btn btn-default btn--blue",onClick:t[5]||(t[5]=i=>e.navigateToProlong())},r(e.getHostingOrderData?.StatusID==="Waiting"?"Оплатить":"Продлить"),1),o("label",Lt,[Z(o("input",{type:"checkbox","onUpdate:modelValue":t[6]||(t[6]=i=>e.isAutoProlong=i),onInput:t[7]||(t[7]=i=>e.setProlongValue())},null,544),[[$,e.isAutoProlong]]),t[16]||(t[16]=o("span",{class:"btn-switch__text"},"Автопродление",-1)),t[17]||(t[17]=o("span",{class:"btn-switch__toggle"},null,-1))])])])]),o("div",Mt,[o("div",Vt,[o("div",Rt,[t[18]||(t[18]=o("div",{class:"tw-text-2xl"},"Панель управления",-1)),n(h,{class:"tw-text-xs tw-h-10",onClick:t[8]||(t[8]=i=>e.orderManage()),label:"Вход"})]),t[20]||(t[20]=o("div",null,"Адрес",-1)),o("div",Bt,[o("div",Et,r(`https://${e.getServerGroup?.Address}/manager`),1),n(g,{value:`https://${e.getServerGroup?.Address}/manager`},null,8,["value"])]),t[21]||(t[21]=o("div",null,"Логин",-1)),o("div",Ut,[m(r(e.getHostingOrderData?.Login)+" ",1),n(g,{value:e.getHostingOrderData?.Login},null,8,["value"])]),t[22]||(t[22]=o("div",null,"Пароль",-1)),o("div",jt,[e.passwordShow?(c(),d("div",qt,r(e.getHostingOrderData.Password),1)):(c(),d("button",{key:1,class:"btn btn--border btn--md tw-h-8 tw-gap-1",onClick:t[9]||(t[9]=i=>e.passwordShow=!0)},[n(I,{class:"tw-size-5"}),t[19]||(t[19]=m(" Показать ",-1))])),o("button",{class:"btn btn--border btn--md tw-h-8",onClick:t[10]||(t[10]=i=>e.openPasswordChange())},"Сменить пароль"),n(g,{value:e.getHostingOrderData.Password},null,8,["value"])]),t[23]||(t[23]=o("div",null,"FTP, POP3, SMTP, IMAP",-1)),o("div",Ft,[m(r(e.getServerGroup?.Address)+" ",1),n(g,{value:e.getServerGroup?.Address},null,8,["value"])])])]),o("div",Wt,[o("div",zt,[t[24]||(t[24]=o("div",{class:"list-item__row"},[o("div",{class:"list-item__title"},"Именные сервера")],-1)),o("div",Kt,[o("div",Xt,r(e.getHostingOrderData?.Ns1Name),1),o("div",Jt,r(e.getHostingOrderData?.Ns2Name),1),o("div",Qt,r(e.getHostingOrderData?.Ns3Name),1),o("div",Yt,r(e.getHostingOrderData?.Ns4Name),1)])])]),n(b,{"params-list":e.getHostingScheme?.SchemeParams,label:"Общая информация","main-param":"InternalName"},null,8,["params-list"])])])])])):(c(),d("section",Zt,[o("div",$t,[n(P,{label:"Заказ не найден"})])]))],64)}const be=mt(ct,[["render",te],["__scopeId","data-v-14d69cc2"]]);export{be as default};
