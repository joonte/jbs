import{_ as x}from"./ButtonDefault-B1FApUky.js";import{r as a,x as E,H as w,s as k,c as D,o as O,a as s,b as I,t as g,J as P,X as h,n as b}from"./index-C9dBN6m4.js";import{u as B}from"./global-DiPSuX9n.js";import{_ as L}from"./_plugin-vue_export-helper-DlAUqK2U.js";const M={class:"modal__body"},U={class:"list-item__title"},V={class:"list-item__pass"},N={class:"modal__input-row"},j={class:"list-form_col list-form_col--xl"},G={class:"search-field form-field"},W={class:"modal__input-row"},z={class:"list-form_col list-form_col--xl"},H={class:"search-field form-field"},J={__name:"ModalWindowOrderPasswordChange",props:{data:{type:Object,default:()=>{}}},emits:["modalClose"],setup(c,{emit:C}){const l=c,y=C,o=a(""),t=a(""),n=a(""),i=a(!1),m=B(),u=a(!1),v=E("emitter");function _(){o.value===t.value&&o.value.length>0&&t.value.length>0?(u.value=!0,m.OrderChangePassword({ServiceOrderID:l.data?.OrderID,ServiceID:l.data?.ServiceID,Password:o.value,_Password:t.value}).then(d=>{let{result:e,error:f}=d;e==="SUCCESS"&&(l.data?.emitEvent&&v.emit(l.data?.emitEvent),y("modalClose"),v.emit("open-modal",{component:"SuccessChange",data:{newPassword:o.value}})),u.value=!1})):i.value=!0}function S(){o.value=n.value.Password,t.value=n.value.Password}const p=d=>{d.key==="Enter"&&_()};return w(()=>{document.addEventListener("keyup",p)}),w(async()=>{n.value=await m.fetchPassword()}),k(()=>{document.removeEventListener("keyup",p)}),(d,e)=>{const f=x;return O(),D("div",M,[s("div",U,"Смена пароля, "+g(c.data?.Login),1),s("div",V,[e[3]||(e[3]=s("div",{class:"list-item__prepassword"},"Использовать сгенерированный пароль:",-1)),s("div",{class:"list-item__password",onClick:S},g(n.value.Password),1)]),s("div",N,[e[4]||(e[4]=s("div",{class:"modal__input-label"},"Новый пароль",-1)),s("div",j,[s("div",G,[P(s("input",{class:b({"error-input":i.value}),"onUpdate:modelValue":e[0]||(e[0]=r=>o.value=r),placeholder:"",name:"password",autocomplete:"off",type:"text"},null,2),[[h,o.value]])])])]),s("div",W,[e[5]||(e[5]=s("div",{class:"modal__input-label"},"Подтверждение пароля",-1)),s("div",z,[s("div",H,[P(s("input",{class:b({"error-input":i.value}),"onUpdate:modelValue":e[1]||(e[1]=r=>t.value=r),placeholder:"",name:"password",autocomplete:"off",type:"text"},null,2),[[h,t.value]])])])]),I(f,{class:"modal__button",label:"Сменить пароль","is-loading":u.value,onClick:e[2]||(e[2]=r=>_())},null,8,["is-loading"])])}}},q=L(J,[["__scopeId","data-v-2bd2ea24"]]);export{q as default};
