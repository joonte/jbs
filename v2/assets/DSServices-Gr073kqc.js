import{_ as C}from"./LoadingIndicator-DXjOL6Pz.js";import{_ as $}from"./EmptyStateBlock-Ad1AmtSS.js";import{_ as L,a as P}from"./BlockDependentServices-CX2fnrCR.js";import{_ as R}from"./BlockAdditionalServices-C2o0wt_v.js";import{_ as j}from"./ClausesKeeper-gPyacQ05.js";import{_ as E}from"./BlockBalanceAgreement-DSLTUOoQ.js";import{P as U,u as F,x as G,r as d,f as i,g as T,D as K,c as I,b as s,C as p,a as _,h as q,t as z,w as k,E as H,F as J,d as M,o as n,e as x}from"./index-C9dBN6m4.js";import{u as Q}from"./services-moLhYNFg.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ButtonDefault-B1FApUky.js";import"./BlueButton.vue_vue_type_script_setup_true_lang-q3k2Q2g8.js";import"./StatusBadge-DZmmWv0G.js";import"./bootstrap-vue-next-BglOzul_.js";import"./ServiceListOrderSelection-DnnRkveR.js";import"./TotalAmount.vue_vue_type_script_setup_true_lang-BJFSjxtt.js";import"./BasicInput-VlbY6GiE.js";import"./component-D8Pmx5O0.js";import"./BlockSelectContract-Dn4S5pYG.js";import"./contracts-BEc0DZS2.js";import"./multiselect-B6DlyfA6.js";import"./IconClose-CgjzG0Yf.js";import"./index-D0iqQ1zq.js";const W={key:0,class:"tw-px-4 md:tw-px-8 tw-mb-6"},X={class:"tw-text-gray-500 tw-text-sm tw-mt-2"},Y={class:"tw-flex tw-items-center tw-gap-8 tw-border-b tw-border-gray-200 tw-mt-4 tw-whitespace-nowrap tw-mb-6"},ke={__name:"DSServices",async setup(Z){let v,S;const h=T();M();const o=U(),w=Q(),a=F();G("emitter").on("updateDSIDPage",()=>{a.fetchUserOrders()});const m=d([]),D=d(!0);d(!1);const e=i(()=>Object.values(o.dsOrders).find(c=>c.OrderID===Number(h.params.id))),f=i(()=>!e.value?.SchemeID||!o?.DSSchemes?null:o.DSSchemes[e.value.SchemeID]),O=i(()=>!e.value||!f.value?null:{ServiceID:e.value.ServiceID,ServersGroupID:f.value.ServersGroupID}),y=i(()=>{if(!e.value?.OrderID||!a?.userOrders)return[];const c=e.value.OrderID;return Object.keys(a.userOrders).map(r=>a.userOrders[r]).filter(r=>r.DependOrderID==c&&r.ServiceID&&w.ServicesList[r.ServiceID]).sort((r,u)=>Number(r?.ID)-Number(u?.ID))});return[v,S]=K(()=>Promise.all([o.fetchDSOrders(),o.fetchDSSchemes(),w.fetchServices(),a.fetchUserOrders()])),await v,S(),D.value=!1,(c,t)=>{const b=E,l=H("RouterLink"),r=j,u=L,g=R,B=P,N=$,V=C;return n(),I(J,null,[s(b),e.value?(n(),I("div",W,[t[3]||(t[3]=_("h1",{class:"tw-text-xl sm:tw-text-4xl"},"Дополнительные услуги",-1)),_("div",X,"Выделенный сервер # "+z(e.value.OrderID),1),_("div",Y,[s(l,{class:"tw-py-2 tw-cursor-pointer -tw-mb-[1px]","active-class":"tw-text-sky-400 tw-border-b-2 tw-border-sky-400",to:`/DSOrders/${e.value.OrderID}`},{default:k(()=>t[1]||(t[1]=[x(" Сервер ",-1)])),_:1,__:[1]},8,["to"]),s(l,{class:"tw-py-2 tw-cursor-pointer -tw-mb-[1px]","active-class":"tw-text-sky-400 tw-border-b-2 tw-border-sky-400",to:`/DSOrders/${e.value.OrderID}/Services`},{default:k(()=>t[2]||(t[2]=[x(" Услуги ",-1)])),_:1,__:[2]},8,["to"])]),s(r),s(u,{services:y.value},null,8,["services"]),O.value?(n(),p(g,{key:0,modelValue:m.value,"onUpdate:modelValue":t[0]||(t[0]=A=>m.value=A),"service-search-params":O.value,class:"tw-mt-6"},null,8,["modelValue","service-search-params"])):q("",!0),s(B,{services:m.value,"main-order":e.value},null,8,["services","main-order"])])):D.value?(n(),p(V,{key:2,class:"tw-mt-10"})):(n(),p(N,{key:1,label:"Заказ не найден"}))],64)}}};export{ke as default};
