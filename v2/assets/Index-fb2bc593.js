import{j as F,o as V,c as $,a as s,b as e,w as c,d as i,t as v,p as B,l as N,_ as T,f as P,R as j,g as b}from"./index-1c309346.js";import{u as A}from"./postings-da2063b0.js";import{u as H}from"./contracts-7b919c67.js";import{I as S,a as g,b as D,c as I}from"./IconWeb-4256cf14.js";import{S as k}from"./StatusBadge-a49537d5.js";import{C as R}from"./bootstrap-vue-next.es-b799f76d.js";import{_ as L}from"./ButtonDefault-cd183bf8.js";import{_ as E}from"./ClausesKeeper-b9906182.js";import"./IconClose-7cf50ca7.js";const M=[{key:"ID",label:"Заказ",variant:"td-gray td-order"},{key:"ContractID",label:"Договор",variant:"td-blue"},{key:"ServiceID",label:"Услуга",variant:"td-gray td-order"},{key:"StatusID",label:"Статус",sortable:!0,variant:"td-gray td-order"},{key:"controls",label:"",variant:"td-controls"}],U={Deleted:{id:1,label:"Удален",color:"#DF5747",background:"#DF57471A"},Suspended:{id:2,label:"Заблокирован",color:"#DF5747",background:"#DF57471A"},OnService:{id:3,label:"Сервер на обслуживании",color:"#FFC107",background:"rgba(255,193,7,0.1)"}},l=o=>(B("data-v-f9f3e729"),o=o(),N(),o),W={class:"section"},q={class:"container"},z=l(()=>s("div",{class:"section-header"},[s("h1",{class:"section-title"},"Дашбоард")],-1)),G={class:"list-grid-three-col"},J={class:"list-col"},K={class:"list-item"},Q=l(()=>s("div",{class:"list-item__row"},[s("div",{class:"list-item__title"},"Услуги")],-1)),X={class:"list-col"},Y={class:"list-item"},Z=l(()=>s("div",{class:"list-item__row"},[s("div",{class:"list-item__title"},"Мой офис")],-1)),ss={class:"list-item__row icon-row"},ts={class:"list-col"},es={class:"list-item"},os=l(()=>s("div",{class:"list-item__row"},[s("div",{class:"list-item__title"},"Поддержка")],-1)),as={class:"list-item__row icon-row"},cs=l(()=>s("div",{class:"section-header"},[s("h2",{class:"sub-section-title"},"Требует внимания")],-1)),ns=l(()=>s("span",{class:"td-mobile"},"Заказ",-1)),rs={class:"d-block"},ls=l(()=>s("span",{class:"td-mobile"},"Договор",-1)),is=l(()=>s("span",{class:"td-mobile"},"Услуга",-1)),ds={class:"d-block"},_s=l(()=>s("span",{class:"td-mobile"},"Статус",-1));function us(o,n,_,d,f,h){const p=E,m=S,a=F("router-link"),t=g,y=D,C=I,w=L,O=k,x=R;return V(),$("div",W,[s("div",q,[z,e(p,{partition:"Header:/Home"}),s("div",G,[s("div",J,[s("div",K,[Q,e(a,{class:"list-item__row icon-row",to:"/HostingOrders"},{default:c(()=>[e(m),i("Заказать хостинг")]),_:1}),e(a,{class:"list-item__row icon-row",to:"/DomainOrders"},{default:c(()=>[e(t),i("Заказать домен")]),_:1}),e(a,{class:"list-item__row icon-row",to:"/DSOrders"},{default:c(()=>[e(y),i("Заказать выделенный сервер")]),_:1}),e(a,{class:"list-item__row icon-row",to:"/VPSOrders"},{default:c(()=>[e(C),i("Заказать VPS/VDS сервер")]),_:1})])]),s("div",X,[s("div",Y,[s("div",null,[Z,e(a,{class:"list-item__row icon-row",to:"/Contracts"},{default:c(()=>[i("Мои договора")]),_:1})]),s("div",ss,[e(w,{label:"Создать договор",onClick:n[0]||(n[0]=r=>o.$router.push("/ContractMake"))})])])]),s("div",ts,[s("div",es,[s("div",null,[os,e(a,{class:"list-item__row icon-row",to:"/Tickets"},{default:c(()=>[i("Тикеты")]),_:1}),e(a,{class:"list-item__row icon-row",to:"/Contacts"},{default:c(()=>[i("Контакты")]),_:1})]),s("div",as,[e(w,{label:"Создать тикет",onClick:n[1]||(n[1]=r=>o.$router.push("/NewTicket"))})])])])]),cs,e(x,{class:"basic-table",items:d.getOrders,fields:d.dashboardTableFields,"show-empty":!0,"per-page":5,page:1,"empty-text":"Пока не требуется никаких действий","empty-filtered-text":"Пока не требуется никаких действий"},{"cell(ID)":c(r=>[ns,s("span",rs,v(r.value),1)]),"cell(ContractID)":c(r=>{var u;return[ls,s("span",null,v((u=d.getContracts[r.value])==null?void 0:u.Customer),1)]}),"cell(ServiceID)":c(r=>{var u;return[is,s("span",ds,v((u=d.getServices[r.value])==null?void 0:u.Name),1)]}),"cell(StatusID)":c(r=>[_s,e(O,{status:r.value,"status-table":"Orders"},null,8,["status"])]),_:1},8,["items","fields"])])])}const ps={components:{IconServer:S,IconDedicatedServers:D,IconWeb:g,IconVPS:I,StatusBadge:k},async setup(){const o=P(),n=A(),_=H(),d=j("emitter"),f=b(()=>{var a;return(a=Object.keys(o==null?void 0:o.userOrders).map(t=>o==null?void 0:o.userOrders[t]))==null?void 0:a.reverse().filter(t=>(t==null?void 0:t.StatusID)==="Deleted"||(t==null?void 0:t.StatusID)==="Suspended"||(t==null?void 0:t.StatusID)==="OnService"||(t==null?void 0:t.DaysRemainded)>0&&(t==null?void 0:t.DaysRemainded)<14)}),h=b(()=>_==null?void 0:_.contractsList),p=b(()=>n==null?void 0:n.servicesList);function m(a){d.emit("open-modal",{component:"DeleteItem",data:{id:a,message:`Вы действительно хотите удалить заказ #${a}?`,tableID:"Orders"}})}return await o.fetchUserOrders(),await n.fetchServices(),await _.fetchContracts(),{getOrders:f,getContracts:h,getServices:p,dangerStatuses:U,dashboardTableFields:M,deleteItem:m}}},Is=T(ps,[["render",us],["__scopeId","data-v-f9f3e729"]]);export{Is as default};
