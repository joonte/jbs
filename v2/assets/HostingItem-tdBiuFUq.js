import{m as j,r as U,Y as T,v as E}from"./bootstrap-vue-next-9iQSFcL_.js";import{_ as A}from"./IconDots-DGe1DF8w.js";import{_ as F}from"./Helper-C1WzNFjD.js";import{_ as W}from"./IconCard-BQu6YZod.js";import{_ as Y}from"./StatusBadge-DroW9lKR.js";import{_ as q}from"./OrderIDBadge-BR_cruJT.js";import{G as z,c as f,o as g,a as s,I as L,b as i,J as P,t as u,e as m,F as M,j as G,i as J,n as N,w as r,d as K,r as Q,m as X,x as Z,f as p}from"./index-DxPA2ffO.js";import{h as $}from"./hostStatuses-wR2mZwFf.js";import{f as B}from"./time-DenPiOX5.js";import{_ as tt}from"./_plugin-vue_export-helper-DlAUqK2U.js";const et={props:{params:{type:Array,default:()=>[]},itemData:{type:Object,default:()=>{}},userName:{type:String,default:""},infoLink:{type:String,default:"/"},isLast:{type:Boolean,default:!1},isSeveral:{type:Boolean,default:!1},selectedRows:{type:Object,required:!0}},emits:["delete","transfer","manage"],setup(a,{emit:t}){const n=K(),o=Q({...a.selectedRows}),R=()=>{t("update-selected-rows",o.value)};X(()=>a.selectedRows,e=>{o.value={...e}},{deep:!0});const I=Z("emitter"),h=p(()=>{if(!a.itemData?.Domain)return"";const e=a.itemData?.Domain;return e.startsWith("http://")||e.startsWith("https://")?e:`https://${e}`});function b(e){n.push(`/HostingOrders/${e}`)}function v(e){if(!e)return B(new Date);const l=new Date,D=new Date(l.getTime()+e*24*60*60*1e3);return B(D)}function S(e){I.emit("open-modal",{component:"StatusHistory",data:{modeID:"HostingOrders",rowID:e}})}function w(){I.emit("open-modal",{component:"OrderPasswordChange",data:{OrderID:a.itemData?.ID,ServiceID:a.itemData?.ServiceID,emitEvent:"updateHostingIDPage",Login:a.itemData?.Login}})}function O(){t("delete",a.itemData?.ID,a.itemData?.OrderID)}function c(e){if(e===null)return{html:"",count:0};let l=e.includes(",")?e.split(","):[e];l=l.filter(_=>_!==a.itemData?.Domain);const D=l.join("<br>"),C=l.length;return{html:D,count:C}}function d(){t("transfer",{ServiceOrderID:a.itemData?.ID,ServiceID:a.itemData?.ServiceID})}function k(){t("manage",{ServiceOrderID:a.itemData?.ID,ServiceID:a.itemData?.ServiceID,OrderID:a.itemData?.OrderID})}function y(e){if(!e)return"";const l=new Date(parseInt(e)*1e3),C=new Date-l,_=Math.floor(C/1e3),H=Math.floor(_/60),x=Math.floor(H/60),V=Math.floor(x/24);return _<60?`${_} сек. от статуса`:H<60?`${H} мин. от статуса`:x<24?`${x} ч. от статуса`:`${V} дн. от статуса`}return{hostStatuses:$,deleteHostingItem:O,transferAccount:d,orderManage:k,calculateExpirationDate:v,fullDomainUrl:h,showDNSs:c,toItem:b,openHistoryStatuses:S,calculateDaysSinceStatusUpdate:y,openPasswordChange:w,localSelectedRows:o,updateSelectedRows:R}}},nt={class:"hosting-item__row"},at=["href"],ot={class:"hosting-domains__wrapper"},st={class:"hosting-domains"},it={class:"hosting-domains__items"},rt=["innerHTML"],dt={class:"hosting-item__row"},lt={class:"hosting-item__person"},mt={class:"hosting-item__row hosting-flex"},ut={class:"hosting-item__list"},ct={class:"hosting-status__info"},_t={class:"hosting-status__date"},Dt={class:"hosting-item__controls"},ft={class:"btn btn--dots"};function gt(a,t,n,o,R,I){const h=j,b=q,v=Y,S=W,w=F,O=A,c=z("router-link"),d=U,k=T,y=E;return g(),f("div",{class:N({"hosting-item":!0,"hosting-item_deleted":n.itemData?.StatusID==="Deleted"})},[s("div",nt,[L(i(h,{id:"checkbox-"+n.itemData?.OrderID,modelValue:o.localSelectedRows[n.itemData?.OrderID],"onUpdate:modelValue":t[0]||(t[0]=e=>o.localSelectedRows[n.itemData?.OrderID]=e),name:"checkbox-"+n.itemData?.OrderID,onChange:o.updateSelectedRows},null,8,["id","modelValue","name","onChange"]),[[P,n.isSeveral]]),i(b,{orderID:n.itemData?.OrderID,onClick:t[1]||(t[1]=e=>o.toItem(n.itemData?.OrderID))},null,8,["orderID"]),s("a",{href:o.fullDomainUrl,target:"_blank",class:"hosting-item__name"},u(n.itemData?.Domain),9,at),s("div",ot,[L(s("div",st,[m(" +"+u(o.showDNSs(n.itemData?.Parked).count)+" ",1),s("div",it,[s("div",{class:"hosting-domains__item",innerHTML:o.showDNSs(n.itemData?.Parked).html},null,8,rt)])],512),[[P,n.itemData?.Parked&&n.itemData.Parked.split(",").length>1]])])]),s("div",dt,[s("div",lt,u(n.userName),1)]),s("div",mt,[s("ul",ut,[(g(!0),f(M,null,G(n.params,e=>(g(),f(M,{key:e.text},[e.text?(g(),f("li",{key:0,class:N({bold:e?.bold})},u(e.text),3)):J("",!0)],64))),128)),s("button",{class:"btn btn--md btn--bold btn-manage",onClick:t[2]||(t[2]=e=>o.orderManage())},"Управлять заказом")]),s("div",ct,[s("span",{class:N(["hosting-item__date",{danger:Number(n.itemData?.DaysRemainded)<14}])},u(o.calculateExpirationDate(n.itemData?.DaysRemainded))+" • "+u(n.itemData?.DaysRemainded||0)+" дн. ",3),i(v,{class:"status-badge",status:n.itemData?.StatusID,"status-table":"HostingOrders",onClick:t[3]||(t[3]=e=>o.openHistoryStatuses(n.itemData?.ID))},null,8,["status"]),s("div",_t,u(o.calculateDaysSinceStatusUpdate(n.itemData?.StatusDate)),1)])]),s("div",Dt,[s("button",{class:"btn btn--md btn--bold",onClick:t[4]||(t[4]=e=>a.$router.push(`/HostingOrders/${n.itemData?.OrderID}/SchemeChange`))}," Изменить тариф "),s("button",{class:"btn btn--md btn--bold",onClick:t[5]||(t[5]=e=>a.$router.push(`/HostingOrderPay/${n.itemData?.OrderID}`))},[i(S),t[9]||(t[9]=m(" Оплатить ",-1))]),i(w,{"user-notice":n.itemData?.UserNotice,id:n.itemData?.OrderID,position:n.isLast?"bottom":"top",emit:"updateHostingList"},null,8,["user-notice","id","position"]),i(y,{right:"",class:"dropdown-dots"},{"button-content":r(()=>[s("span",ft,[i(O)])]),default:r(()=>[i(d,null,{default:r(()=>[i(c,{to:n.infoLink},{default:r(()=>t[10]||(t[10]=[m("Дополнительная информация",-1)])),_:1,__:[10]},8,["to"])]),_:1}),i(d,null,{default:r(()=>[i(c,{to:`/HostingOrderPay/${n.itemData?.OrderID}`},{default:r(()=>t[11]||(t[11]=[m("Продлить",-1)])),_:1,__:[11]},8,["to"])]),_:1}),i(d,null,{default:r(()=>[i(c,{to:`/HostingOrders/${n.itemData?.OrderID}/SchemeChange`},{default:r(()=>t[12]||(t[12]=[m("Изменить тариф",-1)])),_:1,__:[12]},8,["to"])]),_:1}),i(d,{onClick:t[6]||(t[6]=e=>o.transferAccount())},{default:r(()=>t[13]||(t[13]=[m("Передать на другой аккаунт",-1)])),_:1,__:[13]}),i(d,{onClick:t[7]||(t[7]=e=>o.openPasswordChange())},{default:r(()=>t[14]||(t[14]=[m("Сменить пароль",-1)])),_:1,__:[14]}),i(k),i(d,{class:"color-red",onClick:t[8]||(t[8]=e=>o.deleteHostingItem())},{default:r(()=>t[15]||(t[15]=[m("Удалить",-1)])),_:1,__:[15]})]),_:1})])],2)}const Ht=tt(et,[["render",gt],["__scopeId","data-v-7b1a0ab9"]]);export{Ht as _};
