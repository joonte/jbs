import{j as P,o as A,c as N,b as o,a as e,w as r,d as p,t as k,F as V,p as H,l as R,_ as j,f as M,S as E,e as L,g as C}from"./index-b5b5ce3d.js";import{u as U}from"./postings-ed3c9d0d.js";import{u as W}from"./contracts-74f05bb7.js";import{I as $,a as B,b as F,c as T}from"./IconWeb-4fd073fc.js";import{S as x}from"./StatusBadge-0649a996.js";import{B as q}from"./BlockBalanceAgreement-a016b94f.js";import{C as z}from"./bootstrap-vue-next.es-37aa63ea.js";import{_ as G}from"./IconCard-cef3f371.js";import{_ as J}from"./ButtonDefault-0006f72a.js";import{_ as K}from"./ClausesKeeper-3a1c11ba.js";import"./IconArrow-fddabae2.js";import"./IconClose-cd6d3917.js";const Q=[{key:"ID",label:"Заказ",variant:"td-gray td-order"},{key:"ContractID",label:"Договор",variant:"td-blue"},{key:"ServiceID",label:"Услуга",variant:"td-gray td-order"},{key:"StatusID",label:"Статус",sortable:!0,variant:"td-gray td-order"},{key:"controls",label:"",variant:"td-controls"}],X={Deleted:{id:1,label:"Удален",color:"#DF5747",background:"#DF57471A"},Suspended:{id:2,label:"Заблокирован",color:"#DF5747",background:"#DF57471A"},OnService:{id:3,label:"Сервер на обслуживании",color:"#FFC107",background:"rgba(255,193,7,0.1)"}},_=n=>(H("data-v-433d2a9a"),n=n(),R(),n),Y={class:"section"},Z={class:"container"},ee={class:"section-header"},te={class:"list-grid-three-col"},se={class:"list-col"},oe={class:"list-item"},ae=_(()=>e("div",{class:"list-item__row"},[e("div",{class:"list-item__title"},"Услуги")],-1)),ne={class:"list-col"},ce={class:"list-item"},re=_(()=>e("div",{class:"list-item__row"},[e("div",{class:"list-item__title"},"Мой офис")],-1)),le={class:"list-item__row icon-row"},ie={class:"list-col"},de={class:"list-item"},_e=_(()=>e("div",{class:"list-item__row"},[e("div",{class:"list-item__title"},"Поддержка")],-1)),ue={class:"list-item__row icon-row"},me=_(()=>e("div",{class:"section-header"},[e("h2",{class:"sub-section-title"},"Требует внимания")],-1)),pe=_(()=>e("span",{class:"td-mobile"},"Заказ",-1)),ve={class:"d-block"},be=_(()=>e("span",{class:"td-mobile"},"Договор",-1)),fe=_(()=>e("span",{class:"td-mobile"},"Услуга",-1)),ge={class:"d-block"},De=_(()=>e("span",{class:"td-mobile"},"Статус",-1)),Se={class:"btn__group"},he=["onClick"],Ie=_(()=>e("p",null,"ОПЛАТИТЬ",-1));function we(n,c,b,l,v,y){const D=P("BalanceAgreement"),f=K,S=$,d=P("router-link"),h=B,I=F,w=T,s=J,t=x,i=G,m=z;return A(),N(V,null,[o(D),e("div",Y,[e("div",Z,[e("div",ee,[e("h1",{class:"section-title",onClick:c[0]||(c[0]=a=>l.reloadNow())},"Домашняя страница")]),o(f,{partition:"Header:/Home"}),e("div",te,[e("div",se,[e("div",oe,[ae,o(d,{class:"list-item__row icon-row",to:"/HostingOrders"},{default:r(()=>[o(S),p("Заказать хостинг")]),_:1}),o(d,{class:"list-item__row icon-row",to:"/DomainOrders"},{default:r(()=>[o(h),p("Заказать домен")]),_:1}),o(d,{class:"list-item__row icon-row",to:"/DSOrders"},{default:r(()=>[o(I),p("Заказать выделенный сервер")]),_:1}),o(d,{class:"list-item__row icon-row",to:"/VPSOrders"},{default:r(()=>[o(w),p("Заказать VPS/VDS сервер")]),_:1})])]),e("div",ne,[e("div",ce,[e("div",null,[re,o(d,{class:"list-item__row icon-row",to:"/Contracts"},{default:r(()=>[p("Мои договора")]),_:1})]),e("div",le,[o(s,{label:"Создать договор",onClick:c[1]||(c[1]=a=>n.$router.push("/ContractMake"))})])])]),e("div",ie,[e("div",de,[e("div",null,[_e,o(d,{class:"list-item__row icon-row",to:"/Tickets"},{default:r(()=>[p("Тикеты")]),_:1}),o(d,{class:"list-item__row icon-row",to:"/Contacts"},{default:r(()=>[p("Контакты")]),_:1})]),e("div",ue,[o(s,{label:"Создать тикет",onClick:c[2]||(c[2]=a=>n.$router.push("/NewTicket"))})])])])]),me,o(m,{class:"basic-table",items:l.getOrders,fields:l.dashboardTableFields,"show-empty":!0,"per-page":5,page:1,"empty-text":"Пока не требуется никаких действий","empty-filtered-text":"Пока не требуется никаких действий",onRowClicked:c[3]||(c[3]=(a,u,g)=>l.navigateToOrderPage(a,g))},{"cell(ID)":r(a=>[pe,e("span",ve,k(a.value),1)]),"cell(ContractID)":r(a=>{var u;return[be,e("span",null,k((u=l.getContracts[a.value])==null?void 0:u.Customer),1)]}),"cell(ServiceID)":r(a=>{var u;return[fe,e("span",ge,k((u=l.getServices[a.value])==null?void 0:u.Name),1)]}),"cell(StatusID)":r(a=>[De,o(t,{class:"clickable-element",status:a.value,"status-table":"Orders",onClick:u=>{var g,O;return l.openHistoryStatuses((g=a.item)==null?void 0:g.ServiceOrderID,(O=a.item)==null?void 0:O.Code)}},null,8,["status","onClick"])]),"cell(controls)":r(a=>[e("div",Se,[e("button",{class:"btn btn-default btn--border",onClick:u=>l.navigateToProlong(a.item)},[o(i),Ie],8,he)])]),_:1},8,["items","fields"])])])],64)}const ke={components:{IconServer:$,IconDedicatedServers:F,IconWeb:B,IconVPS:T,StatusBadge:x,BalanceAgreement:q},async setup(){const n=M(),c=U(),b=W(),l=E("emitter"),v=L(),y=C(()=>{var s;return(s=Object.keys(n==null?void 0:n.userOrders).map(t=>n==null?void 0:n.userOrders[t]))==null?void 0:s.reverse().filter(t=>(t==null?void 0:t.StatusID)==="Deleted"||(t==null?void 0:t.StatusID)==="Suspended"||(t==null?void 0:t.StatusID)==="OnService"||(t==null?void 0:t.DaysRemainded)>0&&(t==null?void 0:t.DaysRemainded)<14)}),D=C(()=>b==null?void 0:b.contractsList),f=C(()=>c==null?void 0:c.servicesList);function S(){v.go(0)}function d(s,t){var i;if(!t.target.closest("button, a, .clickable-element")){let m=(i=f.value[s.ServiceID])==null?void 0:i.Code;m==="Default"||m==="ExtraIP"||m==="ISPsw"||m==="DNSmanager"?v.push(`/AdditionalServices/${s.ID}`):v.push(`/${m}Orders/${s.ID}`)}}function h(s){l.emit("open-modal",{component:"DeleteItem",data:{id:s,message:`Вы действительно хотите удалить заказ #${s}?`,tableID:"Orders"}})}function I(s,t){let i="";t==="Default"?i="Orders":i=t+"Orders",l.emit("open-modal",{component:"StatusHistory",data:{modeID:i,rowID:s}})}function w(s){var i;let t=(i=f.value[s.ServiceID])==null?void 0:i.Code;t==="Default"?v.push(`/ServiceOrderPay/${s.ID}`):v.push(`/${t}OrderPay/${s.ID}`)}return await n.fetchUserOrders(),await c.fetchServices(),await b.fetchContracts(),{getOrders:y,getContracts:D,getServices:f,dangerStatuses:X,dashboardTableFields:Q,deleteItem:h,navigateToOrderPage:d,openHistoryStatuses:I,navigateToProlong:w,reloadNow:S}}},He=j(ke,[["render",we],["__scopeId","data-v-433d2a9a"]]);export{He as default};
