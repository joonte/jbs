import{_ as mt}from"./EmptyStateBlock-BaR9js3E.js";import{_ as vt,a as ct,b as wt}from"./SettingsEngineItem-fipf4X9N.js";import{_ as pt,a as _t}from"./CopyToClipboard.vue_vue_type_script_setup_true_lang-91wn8_BT.js";import{_ as ft}from"./WhiteButton-B0VC5rKo.js";import{I as St}from"./IconProfile-BO-wrWBn.js";import{_ as gt}from"./BlueButton.vue_vue_type_script_setup_true_lang-CnzqAS80.js";import{r as bt}from"./bootstrap-vue-next-DwS3lKQb.js";import{_ as Dt}from"./ClausesKeeper-CTja-fCz.js";import{_ as It}from"./MessageInfo-CcgbMPO0.js";import{_ as xt}from"./UserNote-8i0DdDDd.js";import{_ as ht}from"./IconRotate-BADcxb6v.js";import{_ as Pt}from"./StatusBadge-CjHHKSUG.js";import{_ as yt,f as Ot}from"./BlockBalanceAgreement-qtspRQ_B.js";import{G as kt,u as Ct,r as _,x as Vt,f as b,H as Nt,g as $t,c as m,b as a,a as s,C as B,h as w,F as A,I as G,t as o,J as Rt,n as L,e as r,w as v,v as U,E as Mt,K as Bt,d as At,o as i}from"./index-CmCGXBst.js";import{u as Gt}from"./contracts-P7YPBhEI.js";import{u as Lt}from"./global-5eUCDNCu.js";import{u as Ut}from"./server-CRQmsQ4v.js";import{f as j}from"./time-DenPiOX5.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./services-C54cnl9l.js";import"./IconSettings-C_oAltUA.js";import"./IconCopy-JqCg6kwh.js";import"./IconClose-B_k4TzXM.js";import"./ButtonDefault-BIBStZbJ.js";const jt={class:"tw-px-4 md:tw-px-8"},Et={class:"tw-flex tw-flex-wrap tw-items-center tw-justify-between tw-gap-2"},Tt={class:"tw-flex tw-items-center tw-gap-2"},Ht={class:"tw-text-xl sm:tw-text-4xl"},Wt={class:"ico"},Ft={class:"tw-flex tw-items-center tw-gap-2 tw-mt-2"},zt={class:"tw-text-gray-500 tw-text-sm"},Jt={class:"tw-flex tw-items-center tw-gap-8 tw-border-b tw-border-gray-200 tw-mt-4 tw-whitespace-nowrap tw-mb-6"},Kt={class:"tw-grid tw-grid-cols-1 xl:tw-grid-cols-2 tw-gap-4"},qt={class:"tw-border tw-rounded tw-border-gray-200 tw-p-4"},Qt={class:"tw-flex tw-justify-between tw-items-center tw-gap-4"},Xt={class:"tw-flex tw-items-center tw-gap-2"},Yt={class:"tw-text-2xl"},Zt={class:"tw-flex tw-flex-wrap tw-gap-x-4 tw-gap-y-2 tw-text-gray-500 tw-text-sm tw-mt-4"},te={key:0},ee={class:"tw-space-y-4 tw-mt-4"},se={class:"tw-flex tw-gap-4 tw-mt-4"},ae={class:"btn btn--border btn--switch tw-ml-0 tw-h-10 sm:tw-h-12"},oe={class:"tw-flex tw-flex-wrap tw-gap-4 tw-mt-4"},ne={class:"tw-border tw-border-gray-200 tw-rounded tw-p-4"},le={class:"tw-grid tw-grid-cols-3 tw-gap-4"},re={class:"tw-col-span-3 tw-flex tw-items-center tw-justify-between tw-gap-2"},ue={class:"tw-col-span-2 tw-flex tw-items-center tw-gap-1"},ie={class:"tw-break-all"},de={class:"tw-col-span-2 tw-flex tw-items-center tw-gap-1"},me={class:"tw-break-all"},ve={class:"tw-col-span-2 tw-flex tw-flex-wrap tw-items-center tw-gap-2"},ce={key:0,class:"password-hidden"},we={class:"tw-col-span-2 tw-flex tw-items-center tw-gap-1"},pe={class:"tw-col-span-2 tw-space-y-2"},_e={class:"tw-flex tw-items-center tw-gap-1"},fe=["href"],Se={class:"tw-col-span-2 tw-space-y-2"},ge={key:0,class:"tw-flex tw-items-center tw-gap-1"},be={key:1,class:"tw-flex tw-items-center tw-gap-1"},De={key:2,class:"tw-flex tw-items-center tw-gap-1"},Ie={key:3,class:"tw-flex tw-items-center tw-gap-1"},Ke={__name:"VPSOrdersId",setup(xe){const f=kt(),E=Gt(),x=Ct(),T=Lt(),H=Ut(),p=$t(),h=At(),S=_(!1),g=_(!1),P=_(!0),e=_(null),c=Vt("emitter");c.on("updateVPSOrdersId",async()=>{await N()});const y=_(!1),l=b(()=>f.vpsSchemes?.[e.value?.SchemeID]),W=b(()=>{const n=e.value.Graphs?.Graphs;return n?Object.values(n):null}),F=b(()=>{const n=e.value.Graphs?.Last;return n?Object.values(n):null});function z(){function n(t){S.value=t}c.emit("open-modal",{component:"ReloadVPS",data:{VPSOrderID:e.value?.ID,isReloading:S.value,onReloadStatusChange:n}})}function O(n){c.emit("open-modal",{component:"StatusHistory",data:{modeID:"VPSOrders",rowID:n}})}const k=b(()=>H?.serverGroupsList?.Servers?.[e.value?.ServerID]);function J(n){if(!n)return j(new Date);const t=new Date,D=new Date(t.getTime()+n*24*60*60*1e3);return j(D)}function K(){c.emit("open-modal",{component:"OrdersTransfer",data:{ServiceOrderID:e.value?.ID,ServiceID:e.value?.ServiceID}})}function q(){h.push(`/VPSOrders/${e.value?.OrderID}/SchemeChange`),C()}function Q(){h.push(`/VPSOrderPay/${e.value?.OrderID}`)}function X(){x.prolongOrder({IsAutoProlong:g.value?0:1,OrderID:e.value?.OrderID})}function C(){c.emit("open-modal",{component:"VPSOrderSchemeChange",data:{VpsID:e.value?.ID,VpsSchemeID:l.value?.ID,ServerGroup:l.value?.ServersGroupID,emitEvent:"updateVPSOrdersId"}})}function V(){c.emit("open-modal",{component:"OrderPasswordChange",data:{OrderID:e.value?.ID,ServiceID:e.value?.ServiceID,emitEvent:"updateVPSOrdersId"}})}function Y(){c.emit("open-modal",{component:"OrderRestore",data:{OrderID:e.value?.OrderID,CostDay:l.value?.CostDay,DaysRemainded:e.value?.DaysRemainded,emitEvent:"updateVPSOrdersId"}})}function Z(){T.OrderManage({ServiceOrderID:e.value?.ID,OrderID:e.value?.OrderID,ServiceID:e.value?.ServiceID})}Nt(async()=>{await f.fetchVPSSchemes(),await E.fetchContracts(),e.value=await f.fetchVPSOrder(p.params.id);const n=await x.fetchUserOrder(p.params.id);n&&(g.value=n.IsAutoProlong),p.name==="VPSOrderSchemeChange"&&C(),P.value=!1});async function N(){e.value=await f.fetchVPSOrder(p.params.id)}return(n,t)=>{const D=yt,$=Pt,tt=ht,et=xt,st=It,R=Mt("RouterLink"),at=Dt,M=bt,ot=vt,I=gt,nt=St,lt=ft,d=pt,rt=_t,ut=ct,it=wt,dt=mt;return i(),m(A,null,[a(D),s("div",jt,[e.value?(i(),m(A,{key:0},[s("div",Et,[s("div",Tt,[s("h1",Ht,o(e.value.Domain),1),a($,{status:e.value.StatusID,"status-table":"VPSOrders",onClick:t[0]||(t[0]=u=>O(e.value.ID)),class:"tw-cursor-pointer"},null,8,["status"])]),G(s("button",{class:L(["btn btn--md btn--border btn--rotate btn--rotate_green tw-h-12",{"btn--rotate_gray":e.value.StatusID!=="Active"||S.value,"btn--rotate_loading":S.value}]),title:"Перезагрузить виртуальный сервер",onClick:z},[t[13]||(t[13]=r(" Включен ",-1)),s("span",Wt,[a(tt)])],2),[[Rt,e.value.StatusID==="Active"]])]),s("div",Ft,[s("div",zt,"VPS/VDS сервер #"+o(e.value.OrderID),1),a(et,{text:e.value.UserNotice,"order-id":e.value.OrderID,emit:"updateVPSOrdersId"},null,8,["text","order-id"])]),e.value.Message?(i(),B(st,{key:0,innerHTML:e.value.Message,class:"tw-mt-4"},null,8,["innerHTML"])):w("",!0),s("div",Jt,[a(R,{class:L(["tw-py-2 tw-cursor-pointer -tw-mb-[1px]",{"tw-text-sky-400 tw-border-b-2 tw-border-sky-400":U(p).path.endsWith("/SchemeChange")}]),"active-class":"tw-text-sky-400 tw-border-b-2 tw-border-sky-400",to:`/VPSOrders/${e.value.OrderID}`},{default:v(()=>t[14]||(t[14]=[r(" Сервер ",-1)])),_:1,__:[14]},8,["class","to"]),a(R,{class:"tw-py-2 tw-cursor-pointer -tw-mb-[1px]","active-class":"tw-text-sky-400 tw-border-b-2 tw-border-sky-400",to:`/VPSServices/${e.value.OrderID}`},{default:v(()=>t[15]||(t[15]=[r(" Услуги ",-1)])),_:1,__:[15]},8,["to"])]),a(at),s("div",Kt,[s("div",qt,[s("div",Qt,[s("div",Xt,[s("div",Yt,o(l.value.Name),1),a($,{status:e.value.StatusID,"status-table":"VPSOrders",onClick:t[1]||(t[1]=u=>O(e.value.ID)),class:"tw-cursor-pointer"},null,8,["status"])]),a(ot,null,{default:v(()=>[a(M,{onClick:t[2]||(t[2]=u=>Y())},{default:v(()=>t[16]||(t[16]=[r("Просмотреть учет заказа",-1)])),_:1,__:[16]}),a(M,{onClick:t[3]||(t[3]=u=>V())},{default:v(()=>t[17]||(t[17]=[r("Сменить пароль от аккаунта",-1)])),_:1,__:[17]})]),_:1})]),s("div",Zt,[l.value?.SchemeParams?.os?.value?(i(),m("div",te,o(l.value.SchemeParams?.os?.value),1)):w("",!0),s("div",null,o(l.value?.SchemeParams?.hdd_mib?.InternalName)+" "+o(l.value?.SchemeParams?.hdd_mib?.Value)+o(l.value?.SchemeParams?.hdd_mib?.Unit),1),s("div",null," RAM "+o(l.value?.SchemeParams?.ram_mib?.Value)+" "+o(l.value?.SchemeParams?.ram_mib?.Unit),1),s("div",null," Канал "+o(l.value?.SchemeParams?.net_bandwidth_mbitps?.Value)+" "+o(l.value?.SchemeParams?.net_bandwidth_mbitps?.Unit),1)]),s("div",ee,[s("div",null,o(U(Ot)(l.value?.CostMonth))+" в месяц",1),s("div",null,"Дней осталось "+o(e.value.DaysRemainded),1),s("div",null,"Дата окончания "+o(J(e.value.DaysRemainded)),1)]),s("div",se,[a(I,{onClick:t[4]||(t[4]=u=>Q()),class:"tw-w-30 sm:tw-w-40"},{default:v(()=>[r(o(e.value.StatusID==="Suspended"||e.value.StatusID==="Waiting"?"Оплатить":"Продлить"),1)]),_:1}),s("label",ae,[G(s("input",{type:"checkbox","onUpdate:modelValue":t[5]||(t[5]=u=>g.value=u),onInput:t[6]||(t[6]=u=>X())},null,544),[[Bt,g.value]]),t[18]||(t[18]=s("span",{class:"btn-switch__text tw-text-xs sm:tw-text-sm"},"Автопродление",-1)),t[19]||(t[19]=s("span",{class:"btn-switch__toggle"},null,-1))])]),s("div",oe,[a(I,{onClick:t[7]||(t[7]=u=>q()),class:"tw-w-36 sm:tw-w-40"},{default:v(()=>t[20]||(t[20]=[r("Изменить тариф",-1)])),_:1,__:[20]}),a(lt,{onClick:t[8]||(t[8]=u=>K())},{default:v(()=>[a(nt),t[21]||(t[21]=s("div",null,"Передать на другой аккаунт",-1))]),_:1,__:[21]})])]),s("div",ne,[s("div",le,[s("div",re,[t[23]||(t[23]=s("div",{class:"tw-text-2xl"},"Панель управления",-1)),a(I,{onClick:t[9]||(t[9]=u=>Z()),type:"small"},{default:v(()=>t[22]||(t[22]=[r("Вход",-1)])),_:1,__:[22]})]),t[25]||(t[25]=s("div",{class:"tw-font-bold"},"Адрес",-1)),s("div",ue,[s("div",ie,o(`https://${k.value?.Address}/manager`),1),a(d,{value:`https://${k.value?.Address}/manager`},null,8,["value"])]),t[26]||(t[26]=s("div",{class:"tw-font-bold"},"Логин",-1)),s("div",de,[s("div",me,o(e.value.Login),1),a(d,{value:e.value?.Login},null,8,["value"])]),t[27]||(t[27]=s("div",{class:"tw-font-bold"},"Пароль",-1)),s("div",ve,[y.value?(i(),m("span",ce,o(e.value?.Password),1)):(i(),m("button",{key:1,class:"btn btn--border btn--md tw-h-8 tw-gap-1",onClick:t[10]||(t[10]=u=>y.value=!0)},[a(rt),t[24]||(t[24]=r(" Показать ",-1))])),s("button",{class:"btn btn--border btn--md tw-h-8",onClick:t[11]||(t[11]=u=>V())},"Сменить пароль"),a(d,{value:e.value?.Password},null,8,["value"])]),t[28]||(t[28]=s("div",{class:"tw-font-bold"},"IP адрес",-1)),s("div",we,[r(o(e.value.IP?e.value.IP:"-")+" ",1),a(d,{value:e.value.IP?e.value.IP:"-"},null,8,["value"])]),t[29]||(t[29]=s("div",{class:"tw-flex tw-font-bold"},"Обратная зона DNS",-1)),s("div",pe,[s("div",_e,[s("a",{href:`https://${e.value.Domain}`,target:"_blank"},o(e.value.Domain),9,fe),a(d,{value:e.value.Domain},null,8,["value"])])]),t[30]||(t[30]=s("div",{class:"tw-flex tw-font-bold"},"Именные сервера",-1)),s("div",Se,[e.value.Ns1Name?(i(),m("div",ge,[r(o(e.value.Ns1Name),1),a(d,{value:e.value.Ns1Name},null,8,["value"])])):w("",!0),e.value.Ns2Name?(i(),m("div",be,[r(o(e.value.Ns2Name),1),a(d,{value:e.value.Ns2Name},null,8,["value"])])):w("",!0),e.value.Ns3Name?(i(),m("div",De,[r(o(e.value.Ns3Name),1),a(d,{value:e.value.Ns3Name},null,8,["value"])])):w("",!0),e.value.Ns4Name?(i(),m("div",Ie,[r(o(e.value.Ns4Name),1),a(d,{value:e.value.Ns4Name},null,8,["value"])])):w("",!0)])])]),a(ut,{data:F.value,order:e.value,date:e.value.Graphs?.UpdateDate,type:"VPS",onUpdated:t[12]||(t[12]=u=>N())},null,8,["data","order","date"]),a(it,{data:W.value},null,8,["data"])]),t[31]||(t[31]=s("div",{class:"tw-my-6"},[s("div",{class:"text"},[s("h3",null,"Что входит в стоимость"),s("p",null,"Для подключения дополнительных услуг"),s("ul",null,[s("li",null,"Размещение в РФ, Москва"),s("li",null,"Предустановленная ОС FreeBSD / CentOS / Debian / Ubuntu / Windows"),s("li",null,"IP адрес, с возможностью расширения"),s("li",null,"Бесплатная панель управления ISPManager Lite"),s("li",null,"Круглосуточная поддержка")])])],-1))],64)):P.value?w("",!0):(i(),B(dt,{key:1,label:"Заказ не найден"}))])],64)}}};export{Ke as default};
