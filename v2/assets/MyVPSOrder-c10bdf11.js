import{k as At,o as S,c as I,b as r,a as t,t as a,Z as Pt,ab as Bt,n as Et,d as u,w as D,l as Mt,$ as Nt,F as Ut,p as Gt,m as Tt,_ as Lt,g as Ht,f as zt,e as Ft,r as L,U as jt,h as E}from"./index-aeb1df1e.js";import{u as Wt}from"./IconArrow-a6c91ada.js";import{u as Zt}from"./vps-31dc9173.js";import{u as qt}from"./globalActions-3944bebb.js";import{u as Jt}from"./resetServer-1c71747e.js";import{_ as Kt}from"./IconCard-47752060.js";import{I as Qt}from"./IconProfile-efaeb789.js";import{I as Xt}from"./IconSettings-09f9f59f.js";import{_ as Yt,a as kt}from"./ServicesContractBalanceBlock-a08c9c9b.js";import{S as yt}from"./StatusBadge-ca078fa4.js";import{f as Ct}from"./useTimeFunction-8602dd60.js";import{v as $t}from"./vpsStatuses-32ffaaf5.js";import{s as xt}from"./SettingsEngineItem-2c0bce28.js";import{B as Rt}from"./BlockBalanceAgreement-906c1168.js";import{E as te}from"./EmptyStateBlock-b0a120e4.js";import{_ as ee}from"./ButtonDefault-11c4541b.js";import{z as se}from"./bootstrap-vue-next.es-c6bcf011.js";import{_ as oe}from"./ClausesKeeper-90c650cc.js";import{I as ie}from"./IconRotate-7f250028.js";import"./IconClose-c7c36336.js";const c=_=>(Gt("data-v-223d68df"),_=_(),Tt(),_),ne={key:0,class:"my-vps-order"},ae={class:"section"},re={class:"container"},le={class:"section-header"},de={class:"section-title"},ce={class:"ico"},_e={class:"section-label"},me={class:"section-nav"},ve={class:"list"},ue={class:"list-col list-col--md"},he={class:"list-item"},pe={class:"list-item__row"},ge={class:"list-item__title"},Se={class:"list-item__status"},Ie={class:"list-item__row"},De={class:"list-item__ul"},Ve={key:0},fe={class:"list-item__row list-item__row--column"},be={class:"list-item__text"},Oe={class:"list-item__text"},we={class:"list-item__text"},Pe={class:"list-item__row"},Ce={class:"btn btn--border btn--switch"},ke=c(()=>t("span",{class:"btn-switch__text"},"Автопродление",-1)),ye=c(()=>t("span",{class:"btn-switch__toggle"},null,-1)),xe={class:"list-col list-col--md"},Re={class:"list-item"},Ae={class:"list-item__row"},Be=c(()=>t("div",{class:"list-item__title"},"Панель управления",-1)),Ee={class:"list-item__row list-item__row--table"},Me=c(()=>t("div",{class:"list-item__item"},"Адрес",-1)),Ne={class:"list-item__item"},Ue={class:"list-item__row list-item__row--table"},Ge=c(()=>t("div",{class:"list-item__item"},"Логин",-1)),Te={class:"list-item__item"},Le={class:"list-item__row list-item__row--table password-box"},He=c(()=>t("div",{class:"list-item__item"},"Пароль",-1)),ze={class:"list-item__item hide-button"},Fe={key:0,class:"password-hidden"},je={class:"list-item__row list-item__row--table"},We=c(()=>t("div",{class:"list-item__item"},"IP адрес",-1)),Ze={class:"list-item__item"},qe={class:"list-col list-col--md"},Je={class:"list-item"},Ke=c(()=>t("div",{class:"list-item__row"},[t("div",{class:"list-item__title"},"Именные сервера")],-1)),Qe={class:"list-item__row list-item__row--table"},Xe=c(()=>t("div",{class:"list-item__item"},"Первичный сервер",-1)),Ye={class:"list-item__item"},$e={class:"list-item__row list-item__row--table"},ts=c(()=>t("div",{class:"list-item__item"},"Вторичный сервер",-1)),es={class:"list-item__item"},ss={class:"list-col list-col--md"},os={class:"list-item"},is=c(()=>t("div",{class:"list-item__row"},[t("div",{class:"list-item__title"},"Паркованный домен")],-1)),ns={class:"list-item__row list-item__row--table"},as=c(()=>t("div",{class:"list-item__item"},"Паркованный домен",-1)),rs={class:"list-item__item"},ls=c(()=>t("div",{class:"section"},[t("div",{class:"container"},[t("div",{class:"text"},[t("h3",null,"Что входит в стоимость"),t("p",null,"Для подключения дополнительных услуг"),t("ul",null,[t("li",null,"Размещение в РФ, Москва"),t("li",null,"Предустановленная ОС FreeBSD / CentOS / Debian / Ubuntu / Windows"),t("li",null,"IP адрес, с возможностью расширения"),t("li",null,"Бесплатная панель управления ISPManager Lite"),t("li",null,"Круглосуточная поддержка")])])])],-1)),ds={key:1,class:"section"},cs={class:"container"};function _s(_,i,h,e,V,M){var P,C,k,y,x,g,R,A,B,s,o,l,H,z,F,j,W,Z,q,J,K,Q,X,Y,$,tt,et,st,ot,it,nt,at,rt,lt,dt,ct,_t,mt,vt,ut,ht,pt,gt,St,It,Dt,Vt,ft,bt,Ot,wt;const O=Rt,p=yt,f=ie,m=At("router-link"),N=oe,n=Yt,v=se,U=xt,w=ee,G=kt,T=te;return S(),I(Ut,null,[r(O),(P=e.getVpsOrder)!=null&&P.ID?(S(),I("div",ne,[t("div",ae,[t("div",re,[t("div",le,[t("h1",de,a((C=e.getVpsOrder)==null?void 0:C.Domain),1),r(p,{status:(k=e.getVpsOrder)==null?void 0:k.StatusID,"status-table":"VPSOrders",onClick:i[0]||(i[0]=d=>{var b;return e.openHistoryStatuses((b=e.getVpsOrder)==null?void 0:b.ID)})},null,8,["status"]),Pt(t("button",{class:Et(["btn btn--md btn--border btn--rotate btn--rotate_green button-large",{"btn--rotate_gray":((y=e.getVpsOrder)==null?void 0:y.StatusID)!=="Active"||e.isReloading,"btn--rotate_loading":e.isReloading}]),title:"Перезагрузить виртуальный сервер",onClick:i[1]||(i[1]=(...d)=>e.reloadItem&&e.reloadItem(...d))},[u("Включен"),t("div",ce,[r(f)])],2),[[Bt,((x=e.getVpsOrder)==null?void 0:x.StatusID)==="Active"]]),t("div",_e,"VPS/VDS сервер # "+a((g=e.getVpsOrder)==null?void 0:g.OrderID),1),t("div",me,[r(m,{class:"section-nav__item",to:`/VPSOrders/${(R=e.getVpsOrder)==null?void 0:R.OrderID}`},{default:D(()=>[u("Сервер")]),_:1},8,["to"]),r(m,{class:"section-nav__item",to:`/VPSServices/${(A=e.getVpsOrder)==null?void 0:A.OrderID}`},{default:D(()=>[u("Услуги")]),_:1},8,["to"])])]),r(N),t("div",ve,[r(n,{"contract-id":(B=e.getVpsOrder)==null?void 0:B.ContractID,onTransfer:i[2]||(i[2]=d=>e.transferItem())},null,8,["contract-id"]),t("div",ue,[t("div",he,[t("div",pe,[t("div",ge,a((s=e.getVpsScheme)==null?void 0:s.Name),1),t("div",Se,[r(p,{status:(o=e.getVpsOrder)==null?void 0:o.StatusID,"status-table":"VPSOrders",onClick:i[3]||(i[3]=d=>{var b;return e.openHistoryStatuses((b=e.getVpsOrder)==null?void 0:b.ID)})},null,8,["status"])]),r(U,null,{default:D(()=>[r(v,{onClick:i[4]||(i[4]=d=>e.changeScheme())},{default:D(()=>[u("Изменить тариф")]),_:1}),r(v,{onClick:i[5]||(i[5]=d=>e.openOrderRestore())},{default:D(()=>[u("Просмотреть учет заказа")]),_:1}),r(v,{onClick:i[6]||(i[6]=d=>e.openPasswordChange())},{default:D(()=>[u("Сменить пароль от аккаунта")]),_:1})]),_:1})]),t("div",Ie,[t("ul",De,[(z=(H=(l=e.getVpsScheme)==null?void 0:l.SchemeParams)==null?void 0:H.os)!=null&&z.value?(S(),I("li",Ve,a((W=(j=(F=e.getVpsScheme)==null?void 0:F.SchemeParams)==null?void 0:j.os)==null?void 0:W.value),1)):Mt("",!0),t("li",null,a(`${(J=(q=(Z=e.getVpsScheme)==null?void 0:Z.SchemeParams)==null?void 0:q.hdd_mib)==null?void 0:J.InternalName} ${(X=(Q=(K=e.getVpsScheme)==null?void 0:K.SchemeParams)==null?void 0:Q.hdd_mib)==null?void 0:X.Value} ${(tt=($=(Y=e.getVpsScheme)==null?void 0:Y.SchemeParams)==null?void 0:$.hdd_mib)==null?void 0:tt.Unit}`),1),t("li",null,a(`RAM ${(ot=(st=(et=e.getVpsScheme)==null?void 0:et.SchemeParams)==null?void 0:st.ram_mib)==null?void 0:ot.Value} ${(at=(nt=(it=e.getVpsScheme)==null?void 0:it.SchemeParams)==null?void 0:nt.ram_mib)==null?void 0:at.Unit}`),1),t("li",null,a(`Канал ${(dt=(lt=(rt=e.getVpsScheme)==null?void 0:rt.SchemeParams)==null?void 0:lt.net_bandwidth_mbitps)==null?void 0:dt.Value} ${(mt=(_t=(ct=e.getVpsScheme)==null?void 0:ct.SchemeParams)==null?void 0:_t.net_bandwidth_mbitps)==null?void 0:mt.Unit}`),1)])]),t("div",fe,[t("div",be,a((vt=e.getVpsScheme)==null?void 0:vt.CostMonth)+" ₽ в месяц",1),t("div",Oe,"Дней осталось "+a((ut=e.getVpsOrder)==null?void 0:ut.DaysRemainded),1),t("div",we,"Дата окончания "+a(e.calculateExpirationDate((ht=e.getVpsOrder)==null?void 0:ht.DaysRemainded)),1)]),t("div",Pe,[r(w,{label:((pt=e.getVpsOrder)==null?void 0:pt.StatusID)==="Suspended"||((gt=e.getVpsOrder)==null?void 0:gt.StatusID)==="Waiting"?"Оплатить":"Продлить",onClick:i[7]||(i[7]=d=>e.navigateToProlong())},null,8,["label"]),t("label",Ce,[Pt(t("input",{type:"checkbox","onUpdate:modelValue":i[8]||(i[8]=d=>e.isAutoProlong=d),onInput:i[9]||(i[9]=d=>e.setProlongValue())},null,544),[[Nt,e.isAutoProlong]]),ke,ye])])])]),t("div",xe,[t("div",Re,[t("div",Ae,[Be,r(w,{class:"ml-auto",onClick:i[10]||(i[10]=d=>e.orderManage()),label:"Вход"})]),t("div",Ee,[Me,t("div",Ne,a(`https://${(St=e.getServerGroup)==null?void 0:St.Address}/manager`),1)]),t("div",Ue,[Ge,t("div",Te,a((It=e.getVpsOrder)==null?void 0:It.Login),1)]),t("div",Le,[He,t("div",ze,[e.passwordShow?(S(),I("div",Fe,a((Dt=e.getVpsOrder)==null?void 0:Dt.Password),1)):(S(),I("button",{key:1,class:"btn btn--border btn--md password-box",onClick:i[11]||(i[11]=d=>e.passwordShow=!0)},[r(G),u("Показать")])),t("button",{class:"btn btn--border btn--md hide-button",onClick:i[12]||(i[12]=d=>e.openPasswordChange())},"Сменить пароль")])]),t("div",je,[We,t("div",Ze,a((Vt=e.getVpsOrder)!=null&&Vt.IP?(ft=e.getVpsOrder)==null?void 0:ft.IP:"-"),1)])])]),t("div",qe,[t("div",Je,[Ke,t("div",Qe,[Xe,t("div",Ye,a((bt=e.getVpsOrder)==null?void 0:bt.Ns1Name),1)]),t("div",$e,[ts,t("div",es,a((Ot=e.getVpsOrder)==null?void 0:Ot.Ns2Name),1)])])]),t("div",ss,[t("div",os,[is,t("div",ns,[as,t("div",rs,a((wt=e.getVpsOrder)==null?void 0:wt.Domain),1)])])])])])]),ls])):(S(),I("div",ds,[t("div",cs,[r(T,{label:"Заказ не найден"})])]))],64)}const ms={components:{IconCard:Kt,IconProfile:Qt,IconSettings:Xt,IconEye:kt,StatusBadge:yt,settingsEngineItem:xt,BlockBalanceAgreement:Rt},async setup(){const _=Zt(),i=Wt(),h=Ht(),e=qt(),V=Jt(),M=zt(),O=Ft(),p=L(!1),f=L(!1),m=jt("emitter");m.on("updateVPSIDPage",()=>{_.fetchVPS()});const N=L(!1),n=E(()=>Object.keys(_.vpsList).map(s=>_.vpsList[s]).find(s=>s.OrderID===M.params.id)),v=E(()=>{var s,o;return(o=_.vpsSchemes)==null?void 0:o[(s=n.value)==null?void 0:s.SchemeID]}),U=E(()=>{var s,o;return(o=h==null?void 0:h.userOrders)==null?void 0:o[(s=n.value)==null?void 0:s.OrderID]});function w(){var o;function s(l){p.value=l}m.emit("open-modal",{component:"ReloadVPS",data:{VPSOrderID:(o=n.value)==null?void 0:o.ID,isReloading:p.value,onReloadStatusChange:s}})}function G(s){m.emit("open-modal",{component:"StatusHistory",data:{modeID:"VPSOrders",rowID:s}})}const T=E(()=>{var s,o,l;return(l=(s=V==null?void 0:V.serverGroupsList)==null?void 0:s.Servers)==null?void 0:l[(o=n.value)==null?void 0:o.ServerID]});function P(s){if(!s)return Ct(new Date);const o=new Date,l=new Date(o.getTime()+s*24*60*60*1e3);return Ct(l)}function C(){var s,o;m.emit("open-modal",{component:"OrdersTransfer",data:{ServiceOrderID:(s=n.value)==null?void 0:s.ID,ServiceID:(o=n.value)==null?void 0:o.ServiceID}})}function k(){var s;O.push(`/VPSOrders/${(s=n.value)==null?void 0:s.OrderID}/SchemeChange`),g()}function y(){var s;O.push(`/VPSOrderPay/${(s=n.value)==null?void 0:s.OrderID}`)}function x(){var s;h.prolongOrder({IsAutoProlong:f.value?0:1,OrderID:(s=n.value)==null?void 0:s.OrderID})}function g(){var s,o;m.emit("open-modal",{component:"VPSOrderSchemeChange",data:{VpsID:(s=n.value)==null?void 0:s.ID,ServerGroup:(o=v.value)==null?void 0:o.ServersGroupID,emitEvent:"updateVPSIDPage"}})}function R(){var s,o;m.emit("open-modal",{component:"OrderPasswordChange",data:{OrderID:(s=n.value)==null?void 0:s.ID,ServiceID:(o=n.value)==null?void 0:o.ServiceID,emitEvent:"updateVPSIDPage"}})}function A(){var s,o,l;m.emit("open-modal",{component:"OrderRestore",data:{OrderID:(s=n.value)==null?void 0:s.OrderID,CostDay:(o=v.value)==null?void 0:o.CostDay,DaysRemainded:(l=n.value)==null?void 0:l.DaysRemainded,emitEvent:"updateVPSIDPage"}})}function B(){var s,o,l;e.OrderManage({ServiceOrderID:(s=n.value)==null?void 0:s.ID,OrderID:(o=n.value)==null?void 0:o.OrderID,ServiceID:(l=n.value)==null?void 0:l.ServiceID})}return await _.fetchVPS(),await _.fetchVPSSchemes(),await V.fetchServerGroups(),await i.fetchContracts().then(()=>{M.name==="default.MyVPSOrderSchemeChange"&&g()}),await h.fetchUserOrders().then(()=>{var s;f.value=(s=U.value)==null?void 0:s.IsAutoProlong}),{getVpsOrder:n,passwordShow:N,getVpsScheme:v,isAutoProlong:f,setProlongValue:x,navigateToProlong:y,transferItem:C,vpsStatuses:$t,openPackageChangeModal:g,openPasswordChange:R,openOrderRestore:A,orderManage:B,calculateExpirationDate:P,changeScheme:k,reloadItem:w,isReloading:p,getServerGroup:T,openHistoryStatuses:G}}},Bs=Lt(ms,[["render",_s],["__scopeId","data-v-223d68df"]]);export{Bs as default};
