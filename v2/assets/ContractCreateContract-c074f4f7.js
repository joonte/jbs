import{_ as M}from"./ButtonDefault-cd183bf8.js";import{s as R}from"./SimpleCheckbox-5ed39d0e.js";import{_ as A}from"./ClausesKeeper-b9906182.js";import{_ as D,r as V,i as P,h as B,o as m,c as g,Y,ad as q,a as e,t as w,b as f,w as N,L as z,p as T,l as L,d as j,u as G,e as H,g as I,af as J,j as K,F as $,v as Q,x as W,k as X}from"./index-1c309346.js";import{u as Z}from"./contracts-7b919c67.js";import{s as ee}from"./multiselect-b7ad6876.js";import"./IconClose-7cf50ca7.js";const te=a=>(T("data-v-e14078ef"),a=a(),L(),a),oe={class:"section"},se={class:"block--mobile_divider"},le={class:"form-field form-field--basic"},ae=te(()=>e("div",{class:"form-field__label"},[j("Выбрать профиль"),e("span",null,"*")],-1)),ne={class:"form-field-input__wrapper"},ce={class:"multiselect-option"},ie={__name:"BlockSelectProfile",props:["modelValue","title","items"],emits:["update:modelValue","buttonClicked"],setup(a,{emit:v}){const t=a,r=V(null);function i(u){v("update:modelValue",u)}return P(()=>{var u;t.items&&(r.value=(u=Object.keys(t.items))==null?void 0:u[0])}),B(t,()=>{r.value=t.modelValue}),(u,_)=>{var c;return m(),g("div",oe,[Y(e("h2",{class:"section-block_title"},w(t.title),513),[[q,t.title]]),e("div",se,[e("div",le,[ae,e("div",ne,[f(z(ee),{class:"multiselect--white",placeholder:"Выбрать профиль",label:"name",modelValue:r.value,"onUpdate:modelValue":_[0]||(_[0]=o=>r.value=o),options:t.items,disabled:((c=t.items)==null?void 0:c.length)<=1,onChange:i},{option:N(({option:o})=>[e("div",ce,w(o.name),1)]),_:1},8,["modelValue","options","disabled"])])])])])}}},ue=D(ie,[["__scopeId","data-v-e14078ef"]]);const E=a=>(T("data-v-b0fb189a"),a=a(),L(),a),re={class:"section"},_e={class:"container"},de={class:"section-header"},pe=E(()=>e("h1",{class:"section-title"},"Создать договор",-1)),me=E(()=>e("div",{class:"section-header"},[e("h2",{class:"section-block_title"},"Шаблон")],-1)),fe={class:"form"},ve={class:"container-limited"},he={__name:"ContractCreateContract",async setup(a){let v,t;const r=G(),i=Z(),u=H(),_=V(!1),c=V("Natural"),o=V(null),F=I(()=>r.ConfigList),d=I(()=>i==null?void 0:i.profileList),x=I(()=>Object.keys(d==null?void 0:d.value).map(s=>{var n,h,b,C,k,p;return{template:(h=(n=d.value)==null?void 0:n[s])==null?void 0:h.TemplateID,value:(C=(b=d.value)==null?void 0:b[s])==null?void 0:C.ID,name:(p=(k=d.value)==null?void 0:k[s])==null?void 0:p.Name}}).filter(s=>s.template===c.value));function O(){console.log(o.value),console.log(c.value),_.value=!0,i.contractMake({ProfileID:o.value,TypeID:c.value}).then(s=>{s.Status==="Ok"&&u.push("/Contracts"),_.value=!1})}function y(){var s,n;o.value=((n=(s=x.value)==null?void 0:s[0])==null?void 0:n.value)||null}return B(c,()=>{y()}),P(()=>{y()}),[v,t]=J(()=>i.fetchProfiles()),await v,t(),(s,n)=>{var p,S;const h=K("router-link"),b=A,C=R,k=M;return m(),g("div",re,[e("div",_e,[e("div",de,[f(h,{class:"section-label",to:"/Contracts"},{default:N(()=>[j("Мои договора")]),_:1}),pe]),f(b),me,e("div",fe,[(m(!0),g($,null,Q((S=(p=F.value)==null?void 0:p.Contracts)==null?void 0:S.Types,l=>(m(),g($,null,[(l==null?void 0:l.ProfileTemplateID)!==""?(m(),W(C,{key:0,label:l==null?void 0:l.Name,value:l==null?void 0:l.ProfileTemplateID,modelValue:c.value,"onUpdate:modelValue":n[0]||(n[0]=U=>c.value=U)},null,8,["label","value","modelValue"])):X("",!0)],64))),256))]),e("div",ve,[f(ue,{title:"Использовать профиль",items:x.value,modelValue:o.value,"onUpdate:modelValue":n[1]||(n[1]=l=>o.value=l)},null,8,["items","modelValue"]),f(k,{onClick:O,disabled:o.value===null||o.value===void 0,"is-loading":_.value,label:"Зарегистрировать"},null,8,["disabled","is-loading"])])])])}}},ye=D(he,[["__scopeId","data-v-b0fb189a"]]);export{ye as default};
