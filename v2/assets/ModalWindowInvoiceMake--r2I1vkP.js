import{an as x,x as N,r as d,f as v,c as n,o as a,a as r,h as I,F as c,i as _,n as j,t as p}from"./index-C9dBN6m4.js";import{u as w}from"./invoices-1jCjzpAT.js";import{u as A}from"./postings-CmcOMU5N.js";import{_ as B}from"./_plugin-vue_export-helper-DlAUqK2U.js";const F={class:"list-part"},O={key:0,class:"list-row grid-net"},V=["onClick"],W=["src"],z={class:"list-item__image-title"},E={class:"modal__error"},L={__name:"ModalWindowInvoiceMake",props:{data:{type:Object,default:()=>{}}},emits:["modalClose"],setup(f,{emit:y}){const D=f,l=y,S=x(),g=w(),C=A(),k=N("emitter"),h=d(null),b=v(()=>S.data),i=d(null),m=v(()=>{const o=b.value;return o?.PaymentSystems?Object.keys(o.PaymentSystems).map(e=>{const s=o.PaymentSystems[e];return String(s?.IsActive)==="1"?s.Collations?.slice().sort((u,P)=>Number.parseInt(u.SortID)-Number.parseInt(P.SortID)):null}).filter(e=>e!==null):null});function M(o){i.value={id:o?.ID,type:o?.Source},i.value!==null&&g.InvoiceMake({ContractID:D.data?.ItemID,PaymentSystemID:i.value?.type}).then(e=>{if(e.status==="success"&&e.data&&e.data.InvoiceID){l("modalClose");const s=e.data.InvoiceID;C.InvoiceDocument({InvoiceID:s}).then(t=>{k.emit("open-modal",{component:"InvoiceDocument",data:{html:t,ID:s}})})}else l("modalClose")})}return(o,e)=>(a(),n("div",F,[e[0]||(e[0]=r("div",{class:"list-item__title"},"Выбрать платёжную систему",-1)),m.value?(a(),n("div",O,[(a(!0),n(c,null,_(m.value,s=>(a(),n(c,{key:s[0]?.ID},[(a(!0),n(c,null,_(s,t=>(a(),n(c,{key:t?.ID},[t?.IsActive?(a(),n("div",{key:0,class:j(["list-item",{"list-item_active":i.value?.id===t?.ID}]),onClick:u=>M(t)},[r("img",{class:"list-item__image",src:t?.Image},null,8,W),r("div",z,p(t?.Description),1)],10,V)):I("",!0)],64))),128))],64))),128))])):I("",!0),r("div",E,p(h.value),1)]))}},J=B(L,[["__scopeId","data-v-7f774bbf"]]);export{J as default};
