import{k as at,o as _,c as d,b as m,a as t,t as l,n as rt,w as u,d as f,F as P,y as B,$ as lt,a0 as _t,l as tt,p as dt,m as ct,_ as mt,f as vt,g as Dt,r as N,U as ut,h as w}from"./index-918fd9be.js";import"./resetServer-7096efe8.js";import{u as It}from"./dedicatedServer-ecdc1614.js";import{f as st}from"./useTimeFunction-8602dd60.js";import{_ as ht}from"./IconCard-c8682fa1.js";import{I as St}from"./IconProfile-363a08ea.js";import{I as gt}from"./IconSettings-9c102b98.js";import{_ as ft,a as et}from"./ServicesContractBalanceBlock-bb7e082d.js";import{S as ot}from"./StatusBadge-fee09aa1.js";import{I as wt}from"./IconRotate-939f5f86.js";import{h as pt}from"./hostStatuses-94d00f20.js";import{s as it}from"./SettingsEngineItem-3a70f3c6.js";import{B as nt}from"./BlockBalanceAgreement-e7f96bc6.js";import{E as bt}from"./EmptyStateBlock-531c1077.js";import{_ as Ot}from"./ButtonDefault-2f55d117.js";import{_ as Pt}from"./ClausesKeeper-a5c1abc1.js";import{z as yt,d as kt}from"./bootstrap-vue-next.es-1529a2a7.js";import{_ as Mt}from"./IconDots-6103eb35.js";import"./contracts-580f94dc.js";import"./IconArrow-f2d41a4e.js";import"./IconClose-6ceae682.js";const v=D=>(dt("data-v-2f33a107"),D=D(),ct(),D),Ct={key:0,class:"ds-order-page"},Rt={class:"section"},xt={class:"container"},Bt={class:"section-header"},Nt={class:"section-title"},At={class:"hosting-item__controls"},Et={class:"btn btn--dots"},Lt={class:"section-label"},Tt={class:"section-nav"},Ut={class:"list"},Vt={class:"list-col list-col--md"},zt={class:"list-item"},Ft={class:"list-item__row"},Ht={class:"list-item__title"},jt={class:"list-item__status"},Gt={class:"list-item__row"},Wt={class:"list-item__ul"},qt={class:"list-item__row list-item__row--column"},Jt={class:"list-item__text"},Kt={class:"list-item__text"},Qt={class:"list-item__text"},Xt={class:"list-item__row"},Yt={class:"btn btn--border btn--switch"},Zt=v(()=>t("span",{class:"btn-switch__text"},"Автопродление",-1)),$t=v(()=>t("span",{class:"btn-switch__toggle"},null,-1)),ts={class:"list-col list-col--xl"},ss={class:"list-item"},es=v(()=>t("div",{class:"list-item__row"},[t("div",{class:"list-item__title"},"Конфигурация")],-1)),os={class:"list-item__row list-item__table"},is={class:"list-item__label"},ns={class:"list-item__text"},as={class:"list-col list-col--md"},rs={class:"list-item"},ls=v(()=>t("div",{class:"list-item__row"},[t("div",{class:"list-item__title"},"Доступы")],-1)),_s={class:"list-item__row list-item__row--table"},ds=v(()=>t("div",{class:"list-item__item"},"IP адрес сервера",-1)),cs={class:"list-item__item"},ms={class:"list-item__row list-item__row--table"},vs=v(()=>t("div",{class:"list-item__item"},"Пользователь",-1)),Ds={class:"list-item__item"},us={class:"list-item__row list-item__row--table password-line"},Is=v(()=>t("div",{class:"list-item__item"},"Пароль",-1)),hs={class:"list-item__item"},Ss={key:0,class:"password-hidden"},gs={class:"list-col list-col--md"},fs={class:"list-item"},ws=v(()=>t("div",{class:"list-item__row"},[t("div",{class:"list-item__title"},"Доступы IPMI")],-1)),ps={class:"list-item__row list-item__row--table"},bs=v(()=>t("div",{class:"list-item__item"},"IP адрес сервера",-1)),Os={class:"list-item__item"},Ps={class:"list-item__row list-item__row--table"},ys=v(()=>t("div",{class:"list-item__item"},"Пользователь",-1)),ks={class:"list-item__item"},Ms={class:"list-item__row list-item__row--table password-line"},Cs=v(()=>t("div",{class:"list-item__item"},"Пароль",-1)),Rs={class:"list-item__item"},xs={key:0,class:"password-hidden"},Bs={key:0,class:"list-col list-col--md"},Ns={class:"list-item"},As=v(()=>t("div",{class:"list-item__row"},[t("div",{class:"list-item__title"},"Общая информация из IPMI")],-1)),Es={class:"list-item__row list-item__row--table"},Ls={class:"list-item__item"},Ts={class:"list-item__item"},Us={key:1,class:"list-col list-col--md"},Vs={class:"list-item"},zs=v(()=>t("div",{class:"list-item__row"},[t("div",{class:"list-item__title"},"Данные сенсоров")],-1)),Fs={class:"list-item__row list-item__row--table"},Hs={class:"list-item__item"},js={class:"list-item__item"},Gs=v(()=>t("div",{class:"section"},[t("div",{class:"container"},[t("div",{class:"text"},[t("h3",null,"Что входит в стоимость"),t("p",null,"Для подключения дополнительных услуг"),t("ul",null,[t("li",null,"Размещение в РФ, Москва"),t("li",null,"Предустановленная ОС FreeBSD / CentOS / Debian / Ubuntu / Windows"),t("li",null,"IP адрес, с возможностью расширения"),t("li",null,"Бесплатная панель управления ISPManager Lite"),t("li",null,"Круглосуточная поддержка")])])])],-1)),Ws={key:1,class:"section"},qs={class:"container"};function Js(D,i,I,s,h,F){var k,M,C,R,e,o,a,b,O,x,H,j,G,W,q,J,K,Q,X,Y,Z,$;const A=nt,p=Mt,r=yt,E=kt,S=at("router-link"),g=Pt,L=ft,T=ot,U=it,V=Ot,y=et,z=bt;return _(),d(P,null,[m(A),(k=s.getDSServerData)!=null&&k.ID?(_(),d("div",Ct,[t("div",Rt,[t("div",xt,[t("div",Bt,[t("h1",Nt,l((M=s.getDSServerData)==null?void 0:M.IPaddr),1),t("div",At,[t("div",{class:rt(["btn btn--md btn--border btn--rotate btn--rotate_green",{"btn--system-off":((C=s.getDSOrderIPMI)==null?void 0:C.IPMI["System Power"])!=="on"}]),onClick:i[0]||(i[0]=n=>{var c;return s.serverReset((c=s.getDSServerData)==null?void 0:c.ID)})},l(((R=s.getDSOrderIPMI)==null?void 0:R.IPMI["System Power"])==="on"?"Включен":"Выключен"),3),m(E,{class:"dropdown-dots",right:""},{"button-content":u(()=>[t("div",Et,[m(p)])]),default:u(()=>[m(r,{onClick:i[1]||(i[1]=n=>{var c;return s.serverReset((c=s.getDSServerData)==null?void 0:c.ID)})},{default:u(()=>[f("Перезагрузить")]),_:1})]),_:1})]),t("div",Lt,"Выделенный сервер # "+l((e=s.getDSServerData)==null?void 0:e.OrderID),1),t("div",Tt,[m(S,{class:"section-nav__item",to:`/DSOrders/${(o=s.getDSServerData)==null?void 0:o.OrderID}`},{default:u(()=>[f("Сервер")]),_:1},8,["to"]),m(S,{class:"section-nav__item",to:"dedicated-server-services"},{default:u(()=>[f("Услуги")]),_:1})])]),m(g),t("div",Ut,[m(L,{"contract-id":(a=s.getDSServerData)==null?void 0:a.ContractID,onTransfer:i[2]||(i[2]=n=>s.transferItem())},null,8,["contract-id"]),t("div",Vt,[t("div",zt,[t("div",Ft,[t("div",Ht,l((b=s.getDSServerData)==null?void 0:b.Scheme),1),t("div",jt,[m(T,{status:(O=s.getDSServerData)==null?void 0:O.StatusID,DaysRemainded:(x=s.getDSServerData)==null?void 0:x.DaysRemainded,"status-table":"DNSmanagerOrders",onClick:i[3]||(i[3]=n=>{var c;return s.openHistoryStatuses((c=s.getDSServerData)==null?void 0:c.ID)})},null,8,["status","DaysRemainded"])]),m(U,null,{default:u(()=>[m(r,{onClick:i[4]||(i[4]=n=>s.openOrderRestore())},{default:u(()=>[f("Просмотреть учет заказа")]),_:1})]),_:1})]),t("div",Gt,[t("ul",Wt,[(_(!0),d(P,null,B(s.getDSItemParam(s.getDSServerData),n=>(_(),d("li",null,l(n),1))),256))])]),t("div",qt,[t("div",Jt,l(((H=s.getDSScheme)==null?void 0:H.CostMonth)||"0")+" ₽ в месяц",1),t("div",Kt,"Дней осталось "+l(((j=s.getDSServerData)==null?void 0:j.DaysRemainded)||"0"),1),t("div",Qt,"Дата окончания "+l(s.calculateExpirationDate((G=s.getDSServerData)==null?void 0:G.DaysRemainded)),1)]),t("div",Xt,[m(V,{label:"Продлить",onClick:i[5]||(i[5]=n=>{var c;return D.$router.push(`/DSOrderPay/${(c=s.getDSServerData)==null?void 0:c.OrderID}`)})}),t("label",Yt,[lt(t("input",{type:"checkbox","onUpdate:modelValue":i[6]||(i[6]=n=>s.isAutoProlong=n),onInput:i[7]||(i[7]=n=>s.setProlongValue())},null,544),[[_t,s.isAutoProlong]]),Zt,$t])])])]),t("div",ts,[t("div",ss,[es,t("div",os,[(_(!0),d(P,null,B(s.getDSServerData.Names,(n,c)=>(_(),d("div",{class:"list-item__table-col",key:c},[t("div",is,l(n),1),t("div",ns,l(s.formatData(c,s.getDSServerData)),1)]))),128))])])]),t("div",as,[t("div",rs,[ls,t("div",_s,[ds,t("div",cs,l((W=s.getDSServerData)==null?void 0:W.IPaddr),1)]),t("div",ms,[vs,t("div",Ds,l((q=s.getDSServerData)==null?void 0:q.DSuser),1)]),t("div",us,[Is,t("div",hs,[s.passwordShowOne?(_(),d("div",Ss,l((J=s.getDSServerData)==null?void 0:J.DSpass),1)):(_(),d("button",{key:1,class:"btn btn--border btn--md password-line",onClick:i[8]||(i[8]=n=>s.passwordShowOne=!0)},[m(y,{class:"button-icon"}),f("Показать")]))])])])]),t("div",gs,[t("div",fs,[ws,t("div",ps,[bs,t("div",Os,l((K=s.getDSServerData)==null?void 0:K.ILOaddr),1)]),t("div",Ps,[ys,t("div",ks,l((Q=s.getDSServerData)==null?void 0:Q.ILOuser),1)]),t("div",Ms,[Cs,t("div",Rs,[s.passwordShowTwo?(_(),d("div",xs,l((X=s.getDSServerData)==null?void 0:X.ILOpass),1)):(_(),d("button",{key:1,class:"btn btn--border btn--md password-line",onClick:i[9]||(i[9]=n=>s.passwordShowTwo=!0)},[m(y,{class:"button-icon"}),f("Показать")]))])])])]),s.getDSOrderIPMI&&((Y=s.getDSOrderIPMI)==null?void 0:Y.IPMI.length)>0?(_(),d("div",Bs,[t("div",Ns,[As,(_(!0),d(P,null,B((Z=s.getDSOrderIPMI)==null?void 0:Z.IPMI,n=>(_(),d("div",Es,[t("div",Ls,l(n==null?void 0:n.name),1),t("div",Ts,l(n==null?void 0:n.value),1)]))),256))])])):tt("",!0),($=s.getDSOrderIPMI)!=null&&$["IPMI.Sensors"]&&s.getDSOrderIPMI["IPMI.Sensors"].length>0?(_(),d("div",Us,[t("div",Vs,[zs,(_(!0),d(P,null,B(s.getDSOrderIPMI["IPMI.Sensors"],(n,c)=>(_(),d("div",Fs,[t("div",Hs,l(c),1),t("div",js,l(n),1)]))),256))])])):tt("",!0)])])]),Gs])):(_(),d("div",Ws,[t("div",qs,[m(z,{label:"Заказ не найден"})])]))],64)}const Ks={components:{IconCard:ht,IconProfile:St,IconSettings:gt,IconEye:et,StatusBadge:ot,IconRotate:wt,settingsEngineItem:it,BlockBalanceAgreement:nt},async setup(){const D=vt(),i=It(),I=Dt(),s=N(!1),h=ut("emitter");h.on("updateDSIDPage",()=>{i.fetchDSOrders().then(()=>{var e;i.fetchDSOrderIPMI((e=r.value)==null?void 0:e.OrderID)}).then(()=>{var e;i.fetchDSOrderIPMISensors((e=r.value)==null?void 0:e.OrderID)})});const F=N(!1),A=N(!1),p=N(!0),r=w(()=>Object.keys(i==null?void 0:i.DSList).map(e=>i==null?void 0:i.DSList[e]).find(e=>e.OrderID===D.params.id)),E=w(()=>{var e;return((e=r.value)==null?void 0:e.Names)||[]}),S=w(()=>{var e,o;return(o=i==null?void 0:i.DSSchemes)==null?void 0:o[(e=r.value)==null?void 0:e.SchemeID]}),g=w(()=>i==null?void 0:i.DSOrderIPMI),L=w(()=>{var e,o;return(o=I==null?void 0:I.userOrders)==null?void 0:o[(e=r.value)==null?void 0:e.OrderID]}),T=w(()=>i==null?void 0:i.DSOrderIPMISensors);function U(e){h.emit("open-modal",{component:"StatusHistory",data:{modeID:"DSOrders",rowID:e}})}function V(e,o){const a=o[e];if(a==null)return"-";switch(e){case"ram":return`${a} ГБ`;case"chrate":return`${a} Мбит/с`;default:return a}}function y(e){if(!e)return st(new Date);const o=new Date,a=new Date(o.getTime()+e*24*60*60*1e3);return st(a)}function z(e){let o=S.value;o===void 0&&(o=e);let a=[];return o!=null&&o.Name&&a.push(o==null?void 0:o.Name),o!=null&&o.CPU&&a.push(o==null?void 0:o.CPU),o!=null&&o.ram&&a.push("RAM "+(o==null?void 0:o.ram)+" GB"),o!=null&&o.disks&&a.push(o==null?void 0:o.disks),a}function k(e){var a,b,O;function o(x){s.value=x}h.emit("open-modal",{component:"ReloadDS",data:{DSOrderID:e,isReloading:s.value,onReloadStatusChange:o,ServerName:(a=r==null?void 0:r.value)==null?void 0:a.Scheme,SystemPower:(b=g==null?void 0:g.value)==null?void 0:b.IPMI["System Power"],OrderID:(O=r==null?void 0:r.value)==null?void 0:O.OrderID}})}function M(){var e,o;h.emit("open-modal",{component:"OrdersTransfer",data:{ServiceOrderID:(e=r.value)==null?void 0:e.ID,ServiceID:(o=r.value)==null?void 0:o.ServiceID}})}function C(){var e;I.prolongOrder({IsAutoProlong:p.value?0:1,OrderID:(e=r.value)==null?void 0:e.OrderID})}function R(){var e,o,a;h.emit("open-modal",{component:"OrderRestore",data:{OrderID:(e=r.value)==null?void 0:e.OrderID,CostDay:(o=S.value)==null?void 0:o.CostDay,DaysRemainded:(a=r.value)==null?void 0:a.DaysRemainded,emitEvent:"updateDSIDPage"}})}return await i.fetchDSSchemes(),i.fetchDSOrders().then(()=>{var e;i.fetchDSOrderIPMI((e=r.value)==null?void 0:e.OrderID)}),await I.fetchUserOrders().then(()=>{var e;p.value=(e=L.value)==null?void 0:e.IsAutoProlong}),{getDSOrderIPMI:g,getDSServerData:r,getDSScheme:S,getDSOrderIPMISensors:T,isAutoProlong:p,passwordShowOne:F,passwordShowTwo:A,openOrderRestore:R,transferItem:M,setProlongValue:C,serverReset:k,isReloading:s,getDSItemParam:z,hostStatuses:pt,calculateExpirationDate:y,formatData:V,serverDataNames:E,openHistoryStatuses:U}}},Ie=mt(Ks,[["render",Js],["__scopeId","data-v-2f33a107"]]);export{Ie as default};
