import{_ as x}from"./BlueButton.vue_vue_type_script_setup_true_lang-q3k2Q2g8.js";import{_ as C}from"./InputSelect.vue_vue_type_script_setup_true_lang-C1yKCY-m.js";import{_ as V}from"./MessageInfo-BrNRfWl8.js";import{G as y,r as c,x as D,f as b,H as E,s as M,c as N,o as k,a as o,b as m,e as u,t as v,w as B}from"./index-C9dBN6m4.js";import"./HeaderComponent-D5YlqMfr.js";import"./IconClose-CgjzG0Yf.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./IconCross-BBzyXWWD.js";import"./IconServer-CMs3dp5i.js";import"./IconSettings-BGdLLHON.js";import"./IconProfile-DDO3OQU0.js";import"./ButtonDefault-B1FApUky.js";import"./bootstrap-vue-next-BglOzul_.js";import"./contracts-BEc0DZS2.js";import"./user-placeholder-CyUFSnNp.js";import"./notes-BPwDvcrv.js";import"./postings-CmcOMU5N.js";import"./basket-VfBMGfpS.js";import"./index-D0iqQ1zq.js";const O={class:"md:tw-max-w-[500px]"},j={class:"tw-mt-4"},L={class:"tw-font-bold"},G={class:"tw-flex tw-items-center tw-gap-4 tw-mt-4"},P={class:"tw-flex tw-justify-end tw-mt-4"},U="<p>Обращаем ваше внимание, что ваш виртуальный сервер использует тип виртуализации KVM. В связи с этим, изменение тарифного плана возможно только в большую сторону, уменьшить размер диска - невозможно.</p><hr><p>Также, будут удалены все снимки виртуальной машины</p>",at={__name:"ModalWindowVPSOrderSchemeChange",props:{data:{type:Object,default:()=>{}}},emits:["modalClose"],setup(a,{emit:f}){const s=a,S=f,i=y(),n=c(!1),r=c(null),w=D("emitter"),_=b(()=>Object.values(i.vpsSchemes).filter(e=>e.ID!==s.data.vpsScheme.ID&&e.IsSchemeChangeable&&e.ServersGroupID==s.data.serverGroupId).sort((e,t)=>e.SortID-t.SortID).map(e=>({name:e.Name+" / "+e.CostMonth+" ₽ в месяц",value:e.ID})));async function l(){n.value=!0;const{result:e,error:t}=await i.VPSOrderSchemeChange({NewSchemeID:r.value,VPSOrderID:s.data.vpsId});e==="SUCCESS"&&(s.data?.emitEvent&&w.emit(s.data?.emitEvent),S("modalClose")),n.value=!1}const p=e=>{e.key==="Enter"&&l()};return E(()=>{document.addEventListener("keyup",p)}),M(()=>{document.removeEventListener("keyup",p)}),(e,t)=>{const h=V,I=C,g=x;return k(),N("div",O,[t[5]||(t[5]=o("div",{class:"tw-text-2xl"},"Смена тарифного плана",-1)),o("div",j,[t[2]||(t[2]=u(" Текущий тарифный план: ",-1)),o("span",L,v(a.data.vpsScheme.Name)+"/"+v(a.data.vpsScheme.CostMonth),1)]),m(h,{innerHTML:U,class:"tw-mt-4 tw-space-y-4"}),o("div",G,[t[3]||(t[3]=o("div",{class:"tw-basis-1/3"},"Новый тарифный план",-1)),m(I,{class:"tw-basis-2/3",modelValue:r.value,"onUpdate:modelValue":t[0]||(t[0]=d=>r.value=d),options:_.value,"param-to-match":"value",placeholder:"Выберите тарифный план"},null,8,["modelValue","options"])]),o("div",P,[m(g,{onClick:t[1]||(t[1]=d=>l()),"is-loading":n.value},{default:B(()=>t[4]||(t[4]=[u("Сменить",-1)])),_:1,__:[4]},8,["is-loading"])])])}}};export{at as default};
