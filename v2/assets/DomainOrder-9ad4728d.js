import{j as Q,o as m,c as g,b as r,a as t,t as c,w as X,d as $,x as tt,k as C,Y as et,Z as ot,F as st,p as it,l as nt,_ as at,a7 as ct,f as lt,e as rt,R as _t,r as mt,g as F}from"./index-c7c24b76.js";import{u as dt}from"./domain-766f5f46.js";import{f as O,a as Dt}from"./useTimeFunction-8602dd60.js";import{_ as gt}from"./IconCard-57c0e3d6.js";import{I as ut}from"./IconProfile-da2f6925.js";import{I as ht}from"./IconSettings-1496db0d.js";import{I as vt}from"./IconEye-86bd28ed.js";import{S as J}from"./StatusBadge-8575efce.js";import{B as K}from"./BlockBalanceAgreement-f11c65ba.js";import"./component2-1c15eb55.js";import{E as bt}from"./EmptyStateBlock-b9aefc49.js";import{_ as It}from"./ServicesContractBalanceBlock-849a1d97.js";import{_ as pt}from"./ButtonDefault-626291b9.js";import{_ as ft}from"./ClausesKeeper-e7acf2fb.js";import"./contracts-397b53fe.js";import"./bootstrap-vue-next.es-3f66213d.js";import"./IconArrow-dfacb3d4.js";import"./IconClose-447d7f82.js";const wt={Waiting:{id:1,label:"Ожидание оплаты",color:"#459FD1",background:"#ADC1F04C"},ClaimForRegister:{id:2,label:"Заявка на регистрацию",color:"#FFC107",background:"#FFC10733"},ForContractRegister:{id:3,label:"Для регистрации договора",color:"#FFC107",background:"#FFC10733"},OnContractRegister:{id:4,label:"На регистрации договора",color:"#FFC107",background:"#FFC10733"}},l=_=>(it("data-v-003bc1e5"),_=_(),nt(),_),kt={key:0,class:"section"},St={class:"container"},Ct={class:"section-header"},Ft={class:"section-title"},Ot={class:"section-label"},yt={class:"section-nav"},xt={class:"list"},Pt={class:"list-col list-col--md"},Bt={class:"list-item"},Rt={class:"list-item__row"},At={class:"list-item__title"},Nt={class:"list-item__status"},Tt={class:"list-item__row"},Vt={class:"list-item__ul"},Et={key:0},Wt={class:"list-item__row list-item__row--column"},Ut={key:0,class:"list-item__text"},jt={class:"list-item__text"},Lt={class:"list-item__text"},Mt={class:"list-item__row"},Yt={class:"btn btn--border btn--switch"},Zt=l(()=>t("span",{class:"btn-switch__text"},"Автопродление",-1)),qt=l(()=>t("span",{class:"btn-switch__toggle"},null,-1)),zt={class:"list-col list-col--md"},Gt={class:"list-item"},Ht={class:"list-item__row list-item__row--nowrap"},Jt=l(()=>t("div",{class:"list-item__title"},"Именные сервера",-1)),Kt={class:"list-item__row list-item__row--table"},Qt=l(()=>t("div",{class:"list-item__item"},"Первичный сервер",-1)),Xt={class:"list-item__item"},$t={class:"list-item__row list-item__row--table"},te=l(()=>t("div",{class:"list-item__item"},"Вторичный сервер",-1)),ee={class:"list-item__item"},oe={class:"list-col list-col--md"},se={class:"list-item"},ie=l(()=>t("div",{class:"list-item__row"},[t("div",{class:"list-item__title"},"Контактные данные")],-1)),ne={class:"list-item__row list-item__row--table"},ae=l(()=>t("div",{class:"list-item__item"},"Скрыть данные в WhoIs",-1)),ce={class:"btn btn--switch"},le=["checked"],re=l(()=>t("span",{class:"btn-switch__toggle"},null,-1)),_e={class:"list-item__row list-item__row--table"},me=l(()=>t("div",{class:"list-item__item"},"Последнее обновление адрес",-1)),de={class:"list-item__item"},De={key:1,class:"section"},ge={class:"container"};function ue(_,s,a,e,I,u){var h,v,o,n,b,y,x,P,B,R,A,N,T,V,E,W,U,j,L,M,Y,Z,q,z,G,H;const i=K,p=Q("router-link"),f=ft,d=pt,w=It,k=J,S=bt;return m(),g(st,null,[r(i),(h=e.getDomain)!=null&&h.ID?(m(),g("div",kt,[t("div",St,[t("div",Ct,[t("h1",Ft,c((v=e.getDomain)==null?void 0:v.Domain),1),t("div",Ot,"Домен # "+c((o=e.getDomain)==null?void 0:o.OrderID),1),t("div",yt,[r(p,{class:"section-nav__item",to:`/DomainOrders/${(n=e.getDomain)==null?void 0:n.OrderID}`},{default:X(()=>[$("Домен")]),_:1},8,["to"])])]),r(f),((b=e.getDomain)==null?void 0:b.StatusID)==="Waiting"||((y=e.getDomain)==null?void 0:y.StatusID)==="ClaimForRegister"||((x=e.getDomain)==null?void 0:x.StatusID)==="ForContractRegister"||((P=e.getDomain)==null?void 0:P.StatusID)==="ForRegister"||((B=e.getDomain)==null?void 0:B.StatusID)==="ForTransfer"?(m(),tt(d,{key:0,class:"btn-mn__bot",label:"Определить владельца",onClick:s[0]||(s[0]=D=>e.designateOwner())})):C("",!0),t("div",xt,[r(w,{"contract-id":(R=e.getDomain)==null?void 0:R.ContractID,onTransfer:s[1]||(s[1]=D=>e.transferItem())},null,8,["contract-id"]),t("div",Pt,[t("div",Bt,[t("div",Rt,[t("div",At,c((A=e.getDomain)==null?void 0:A.Domain),1),t("div",Nt,[r(k,{status:(N=e.getDomain)==null?void 0:N.StatusID,"status-table":"DomainOrders"},null,8,["status"])])]),t("div",Tt,[t("ul",Vt,[(T=e.getDomainScheme)!=null&&T.PackageID?(m(),g("li",Et,c((V=e.getDomainScheme)==null?void 0:V.PackageID),1)):C("",!0)])]),t("div",Wt,[(E=e.getDomainScheme)!=null&&E.CostProlong?(m(),g("div",Ut,c((W=e.getDomainScheme)==null?void 0:W.CostProlong)+" ₽ продлить на 12 месяцев",1)):C("",!0),t("div",jt,"Дней осталось "+c(((U=e.getDomain)==null?void 0:U.DaysRemainded)||0),1),t("div",Lt,"Дата окончания "+c(e.calculateExpirationDate((j=e.getDomain)==null?void 0:j.DaysRemainded)),1)]),t("div",Mt,[r(d,{label:((L=e.getDomain)==null?void 0:L.StatusID)==="ClaimForRegister"||((M=e.getDomain)==null?void 0:M.StatusID)==="Waiting"?"Оплатить":"Продлить",onClick:s[2]||(s[2]=D=>e.navigateToProlong())},null,8,["label"]),t("label",Yt,[et(t("input",{type:"checkbox","onUpdate:modelValue":s[3]||(s[3]=D=>e.isAutoProlong=D),onInput:s[4]||(s[4]=D=>e.setProlongValue())},null,544),[[ot,e.isAutoProlong]]),Zt,qt])])])]),t("div",zt,[t("div",Gt,[t("div",Ht,[Jt,r(d,{class:"ml-auto",label:"Редактировать",disabled:((Y=e.getDomain)==null?void 0:Y.StatusID)==="ClaimForRegister"||((Z=e.getDomain)==null?void 0:Z.StatusID)==="Waiting"},null,8,["disabled"])]),t("div",Kt,[Qt,t("div",Xt,c((q=e.getDomain)==null?void 0:q.Ns1Name),1)]),t("div",$t,[te,t("div",ee,c((z=e.getDomain)==null?void 0:z.Ns2Name),1)])])]),t("div",oe,[t("div",se,[ie,t("div",ne,[ae,t("label",ce,[t("input",{type:"checkbox",checked:(G=e.getDomain)==null?void 0:G.IsPrivateWhoIs,disabled:""},null,8,le),re])]),t("div",_e,[me,t("div",de,c(e.lastUpdate((H=e.getDomain)==null?void 0:H.StatusDate)),1)])])])])])])):(m(),g("div",De,[t("div",ge,[r(S,{label:"Заказ не найден"})])]))],64)}const he={components:{IconCard:gt,IconProfile:ut,IconSettings:ht,IconEye:vt,StatusBadge:J,BlockBalanceAgreement:K},async setup(){const _=ct(),s=lt(),a=dt(),e=rt(),I=_t("emitter"),u=mt(null),i=F(()=>Object.keys(a==null?void 0:a.domainsList).map(o=>a==null?void 0:a.domainsList[o]).find(o=>o.OrderID===_.params.id)),p=F(()=>{var o,n;return(n=a==null?void 0:a.domainSchemes)==null?void 0:n[(o=i.value)==null?void 0:o.SchemeID]}),f=F(()=>{var o,n;return(n=s==null?void 0:s.userOrders)==null?void 0:n[(o=i.value)==null?void 0:o.OrderID]});function d(o){if(!o)return O(new Date);const n=new Date,b=new Date(n.getTime()+o*24*60*60*1e3);return O(b)}function w(o){return o?O(Dt(o)):""}function k(){console.log(i.value);try{const o={DomainOrderID:i==null?void 0:i.value.ID};I.emit("open-modal",{component:"DomainSelectOwner",data:o})}catch(o){console.error(o)}}function S(){var o,n;I.emit("open-modal",{component:"OrdersTransfer",data:{ServiceOrderID:(o=i.value)==null?void 0:o.ID,ServiceID:(n=i.value)==null?void 0:n.ServiceID}})}function h(){var o;s.prolongOrder({IsAutoProlong:u.value?0:1,OrderID:(o=i.value)==null?void 0:o.OrderID})}function v(){var o;e.push(`/DomainOrderPay/${(o=i.value)==null?void 0:o.OrderID}`)}return await a.fetchDomains(),await a.fetchDomainSchemes(),await s.fetchUserOrders().then(()=>{var o;u.value=(o=f.value)==null?void 0:o.IsAutoProlong}),{getDomain:i,getDomainScheme:p,isAutoProlong:u,setProlongValue:h,navigateToProlong:v,domainStatuses:wt,transferItem:S,lastUpdate:w,designateOwner:k,calculateExpirationDate:d}}},Te=at(he,[["render",ue],["__scopeId","data-v-003bc1e5"]]);export{Te as default};
