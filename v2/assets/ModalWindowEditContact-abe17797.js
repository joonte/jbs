import{_ as M}from"./ButtonDefault-cd183bf8.js";import{f as E}from"./bootstrap-vue-next.es-b799f76d.js";import{_ as N,f as C,u as A,r as h,g as $,h as x,o as v,c as r,F as D,v as F,t as I,k as w,a,b as m,w as T,d as k,L as b,x as U}from"./index-1c309346.js";import{F as O}from"./FormTabs-4e851a55.js";import{f as P,a as j}from"./useTimeFunction-8602dd60.js";import{s as S}from"./multiselect-b7ad6876.js";const L={class:"edit-settings__types"},W={key:0,class:"edit-settings__label"},Y={class:"edit-settings__checkbox"},G={__name:"BlockNotificationsModal",props:["id","method"],setup(V){const c=V,l=C(),y=A(),d=h({}),f=$(()=>{var t,e;return(e=(t=y.ConfigList)==null?void 0:t.Notifies)==null?void 0:e.Types});function p(t){var e;d.value[t]=!((e=d.value)!=null&&e[t])}return l.ContactData(c==null?void 0:c.id).then(t=>{Object.keys(t).forEach(e=>{typeof t[e]=="object"&&Object.keys(t[e]).forEach(_=>{d.value[_]=t[e][_]})})}),x(d.value,()=>{const t=new FormData;Object.keys(d.value).forEach(e=>{d.value[e]&&t.append(`${c.method}[]`,e)}),t.append("MethodID",c.method),t.append("ContactID",c.id),l.userEditContactSettings(t)}),(t,e)=>{const _=E;return v(),r("div",L,[(v(!0),r(D,null,F(f.value,(n,u)=>{var o;return v(),r("div",{class:"edit-settings__group",key:u},[n!=null&&n.Title?(v(),r("div",W,I(n==null?void 0:n.Title),1)):w("",!0),a("div",Y,[m(_,{id:u,name:u,checked:(o=d.value)==null?void 0:o[u],onInput:()=>p(u)},{default:T(()=>[k(I(n==null?void 0:n.Name),1)]),_:2},1032,["id","name","checked","onInput"])])])}),128))])}}},H=N(G,[["__scopeId","data-v-63297c68"]]);const q={class:"modal__body"},z=a("div",{class:"list-item__title"},"Настройки",-1),J={class:"list-item__subtitle"},K={class:"edit-settings"},Q={class:"edit-settings__item"},R={class:"edit-settings__item"},X={class:"edit-settings__item"},Z=a("div",{class:"edit-time"},null,-1),ee=a("div",{class:"edit-time__title"},"Время рассылки",-1),te={class:"edit-time__wrapper"},se={class:"edit-time__select-wrapper"},ae=a("div",{class:"edit-time__select-label"},"Начало",-1),oe={class:"edit-time__select-wrapper"},ie=a("div",{class:"edit-time__select-label"},"Конец",-1),le={class:"edit-time__last-change"},ve={__name:"ModalWindowEditContact",props:["data"],emits:["modalClose"],setup(V,{emit:c}){const l=V,y=C(),d=[{name:"Общие",value:"common"},{name:"Типы уведомлений",value:"notions"}],f=h([]),p=h(!1),t=h("common"),e=h({});e.value={...l.data,TimeBegin:_(l.data.TimeBegin),TimeEnd:_(l.data.TimeEnd)};function _(o){return o>=10?o:"0"+String(o)}function n(){for(let o=0;o<=23;o++){const s=_(o);f.value.push({label:`${s}:00`,name:`${s}:00`,value:String(s)})}}function u(){p.value=!0,y.userEditContact({Address:e.value.Address,MethodID:e.value.MethodID,ContactID:e.value.ID,TimeBegin:e.value.TimeBegin,TimeEnd:e.value.TimeEnd,IsActive:e.value.IsActive?"yes":void 0,IsImmediately:e.value.IsImmediately?"yes":void 0,IsPrimary:e.value.IsPrimary?"yes":void 0,IsSendFiles:e.value.IsSendFiles?"yes":void 0}).then(o=>{p.value=!1,y.fetchUserData(),c("modalClose")})}return n(),(o,s)=>{const g=E,B=M;return v(),r("div",q,[z,a("div",J,I(l.data.MethodID)+" "+I(l.data.Address),1),m(O,{class:"edit-settings__tabs",tabs:d,modelValue:t.value,"onUpdate:modelValue":s[0]||(s[0]=i=>t.value=i)},null,8,["modelValue"]),t.value==="common"?(v(),r(D,{key:0},[a("div",K,[a("div",Q,[m(g,{class:"edit-settings__checkbox",id:"use-for-notifications",name:"use-for-notifications",modelValue:e.value.IsActive,"onUpdate:modelValue":s[1]||(s[1]=i=>e.value.IsActive=i)},{default:T(()=>[k("Использовать для уведомлений")]),_:1},8,["modelValue"])]),a("div",R,[m(g,{class:"edit-settings__checkbox",id:"notify-immediately",name:"notify-immediately",modelValue:e.value.IsImmediately,"onUpdate:modelValue":s[2]||(s[2]=i=>e.value.IsImmediately=i)},{default:T(()=>[k("Уведомлять немедленно")]),_:1},8,["modelValue"])]),a("div",X,[m(g,{class:"edit-settings__checkbox",id:"send-files",name:"send-files",modelValue:e.value.IsSendFiles,"onUpdate:modelValue":s[3]||(s[3]=i=>e.value.IsSendFiles=i)},{default:T(()=>[k("Присылать файлы/картинки")]),_:1},8,["modelValue"])])]),Z,ee,a("div",te,[a("div",se,[ae,m(b(S),{placeholder:"00:00",options:f.value,modelValue:e.value.TimeBegin,"onUpdate:modelValue":s[4]||(s[4]=i=>e.value.TimeBegin=i),label:"name"},null,8,["options","modelValue"])]),a("div",oe,[ie,m(b(S),{modelValue:e.value.TimeEnd,"onUpdate:modelValue":s[5]||(s[5]=i=>e.value.TimeEnd=i),options:f.value,label:"name",placeholder:"00:00"},null,8,["modelValue","options"])])]),a("div",le,"Адрес подтвержден "+I(b(P)(b(j)(l.data.Confirmed))),1),m(B,{onClick:s[6]||(s[6]=i=>u()),label:"Сохранить изменения","is-loading":p.value},null,8,["is-loading"])],64)):(v(),U(H,{key:1,id:l.data.ID,method:l.data.MethodID},null,8,["id","method"]))])}}};export{ve as default};
