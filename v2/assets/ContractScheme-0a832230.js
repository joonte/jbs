import{j,o as f,c as E,a as t,b as i,w as _,d as r,t as S,x as T,k as F,F as R,v as q,p as z,l as A,_ as G,u as J,a6 as K,e as M,g as h}from"./index-ed1f28f8.js";import{u as Q}from"./contracts-cedf6a91.js";import{u as U}from"./hosting-218d9195.js";import{H as V}from"./HostingItem-aaa08f55.js";import{I as O}from"./IconPlus-56dc71c7.js";import{E as W}from"./EmptyStateBlock-dbc11827.js";import{_ as X}from"./ButtonDefault-a8aacc82.js";import{_ as Y}from"./ClausesKeeper-9aa8ead7.js";import"./IconDots-296f1d69.js";import"./IconCard-ec16e358.js";import"./StatusBadge-2304b071.js";import"./hostStatuses-94d00f20.js";import"./HelperComponent-4528cb6e.js";import"./IconArrow-6ab5d812.js";import"./bootstrap-vue-next.es-79226723.js";import"./OrderIDBadge-7e968b28.js";import"./IconClose-a1e58263.js";const C=n=>(z("data-v-5ee638c1"),n=n(),A(),n),Z={class:"section"},$={class:"container"},tt={class:"section-header column"},st={class:"section-label-wrapper"},ot={class:"section-title"},et={class:"section-label"},it={class:"list grid-list-three"},nt={class:"list-col list-col--sm"},ct={class:"list-item"},at=C(()=>t("div",{class:"list-item__row"},[t("div",{class:"list-item__title"},"Профиль")],-1)),lt={class:"list-item__row flex flex-column"},rt={class:"list-item__row"},_t={class:"list-col list-col--sm"},dt={class:"list-item"},mt={class:"list-item__row flex space-between"},gt=C(()=>t("div",{class:"list-item__title"},"Баланс",-1)),ft={class:"list-item__simple-balance"},vt={class:"list-item__row flex flex-column"},ut={class:"list-item__row"},pt={class:"list-col list-col--sm"},ht={class:"list-item"},Ct=C(()=>t("div",{class:"list-item__row"},[t("div",{class:"list-item__title"},"Поддержка")],-1)),kt={class:"list-item__row flex flex-column"},It={class:"list-item__row"},bt={class:"contracts__section"},wt={class:"contracts__section-header"},St=C(()=>t("div",{class:"contracts__section-title"},"Хостинги",-1)),Tt={class:"contracts__section-list"};function xt(n,e,v,s,d,u){var p,o,g,x,y,P,D,H,L,B,N;const c=j("router-link"),k=Y,m=X,I=O,b=V,w=W;return f(),E("div",Z,[t("div",$,[t("div",tt,[t("div",st,[i(c,{class:"section-label",to:"/Contracts"},{default:_(()=>[r("Договора")]),_:1})]),t("h1",ot,S(((p=s.getProfile)==null?void 0:p.Name)||((o=s.getContract)==null?void 0:o.Customer)),1),t("div",et,S((D=(P=(x=(g=s.getConfig)==null?void 0:g.Contracts)==null?void 0:x.Types)==null?void 0:P[(y=s.getContract)==null?void 0:y.TypeID])==null?void 0:D.Name),1)]),i(k),t("div",it,[t("div",nt,[t("div",ct,[at,t("div",lt,[i(c,{class:"item-link",to:`/ContractSettings/${(H=s.getContract)==null?void 0:H.ID}`},{default:_(()=>[r("Настройки")]),_:1},8,["to"]),i(c,{class:"item-link",to:`/ContractDocuments/${(L=s.getContract)==null?void 0:L.ID}`},{default:_(()=>[r("Документы")]),_:1},8,["to"])]),t("div",rt,[(B=s.getContract)!=null&&B.ProfileID?(f(),T(m,{key:0,label:"Редактировать данные",onClick:e[0]||(e[0]=a=>{var l;return s.navigateToEditPage((l=s.getContract)==null?void 0:l.ProfileID)})})):F("",!0)])])]),t("div",_t,[t("div",dt,[t("div",mt,[gt,t("div",ft,S((N=s.getContract)==null?void 0:N.Balance)+" ₽",1)]),t("div",vt,[i(c,{class:"item-link",to:"/Postings"},{default:_(()=>[r("История операций")]),_:1}),i(c,{class:"item-link",to:"/Invoices"},{default:_(()=>[r("Отчетные документы (Счета)")]),_:1})]),t("div",ut,[i(m,{label:"Пополнить баланс",onClick:e[1]||(e[1]=a=>{var l;return s.navigateToBalancePage((l=s.getContract)==null?void 0:l.ID)})})])])]),t("div",pt,[t("div",ht,[Ct,t("div",kt,[i(c,{class:"item-link",to:"/Tickets"},{default:_(()=>[r("Тикеты")]),_:1})]),t("div",It,[i(m,{label:"Создать тикет",onClick:e[2]||(e[2]=a=>s.navigateToTicketsCreation())})])])])]),t("div",bt,[t("div",wt,[St,t("button",{class:"btn btn-default btn--border small",onClick:e[3]||(e[3]=a=>s.navigateToHostingList())},[i(I),r("Купить еще хостинг")])]),t("div",Tt,[s.getHostingList.length>0?(f(!0),E(R,{key:0},q(s.getHostingList,a=>{var l;return f(),T(b,{"item-data":a,"user-name":(l=s.getContract)==null?void 0:l.Customer,"info-link":`/HostingOrders/${a==null?void 0:a.ID}`},null,8,["item-data","user-name","info-link"])}),256)):(f(),T(w,{key:1,class:"contracts__empty-state",label:"У Вас нет купленного хостинга"}))])])])])}const yt={components:{HostingItem:V,IconPlus:O},async setup(){const n=Q(),e=J(),v=U(),s=K(),d=M(),u=h(()=>{var o;return(o=n.contractsList)==null?void 0:o[s.params.id]}),c=h(()=>{var o;return n.profileList[(o=u.value)==null?void 0:o.ProfileID]}),k=h(()=>e.ConfigList),m=h(()=>Object.keys(v.hostingList).map(o=>v.hostingList[o]).filter(o=>{var g;return(o==null?void 0:o.ContractID)===((g=u.value)==null?void 0:g.ID)}).reverse());function I(o){d.push(`/Balance/${o}`)}function b(){d.push({name:"default.NewTicket"})}function w(o){d.push(`/ContractEdit/${o}`)}function p(){d.push("/HostingSchemes")}return await n.fetchContracts(),await n.fetchProfiles(),await v.fetchHostingOrders(),{getConfig:k,getProfile:c,getContract:u,getHostingList:m,navigateToBalancePage:I,navigateToHostingList:p,navigateToEditPage:w,navigateToTicketsCreation:b}}},Kt=G(yt,[["render",xt],["__scopeId","data-v-5ee638c1"]]);export{Kt as default};
