import{_ as __unplugin_components_0$1}from"./ButtonDefault-tVMF5ozh.js";import{_ as __unplugin_components_0}from"./IconHelpCircle-BiBct5mv.js";import{u as useDeleteStore}from"./globalActions-DUlmxNCV.js";import{_ as _export_sfc}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{c as createElementBlock,o as openBlock,b as createVNode,a as createBaseVNode,t as toDisplayString,x as inject,r as ref,h as onMounted,s as onBeforeUnmount}from"./index-DxPA2ffO.js";const _sfc_main={props:{data:{type:Object,default:()=>{}}},emits:["modalClose"],setup(props,{emit}){const deleteStore=useDeleteStore(),emitter=inject("emitter"),isLoading=ref(!1);function deleteHosting(){if(isLoading.value=!0,props.data&&props.data?.callback){const e=props.data.callback.match(/RowsIDs:(\d+)/);deleteStore.deleteItem({TableID:props.data?.tableID,RowsIDs:e[1]}).then(({result:t,error:o})=>{t==="SUCCESS"&&(emitter.emit(props.data?.successEmit),emit("modalClose")),isLoading.value=!1})}else props.data?deleteStore.deleteItem({TableID:props.data?.tableID,RowsIDs:props.data?.id}).then(({result:e})=>{e==="SUCCESS"&&(emitter.emit(props.data?.successEmit),emit("modalClose")),isLoading.value=!1}):(eval(props.data?.callback),emit("modalClose"))}const handleKeyup=e=>{e.key==="Enter"&&deleteHosting()};return onMounted(()=>{document.addEventListener("keyup",handleKeyup)}),onBeforeUnmount(()=>{document.removeEventListener("keyup",handleKeyup)}),{deleteHosting,isLoading}}},_hoisted_1={class:"modal__body"},_hoisted_2={class:"modal__info"},_hoisted_3={class:"modal__alert-title"};function _sfc_render(e,t,o,a,l,d){const s=__unplugin_components_0,n=__unplugin_components_0$1;return openBlock(),createElementBlock("div",_hoisted_1,[createVNode(s,{class:"modal__alert-icon"}),createBaseVNode("div",_hoisted_2,[createBaseVNode("div",_hoisted_3,toDisplayString(o.data?.message),1)]),createVNode(n,{class:"modal__alert-button",onClick:t[0]||(t[0]=i=>a.deleteHosting()),label:"УДАЛИТЬ","is-loading":a.isLoading},null,8,["is-loading"])])}const ModalWindowDeleteItem=_export_sfc(_sfc_main,[["render",_sfc_render],["__scopeId","data-v-f1c316d8"]]);export{ModalWindowDeleteItem as default};
