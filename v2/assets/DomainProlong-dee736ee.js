import{o as a,c as n,b as r,a as o,t as p,F as A,l as N,p as K,m as M,_ as R,f as U,e as V,U as j,r as W,i as Z,P as q,h as y}from"./index-c781268b.js";import{u as z}from"./domain-ca269c7d.js";import{u as G}from"./contracts-7e377877.js";import{s as H}from"./multiselect-9a74535b.js";import{B as T}from"./BlockBalanceAgreement-1d554184.js";import{E as J}from"./EmptyStateBlock-8165a481.js";import{_ as Q}from"./ButtonDefault-dafa6215.js";import{_ as X}from"./ClausesKeeper-5fae717f.js";import"./bootstrap-vue-next.es-c86262f3.js";import"./IconArrow-8731a209.js";import"./IconClose-3fa8ed32.js";const _=s=>(K("data-v-1fbd0e73"),s=s(),M(),s),Y={key:0,class:"domain-scheme"},$={class:"section"},ee={class:"container"},oe={class:"section-header"},te={key:0,class:"section-title"},se={key:1,class:"section-title"},ae={key:2,class:"section-title"},ne={class:"section-label"},ie={class:"section"},ce={class:"container"},le={class:"domain-prolong__data"},de={key:0,class:"form-field"},re=_(()=>o("div",{class:"form-field__label"},"Стоимость заказа (в год)",-1)),_e=["value"],me={class:"form-field"},he=_(()=>o("div",{class:"form-field__label"},"Стоимость продления (в год)",-1)),ge=["value"],fe=_(()=>o("label",{class:"form-field"},[o("div",{class:"form-field__label"},"Количество лет"),o("input",{type:"text",placeholder:"1",value:"1",disabled:""})],-1)),De={key:1,class:"form-field__msg"},ue={class:"form-field"},ve=_(()=>o("div",{class:"form-field__label"},"Всего к оплате",-1)),pe=["value"],ye={class:"section"},be={class:"container"},ke={class:"domain-prolong__data"},Se={class:"total-block"},Ce={class:"total-block__row total-block__row--big"},Ie=_(()=>o("div",{class:"total-block__col"},"Итого за 1 год",-1)),Pe={class:"total-block__col"},Be={key:1,class:"section"},Fe={class:"container"},xe={key:1,class:"section"},Oe={class:"container"};function Ee(s,c,b,e,m,u){var t,l,D,d,v,k,S,C,I,P,B,F,x,O,E,w,L;const h=T,i=X,g=Q,f=J;return a(),n(A,null,[r(h),e.getDomain?(a(),n("div",Y,[o("div",$,[o("div",ee,[o("div",oe,[e.getDomain.StatusID==="Waiting"?(a(),n("h1",te,"Оплата заказа доменного имени")):e.getDomain.StatusID==="ForTransfer"?(a(),n("h1",se,"Оплата переноса домена")):(a(),n("h1",ae,"Оплата продления доменного имени")),o("div",ne,p((t=e.getDomain)!=null&&t.DomainName?`#${(l=e.getDomain)==null?void 0:l.DomainName}.${(D=e.getDomain)==null?void 0:D.DomainZone}`:""),1)]),r(i)])]),(d=e.getDomainSchemes)!=null&&d.IsPayed&&((v=e.getDomainSchemes)!=null&&v.IsProlong)||!((k=e.getDomainSchemes)!=null&&k.IsPayed)?(a(),n(A,{key:0},[o("div",ie,[o("div",ce,[o("div",le,[e.getDomain.StatusID==="Waiting"||e.getDomain.StatusID==="ForTransfer"?(a(),n("label",de,[re,o("input",{type:"text",placeholder:"0 руб",value:((S=e.getDomainSchemes)==null?void 0:S.CostOrder)+" руб",disabled:""},null,8,_e)])):N("",!0),o("label",me,[he,o("input",{type:"text",placeholder:"0 руб",value:((C=e.getDomainSchemes)==null?void 0:C.CostProlong)+" руб",disabled:""},null,8,ge)]),fe,(I=e.getDomain)!=null&&I.AdditionalCost?(a(),n("div",De,[o("p",null,p((P=e.getDomain)==null?void 0:P.AdditionalCost.Message),1)])):N("",!0),o("label",ue,[ve,o("input",{type:"text",placeholder:"0 руб",value:e.getDomain.IsPayed?parseFloat((F=e.getDomainSchemes)==null?void 0:F.CostProlong).toFixed(2)+" руб":parseFloat((B=e.getDomainSchemes)==null?void 0:B.CostOrder).toFixed(2)+" руб",disabled:""},null,8,pe)])])])]),o("div",ye,[o("div",be,[o("div",ke,[o("div",Se,[o("div",Ce,[Ie,o("div",Pe,p(e.getDomain.IsPayed?parseFloat((O=e.getDomainSchemes)==null?void 0:O.CostProlong).toFixed(2)||"0.00":parseFloat((x=e.getDomainSchemes)==null?void 0:x.CostOrder).toFixed(2))+" ₽",1)])]),r(g,{class:"btn--wide",label:+((E=e.getContract)==null?void 0:E.Balance)>(e.getDomain.StatusID==="ClaimForRegister"?+((w=e.getDomainSchemes)==null?void 0:w.CostOrder):+((L=e.getDomainSchemes)==null?void 0:L.CostProlong))?"Оплатить c баланса договора":"Добавить в корзину",onClick:c[0]||(c[0]=Le=>e.orderPay()),"is-loading":e.isLoading},null,8,["label","is-loading"])])])])],64)):(a(),n("div",Be,[o("div",Fe,[r(f,{class:"no-margin",label:"Заказ нельзя продлить"})])]))])):(a(),n("div",xe,[o("div",Oe,[r(f,{label:"Заказ домена не найден"})])]))],64)}const we={components:{Multiselect:H,BlockBalanceAgreement:T},async setup(){const s=z(),c=G(),b=U(),e=V();j("emitter");const m=W(!1);function u(){var t,l;m.value=!0,s.DomainOrderPay({DomainOrderID:(t=i.value)==null?void 0:t.ID,DaysToProlong:(l=g.value)==null?void 0:l.DaysToProlong}).then(D=>{let{result:d,error:v}=D;d==="SUCCESS"?e.push("/DomainOrders"):d==="BASKET"&&e.push("/Basket"),m.value=!1})}const h=t=>{t.key==="Enter"&&t.ctrlKey&&u()};Z(()=>{document.addEventListener("keyup",h)}),q(()=>{document.removeEventListener("keyup",h)});const i=y(()=>Object.keys(s==null?void 0:s.domainsList).map(t=>s==null?void 0:s.domainsList[t]).find(t=>t.OrderID===b.params.id)),g=y(()=>{var t;return s==null?void 0:s.domainSchemes[(t=i.value)==null?void 0:t.SchemeID]}),f=y(()=>{var t;return c.contractsList[(t=i.value)==null?void 0:t.ContractID]});return await s.fetchDomains(),await s.fetchDomainSchemes(),await c.fetchContracts(),{getDomain:i,getDomainSchemes:g,getContract:f,isLoading:m,orderPay:u}}},qe=R(we,[["render",Ee],["__scopeId","data-v-1fbd0e73"]]);export{qe as default};
