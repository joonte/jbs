import{o as V,c as g,b as N,a as e,Z as f,an as A,F as G,x as R,af as C,t as D,w as Z,d as W,p as q,l as z,_ as J,e as Q,r as S,g as k,h as X,O as Y,i as $}from"./index-5e313302.js";import{u as ee}from"./domain-ae28df08.js";import{u as oe}from"./contracts-3351d68f.js";import{u as se}from"./hosting-da227957.js";import{u as te}from"./resetServer-2f6a71c3.js";import{D as j}from"./DomainCheckBlock-4d07b32c.js";import{_ as K}from"./BlockSelectContract-65c747e2.js";import{B as M}from"./BlockBalanceAgreement-bb87adc1.js";import{_ as ae}from"./ButtonDefault-7c216fc6.js";import{_ as le}from"./ClausesKeeper-eb954229.js";import"./multiselect-bfc29db8.js";import"./EmptyStateBlock-9f752916.js";import"./bootstrap-vue-next.es-a19a8b41.js";import"./IconArrow-555f9d45.js";import"./IconClose-1f889a2e.js";const l=n=>(q("data-v-3188fa56"),n=n(),z(),n),ne={class:"domain-scheme"},ce={class:"section"},ie={class:"container"},re=l(()=>e("div",{class:"section-header"},[e("h1",{class:"section-title"},"Заказ доменного имени")],-1)),de={class:"section"},_e={class:"container"},me=l(()=>e("div",{class:"section-header"},[e("h2",{class:"section-block_title"},"Заказ хостинга"),e("div",{class:"section-label"},"Если домен будет использоваться совместно с заказом хостинга, выберите нужный из существующего списка")],-1)),ue={class:"form"},fe={class:"form-input_border"},ve=l(()=>e("span",{class:"form-input_border-content"},[e("span",{class:"form-input_border-mark"}),e("span",{class:"form-input_border-info"},[e("span",{class:"form-input_border-address"},"Не использовать")])],-1)),pe={class:"form-input_border"},be=["value"],he={class:"form-input_border-content"},Ne=l(()=>e("span",{class:"form-input_border-mark"},null,-1)),De={class:"form-input_border-info"},Se={class:"form-input_border-address"},ke={class:"form-input_border-row"},ye={class:"form-input_border-name"},Ie={class:"form-input_border-domain"},xe={class:"section"},Ce={class:"container"},Oe=l(()=>e("div",{class:"section-header"},[e("div",{class:"section-label"},"Для успешной регистрации, домен должен быть настроен на используемых именных серверах. Для этого в панели управления хостингом необходимо добавить домен, как дополнительный или паркованный.")],-1)),Be={class:"form form-grid-columns"},we={class:"form-col"},Ve=l(()=>e("div",{class:"form-col__title"},"Первичный сервер имен",-1)),ge={class:"form-field"},Le=l(()=>e("div",{class:"form-field__label"},"Доменный адрес",-1)),Ue=l(()=>e("label",{class:"form-field"},[e("div",{class:"form-field__label"},"IP адрес"),e("input",{type:"text",disabled:""})],-1)),Ee={class:"form-col"},He=l(()=>e("div",{class:"form-col__title"},"Вторичный сервер имен",-1)),Pe={class:"form-field"},Ae=l(()=>e("div",{class:"form-field__label"},"Доменный адрес",-1)),Ge=l(()=>e("label",{class:"form-field"},[e("div",{class:"form-field__label"},"IP адрес"),e("input",{type:"text",disabled:""})],-1)),je={class:"form-col"},Ke=l(()=>e("div",{class:"form-col__title"},"Дополнительный сервер имен",-1)),Me={class:"form-field"},Te=l(()=>e("div",{class:"form-field__label"},"Доменный адрес",-1)),Fe=l(()=>e("label",{class:"form-field"},[e("div",{class:"form-field__label"},"IP адрес"),e("input",{type:"text",disabled:""})],-1)),Re={class:"form-col"},Ze=l(()=>e("div",{class:"form-col__title"},"Расширенный сервер имен",-1)),We={class:"form-field"},qe=l(()=>e("div",{class:"form-field__label"},"Доменный адрес",-1)),ze=l(()=>e("label",{class:"form-field"},[e("div",{class:"form-field__label"},"IP адрес"),e("input",{type:"text",disabled:""})],-1)),Je={class:"section"},Qe={class:"container"},Xe={class:"total-block"},Ye={class:"total-block__row total-block__row--big"},$e=l(()=>e("div",{class:"total-block__col"},"Итого за 12 месяцев",-1)),eo={class:"total-block__col"};function oo(n,a,d,o,O,y){var p,b,I;const c=M,v=le,u=K,i=j,_=ae;return V(),g(G,null,[N(c),e("div",ne,[e("div",ce,[e("div",ie,[re,N(v)])]),N(u,{title:"Договор",modelValue:o.contractSelect,"onUpdate:modelValue":a[0]||(a[0]=s=>o.contractSelect=s)},null,8,["modelValue"]),N(i,{"domain-list":o.getDomains,onSelect:o.selectDomain},null,8,["domain-list","onSelect"]),e("div",de,[e("div",_e,[me,e("div",ue,[e("label",fe,[f(e("input",{type:"radio",name:"hosting",value:null,"onUpdate:modelValue":a[1]||(a[1]=s=>o.hostingSelect=s)},null,512),[[A,o.hostingSelect]]),ve]),(V(!0),g(G,null,R(o.getHostingOrders,s=>{var x,h;return V(),g("label",pe,[f(e("input",{type:"radio",name:"hosting",value:s==null?void 0:s.ID,"onUpdate:modelValue":a[2]||(a[2]=B=>o.hostingSelect=B)},null,8,be),[[A,o.hostingSelect]]),e("span",he,[Ne,e("span",De,[e("span",Se,D(s==null?void 0:s.Login)+" ("+D((x=o.getServerGroup[s==null?void 0:s.ServerID])==null?void 0:x.Address)+")",1),e("span",ke,[e("span",ye,D((h=o.getContracts[s==null?void 0:s.ContractID])==null?void 0:h.Customer),1),e("span",Ie,D(s==null?void 0:s.Domain),1)])])])])}),256))])])]),e("div",xe,[e("div",Ce,[Oe,e("div",Be,[e("div",we,[Ve,e("label",ge,[Le,f(e("input",{type:"text",placeholder:"dns0.host-food.ru","onUpdate:modelValue":a[3]||(a[3]=s=>o.formData.Ns1Name=s)},null,512),[[C,o.formData.Ns1Name]])]),Ue]),e("div",Ee,[He,e("label",Pe,[Ae,f(e("input",{type:"text",placeholder:"dns0.host-food.ru","onUpdate:modelValue":a[4]||(a[4]=s=>o.formData.Ns2Name=s)},null,512),[[C,o.formData.Ns2Name]])]),Ge]),e("div",je,[Ke,e("label",Me,[Te,f(e("input",{type:"text","onUpdate:modelValue":a[5]||(a[5]=s=>o.formData.Ns3Name=s)},null,512),[[C,o.formData.Ns3Name]])]),Fe]),e("div",Re,[Ze,e("label",We,[qe,f(e("input",{type:"text","onUpdate:modelValue":a[6]||(a[6]=s=>o.formData.Ns4Name=s)},null,512),[[C,o.formData.Ns4Name]])]),ze])])])]),e("div",Je,[e("div",Qe,[e("div",Xe,[e("div",Ye,[$e,e("div",eo,D(((p=o.domain)==null?void 0:p.CostOrder)||"0")+" ₽",1)])]),N(_,{class:"btn--wide",label:((b=o.getContracts[o.contractSelect])==null?void 0:b.Balance)>((I=o.domain)==null?void 0:I.CostOrder)?"Оплатить c баланса договора":"Добавить в корзину",onClick:a[7]||(a[7]=s=>o.createDomain()),"is-loading":o.isLoading,disabled:o.domain===null},{default:Z(()=>[W("Добавить в корзину")]),_:1},8,["label","is-loading","disabled"])])])])],64)}const so={components:{BlockSelectContract:K,DomainCheckBlock:j,BlockBalanceAgreement:M},async setup(){const n=ee(),a=oe(),d=se(),o=te(),O=Q(),y=S(null),c=S(null),v=S(null),u=S(!1),i=S({Ns1Name:"dns0.host-food.ru",Ns2Name:"dns1.host-food.ru",Ns3Name:null,Ns4Name:null}),_=k(()=>a.contractsList),p=t=>{t.key==="Enter"&&t.ctrlKey&&!b.value&&h()},b=k(()=>c.value===null);X(()=>{document.addEventListener("keyup",p)}),Y(()=>{document.removeEventListener("keyup",p)});const I=k(()=>{var t;return(t=Object.keys(n==null?void 0:n.domainSchemes))==null?void 0:t.map(r=>{var m;return{...n==null?void 0:n.domainSchemes[r],value:(m=n==null?void 0:n.domainSchemes[r])==null?void 0:m.ID}})}),s=k(()=>Object.keys(d==null?void 0:d.hostingList).map(t=>d==null?void 0:d.hostingList[t])),x=k(()=>{var t;return(t=o==null?void 0:o.serverGroupsList)==null?void 0:t.Servers});$(()=>v.value,t=>{const r=s.value.find(m=>m.ID===t);r?(i.value.Ns1Name=r.Ns1Name,i.value.Ns2Name=r.Ns2Name,i.value.Ns3Name=r.Ns3Name,i.value.Ns4Name=r.Ns4Name):(i.value.Ns1Name="dns0.host-food.ru",i.value.Ns2Name="dns1.host-food.ru",i.value.Ns3Name=null,i.value.Ns4Name=null)});function h(){var t,r,m,L,U,E,H;u.value=!0,n.DomainOrder({ContractID:y.value,Domain:`${(t=c.value)==null?void 0:t.line}${(r=c.value)!=null&&r.line&&((m=c.value)!=null&&m.Name)?"."+((L=c.value)==null?void 0:L.Name):""}`,DomainName:(U=c.value)==null?void 0:U.line,DomainSchemeID:(E=c.value)==null?void 0:E.value,DomainZone:(H=c.value)==null?void 0:H.Name,IsPrivateWhoIs:"yes",HostingOrderID:v.value,...i.value}).then(({result:T,info:w,error:to})=>{T==="SUCCESS"?n.DomainOrderPay({DomainOrderID:w==null?void 0:w.DomainOrderID}).then(F=>{let{result:P,error:ao}=F;P==="SUCCESS"?O.push("/DomainOrders"):P==="BASKET"&&O.push("/Basket"),u.value=!0}):u.value=!1})}function B(t){c.value=t}return await n.fetchDomainSchemes(),await a.fetchContracts().then(()=>{var t;_.value&&(y.value=(t=Object.keys(_==null?void 0:_.value))==null?void 0:t[0])}),await d.fetchHostingOrders(),await o.fetchServerGroups(),{contractSelect:y,selectDomain:B,domain:c,hostingSelect:v,getDomains:I,getContracts:_,getHostingOrders:s,getServerGroup:x,formData:i,isLoading:u,createDomain:h,buttonDisabled:b}}},So=J(so,[["render",oo],["__scopeId","data-v-3188fa56"]]);export{So as default};
