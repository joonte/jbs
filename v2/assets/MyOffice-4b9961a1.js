import{j as D,o as A,c as P,b as o,a as e,w as c,d,t as f,F as x,p as T,l as V,_ as N,f as R,S as j,g}from"./index-642cdac5.js";import{u as H}from"./postings-500009e8.js";import{u as M}from"./contracts-16ef7000.js";import{I,a as k,b as C,c as y}from"./IconWeb-7080579a.js";import{S as O}from"./StatusBadge-52b4bbab.js";import{B as E}from"./BlockBalanceAgreement-ccba2ab2.js";import{C as L}from"./bootstrap-vue-next.es-9ff54498.js";import{_ as U}from"./ButtonDefault-eb076df2.js";import{_ as W}from"./ClausesKeeper-12bc5d50.js";import"./IconArrow-c0196cbe.js";import"./IconClose-f1b85910.js";const q=[{key:"ID",label:"Заказ",variant:"td-gray td-order"},{key:"ContractID",label:"Договор",variant:"td-blue"},{key:"ServiceID",label:"Услуга",variant:"td-gray td-order"},{key:"StatusID",label:"Статус",sortable:!0,variant:"td-gray td-order"},{key:"controls",label:"",variant:"td-controls"}],z={Deleted:{id:1,label:"Удален",color:"#DF5747",background:"#DF57471A"},Suspended:{id:2,label:"Заблокирован",color:"#DF5747",background:"#DF57471A"},OnService:{id:3,label:"Сервер на обслуживании",color:"#FFC107",background:"rgba(255,193,7,0.1)"}},l=a=>(T("data-v-882c4581"),a=a(),V(),a),G={class:"section"},J={class:"container"},K=l(()=>e("div",{class:"section-header"},[e("h1",{class:"section-title"},"Дашбоард")],-1)),Q={class:"list-grid-three-col"},X={class:"list-col"},Y={class:"list-item"},Z=l(()=>e("div",{class:"list-item__row"},[e("div",{class:"list-item__title"},"Услуги")],-1)),ee={class:"list-col"},se={class:"list-item"},te=l(()=>e("div",{class:"list-item__row"},[e("div",{class:"list-item__title"},"Мой офис")],-1)),oe={class:"list-item__row icon-row"},ae={class:"list-col"},ce={class:"list-item"},ne=l(()=>e("div",{class:"list-item__row"},[e("div",{class:"list-item__title"},"Поддержка")],-1)),re={class:"list-item__row icon-row"},le=l(()=>e("div",{class:"section-header"},[e("h2",{class:"sub-section-title"},"Требует внимания")],-1)),ie=l(()=>e("span",{class:"td-mobile"},"Заказ",-1)),de={class:"d-block"},_e=l(()=>e("span",{class:"td-mobile"},"Договор",-1)),ue=l(()=>e("span",{class:"td-mobile"},"Услуга",-1)),pe={class:"d-block"},me=l(()=>e("span",{class:"td-mobile"},"Статус",-1));function ve(a,n,_,i,h,w){const p=D("BalanceAgreement"),v=W,b=I,t=D("router-link"),s=k,m=C,B=y,S=U,F=O,$=L;return A(),P(x,null,[o(p),e("div",G,[e("div",J,[K,o(v,{partition:"Header:/Home"}),e("div",Q,[e("div",X,[e("div",Y,[Z,o(t,{class:"list-item__row icon-row",to:"/HostingOrders"},{default:c(()=>[o(b),d("Заказать хостинг")]),_:1}),o(t,{class:"list-item__row icon-row",to:"/DomainOrders"},{default:c(()=>[o(s),d("Заказать домен")]),_:1}),o(t,{class:"list-item__row icon-row",to:"/DSOrders"},{default:c(()=>[o(m),d("Заказать выделенный сервер")]),_:1}),o(t,{class:"list-item__row icon-row",to:"/VPSOrders"},{default:c(()=>[o(B),d("Заказать VPS/VDS сервер")]),_:1})])]),e("div",ee,[e("div",se,[e("div",null,[te,o(t,{class:"list-item__row icon-row",to:"/Contracts"},{default:c(()=>[d("Мои договора")]),_:1})]),e("div",oe,[o(S,{label:"Создать договор",onClick:n[0]||(n[0]=r=>a.$router.push("/ContractMake"))})])])]),e("div",ae,[e("div",ce,[e("div",null,[ne,o(t,{class:"list-item__row icon-row",to:"/Tickets"},{default:c(()=>[d("Тикеты")]),_:1}),o(t,{class:"list-item__row icon-row",to:"/Contacts"},{default:c(()=>[d("Контакты")]),_:1})]),e("div",re,[o(S,{label:"Создать тикет",onClick:n[1]||(n[1]=r=>a.$router.push("/NewTicket"))})])])])]),le,o($,{class:"basic-table",items:i.getOrders,fields:i.dashboardTableFields,"show-empty":!0,"per-page":5,page:1,"empty-text":"Пока не требуется никаких действий","empty-filtered-text":"Пока не требуется никаких действий",onRowClicked:i.navigateToOrderPage},{"cell(ID)":c(r=>[ie,e("span",de,f(r.value),1)]),"cell(ContractID)":c(r=>{var u;return[_e,e("span",null,f((u=i.getContracts[r.value])==null?void 0:u.Customer),1)]}),"cell(ServiceID)":c(r=>{var u;return[ue,e("span",pe,f((u=i.getServices[r.value])==null?void 0:u.Name),1)]}),"cell(StatusID)":c(r=>[me,o(F,{status:r.value,"status-table":"Orders"},null,8,["status"])]),_:1},8,["items","fields","onRowClicked"])])])],64)}const be={components:{IconServer:I,IconDedicatedServers:C,IconWeb:k,IconVPS:y,StatusBadge:O,BalanceAgreement:E},async setup(){const a=R(),n=H(),_=M(),i=j("emitter"),h=g(()=>{var t;return(t=Object.keys(a==null?void 0:a.userOrders).map(s=>a==null?void 0:a.userOrders[s]))==null?void 0:t.reverse().filter(s=>(s==null?void 0:s.StatusID)==="Deleted"||(s==null?void 0:s.StatusID)==="Suspended"||(s==null?void 0:s.StatusID)==="OnService"||(s==null?void 0:s.DaysRemainded)>0&&(s==null?void 0:s.DaysRemainded)<14)}),w=g(()=>_==null?void 0:_.contractsList),p=g(()=>n==null?void 0:n.servicesList);function v(t){var m;let s=(m=p.value[t.ServiceID])==null?void 0:m.Code;s==="Default"||s==="ExtraIP"||s==="ISPsw"||s==="DNSmanager"?$router.push(`/AdditionalServices/${t.ID}`):$router.push(`/${s}Orders/${t.ID}`)}function b(t){i.emit("open-modal",{component:"DeleteItem",data:{id:t,message:`Вы действительно хотите удалить заказ #${t}?`,tableID:"Orders"}})}return await a.fetchUserOrders(),await n.fetchServices(),await _.fetchContracts(),{getOrders:h,getContracts:w,getServices:p,dangerStatuses:z,dashboardTableFields:q,deleteItem:b,navigateToOrderPage:v}}},Be=N(be,[["render",ve],["__scopeId","data-v-882c4581"]]);export{Be as default};
