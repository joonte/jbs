import{_ as x}from"./ButtonDefault-CMw2aBy6.js";import{r as a,x as E,I as f,s as k,o as D,c as I,a as s,t as w,K as g,Y as P,n as h,b as O}from"./index-Codq73aV.js";import{u as B}from"./global-CdY51QQZ.js";import{_ as L}from"./_plugin-vue_export-helper-DlAUqK2U.js";const M={class:"modal__body"},U={class:"list-item__title"},V={class:"list-item__pass"},N={class:"modal__input-row"},j={class:"list-form_col list-form_col--xl"},G={class:"search-field form-field"},K={class:"modal__input-row"},W={class:"list-form_col list-form_col--xl"},z={class:"search-field form-field"},T={__name:"ModalWindowOrderPasswordChange",props:{data:{type:Object,default:()=>{}}},emits:["modalClose"],setup(c,{emit:C}){const l=c,b=C,t=a(""),o=a(""),n=a(""),r=a(!1),m=B(),u=a(!1),v=E("emitter");function _(){t.value===o.value&&t.value.length>0&&o.value.length>0?(u.value=!0,m.OrderChangePassword({ServiceOrderID:l.data?.OrderID,ServiceID:l.data?.ServiceID,Password:t.value,_Password:o.value}).then(d=>{let{result:e}=d;e==="SUCCESS"&&(l.data?.emitEvent&&v.emit(l.data?.emitEvent),b("modalClose"),v.emit("open-modal",{component:"SuccessChange",data:{newPassword:t.value}})),u.value=!1})):r.value=!0}function y(){t.value=n.value.Password,o.value=n.value.Password}const p=d=>{d.key==="Enter"&&_()};return f(()=>{document.addEventListener("keyup",p)}),f(async()=>{n.value=await m.fetchPassword()}),k(()=>{document.removeEventListener("keyup",p)}),(d,e)=>{const S=x;return D(),I("div",M,[s("div",U,"Смена пароля, "+w(c.data?.Login),1),s("div",V,[e[3]||(e[3]=s("div",{class:"list-item__prepassword"},"Использовать сгенерированный пароль:",-1)),s("div",{class:"list-item__password",onClick:y},w(n.value.Password),1)]),s("div",N,[e[4]||(e[4]=s("div",{class:"modal__input-label"},"Новый пароль",-1)),s("div",j,[s("div",G,[g(s("input",{"onUpdate:modelValue":e[0]||(e[0]=i=>t.value=i),class:h({"error-input":r.value}),placeholder:"",name:"password",autocomplete:"off",type:"text"},null,2),[[P,t.value]])])])]),s("div",K,[e[5]||(e[5]=s("div",{class:"modal__input-label"},"Подтверждение пароля",-1)),s("div",W,[s("div",z,[g(s("input",{class:h({"error-input":r.value}),"onUpdate:modelValue":e[1]||(e[1]=i=>o.value=i),placeholder:"",name:"password",autocomplete:"off",type:"text"},null,2),[[P,o.value]])])])]),O(S,{class:"modal__button",label:"Сменить пароль","is-loading":u.value,onClick:e[2]||(e[2]=i=>_())},null,8,["is-loading"])])}}},F=L(T,[["__scopeId","data-v-ed499869"]]);export{F as default};
