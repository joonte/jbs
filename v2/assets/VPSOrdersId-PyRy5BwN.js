import{_ as ft}from"./EmptyStateBlock-DA3-0YDi.js";import{_ as gt,a as St,b as bt}from"./SettingsEngineItem-BYnOrDI7.js";import{_ as Dt,a as It}from"./CopyToClipboard.vue_vue_type_script_setup_true_lang-Ds1JMB0b.js";import{_ as xt}from"./WhiteButton.vue_vue_type_script_setup_true_lang-CdZRVTJ5.js";import{I as yt}from"./IconProfile-CyDmeaCw.js";import{_ as Pt}from"./BlueButton.vue_vue_type_script_setup_true_lang-BKdLNEec.js";import{r as ht}from"./bootstrap-vue-next-W16P-SAV.js";import{_ as Ot}from"./ClausesKeeper-iUM0yapS.js";import{_ as kt}from"./MessageInfo-C0v9QTnb.js";import{_ as Ct}from"./UserNote-9g0f9gxP.js";import{_ as Nt}from"./IconRotate-D7pUrhpz.js";import{_ as Vt}from"./StatusBadge-BmqDrHzy.js";import{_ as $t}from"./BlockBalanceAgreement-v_bWuiVT.js";import{H as Rt,u as At,r as c,J as W,f as F,I as Mt,E as Bt,o as i,c as d,b as a,a as s,F as h,t as o,n as Y,e as n,h as w,w as m,v as O,C as z,K as Lt,L as Et,x as Ut,i as Tt,G as Gt,d as Ht}from"./index-Codq73aV.js";import{u as jt}from"./index-BO2gwtUe.js";import{g as Wt,f as Ft}from"./common-DyknwSqv.js";import{u as Yt}from"./global-CdY51QQZ.js";import{u as zt}from"./server-DnY_Nzbw.js";import{u as Jt}from"./orders-wJq_IMsK.js";import{f as J}from"./time-DenPiOX5.js";import"./LoadingIndicator-y8DeC9jv.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ServerStatusBadge.vue_vue_type_script_setup_true_lang-CNB3-WyC.js";import"./services-DyPBvbVy.js";import"./IconSettings-Pwo5dDjN.js";import"./IconCopy-CvpXMuV2.js";import"./IconClose-Dia1noy8.js";import"./ButtonDefault-CMw2aBy6.js";const Kt={class:"tw-px-4 md:tw-px-8"},qt={class:"tw-flex tw-flex-wrap tw-items-center tw-justify-between tw-gap-2"},Qt={class:"tw-flex tw-items-center tw-gap-2"},Xt={class:"tw-text-xl sm:tw-text-4xl"},Zt={class:"ico"},te={class:"tw-flex tw-items-center tw-gap-2 tw-mt-2"},ee={class:"tw-text-gray-500 tw-text-sm"},se={class:"tw-flex tw-items-center tw-gap-8 tw-border-b tw-border-gray-200 tw-mt-4 tw-whitespace-nowrap tw-mb-6"},ae={class:"tw-grid tw-grid-cols-1 xl:tw-grid-cols-2 tw-gap-4"},oe={class:"tw-border tw-rounded tw-border-gray-200 tw-p-4"},ne={class:"tw-flex tw-justify-between tw-items-center tw-gap-4"},le={class:"tw-flex tw-items-center tw-gap-2"},re={class:"tw-text-2xl"},ie={class:"tw-flex tw-flex-wrap tw-gap-x-4 tw-gap-y-2 tw-text-gray-500 tw-text-sm tw-mt-4"},ue={key:0},de={class:"tw-space-y-4 tw-mt-4"},me={class:"tw-flex tw-gap-4 tw-mt-4"},ve={class:"btn btn--border btn--switch tw-ml-0 tw-h-10 sm:tw-h-12"},ce={class:"tw-flex tw-flex-wrap tw-gap-4 tw-mt-4"},we={class:"tw-border tw-border-gray-200 tw-rounded tw-p-4"},pe={class:"tw-grid tw-grid-cols-3 tw-gap-4"},_e={class:"tw-col-span-3 tw-flex tw-items-center tw-justify-between tw-gap-2"},fe={class:"tw-col-span-2 tw-flex tw-items-center tw-gap-1"},ge={class:"tw-break-all"},Se={class:"tw-col-span-2 tw-flex tw-items-center tw-gap-1"},be={class:"tw-break-all"},De={class:"tw-col-span-2 tw-flex tw-flex-wrap tw-items-center tw-gap-2"},Ie={key:0,class:"password-hidden"},xe={class:"tw-col-span-2 tw-flex tw-items-center tw-gap-1"},ye={class:"tw-col-span-2 tw-space-y-2"},Pe={class:"tw-flex tw-items-center tw-gap-1"},he=["href"],Oe={class:"tw-col-span-2 tw-space-y-2"},ke={key:0,class:"tw-flex tw-items-center tw-gap-1"},Ce={key:1,class:"tw-flex tw-items-center tw-gap-1"},Ne={key:2,class:"tw-flex tw-items-center tw-gap-1"},Ve={key:3,class:"tw-flex tw-items-center tw-gap-1"},rs={__name:"VPSOrdersId",async setup($e){let k,C;const S=Rt(),K=jt(),q=At(),N=Yt(),Q=zt(),V=Jt(),_=Tt(),$=Ht(),f=c(!1),g=c(!1),R=c(!0),e=c(null),A=c([]),b=c(W.DAY),D=c(!1),I=c(null),p=Ut("emitter");p.on("updateVPSOrdersId",async()=>{await T()});const M=c(!1),r=F(()=>S.vpsSchemes?.[e.value?.SchemeID]);function X(){function l(t){f.value=t}p.emit("open-modal",{component:"ReloadVPS",data:{VPSOrderID:e.value?.ID,isReloading:f.value,onReloadStatusChange:l}})}function B(l){p.emit("open-modal",{component:"StatusHistory",data:{modeID:"VPSOrders",rowID:l}})}const L=F(()=>Q?.serverGroupsList?.Servers?.[e.value?.ServerID]);function Z(l){if(!l)return J(new Date);const t=new Date,x=new Date(t.getTime()+l*24*60*60*1e3);return J(x)}function tt(){p.emit("open-modal",{component:"OrdersTransfer",data:{ServiceOrderID:e.value?.ID,ServiceID:e.value?.ServiceID}})}function et(){$.push(`/VPSOrders/${e.value?.OrderID}/SchemeChange`),E()}function st(){$.push(`/VPSOrderPay/${e.value?.OrderID}`)}function at(){q.prolongOrder({IsAutoProlong:g.value?0:1,OrderID:e.value?.OrderID})}function E(){p.emit("open-modal",{component:"VPSOrderSchemeChange",data:{vpsId:e.value?.ID,vpsScheme:r.value,serverGroupId:r.value?.ServersGroupID,emitEvent:"updateVPSOrdersId"}})}function U(){p.emit("open-modal",{component:"OrderPasswordChange",data:{OrderID:e.value?.ID,ServiceID:e.value?.ServiceID,emitEvent:"updateVPSOrdersId"}})}function ot(){p.emit("open-modal",{component:"OrderRestore",data:{OrderID:e.value?.OrderID,CostDay:r.value?.CostDay,DaysRemainded:e.value?.DaysRemainded,emitEvent:"updateVPSOrdersId"}})}function nt(){N.OrderManage({ServiceOrderID:e.value?.ID,OrderID:e.value?.OrderID,ServiceID:e.value?.ServiceID})}Mt(async()=>{await T(),_.name==="VPSOrderSchemeChange"&&E()});async function T(){e.value=await S.fetchVPSOrder(_.params.id);const l=await V.fetchOneOrder(_.params.id);l&&(e.value.Stat=l.Stat,g.value=l.IsAutoProlong,l.DependOrderID&&(I.value=await V.fetchOneOrder(l.DependOrderID)),G(W.DAY)),R.value=!1}async function G(l){D.value=!0,b.value=l,A.value=await N.fetchCharts(e.value.OrderID,b.value),D.value=!1}return[k,C]=Bt(()=>Promise.all([S.fetchVPSSchemes(),K.fetchContracts()])),await k,C(),(l,t)=>{const x=$t,H=Vt,lt=Nt,y=Gt("RouterLink"),rt=Ct,it=kt,ut=Ot,j=ht,dt=gt,P=Pt,mt=yt,vt=xt,v=Dt,ct=It,wt=St,pt=bt,_t=ft;return i(),d(h,null,[a(x,{"contract-id":e.value?.ContractID},null,8,["contract-id"]),s("div",Kt,[e.value?(i(),d(h,{key:0},[s("div",qt,[s("div",Qt,[s("h1",Xt,o(e.value.Domain),1),a(H,{status:e.value.StatusID,"status-table":"VPSOrders",class:"tw-cursor-pointer",onClick:t[0]||(t[0]=u=>B(e.value.ID))},null,8,["status"])]),e.value.StatusID==="Active"?(i(),d("button",{key:0,class:Y(["btn btn--md btn--border btn--rotate btn--rotate_green tw-h-12",{"btn--rotate_gray":e.value.StatusID!=="Active"||f.value,"btn--rotate_loading":f.value}]),title:"Перезагрузить виртуальный сервер",onClick:X},[t[12]||(t[12]=n(" Включен ",-1)),s("span",Zt,[a(lt)])],2)):w("",!0)]),s("div",te,[s("div",ee,[I.value?(i(),d(h,{key:0},[t[13]||(t[13]=n("Относится к заказу ",-1)),a(y,{to:O(Wt)(I.value.Code,e.value.DependOrderID),class:"tw-text-sky-500"},{default:m(()=>[n("#"+o(e.value.DependOrderID),1)]),_:1},8,["to"]),t[14]||(t[14]=n(" /",-1))],64)):w("",!0),n(" VPS/VDS сервер #"+o(e.value.OrderID),1)]),a(rt,{text:e.value.UserNotice,"order-id":e.value.OrderID,emit:"updateVPSOrdersId"},null,8,["text","order-id"])]),e.value.Message?(i(),z(it,{key:0,innerHTML:e.value.Message,class:"tw-mt-4"},null,8,["innerHTML"])):w("",!0),s("div",se,[a(y,{class:Y(["tw-py-2 tw-cursor-pointer -tw-mb-[1px]",{"tw-text-sky-400 tw-border-b-2 tw-border-sky-400":O(_).path.endsWith("/SchemeChange")}]),"active-class":"tw-text-sky-400 tw-border-b-2 tw-border-sky-400",to:`/VPSOrders/${e.value.OrderID}`},{default:m(()=>t[15]||(t[15]=[n(" Сервер ",-1)])),_:1,__:[15]},8,["class","to"]),a(y,{class:"tw-py-2 tw-cursor-pointer -tw-mb-[1px]","active-class":"tw-text-sky-400 tw-border-b-2 tw-border-sky-400",to:`/VPSOrders/${e.value.OrderID}/Services`},{default:m(()=>t[16]||(t[16]=[n(" Услуги ",-1)])),_:1,__:[16]},8,["to"])]),a(ut),s("div",ae,[s("div",oe,[s("div",ne,[s("div",le,[s("div",re,o(r.value.Name),1),a(H,{status:e.value.StatusID,"status-table":"VPSOrders",onClick:t[1]||(t[1]=u=>B(e.value.ID)),class:"tw-cursor-pointer"},null,8,["status"])]),a(dt,null,{default:m(()=>[a(j,{onClick:t[2]||(t[2]=u=>ot())},{default:m(()=>t[17]||(t[17]=[n("Просмотреть учет заказа",-1)])),_:1,__:[17]}),a(j,{onClick:t[3]||(t[3]=u=>U())},{default:m(()=>t[18]||(t[18]=[n("Сменить пароль от аккаунта",-1)])),_:1,__:[18]})]),_:1})]),s("div",ie,[r.value?.SchemeParams?.os?.value?(i(),d("div",ue,o(r.value.SchemeParams?.os?.value),1)):w("",!0),s("div",null,o(r.value?.SchemeParams?.hdd_mib?.InternalName)+" "+o(r.value?.SchemeParams?.hdd_mib?.Value)+o(r.value?.SchemeParams?.hdd_mib?.Unit),1),s("div",null," RAM "+o(r.value?.SchemeParams?.ram_mib?.Value)+" "+o(r.value?.SchemeParams?.ram_mib?.Unit),1),s("div",null," Канал "+o(r.value?.SchemeParams?.net_bandwidth_mbitps?.Value)+" "+o(r.value?.SchemeParams?.net_bandwidth_mbitps?.Unit),1)]),s("div",de,[s("div",null,o(O(Ft)(r.value?.CostMonth))+" в месяц",1),s("div",null,"Дней осталось "+o(e.value.DaysRemainded),1),s("div",null,"Дата окончания "+o(Z(e.value.DaysRemainded)),1)]),s("div",me,[a(P,{onClick:t[4]||(t[4]=u=>st()),class:"tw-w-30 sm:tw-w-40"},{default:m(()=>[n(o(e.value.StatusID==="Suspended"||e.value.StatusID==="Waiting"?"Оплатить":"Продлить"),1)]),_:1}),s("label",ve,[Lt(s("input",{type:"checkbox","onUpdate:modelValue":t[5]||(t[5]=u=>g.value=u),onInput:t[6]||(t[6]=u=>at())},null,544),[[Et,g.value]]),t[19]||(t[19]=s("span",{class:"btn-switch__text tw-text-xs sm:tw-text-sm"},"Автопродление",-1)),t[20]||(t[20]=s("span",{class:"btn-switch__toggle"},null,-1))])]),s("div",ce,[a(P,{onClick:t[7]||(t[7]=u=>et()),class:"tw-w-36 sm:tw-w-40"},{default:m(()=>t[21]||(t[21]=[n("Изменить тариф",-1)])),_:1,__:[21]}),a(vt,{onClick:t[8]||(t[8]=u=>tt())},{default:m(()=>[a(mt),t[22]||(t[22]=s("div",null,"Передать на другой аккаунт",-1))]),_:1,__:[22]})])]),s("div",we,[s("div",pe,[s("div",_e,[t[24]||(t[24]=s("div",{class:"tw-text-2xl"},"Панель управления",-1)),a(P,{onClick:t[9]||(t[9]=u=>nt()),type:"small"},{default:m(()=>t[23]||(t[23]=[n("Вход",-1)])),_:1,__:[23]})]),t[26]||(t[26]=s("div",{class:"tw-font-bold"},"Адрес",-1)),s("div",fe,[s("div",ge,o(`https://${L.value?.Address}/manager`),1),a(v,{value:`https://${L.value?.Address}/manager`},null,8,["value"])]),t[27]||(t[27]=s("div",{class:"tw-font-bold"},"Логин",-1)),s("div",Se,[s("div",be,o(e.value.Login),1),a(v,{value:e.value?.Login},null,8,["value"])]),t[28]||(t[28]=s("div",{class:"tw-font-bold"},"Пароль",-1)),s("div",De,[M.value?(i(),d("span",Ie,o(e.value?.Password),1)):(i(),d("button",{key:1,class:"btn btn--border btn--md tw-h-8 tw-gap-1",onClick:t[10]||(t[10]=u=>M.value=!0)},[a(ct),t[25]||(t[25]=n(" Показать ",-1))])),s("button",{class:"btn btn--border btn--md tw-h-8",onClick:t[11]||(t[11]=u=>U())}," Сменить пароль "),a(v,{value:e.value?.Password},null,8,["value"])]),t[29]||(t[29]=s("div",{class:"tw-font-bold"},"IP адрес",-1)),s("div",xe,[n(o(e.value.IP?e.value.IP:"-")+" ",1),a(v,{value:e.value.IP?e.value.IP:"-"},null,8,["value"])]),t[30]||(t[30]=s("div",{class:"tw-flex tw-font-bold"},"Обратная зона DNS",-1)),s("div",ye,[s("div",Pe,[s("a",{href:`https://${e.value.Domain}`,target:"_blank"},o(e.value.Domain),9,he),a(v,{value:e.value.Domain},null,8,["value"])])]),t[31]||(t[31]=s("div",{class:"tw-flex tw-font-bold"},"Именные сервера",-1)),s("div",Oe,[e.value.Ns1Name?(i(),d("div",ke,[n(o(e.value.Ns1Name),1),a(v,{value:e.value.Ns1Name},null,8,["value"])])):w("",!0),e.value.Ns2Name?(i(),d("div",Ce,[n(o(e.value.Ns2Name),1),a(v,{value:e.value.Ns2Name},null,8,["value"])])):w("",!0),e.value.Ns3Name?(i(),d("div",Ne,[n(o(e.value.Ns3Name),1),a(v,{value:e.value.Ns3Name},null,8,["value"])])):w("",!0),e.value.Ns4Name?(i(),d("div",Ve,[n(o(e.value.Ns4Name),1),a(v,{value:e.value.Ns4Name},null,8,["value"])])):w("",!0)])])]),a(wt,{order:e.value},null,8,["order"]),a(pt,{data:A.value,period:b.value,loading:D.value,onUpdate:G},null,8,["data","period","loading"])]),t[32]||(t[32]=s("div",{class:"tw-mt-4 tw-mb-6"},[s("div",{class:"text"},[s("h2",{class:"tw-text-2xl tw-mb-2"},"Что входит в стоимость"),s("p",null,"Для подключения дополнительных услуг"),s("ul",null,[s("li",null,"Размещение в РФ, Москва"),s("li",null,"Предустановленная ОС FreeBSD / CentOS / Debian / Ubuntu / Windows"),s("li",null,"IP адрес, с возможностью расширения"),s("li",null,"Бесплатная панель управления ISPManager Lite"),s("li",null,"Круглосуточная поддержка")])])],-1))],64)):R.value?w("",!0):(i(),z(_t,{key:1,label:"Заказ не найден"}))])],64)}}};export{rs as default};
