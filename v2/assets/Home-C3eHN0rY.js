import{L as E}from"./bootstrap-vue-next-DwS3lKQb.js";import{_ as F}from"./IconCard-_anr564X.js";import{_ as j}from"./StatusBadge-CjHHKSUG.js";import{_ as M}from"./ButtonDefault-BIBStZbJ.js";import{I as U,a as W,b as q,c as z}from"./IconServer-g21NC45O.js";import{_ as G}from"./ClausesKeeper-CTja-fCz.js";import{_ as J}from"./BlockBalanceAgreement-qtspRQ_B.js";import{u as K,D as v,f,c as Q,b as n,a as s,w as r,E as X,v as b,d as Y,F as Z,x as h,o as tt,e as d,t as m}from"./index-CmCGXBst.js";import{u as st}from"./postings-CAwWnBGE.js";import{u as et}from"./contracts-P7YPBhEI.js";import{_ as ot}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./IconClose-B_k4TzXM.js";const nt=[{key:"ID",label:"Заказ",variant:"td-gray td-order"},{key:"ContractID",label:"Договор",variant:"td-blue"},{key:"ServiceID",label:"Услуга",variant:"td-gray td-order"},{key:"Reason",label:"Осталось дн.",variant:"td-gray td-order"},{key:"StatusID",label:"Статус",sortable:!0,variant:"td-gray td-order"},{key:"controls",label:"",variant:"td-controls"}],rt={class:"tw-px-4 md:tw-px-8"},it={class:"list-grid-three-col"},lt={class:"list-col"},at={class:"list-item"},dt={class:"list-col"},ct={class:"list-item"},_t={class:"list-item__row icon-row"},mt={class:"list-col"},ut={class:"list-item"},pt={class:"list-item__row icon-row"},vt={class:"d-block"},ft={class:"d-block"},bt={class:"d-block"},wt={class:"btn__group"},St=["onClick"],Dt={__name:"Home",async setup(It){let c,_;const u=K(),w=st(),S=et(),k=h("emitter");[c,_]=v(()=>u.fetchUserOrders()),await c,_(),[c,_]=v(()=>w.fetchServices()),await c,_(),[c,_]=v(()=>S.fetchContracts()),await c,_();const l=Y(),g=f(()=>Object.keys(u?.userOrders).map(e=>u?.userOrders[e])?.reverse().filter(e=>e?.StatusID==="Deleted"||e?.StatusID==="Suspended"||e?.StatusID==="OnService"||e?.DaysRemainded>0&&e?.DaysRemainded<14)),C=f(()=>S?.contractsList),p=f(()=>w?.servicesList);function y(){l.go(0)}function O(e,t){if(!t.target.closest("button, a, .clickable-element")){let i=p.value[e.ServiceID]?.Code;i==="Default"||i==="ExtraIP"||i==="ISPsw"||i==="DNSmanager"?l.push(`/AdditionalServices/${e.ID}`):l.push(`/${i}Orders/${e.ID}`)}}function x(e,t){let i="";t==="Default"?i="Orders":i=t+"Orders",k.emit("open-modal",{component:"StatusHistory",data:{modeID:i,rowID:e}})}function $(e){let t=p.value[e.ServiceID]?.Code;t==="Default"?l.push(`/ServiceOrderPay/${e.ID}`):l.push(`/${t}OrderPay/${e.ID}`)}return(e,t)=>{const i=J,P=G,H=U,a=X("router-link"),N=W,R=q,V=z,D=M,B=j,T=F,A=E;return tt(),Q(Z,null,[n(i),s("div",rt,[s("h1",{class:"w-text-xl sm:tw-text-4xl tw-cursor-pointer tw-mb-4",onClick:t[0]||(t[0]=o=>y())},"Домашняя страница"),n(P,{partition:"Header:/Home"}),s("div",it,[s("div",lt,[s("div",at,[t[8]||(t[8]=s("div",{class:"list-item__row"},[s("div",{class:"list-item__title"},"Услуги")],-1)),n(a,{class:"list-item__row icon-row",to:"/HostingOrders"},{default:r(()=>[n(H),t[4]||(t[4]=d(" Заказать хостинг ",-1))]),_:1,__:[4]}),n(a,{class:"list-item__row icon-row",to:"/DomainOrders"},{default:r(()=>[n(N),t[5]||(t[5]=d(" Заказать домен ",-1))]),_:1,__:[5]}),n(a,{class:"list-item__row icon-row",to:"/DSOrders"},{default:r(()=>[n(R),t[6]||(t[6]=d(" Заказать выделенный сервер ",-1))]),_:1,__:[6]}),n(a,{class:"list-item__row icon-row",to:"/VPSOrders"},{default:r(()=>[n(V),t[7]||(t[7]=d(" Заказать VPS/VDS сервер ",-1))]),_:1,__:[7]})])]),s("div",dt,[s("div",ct,[s("div",null,[t[10]||(t[10]=s("div",{class:"list-item__row"},[s("div",{class:"list-item__title"},"Мой офис")],-1)),n(a,{class:"list-item__row icon-row",to:"/Contracts"},{default:r(()=>t[9]||(t[9]=[d(" Мои договора ",-1)])),_:1,__:[9]})]),s("div",_t,[n(D,{label:"Создать договор",onClick:t[1]||(t[1]=o=>b(l).push("/ContractMake"))})])])]),s("div",mt,[s("div",ut,[s("div",null,[t[13]||(t[13]=s("div",{class:"list-item__row"},[s("div",{class:"list-item__title"},"Поддержка")],-1)),n(a,{class:"list-item__row icon-row",to:"/Tickets"},{default:r(()=>t[11]||(t[11]=[d(" Тикеты ",-1)])),_:1,__:[11]}),n(a,{class:"list-item__row icon-row",to:"/Contacts"},{default:r(()=>t[12]||(t[12]=[d(" Контакты ",-1)])),_:1,__:[12]})]),s("div",pt,[n(D,{label:"Создать тикет",onClick:t[2]||(t[2]=o=>b(l).push("/NewTicket"))})])])])]),t[19]||(t[19]=s("div",{class:"section-header"},[s("h2",{class:"sub-section-title"},"Требует внимания")],-1)),n(A,{class:"basic-table",items:g.value,fields:b(nt),"show-empty":!0,"per-page":5,page:1,"empty-text":"Пока не требуется никаких действий","empty-filtered-text":"Пока не требуется никаких действий",onRowClicked:t[3]||(t[3]=(o,I,L)=>O(o,L))},{"cell(ID)":r(o=>[t[14]||(t[14]=s("span",{class:"td-mobile"},"Заказ",-1)),s("span",vt,m(o.value),1)]),"cell(ContractID)":r(o=>[t[15]||(t[15]=s("span",{class:"td-mobile"},"Договор",-1)),s("span",null,m(C.value[o.value]?.Customer),1)]),"cell(ServiceID)":r(o=>[t[16]||(t[16]=s("span",{class:"td-mobile"},"Услуга",-1)),s("span",ft,m(p.value[o.value]?.Name),1)]),"cell(Reason)":r(o=>[t[17]||(t[17]=s("span",{class:"td-mobile"},"Осталось дн.",-1)),s("span",bt,m(o.item?.DaysRemainded||0),1)]),"cell(StatusID)":r(o=>[n(B,{class:"clickable-element tw-cursor-pointer",status:o.value,"status-table":"Orders",onClick:I=>x(o.item?.ServiceOrderID,o.item?.Code)},null,8,["status","onClick"])]),"cell(controls)":r(o=>[s("div",wt,[s("button",{class:"btn btn-default btn--border",onClick:I=>$(o.item)},[n(T),t[18]||(t[18]=s("p",null,"ОПЛАТИТЬ",-1))],8,St)])]),_:1},8,["items","fields"])])],64)}}},Bt=ot(Dt,[["__scopeId","data-v-5c4c70d9"]]);export{Bt as default};
