import{j as pt,o as S,c as I,b as c,a as t,t as a,w as O,d as w,Y as N,ae as V,Z as Dt,F as ft,p as St,l as It,_ as Ot,a7 as wt,e as Ht,f as bt,R as Pt,r as ct,g as h}from"./index-d4c8f165.js";import{_ as kt}from"./IconCard-27c68f9d.js";import{I as Ct}from"./IconProfile-0cdb7b32.js";import{I as yt}from"./IconSettings-796a59f8.js";import{I as dt}from"./IconEye-d755d50a.js";import{S as mt}from"./StatusBadge-1c56e28c.js";import{h as xt}from"./hostStatuses-94d00f20.js";import{u as Bt}from"./testTransforms-eec373ee.js";import{f as _t}from"./useTimeFunction-8602dd60.js";import{u as Nt}from"./hosting-5843536e.js";import{u as At}from"./resetServer-6c36d8fc.js";import{u as Et}from"./globalActions-a497c6e1.js";import{_ as gt}from"./ClausesKeeper-9fcac132.js";import{_ as vt}from"./ServicesContractBalanceBlock-de57a28f.js";import{s as ut}from"./SettingsEngineItem-0556c772.js";import{B as ht}from"./BlockBalanceAgreement-60e87dc5.js";import{E as Tt}from"./EmptyStateBlock-514fe5ef.js";import{_ as Mt}from"./paramsAccordionBlock-db252541.js";import{_ as Rt}from"./ButtonDefault-5ca56e8e.js";import{z as Vt}from"./bootstrap-vue-next.es-d6fe4c6a.js";import"./IconClose-fe4fddee.js";import"./contracts-7ba5650d.js";import"./IconArrow-87a7eb9b.js";const d=m=>(St("data-v-05143b78"),m=m(),It(),m),Lt={key:0,class:"my-hosting-order"},Gt={class:"section"},Ut={class:"container"},jt={class:"section-header"},Ft={class:"section-title"},Wt=["href"],qt={class:"section-label"},zt={class:"section-nav"},Kt={class:"list"},Yt={class:"list-col list-col--md"},Zt={class:"list-item"},Jt={class:"list-item__row"},Qt={class:"list-item__title"},Xt={class:"list-item__status"},$t={class:"list-item__row"},te={class:"list-item__ul"},ee={class:"list-item__row list-item__row--column"},se={class:"list-item__text"},oe={class:"list-item__text"},ie={class:"list-item__text"},ne={class:"list-item__row"},ae={class:"btn btn--border btn--switch"},re=d(()=>t("span",{class:"btn-switch__text"},"Автопродление",-1)),le=d(()=>t("span",{class:"btn-switch__toggle"},null,-1)),ce={class:"list-col list-col--md"},_e={class:"list-item"},de={class:"list-item__row"},me=d(()=>t("div",{class:"list-item__title"},"Панель управления",-1)),ge={class:"list-item__row list-item__row--table"},ve=d(()=>t("div",{class:"list-item__item"},"Адрес",-1)),ue={class:"list-item__item"},he={class:"list-item__row list-item__row--table"},pe=d(()=>t("div",{class:"list-item__item"},"Логин",-1)),De={class:"list-item__item"},fe={class:"list-item__row list-item__row--table"},Se=d(()=>t("div",{class:"list-item__item"},"Пароль",-1)),Ie={class:"list-item__item hide-button"},Oe={key:0,class:"password-hidden"},we={class:"list-item__row list-item__row--table"},He=d(()=>t("div",{class:"list-item__item"},"FTP, POP3, SMTP, IMAP",-1)),be={class:"list-item__item"},Pe={class:"list-col list-col--md"},ke={class:"list-item"},Ce=d(()=>t("div",{class:"list-item__row"},[t("div",{class:"list-item__title"},"Именные сервера")],-1)),ye={class:"list-item__row list-item__row--table"},xe={class:"list-item__item"},Be={class:"list-item__item"},Ne={class:"list-item__item"},Ae={class:"list-item__item"},Ee={key:1,class:"section"},Te={class:"container"};function Me(m,i,r,s,v,L){var b,P,k,C,y,u,x,B,e,o,l,G,U,j,F,W,q,z,K,Y,Z,J,Q,X,$,tt,et,st,ot,it,nt,at,rt,lt;const A=ht,g=pt("router-link"),E=gt,p=vt,n=mt,D=Vt,f=ut,H=Rt,T=dt,M=Mt,R=Tt;return S(),I(ft,null,[c(A),(b=s.getHostingOrderData)!=null&&b.ID?(S(),I("div",Lt,[t("div",Gt,[t("div",Ut,[t("div",jt,[t("h1",Ft,[t("a",{href:s.fullDomainUrl,target:"_blank"},a((P=s.getHostingOrderData)==null?void 0:P.Domain),9,Wt)]),t("div",qt,"Хостинг # "+a((k=s.getHostingOrderData)==null?void 0:k.OrderID),1),t("div",zt,[c(g,{class:"section-nav__item",to:`/HostingOrders/${(C=s.getHostingOrderData)==null?void 0:C.OrderID}`},{default:O(()=>[w("Хостинг")]),_:1},8,["to"])])]),c(E,{partition:"Header:/HostingOrders"}),t("div",Kt,[c(p,{"contract-id":(y=s.getHostingOrderData)==null?void 0:y.ContractID,onTransfer:i[0]||(i[0]=_=>s.transferItem())},null,8,["contract-id"]),t("div",Yt,[t("div",Zt,[t("div",Jt,[t("div",Qt,a((u=s.getHostingScheme)==null?void 0:u.Name),1),t("div",Xt,[c(n,{status:(x=s.getHostingOrderData)==null?void 0:x.StatusID,"status-table":"HostingOrders"},null,8,["status"])]),c(f,null,{default:O(()=>[c(D,{onClick:i[1]||(i[1]=_=>s.changeScheme())},{default:O(()=>[w("Изменить тариф")]),_:1}),c(D,{onClick:i[2]||(i[2]=_=>s.openOrderRestore())},{default:O(()=>[w("Просмотреть учет заказа")]),_:1}),c(D,{onClick:i[3]||(i[3]=_=>s.openPasswordChange())},{default:O(()=>[w("Сменить пароль от аккаунта")]),_:1})]),_:1})]),t("div",$t,[t("ul",te,[N(t("li",null,a(s.formDescriptionLine((e=(B=s.getHostingScheme)==null?void 0:B.SchemeParams)==null?void 0:e.limit_webdomains)),513),[[V,(G=(l=(o=s.getHostingScheme)==null?void 0:o.SchemeParams)==null?void 0:l.limit_webdomains)==null?void 0:G.Value]]),N(t("li",null,a(s.formDescriptionLine((j=(U=s.getHostingScheme)==null?void 0:U.SchemeParams)==null?void 0:j.limit_quota)),513),[[V,(q=(W=(F=s.getHostingScheme)==null?void 0:F.SchemeParams)==null?void 0:W.limit_quota)==null?void 0:q.Value]]),N(t("li",null,a(s.formDescriptionLine((K=(z=s.getHostingScheme)==null?void 0:z.SchemeParams)==null?void 0:K.limit_emails)),513),[[V,(J=(Z=(Y=s.getHostingScheme)==null?void 0:Y.SchemeParams)==null?void 0:Z.limit_emails)==null?void 0:J.Value]])])]),t("div",ee,[t("div",se,a((Q=s.getHostingScheme)==null?void 0:Q.CostMonth)+" ₽ в месяц",1),t("div",oe,"Дней осталось "+a(((X=s.getHostingOrderData)==null?void 0:X.DaysRemainded)||0),1),t("div",ie,"Дата окончания "+a(s.calculateExpirationDate(($=s.getHostingOrderData)==null?void 0:$.DaysRemainded)),1)]),t("div",ne,[t("div",{class:"btn btn-default btn--blue",onClick:i[4]||(i[4]=_=>s.navigateToProlong())},a(((tt=s.getHostingOrderData)==null?void 0:tt.StatusID)==="Waiting"?"Оплатить":"Продлить"),1),t("label",ae,[N(t("input",{type:"checkbox","onUpdate:modelValue":i[5]||(i[5]=_=>s.isAutoProlong=_),onInput:i[6]||(i[6]=_=>s.setProlongValue())},null,544),[[Dt,s.isAutoProlong]]),re,le])])])]),t("div",ce,[t("div",_e,[t("div",de,[me,c(H,{class:"ml-auto",onClick:i[7]||(i[7]=_=>s.orderManage()),label:"Вход"})]),t("div",ge,[ve,t("div",ue,a(`https://${(et=s.getServerGroup)==null?void 0:et.Address}/manager`),1)]),t("div",he,[pe,t("div",De,a((st=s.getHostingOrderData)==null?void 0:st.Login),1)]),t("div",fe,[Se,t("div",Ie,[s.passwordShow?(S(),I("div",Oe,a(s.getHostingOrderData.Password),1)):(S(),I("button",{key:1,class:"btn btn--border btn--md hide-button",onClick:i[8]||(i[8]=_=>s.passwordShow=!0)},[c(T),w("Показать")]))])]),t("div",we,[He,t("div",be,a((ot=s.getServerGroup)==null?void 0:ot.Address),1)])])]),t("div",Pe,[t("div",ke,[Ce,t("div",ye,[t("div",xe,a((it=s.getHostingOrderData)==null?void 0:it.Ns1Name),1),t("div",Be,a((nt=s.getHostingOrderData)==null?void 0:nt.Ns2Name),1),t("div",Ne,a((at=s.getHostingOrderData)==null?void 0:at.Ns3Name),1),t("div",Ae,a((rt=s.getHostingOrderData)==null?void 0:rt.Ns4Name),1)])])])])])]),c(M,{"params-list":(lt=s.getHostingScheme)==null?void 0:lt.SchemeParams,label:"Общая информация","main-param":"InternalName"},null,8,["params-list"])])):(S(),I("div",Ee,[t("div",Te,[c(R,{label:"Заказ не найден"})])]))],64)}const Re={components:{IconCard:kt,IconProfile:Ct,IconSettings:yt,IconEye:dt,StatusBadge:mt,ClausesKeeper:gt,settingsEngineItem:ut,ServicesContractBalanceBlock:vt,BlockBalanceAgreement:ht},async setup(){const m=wt(),i=Ht(),r=Nt(),s=At(),v=bt(),L=Et(),{formDescriptionLine:A}=Bt(),g=Pt("emitter");g.on("updateHostingIDPage",()=>{r.fetchHostingOrders()});const E=ct(!1),p=ct(!1),n=h(()=>Object.keys(r==null?void 0:r.hostingList).map(e=>r==null?void 0:r.hostingList[e]).find(e=>e.OrderID===m.params.id)),D=h(()=>r==null?void 0:r.hostingSchemes),f=h(()=>{var e,o;return(o=D.value)==null?void 0:o[(e=n.value)==null?void 0:e.SchemeID]}),H=h(()=>{var e,o;return(o=v==null?void 0:v.userOrders)==null?void 0:o[(e=n.value)==null?void 0:e.OrderID]}),T=h(()=>{var e,o,l;return(l=(e=s==null?void 0:s.serverGroupsList)==null?void 0:e.Servers)==null?void 0:l[(o=n.value)==null?void 0:o.ServerID]}),M=h(()=>{var o;if(!((o=n.value)!=null&&o.Domain))return"";const e=n.value.Domain;return e.startsWith("http://")||e.startsWith("https://")?e:`https://${e}`});function R(e){if(!e)return _t(new Date);const o=new Date,l=new Date(o.getTime()+e*24*60*60*1e3);return _t(l)}function b(){var e,o;g.emit("open-modal",{component:"OrdersTransfer",data:{ServiceOrderID:(e=n.value)==null?void 0:e.ID,ServiceID:(o=n.value)==null?void 0:o.ServiceID}})}function P(){var e;v.prolongOrder({IsAutoProlong:p.value?0:1,OrderID:(e=n.value)==null?void 0:e.OrderID})}function k(){var e;i.push(`/HostingOrders/${(e=n.value)==null?void 0:e.OrderID}/SchemeChange`),u()}function C(){var e;i.push(`/HostingOrderPay/${(e=n.value)==null?void 0:e.OrderID}`)}function y(){var e,o,l;L.OrderManage({ServiceOrderID:(e=n.value)==null?void 0:e.ID,OrderID:(o=n.value)==null?void 0:o.OrderID,ServiceID:(l=n.value)==null?void 0:l.ServiceID})}function u(){var e,o;g.emit("open-modal",{component:"HostingOrderSchemeChange",data:{hostingID:(e=n.value)==null?void 0:e.ID,ServerGroup:(o=f.value)==null?void 0:o.ServersGroupID,emitEvent:"updateHostingIDPage"}})}function x(){var e,o;g.emit("open-modal",{component:"OrderPasswordChange",data:{OrderID:(e=n.value)==null?void 0:e.ID,ServiceID:(o=n.value)==null?void 0:o.ServiceID,emitEvent:"updateHostingIDPage"}})}function B(){var e,o,l;g.emit("open-modal",{component:"OrderRestore",data:{OrderID:(e=n.value)==null?void 0:e.OrderID,CostDay:(o=f.value)==null?void 0:o.CostDay,DaysRemainded:(l=n.value)==null?void 0:l.DaysRemainded,emitEvent:"updateHostingIDPage"}})}return await r.fetchHostingOrders(),await r.fetchHostingSchemes(),await s.fetchServerGroups().then(()=>{m.name==="default.MyHostingOrderSchemeChange"&&u()}),await v.fetchUserOrders().then(()=>{var e;p.value=(e=H.value)==null?void 0:e.IsAutoProlong}),{getHostingOrderData:n,getHostingScheme:f,getUserOrder:H,getServerGroup:T,isAutoProlong:p,passwordShow:E,openOrderRestore:B,openPackageChangeModal:u,orderManage:y,navigateToProlong:C,setProlongValue:P,openPasswordChange:x,hostStatuses:xt,transferItem:b,formDescriptionLine:A,calculateExpirationDate:R,changeScheme:k,fullDomainUrl:M}}},rs=Ot(Re,[["render",Me],["__scopeId","data-v-05143b78"]]);export{rs as default};
