import{j as pt,o as D,c as f,b as c,a as t,t as a,w as y,d as C,Y as x,ae as M,Z as Dt,F as ft,p as It,l as St,_ as Ot,a7 as wt,e as Ht,f as bt,R as Pt,r as ct,g as I}from"./index-d9e5d80f.js";import{_ as kt}from"./IconCard-3c442370.js";import{I as yt}from"./IconProfile-05f3ab07.js";import{I as Ct}from"./IconSettings-433e5bd2.js";import{I as dt}from"./IconEye-a4c2cded.js";import{S as mt}from"./StatusBadge-1111ad36.js";import{h as xt}from"./hostStatuses-94d00f20.js";import{u as Bt}from"./testTransforms-eec373ee.js";import{f as _t}from"./useTimeFunction-8602dd60.js";import{u as Nt}from"./hosting-efa4851e.js";import{u as At}from"./resetServer-404341d6.js";import{u as Et}from"./globalActions-567e83be.js";import{_ as gt}from"./ClausesKeeper-54c941b5.js";import{_ as vt}from"./ServicesContractBalanceBlock-1cf41c6c.js";import{s as ut}from"./SettingsEngineItem-6ca820a8.js";import{B as ht}from"./BlockBalanceAgreement-bd5f9bec.js";import{E as Tt}from"./EmptyStateBlock-320e221f.js";import{_ as Mt}from"./paramsAccordionBlock-00f678c6.js";import{_ as Rt}from"./ButtonDefault-cf4dc84b.js";import{z as Vt}from"./bootstrap-vue-next.es-b0c2a08e.js";import"./IconClose-b8cba5ec.js";import"./contracts-0b0db280.js";import"./IconArrow-3cf18905.js";const d=m=>(It("data-v-941e7847"),m=m(),St(),m),Lt={key:0,class:"my-hosting-order"},Gt={class:"section"},jt={class:"container"},Ft={class:"section-header"},Ut={class:"section-title"},qt={class:"section-label"},zt={class:"section-nav"},Kt={class:"list"},Wt={class:"list-col list-col--md"},Yt={class:"list-item"},Zt={class:"list-item__row"},Jt={class:"list-item__title"},Qt={class:"list-item__status"},Xt={class:"list-item__row"},$t={class:"list-item__ul"},te={class:"list-item__row list-item__row--column"},ee={class:"list-item__text"},se={class:"list-item__text"},oe={class:"list-item__text"},ie={class:"list-item__row"},ne={class:"btn btn--border btn--switch"},ae=d(()=>t("span",{class:"btn-switch__text"},"Автопродление",-1)),re=d(()=>t("span",{class:"btn-switch__toggle"},null,-1)),le={class:"list-col list-col--md"},ce={class:"list-item"},_e={class:"list-item__row"},de=d(()=>t("div",{class:"list-item__title"},"Панель управления",-1)),me={class:"list-item__row list-item__row--table"},ge=d(()=>t("div",{class:"list-item__item"},"Адрес",-1)),ve={class:"list-item__item"},ue={class:"list-item__row list-item__row--table"},he=d(()=>t("div",{class:"list-item__item"},"Логин",-1)),pe={class:"list-item__item"},De={class:"list-item__row list-item__row--table"},fe=d(()=>t("div",{class:"list-item__item"},"Пароль",-1)),Ie={class:"list-item__item hide-button"},Se={key:0,class:"password-hidden"},Oe={class:"list-item__row list-item__row--table"},we=d(()=>t("div",{class:"list-item__item"},"FTP, POP3, SMTP, IMAP",-1)),He={class:"list-item__item"},be={class:"list-col list-col--md"},Pe={class:"list-item"},ke=d(()=>t("div",{class:"list-item__row"},[t("div",{class:"list-item__title"},"Именные сервера")],-1)),ye={class:"list-item__row list-item__row--table"},Ce={class:"list-item__item"},xe={class:"list-item__item"},Be={class:"list-item__item"},Ne={class:"list-item__item"},Ae={key:1,class:"section"},Ee={class:"container"};function Te(m,i,r,e,v,R){var w,H,b,p,P,k,s,o,l,V,L,G,j,F,U,q,z,K,W,Y,Z,J,Q,X,$,tt,et,st,ot,it,nt,at,rt,lt;const B=ht,g=pt("router-link"),N=gt,u=vt,n=mt,S=Vt,h=ut,O=Rt,A=dt,E=Mt,T=Tt;return D(),f(ft,null,[c(B),(w=e.getHostingOrderData)!=null&&w.ID?(D(),f("div",Lt,[t("div",Gt,[t("div",jt,[t("div",Ft,[t("h1",Ut,a((H=e.getHostingOrderData)==null?void 0:H.Domain),1),t("div",qt,"Хостинг # "+a((b=e.getHostingOrderData)==null?void 0:b.OrderID),1),t("div",zt,[c(g,{class:"section-nav__item",to:`/HostingOrders/${(p=e.getHostingOrderData)==null?void 0:p.OrderID}`},{default:y(()=>[C("Хостинг")]),_:1},8,["to"])])]),c(N,{partition:"Header:/HostingOrders"}),t("div",Kt,[c(u,{"contract-id":(P=e.getHostingOrderData)==null?void 0:P.ContractID,onTransfer:i[0]||(i[0]=_=>e.transferItem())},null,8,["contract-id"]),t("div",Wt,[t("div",Yt,[t("div",Zt,[t("div",Jt,a((k=e.getHostingScheme)==null?void 0:k.Name),1),t("div",Qt,[c(n,{status:(s=e.getHostingOrderData)==null?void 0:s.StatusID,"status-table":"HostingOrders"},null,8,["status"])]),c(h,null,{default:y(()=>[c(S,{onClick:i[1]||(i[1]=_=>e.openOrderRestore())},{default:y(()=>[C("Просмотреть учет заказа")]),_:1}),c(S,{onClick:i[2]||(i[2]=_=>e.openPasswordChange())},{default:y(()=>[C("Сменить пароль от аккаунта")]),_:1})]),_:1})]),t("div",Xt,[t("ul",$t,[x(t("li",null,a(e.formDescriptionLine((l=(o=e.getHostingScheme)==null?void 0:o.SchemeParams)==null?void 0:l.limit_webdomains)),513),[[M,(G=(L=(V=e.getHostingScheme)==null?void 0:V.SchemeParams)==null?void 0:L.limit_webdomains)==null?void 0:G.Value]]),x(t("li",null,a(e.formDescriptionLine((F=(j=e.getHostingScheme)==null?void 0:j.SchemeParams)==null?void 0:F.limit_quota)),513),[[M,(z=(q=(U=e.getHostingScheme)==null?void 0:U.SchemeParams)==null?void 0:q.limit_quota)==null?void 0:z.Value]]),x(t("li",null,a(e.formDescriptionLine((W=(K=e.getHostingScheme)==null?void 0:K.SchemeParams)==null?void 0:W.limit_emails)),513),[[M,(J=(Z=(Y=e.getHostingScheme)==null?void 0:Y.SchemeParams)==null?void 0:Z.limit_emails)==null?void 0:J.Value]])])]),t("div",te,[t("div",ee,a((Q=e.getHostingScheme)==null?void 0:Q.CostMonth)+" ₽ в месяц",1),t("div",se,"Дней осталось "+a(((X=e.getHostingOrderData)==null?void 0:X.DaysRemainded)||0),1),t("div",oe,"Дата окончания "+a(e.calculateExpirationDate(($=e.getHostingOrderData)==null?void 0:$.DaysRemainded)),1)]),t("div",ie,[t("div",{class:"btn btn-default btn--blue",onClick:i[3]||(i[3]=_=>e.navigateToProlong())},a(((tt=e.getHostingOrderData)==null?void 0:tt.StatusID)==="Waiting"?"Оплатить":"Продлить"),1),t("label",ne,[x(t("input",{type:"checkbox","onUpdate:modelValue":i[4]||(i[4]=_=>e.isAutoProlong=_),onInput:i[5]||(i[5]=_=>e.setProlongValue())},null,544),[[Dt,e.isAutoProlong]]),ae,re])])])]),t("div",le,[t("div",ce,[t("div",_e,[de,c(O,{class:"ml-auto",onClick:i[6]||(i[6]=_=>e.orderManage()),label:"Вход"})]),t("div",me,[ge,t("div",ve,a(`https://${(et=e.getServerGroup)==null?void 0:et.Address}/manager`),1)]),t("div",ue,[he,t("div",pe,a((st=e.getHostingOrderData)==null?void 0:st.Login),1)]),t("div",De,[fe,t("div",Ie,[e.passwordShow?(D(),f("div",Se,a(e.getHostingOrderData.Password),1)):(D(),f("button",{key:1,class:"btn btn--border btn--md hide-button",onClick:i[7]||(i[7]=_=>e.passwordShow=!0)},[c(A),C("Показать")]))])]),t("div",Oe,[we,t("div",He,a((ot=e.getServerGroup)==null?void 0:ot.Address),1)])])]),t("div",be,[t("div",Pe,[ke,t("div",ye,[t("div",Ce,a((it=e.getHostingOrderData)==null?void 0:it.Ns1Name),1),t("div",xe,a((nt=e.getHostingOrderData)==null?void 0:nt.Ns2Name),1),t("div",Be,a((at=e.getHostingOrderData)==null?void 0:at.Ns3Name),1),t("div",Ne,a((rt=e.getHostingOrderData)==null?void 0:rt.Ns4Name),1)])])])])])]),c(E,{"params-list":(lt=e.getHostingScheme)==null?void 0:lt.SchemeParams,label:"Общая информация","main-param":"InternalName"},null,8,["params-list"])])):(D(),f("div",Ae,[t("div",Ee,[c(T,{label:"Заказ не найден"})])]))],64)}const Me={components:{IconCard:kt,IconProfile:yt,IconSettings:Ct,IconEye:dt,StatusBadge:mt,ClausesKeeper:gt,settingsEngineItem:ut,ServicesContractBalanceBlock:vt,BlockBalanceAgreement:ht},async setup(){const m=wt(),i=Ht(),r=Nt(),e=At(),v=bt(),R=Et(),{formDescriptionLine:B}=Bt(),g=Pt("emitter");g.on("updateHostingIDPage",()=>{r.fetchHostingOrders()});const N=ct(!1),u=ct(!1),n=I(()=>Object.keys(r==null?void 0:r.hostingList).map(s=>r==null?void 0:r.hostingList[s]).find(s=>s.OrderID===m.params.id)),S=I(()=>r==null?void 0:r.hostingSchemes),h=I(()=>{var s,o;return(o=S.value)==null?void 0:o[(s=n.value)==null?void 0:s.SchemeID]}),O=I(()=>{var s,o;return(o=v==null?void 0:v.userOrders)==null?void 0:o[(s=n.value)==null?void 0:s.OrderID]}),A=I(()=>{var s,o,l;return(l=(s=e==null?void 0:e.serverGroupsList)==null?void 0:s.Servers)==null?void 0:l[(o=n.value)==null?void 0:o.ServerID]});function E(s){if(!s)return _t(new Date);const o=new Date,l=new Date(o.getTime()+s*24*60*60*1e3);return _t(l)}function T(){var s,o;g.emit("open-modal",{component:"OrdersTransfer",data:{ServiceOrderID:(s=n.value)==null?void 0:s.ID,ServiceID:(o=n.value)==null?void 0:o.ServiceID}})}function w(){var s;v.prolongOrder({IsAutoProlong:u.value?0:1,OrderID:(s=n.value)==null?void 0:s.OrderID})}function H(){var s;i.push(`/HostingOrderPay/${(s=n.value)==null?void 0:s.OrderID}`)}function b(){var s,o,l;R.OrderManage({ServiceOrderID:(s=n.value)==null?void 0:s.ID,OrderID:(o=n.value)==null?void 0:o.OrderID,ServiceID:(l=n.value)==null?void 0:l.ServiceID})}function p(){var s,o;g.emit("open-modal",{component:"HostingOrderSchemeChange",data:{hostingID:(s=n.value)==null?void 0:s.ID,ServerGroup:(o=h.value)==null?void 0:o.ServersGroupID,emitEvent:"updateHostingIDPage"}})}function P(){var s,o;g.emit("open-modal",{component:"OrderPasswordChange",data:{OrderID:(s=n.value)==null?void 0:s.ID,ServiceID:(o=n.value)==null?void 0:o.ServiceID,emitEvent:"updateHostingIDPage"}})}function k(){var s,o,l;g.emit("open-modal",{component:"OrderRestore",data:{OrderID:(s=n.value)==null?void 0:s.OrderID,CostDay:(o=h.value)==null?void 0:o.CostDay,DaysRemainded:(l=n.value)==null?void 0:l.DaysRemainded,emitEvent:"updateHostingIDPage"}})}return await r.fetchHostingOrders(),await r.fetchHostingSchemes(),await e.fetchServerGroups().then(()=>{m.name==="default.MyHostingOrderSchemeChange"&&p()}),await v.fetchUserOrders().then(()=>{var s;u.value=(s=O.value)==null?void 0:s.IsAutoProlong}),{getHostingOrderData:n,getHostingScheme:h,getUserOrder:O,getServerGroup:A,isAutoProlong:u,passwordShow:N,openOrderRestore:k,openPackageChangeModal:p,orderManage:b,navigateToProlong:H,setProlongValue:w,openPasswordChange:P,hostStatuses:xt,transferItem:T,formDescriptionLine:B,calculateExpirationDate:E}}},as=Ot(Me,[["render",Te],["__scopeId","data-v-941e7847"]]);export{as as default};
