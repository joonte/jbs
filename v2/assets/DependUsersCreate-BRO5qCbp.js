import{_ as g}from"./ButtonDefault-tVMF5ozh.js";import{_ as w}from"./ClausesKeeper-DtaNhp0a.js";import{_ as D}from"./BlockBalanceAgreement-ckI0MbGb.js";import{c as b,b as f,a as o,t as h,I as i,P as d,u as S,r as _,f as p,g as x,h as I,d as P,x as U,o as k}from"./index-DxPA2ffO.js";import{u as N}from"./contracts-DD2O0C6m.js";import{_ as y}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./IconClose-Br7S99e8.js";const E={async setup(){const l=S(),e=N(),u=x(),s=P();U("emitter");const r=_(!1),a=_({Email:"",Name:"",Password:"",_Password:""}),n=p(()=>l.userInfo),c=p(()=>e.contractsList[u.params.id]);function m(){a.value.Email.length>0&&a.value.Password.length>0&&a.value.Name.length>0&&a.value._Password.length>0&&(r.value=!0,l.registerNewUser({...a.value}).then(t=>{const{response:v,error:F}=t;v==="success"&&s.push({path:"/Home"}),r.value=!1}))}return I(()=>{console.log("depend2"),n.value&&n.value.ID&&(document.cookie=`OwnerID=${n.value.ID}; path=/; SameSite=Lax; Secure`,document.cookie="IsManaged=yes; path=/; SameSite=Lax; Secure",console.log(document.cookie))}),await l.fetchUserData(),await e.fetchContracts(),{formData:a,getUserInfo:n,getContract:c,isLoading:r,createReferral:m}}},V={class:"create-referral"},B={class:"container"},C={class:"section-header"},L={class:"section-label"},R={class:"container"},M={class:"create-referral__data"},A={class:"form-field"},j={class:"form-field"},H={class:"form-field"},O={class:"form-field"},T={class:"container"},q={class:"create-referral__data"};function z(l,e,u,s,r,a){const n=D,c=w,m=g;return k(),b("div",V,[f(n),o("section",null,[o("div",B,[o("div",C,[e[5]||(e[5]=o("h1",{class:"section-title"},"Создать реферала",-1)),o("div",L,h(s.getUserInfo?.Name),1)]),f(c)])]),o("section",null,[o("div",R,[o("div",M,[o("label",A,[e[6]||(e[6]=o("span",{class:"form-field__label"},"ФИО",-1)),i(o("input",{type:"text",placeholder:"","onUpdate:modelValue":e[0]||(e[0]=t=>s.formData.Name=t)},null,512),[[d,s.formData.Name]])]),o("label",j,[e[7]||(e[7]=o("span",{class:"form-field__label"},"Email",-1)),i(o("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=t=>s.formData.Email=t)},null,512),[[d,s.formData.Email]])]),o("label",H,[e[8]||(e[8]=o("span",{class:"form-field__label"},"Пароль",-1)),i(o("input",{type:"password","onUpdate:modelValue":e[2]||(e[2]=t=>s.formData.Password=t)},null,512),[[d,s.formData.Password]])]),o("label",O,[e[9]||(e[9]=o("span",{class:"form-field__label"},"Подтвердить пароль",-1)),i(o("input",{type:"password","onUpdate:modelValue":e[3]||(e[3]=t=>s.formData._Password=t)},null,512),[[d,s.formData._Password]])])])])]),o("section",null,[o("div",T,[o("div",q,[f(m,{class:"btn--wide",label:"Зарегистрировать","is-loading":s.isLoading,onClick:e[4]||(e[4]=t=>s.createReferral())},null,8,["is-loading"])])])])])}const Z=y(E,[["render",z],["__scopeId","data-v-2b1b211d"]]);export{Z as default};
