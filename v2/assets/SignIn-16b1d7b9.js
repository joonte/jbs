import{o as B,c as P,a as u,b as r,n as w,w as U,d as S,_ as L,u as A,e as H,r as i,f as M,g as C}from"./index-58c913f0.js";import{_ as x}from"./BasicInput-b43a552c.js";import{_ as E}from"./ButtonDefault-7a589010.js";import{I as N,a as T,b as D,c as j}from"./IconYandex-38813f40.js";import{_ as y}from"./BlockAuthEnter-b0f05847.js";import{f as q}from"./bootstrap-vue-next.es-9015192b.js";import"./component-b499d283.js";const z={class:"sign-in"},G={class:"section"},X={class:"container"},Y=u("div",{class:"section-header"},[u("h1",{class:"section-title"},"Войти в аккаунт")],-1),F={class:"form-offset_label"},J={class:"form-offset_label"};function K(c,o,m,e,v,_){const n=x,d=E,a=q,l=y;return B(),P("div",z,[u("div",G,[u("div",X,[Y,r(n,{class:w({"form-field-error":e.submitStatus==="ERROR"}),label:"Email",name:"login",modelValue:e.mail,"onUpdate:modelValue":o[0]||(o[0]=s=>e.mail=s)},null,8,["class","modelValue"]),r(n,{class:w({"form-field-error":e.submitStatus==="ERROR"}),label:"Пароль",name:"password",modelValue:e.password,"onUpdate:modelValue":o[1]||(o[1]=s=>e.password=s),"is-password":""},null,8,["class","modelValue"]),u("div",F,[r(d,{class:"button-password-restore",label:"ЗАБЫЛ ПАРОЛЬ",onClick:o[2]||(o[2]=s=>e.navigateToPage("/UserPasswordRestore"))})]),u("div",J,[r(d,{onClick:o[3]||(o[3]=s=>e.signIn()),"is-loading":e.isLoading,label:"Войти"},null,8,["is-loading"]),r(a,{id:"checkbox-1",modelValue:e.isRemember,"onUpdate:modelValue":o[4]||(o[4]=s=>e.isRemember=s),name:"checkbox-1"},{default:U(()=>[S("Запомнить меня")]),_:1},8,["modelValue"])])])]),r(l,{label:"Войти с помощью"})])}const Q={components:{BlockAuthEnter:y,BasicInput:x,IconGoogle:N,IconOk:T,IconVk:D,IconYandex:j,ButtonDefault:E},setup(){const c=A(),o=H(),m=i(null),e=i(null),v=i(!0),_=i(null),n=i(!1),d=i(""),a=M();C(()=>a==null?void 0:a.userInfo);const l=C(()=>c==null?void 0:c.ConfigList);function s(){var f;m.value===null||((f=m.value)==null?void 0:f.length)<3||e.value===null||e.value<4?_.value="ERROR":(n.value=!0,a.signIn({Email:m.value,Password:e.value,IsRemember:v.value===!0?"1":"0",ReOpen:"yes",XMLHttpRequest:"yes"}).then(t=>{var g,p;n.value=!1,(t==null?void 0:t.result)!=="success"?(_.value="ERROR",d.value=t.errorMessage):(c.fetchConfig().then(()=>{var b,R,I;if((b=l.value)!=null&&b.Colors){let h=document.documentElement;Object.keys((R=l.value)==null?void 0:R.Colors).map(V=>{var k;h.style.setProperty(`--${V}`,(k=l.value)==null?void 0:k.Colors[V])}),h.style.setProperty("--btn-hover-transparent",`${(I=l.value)==null?void 0:I.Colors["btn-hover"]}33`)}}),((p=(g=t==null?void 0:t.data)==null?void 0:g.User)==null?void 0:p.InterfaceID)==="User"?o.push({path:"/Home"}):window.location.replace("/Administrator/Home"))}))}function O(f){o.push(f)}return{isRemember:v,submitStatus:_,errorMessage:d,mail:m,password:e,isLoading:n,navigateToPage:O,signIn:s}}},ne=L(Q,[["render",K]]);export{ne as default};
